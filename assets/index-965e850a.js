function OP(e,t){for(var r=0;r<t.length;r++){const a=t[r];if(typeof a!="string"&&!Array.isArray(a)){for(const s in a)if(s!=="default"&&!(s in e)){const c=Object.getOwnPropertyDescriptor(a,s);c&&Object.defineProperty(e,s,c.get?c:{enumerable:!0,get:()=>a[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const c of s)if(c.type==="childList")for(const O of c.addedNodes)O.tagName==="LINK"&&O.rel==="modulepreload"&&a(O)}).observe(document,{childList:!0,subtree:!0});function r(s){const c={};return s.integrity&&(c.integrity=s.integrity),s.referrerPolicy&&(c.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?c.credentials="include":s.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(s){if(s.ep)return;s.ep=!0;const c=r(s);fetch(s.href,c)}})();var ga=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bm(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Us={},wP={get exports(){return Us},set exports(e){Us=e}},Tu={},pe={},MP={get exports(){return pe},set exports(e){pe=e}},Be={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var so=Symbol.for("react.element"),kP=Symbol.for("react.portal"),bP=Symbol.for("react.fragment"),FP=Symbol.for("react.strict_mode"),NP=Symbol.for("react.profiler"),UP=Symbol.for("react.provider"),BP=Symbol.for("react.context"),KP=Symbol.for("react.forward_ref"),WP=Symbol.for("react.suspense"),GP=Symbol.for("react.memo"),HP=Symbol.for("react.lazy"),t0=Symbol.iterator;function jP(e){return e===null||typeof e!="object"?null:(e=t0&&e[t0]||e["@@iterator"],typeof e=="function"?e:null)}var Fm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Nm=Object.assign,Um={};function za(e,t,r){this.props=e,this.context=t,this.refs=Um,this.updater=r||Fm}za.prototype.isReactComponent={};za.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};za.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Bm(){}Bm.prototype=za.prototype;function yh(e,t,r){this.props=e,this.context=t,this.refs=Um,this.updater=r||Fm}var Eh=yh.prototype=new Bm;Eh.constructor=yh;Nm(Eh,za.prototype);Eh.isPureReactComponent=!0;var r0=Array.isArray,Km=Object.prototype.hasOwnProperty,_h={current:null},Wm={key:!0,ref:!0,__self:!0,__source:!0};function Gm(e,t,r){var a,s={},c=null,O=null;if(t!=null)for(a in t.ref!==void 0&&(O=t.ref),t.key!==void 0&&(c=""+t.key),t)Km.call(t,a)&&!Wm.hasOwnProperty(a)&&(s[a]=t[a]);var w=arguments.length-2;if(w===1)s.children=r;else if(1<w){for(var f=Array(w),F=0;F<w;F++)f[F]=arguments[F+2];s.children=f}if(e&&e.defaultProps)for(a in w=e.defaultProps,w)s[a]===void 0&&(s[a]=w[a]);return{$$typeof:so,type:e,key:c,ref:O,props:s,_owner:_h.current}}function VP(e,t){return{$$typeof:so,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Th(e){return typeof e=="object"&&e!==null&&e.$$typeof===so}function zP(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var n0=/\/+/g;function Pc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?zP(""+e.key):t.toString(36)}function Dl(e,t,r,a,s){var c=typeof e;(c==="undefined"||c==="boolean")&&(e=null);var O=!1;if(e===null)O=!0;else switch(c){case"string":case"number":O=!0;break;case"object":switch(e.$$typeof){case so:case kP:O=!0}}if(O)return O=e,s=s(O),e=a===""?"."+Pc(O,0):a,r0(s)?(r="",e!=null&&(r=e.replace(n0,"$&/")+"/"),Dl(s,t,r,"",function(F){return F})):s!=null&&(Th(s)&&(s=VP(s,r+(!s.key||O&&O.key===s.key?"":(""+s.key).replace(n0,"$&/")+"/")+e)),t.push(s)),1;if(O=0,a=a===""?".":a+":",r0(e))for(var w=0;w<e.length;w++){c=e[w];var f=a+Pc(c,w);O+=Dl(c,t,r,f,s)}else if(f=jP(e),typeof f=="function")for(e=f.call(e),w=0;!(c=e.next()).done;)c=c.value,f=a+Pc(c,w++),O+=Dl(c,t,r,f,s);else if(c==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return O}function fl(e,t,r){if(e==null)return e;var a=[],s=0;return Dl(e,a,"","",function(c){return t.call(r,c,s++)}),a}function $P(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var rr={current:null},Rl={transition:null},YP={ReactCurrentDispatcher:rr,ReactCurrentBatchConfig:Rl,ReactCurrentOwner:_h};Be.Children={map:fl,forEach:function(e,t,r){fl(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return fl(e,function(){t++}),t},toArray:function(e){return fl(e,function(t){return t})||[]},only:function(e){if(!Th(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Be.Component=za;Be.Fragment=bP;Be.Profiler=NP;Be.PureComponent=yh;Be.StrictMode=FP;Be.Suspense=WP;Be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=YP;Be.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=Nm({},e.props),s=e.key,c=e.ref,O=e._owner;if(t!=null){if(t.ref!==void 0&&(c=t.ref,O=_h.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var w=e.type.defaultProps;for(f in t)Km.call(t,f)&&!Wm.hasOwnProperty(f)&&(a[f]=t[f]===void 0&&w!==void 0?w[f]:t[f])}var f=arguments.length-2;if(f===1)a.children=r;else if(1<f){w=Array(f);for(var F=0;F<f;F++)w[F]=arguments[F+2];a.children=w}return{$$typeof:so,type:e.type,key:s,ref:c,props:a,_owner:O}};Be.createContext=function(e){return e={$$typeof:BP,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:UP,_context:e},e.Consumer=e};Be.createElement=Gm;Be.createFactory=function(e){var t=Gm.bind(null,e);return t.type=e,t};Be.createRef=function(){return{current:null}};Be.forwardRef=function(e){return{$$typeof:KP,render:e}};Be.isValidElement=Th;Be.lazy=function(e){return{$$typeof:HP,_payload:{_status:-1,_result:e},_init:$P}};Be.memo=function(e,t){return{$$typeof:GP,type:e,compare:t===void 0?null:t}};Be.startTransition=function(e){var t=Rl.transition;Rl.transition={};try{e()}finally{Rl.transition=t}};Be.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Be.useCallback=function(e,t){return rr.current.useCallback(e,t)};Be.useContext=function(e){return rr.current.useContext(e)};Be.useDebugValue=function(){};Be.useDeferredValue=function(e){return rr.current.useDeferredValue(e)};Be.useEffect=function(e,t){return rr.current.useEffect(e,t)};Be.useId=function(){return rr.current.useId()};Be.useImperativeHandle=function(e,t,r){return rr.current.useImperativeHandle(e,t,r)};Be.useInsertionEffect=function(e,t){return rr.current.useInsertionEffect(e,t)};Be.useLayoutEffect=function(e,t){return rr.current.useLayoutEffect(e,t)};Be.useMemo=function(e,t){return rr.current.useMemo(e,t)};Be.useReducer=function(e,t,r){return rr.current.useReducer(e,t,r)};Be.useRef=function(e){return rr.current.useRef(e)};Be.useState=function(e){return rr.current.useState(e)};Be.useSyncExternalStore=function(e,t,r){return rr.current.useSyncExternalStore(e,t,r)};Be.useTransition=function(){return rr.current.useTransition()};Be.version="18.2.0";(function(e){e.exports=Be})(MP);const Hm=bm(pe),ld=OP({__proto__:null,default:Hm},[pe]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XP=pe,QP=Symbol.for("react.element"),ZP=Symbol.for("react.fragment"),JP=Object.prototype.hasOwnProperty,qP=XP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,eD={key:!0,ref:!0,__self:!0,__source:!0};function jm(e,t,r){var a,s={},c=null,O=null;r!==void 0&&(c=""+r),t.key!==void 0&&(c=""+t.key),t.ref!==void 0&&(O=t.ref);for(a in t)JP.call(t,a)&&!eD.hasOwnProperty(a)&&(s[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps,t)s[a]===void 0&&(s[a]=t[a]);return{$$typeof:QP,type:e,key:c,ref:O,props:s,_owner:qP.current}}Tu.Fragment=ZP;Tu.jsx=jm;Tu.jsxs=jm;(function(e){e.exports=Tu})(wP);const Sh=Us.Fragment,_e=Us.jsx,tt=Us.jsxs;var Wl={},tD={get exports(){return Wl},set exports(e){Wl=e}},wr={},ud={},rD={get exports(){return ud},set exports(e){ud=e}},Vm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(m,o){var S=m.length;m.push(o);e:for(;0<S;){var U=S-1>>>1,R=m[U];if(0<s(R,o))m[U]=o,m[S]=R,S=U;else break e}}function r(m){return m.length===0?null:m[0]}function a(m){if(m.length===0)return null;var o=m[0],S=m.pop();if(S!==o){m[0]=S;e:for(var U=0,R=m.length,G=R>>>1;U<G;){var j=2*(U+1)-1,V=m[j],z=j+1,$=m[z];if(0>s(V,S))z<R&&0>s($,V)?(m[U]=$,m[z]=S,U=z):(m[U]=V,m[j]=S,U=j);else if(z<R&&0>s($,S))m[U]=$,m[z]=S,U=z;else break e}}return o}function s(m,o){var S=m.sortIndex-o.sortIndex;return S!==0?S:m.id-o.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var O=Date,w=O.now();e.unstable_now=function(){return O.now()-w}}var f=[],F=[],I=1,K=null,M=3,H=!1,B=!1,k=!1,N=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function l(m){for(var o=r(F);o!==null;){if(o.callback===null)a(F);else if(o.startTime<=m)a(F),o.sortIndex=o.expirationTime,t(f,o);else break;o=r(F)}}function C(m){if(k=!1,l(m),!B)if(r(f)!==null)B=!0,_(A);else{var o=r(F);o!==null&&u(C,o.startTime-m)}}function A(m,o){B=!1,k&&(k=!1,L(h),h=-1),H=!0;var S=M;try{for(l(o),K=r(f);K!==null&&(!(K.expirationTime>o)||m&&!D());){var U=K.callback;if(typeof U=="function"){K.callback=null,M=K.priorityLevel;var R=U(K.expirationTime<=o);o=e.unstable_now(),typeof R=="function"?K.callback=R:K===r(f)&&a(f),l(o)}else a(f);K=r(f)}if(K!==null)var G=!0;else{var j=r(F);j!==null&&u(C,j.startTime-o),G=!1}return G}finally{K=null,M=S,H=!1}}var d=!1,v=null,h=-1,g=5,P=-1;function D(){return!(e.unstable_now()-P<g)}function p(){if(v!==null){var m=e.unstable_now();P=m;var o=!0;try{o=v(!0,m)}finally{o?x():(d=!1,v=null)}}else d=!1}var x;if(typeof T=="function")x=function(){T(p)};else if(typeof MessageChannel<"u"){var b=new MessageChannel,y=b.port2;b.port1.onmessage=p,x=function(){y.postMessage(null)}}else x=function(){N(p,0)};function _(m){v=m,d||(d=!0,x())}function u(m,o){h=N(function(){m(e.unstable_now())},o)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(m){m.callback=null},e.unstable_continueExecution=function(){B||H||(B=!0,_(A))},e.unstable_forceFrameRate=function(m){0>m||125<m?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):g=0<m?Math.floor(1e3/m):5},e.unstable_getCurrentPriorityLevel=function(){return M},e.unstable_getFirstCallbackNode=function(){return r(f)},e.unstable_next=function(m){switch(M){case 1:case 2:case 3:var o=3;break;default:o=M}var S=M;M=o;try{return m()}finally{M=S}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(m,o){switch(m){case 1:case 2:case 3:case 4:case 5:break;default:m=3}var S=M;M=m;try{return o()}finally{M=S}},e.unstable_scheduleCallback=function(m,o,S){var U=e.unstable_now();switch(typeof S=="object"&&S!==null?(S=S.delay,S=typeof S=="number"&&0<S?U+S:U):S=U,m){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=S+R,m={id:I++,callback:o,priorityLevel:m,startTime:S,expirationTime:R,sortIndex:-1},S>U?(m.sortIndex=S,t(F,m),r(f)===null&&m===r(F)&&(k?(L(h),h=-1):k=!0,u(C,S-U))):(m.sortIndex=R,t(f,m),B||H||(B=!0,_(A))),m},e.unstable_shouldYield=D,e.unstable_wrapCallback=function(m){var o=M;return function(){var S=M;M=o;try{return m.apply(this,arguments)}finally{M=S}}}})(Vm);(function(e){e.exports=Vm})(rD);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zm=pe,Ir=ud;function me(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $m=new Set,Bs={};function Zi(e,t){Ua(e,t),Ua(e+"Capture",t)}function Ua(e,t){for(Bs[e]=t,e=0;e<t.length;e++)$m.add(t[e])}var bn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fd=Object.prototype.hasOwnProperty,nD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,i0={},a0={};function iD(e){return fd.call(a0,e)?!0:fd.call(i0,e)?!1:nD.test(e)?a0[e]=!0:(i0[e]=!0,!1)}function aD(e,t,r,a){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function sD(e,t,r,a){if(t===null||typeof t>"u"||aD(e,t,r,a))return!0;if(a)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function nr(e,t,r,a,s,c,O){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=c,this.removeEmptyString=O}var Wt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Wt[e]=new nr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Wt[t]=new nr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Wt[e]=new nr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Wt[e]=new nr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Wt[e]=new nr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Wt[e]=new nr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Wt[e]=new nr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Wt[e]=new nr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Wt[e]=new nr(e,5,!1,e.toLowerCase(),null,!1,!1)});var xh=/[\-:]([a-z])/g;function Lh(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(xh,Lh);Wt[t]=new nr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(xh,Lh);Wt[t]=new nr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(xh,Lh);Wt[t]=new nr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Wt[e]=new nr(e,1,!1,e.toLowerCase(),null,!1,!1)});Wt.xlinkHref=new nr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Wt[e]=new nr(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ah(e,t,r,a){var s=Wt.hasOwnProperty(t)?Wt[t]:null;(s!==null?s.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(sD(t,r,s,a)&&(r=null),a||s===null?iD(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,a=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,a?e.setAttributeNS(a,t,r):e.setAttribute(t,r))))}var Kn=zm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,cl=Symbol.for("react.element"),ma=Symbol.for("react.portal"),ya=Symbol.for("react.fragment"),Ph=Symbol.for("react.strict_mode"),cd=Symbol.for("react.profiler"),Ym=Symbol.for("react.provider"),Xm=Symbol.for("react.context"),Dh=Symbol.for("react.forward_ref"),dd=Symbol.for("react.suspense"),hd=Symbol.for("react.suspense_list"),Rh=Symbol.for("react.memo"),qn=Symbol.for("react.lazy"),Qm=Symbol.for("react.offscreen"),s0=Symbol.iterator;function gs(e){return e===null||typeof e!="object"?null:(e=s0&&e[s0]||e["@@iterator"],typeof e=="function"?e:null)}var gt=Object.assign,Dc;function xs(e){if(Dc===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Dc=t&&t[1]||""}return`
`+Dc+e}var Rc=!1;function Cc(e,t){if(!e||Rc)return"";Rc=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(F){var a=F}Reflect.construct(e,[],t)}else{try{t.call()}catch(F){a=F}e.call(t.prototype)}else{try{throw Error()}catch(F){a=F}e()}}catch(F){if(F&&a&&typeof F.stack=="string"){for(var s=F.stack.split(`
`),c=a.stack.split(`
`),O=s.length-1,w=c.length-1;1<=O&&0<=w&&s[O]!==c[w];)w--;for(;1<=O&&0<=w;O--,w--)if(s[O]!==c[w]){if(O!==1||w!==1)do if(O--,w--,0>w||s[O]!==c[w]){var f=`
`+s[O].replace(" at new "," at ");return e.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",e.displayName)),f}while(1<=O&&0<=w);break}}}finally{Rc=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?xs(e):""}function oD(e){switch(e.tag){case 5:return xs(e.type);case 16:return xs("Lazy");case 13:return xs("Suspense");case 19:return xs("SuspenseList");case 0:case 2:case 15:return e=Cc(e.type,!1),e;case 11:return e=Cc(e.type.render,!1),e;case 1:return e=Cc(e.type,!0),e;default:return""}}function vd(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ya:return"Fragment";case ma:return"Portal";case cd:return"Profiler";case Ph:return"StrictMode";case dd:return"Suspense";case hd:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Xm:return(e.displayName||"Context")+".Consumer";case Ym:return(e._context.displayName||"Context")+".Provider";case Dh:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Rh:return t=e.displayName||null,t!==null?t:vd(e.type)||"Memo";case qn:t=e._payload,e=e._init;try{return vd(e(t))}catch{}}return null}function lD(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return vd(t);case 8:return t===Ph?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function yi(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Zm(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function uD(e){var t=Zm(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,c=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(O){a=""+O,c.call(this,O)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return a},setValue:function(O){a=""+O},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function dl(e){e._valueTracker||(e._valueTracker=uD(e))}function Jm(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),a="";return e&&(a=Zm(e)?e.checked?"true":"false":e.value),e=a,e!==r?(t.setValue(e),!0):!1}function Gl(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function gd(e,t){var r=t.checked;return gt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function o0(e,t){var r=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;r=yi(t.value!=null?t.value:r),e._wrapperState={initialChecked:a,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function qm(e,t){t=t.checked,t!=null&&Ah(e,"checked",t,!1)}function pd(e,t){qm(e,t);var r=yi(t.value),a=t.type;if(r!=null)a==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?md(e,t.type,r):t.hasOwnProperty("defaultValue")&&md(e,t.type,yi(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function l0(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function md(e,t,r){(t!=="number"||Gl(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Ls=Array.isArray;function Ia(e,t,r,a){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&a&&(e[r].defaultSelected=!0)}else{for(r=""+yi(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,a&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function yd(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(me(91));return gt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function u0(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(me(92));if(Ls(r)){if(1<r.length)throw Error(me(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:yi(r)}}function ey(e,t){var r=yi(t.value),a=yi(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),a!=null&&(e.defaultValue=""+a)}function f0(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ty(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ed(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ty(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var hl,ry=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,a,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,a,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(hl=hl||document.createElement("div"),hl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=hl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ks(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Rs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fD=["Webkit","ms","Moz","O"];Object.keys(Rs).forEach(function(e){fD.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Rs[t]=Rs[e]})});function ny(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Rs.hasOwnProperty(e)&&Rs[e]?(""+t).trim():t+"px"}function iy(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var a=r.indexOf("--")===0,s=ny(r,t[r],a);r==="float"&&(r="cssFloat"),a?e.setProperty(r,s):e[r]=s}}var cD=gt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _d(e,t){if(t){if(cD[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(me(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(me(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(me(61))}if(t.style!=null&&typeof t.style!="object")throw Error(me(62))}}function Td(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sd=null;function Ch(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var xd=null,Oa=null,wa=null;function c0(e){if(e=uo(e)){if(typeof xd!="function")throw Error(me(280));var t=e.stateNode;t&&(t=Pu(t),xd(e.stateNode,e.type,t))}}function ay(e){Oa?wa?wa.push(e):wa=[e]:Oa=e}function sy(){if(Oa){var e=Oa,t=wa;if(wa=Oa=null,c0(e),t)for(e=0;e<t.length;e++)c0(t[e])}}function oy(e,t){return e(t)}function ly(){}var Ic=!1;function uy(e,t,r){if(Ic)return e(t,r);Ic=!0;try{return oy(e,t,r)}finally{Ic=!1,(Oa!==null||wa!==null)&&(ly(),sy())}}function Ws(e,t){var r=e.stateNode;if(r===null)return null;var a=Pu(r);if(a===null)return null;r=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(me(231,t,typeof r));return r}var Ld=!1;if(bn)try{var ps={};Object.defineProperty(ps,"passive",{get:function(){Ld=!0}}),window.addEventListener("test",ps,ps),window.removeEventListener("test",ps,ps)}catch{Ld=!1}function dD(e,t,r,a,s,c,O,w,f){var F=Array.prototype.slice.call(arguments,3);try{t.apply(r,F)}catch(I){this.onError(I)}}var Cs=!1,Hl=null,jl=!1,Ad=null,hD={onError:function(e){Cs=!0,Hl=e}};function vD(e,t,r,a,s,c,O,w,f){Cs=!1,Hl=null,dD.apply(hD,arguments)}function gD(e,t,r,a,s,c,O,w,f){if(vD.apply(this,arguments),Cs){if(Cs){var F=Hl;Cs=!1,Hl=null}else throw Error(me(198));jl||(jl=!0,Ad=F)}}function Ji(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function fy(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function d0(e){if(Ji(e)!==e)throw Error(me(188))}function pD(e){var t=e.alternate;if(!t){if(t=Ji(e),t===null)throw Error(me(188));return t!==e?null:e}for(var r=e,a=t;;){var s=r.return;if(s===null)break;var c=s.alternate;if(c===null){if(a=s.return,a!==null){r=a;continue}break}if(s.child===c.child){for(c=s.child;c;){if(c===r)return d0(s),e;if(c===a)return d0(s),t;c=c.sibling}throw Error(me(188))}if(r.return!==a.return)r=s,a=c;else{for(var O=!1,w=s.child;w;){if(w===r){O=!0,r=s,a=c;break}if(w===a){O=!0,a=s,r=c;break}w=w.sibling}if(!O){for(w=c.child;w;){if(w===r){O=!0,r=c,a=s;break}if(w===a){O=!0,a=c,r=s;break}w=w.sibling}if(!O)throw Error(me(189))}}if(r.alternate!==a)throw Error(me(190))}if(r.tag!==3)throw Error(me(188));return r.stateNode.current===r?e:t}function cy(e){return e=pD(e),e!==null?dy(e):null}function dy(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=dy(e);if(t!==null)return t;e=e.sibling}return null}var hy=Ir.unstable_scheduleCallback,h0=Ir.unstable_cancelCallback,mD=Ir.unstable_shouldYield,yD=Ir.unstable_requestPaint,xt=Ir.unstable_now,ED=Ir.unstable_getCurrentPriorityLevel,Ih=Ir.unstable_ImmediatePriority,vy=Ir.unstable_UserBlockingPriority,Vl=Ir.unstable_NormalPriority,_D=Ir.unstable_LowPriority,gy=Ir.unstable_IdlePriority,Su=null,mn=null;function TD(e){if(mn&&typeof mn.onCommitFiberRoot=="function")try{mn.onCommitFiberRoot(Su,e,void 0,(e.current.flags&128)===128)}catch{}}var ln=Math.clz32?Math.clz32:LD,SD=Math.log,xD=Math.LN2;function LD(e){return e>>>=0,e===0?32:31-(SD(e)/xD|0)|0}var vl=64,gl=4194304;function As(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function zl(e,t){var r=e.pendingLanes;if(r===0)return 0;var a=0,s=e.suspendedLanes,c=e.pingedLanes,O=r&268435455;if(O!==0){var w=O&~s;w!==0?a=As(w):(c&=O,c!==0&&(a=As(c)))}else O=r&~s,O!==0?a=As(O):c!==0&&(a=As(c));if(a===0)return 0;if(t!==0&&t!==a&&!(t&s)&&(s=a&-a,c=t&-t,s>=c||s===16&&(c&4194240)!==0))return t;if(a&4&&(a|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)r=31-ln(t),s=1<<r,a|=e[r],t&=~s;return a}function AD(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function PD(e,t){for(var r=e.suspendedLanes,a=e.pingedLanes,s=e.expirationTimes,c=e.pendingLanes;0<c;){var O=31-ln(c),w=1<<O,f=s[O];f===-1?(!(w&r)||w&a)&&(s[O]=AD(w,t)):f<=t&&(e.expiredLanes|=w),c&=~w}}function Pd(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function py(){var e=vl;return vl<<=1,!(vl&4194240)&&(vl=64),e}function Oc(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function oo(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ln(t),e[t]=r}function DD(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-ln(r),c=1<<s;t[s]=0,a[s]=-1,e[s]=-1,r&=~c}}function Oh(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var a=31-ln(r),s=1<<a;s&t|e[a]&t&&(e[a]|=t),r&=~s}}var Xe=0;function my(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var yy,wh,Ey,_y,Ty,Dd=!1,pl=[],oi=null,li=null,ui=null,Gs=new Map,Hs=new Map,ti=[],RD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function v0(e,t){switch(e){case"focusin":case"focusout":oi=null;break;case"dragenter":case"dragleave":li=null;break;case"mouseover":case"mouseout":ui=null;break;case"pointerover":case"pointerout":Gs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hs.delete(t.pointerId)}}function ms(e,t,r,a,s,c){return e===null||e.nativeEvent!==c?(e={blockedOn:t,domEventName:r,eventSystemFlags:a,nativeEvent:c,targetContainers:[s]},t!==null&&(t=uo(t),t!==null&&wh(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function CD(e,t,r,a,s){switch(t){case"focusin":return oi=ms(oi,e,t,r,a,s),!0;case"dragenter":return li=ms(li,e,t,r,a,s),!0;case"mouseover":return ui=ms(ui,e,t,r,a,s),!0;case"pointerover":var c=s.pointerId;return Gs.set(c,ms(Gs.get(c)||null,e,t,r,a,s)),!0;case"gotpointercapture":return c=s.pointerId,Hs.set(c,ms(Hs.get(c)||null,e,t,r,a,s)),!0}return!1}function Sy(e){var t=Ki(e.target);if(t!==null){var r=Ji(t);if(r!==null){if(t=r.tag,t===13){if(t=fy(r),t!==null){e.blockedOn=t,Ty(e.priority,function(){Ey(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Cl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Rd(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var a=new r.constructor(r.type,r);Sd=a,r.target.dispatchEvent(a),Sd=null}else return t=uo(r),t!==null&&wh(t),e.blockedOn=r,!1;t.shift()}return!0}function g0(e,t,r){Cl(e)&&r.delete(t)}function ID(){Dd=!1,oi!==null&&Cl(oi)&&(oi=null),li!==null&&Cl(li)&&(li=null),ui!==null&&Cl(ui)&&(ui=null),Gs.forEach(g0),Hs.forEach(g0)}function ys(e,t){e.blockedOn===t&&(e.blockedOn=null,Dd||(Dd=!0,Ir.unstable_scheduleCallback(Ir.unstable_NormalPriority,ID)))}function js(e){function t(s){return ys(s,e)}if(0<pl.length){ys(pl[0],e);for(var r=1;r<pl.length;r++){var a=pl[r];a.blockedOn===e&&(a.blockedOn=null)}}for(oi!==null&&ys(oi,e),li!==null&&ys(li,e),ui!==null&&ys(ui,e),Gs.forEach(t),Hs.forEach(t),r=0;r<ti.length;r++)a=ti[r],a.blockedOn===e&&(a.blockedOn=null);for(;0<ti.length&&(r=ti[0],r.blockedOn===null);)Sy(r),r.blockedOn===null&&ti.shift()}var Ma=Kn.ReactCurrentBatchConfig,$l=!0;function OD(e,t,r,a){var s=Xe,c=Ma.transition;Ma.transition=null;try{Xe=1,Mh(e,t,r,a)}finally{Xe=s,Ma.transition=c}}function wD(e,t,r,a){var s=Xe,c=Ma.transition;Ma.transition=null;try{Xe=4,Mh(e,t,r,a)}finally{Xe=s,Ma.transition=c}}function Mh(e,t,r,a){if($l){var s=Rd(e,t,r,a);if(s===null)Wc(e,t,a,Yl,r),v0(e,a);else if(CD(s,e,t,r,a))a.stopPropagation();else if(v0(e,a),t&4&&-1<RD.indexOf(e)){for(;s!==null;){var c=uo(s);if(c!==null&&yy(c),c=Rd(e,t,r,a),c===null&&Wc(e,t,a,Yl,r),c===s)break;s=c}s!==null&&a.stopPropagation()}else Wc(e,t,a,null,r)}}var Yl=null;function Rd(e,t,r,a){if(Yl=null,e=Ch(a),e=Ki(e),e!==null)if(t=Ji(e),t===null)e=null;else if(r=t.tag,r===13){if(e=fy(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yl=e,null}function xy(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ED()){case Ih:return 1;case vy:return 4;case Vl:case _D:return 16;case gy:return 536870912;default:return 16}default:return 16}}var ii=null,kh=null,Il=null;function Ly(){if(Il)return Il;var e,t=kh,r=t.length,a,s="value"in ii?ii.value:ii.textContent,c=s.length;for(e=0;e<r&&t[e]===s[e];e++);var O=r-e;for(a=1;a<=O&&t[r-a]===s[c-a];a++);return Il=s.slice(e,1<a?1-a:void 0)}function Ol(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ml(){return!0}function p0(){return!1}function Mr(e){function t(r,a,s,c,O){this._reactName=r,this._targetInst=s,this.type=a,this.nativeEvent=c,this.target=O,this.currentTarget=null;for(var w in e)e.hasOwnProperty(w)&&(r=e[w],this[w]=r?r(c):c[w]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?ml:p0,this.isPropagationStopped=p0,this}return gt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ml)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ml)},persist:function(){},isPersistent:ml}),t}var $a={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bh=Mr($a),lo=gt({},$a,{view:0,detail:0}),MD=Mr(lo),wc,Mc,Es,xu=gt({},lo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fh,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Es&&(Es&&e.type==="mousemove"?(wc=e.screenX-Es.screenX,Mc=e.screenY-Es.screenY):Mc=wc=0,Es=e),wc)},movementY:function(e){return"movementY"in e?e.movementY:Mc}}),m0=Mr(xu),kD=gt({},xu,{dataTransfer:0}),bD=Mr(kD),FD=gt({},lo,{relatedTarget:0}),kc=Mr(FD),ND=gt({},$a,{animationName:0,elapsedTime:0,pseudoElement:0}),UD=Mr(ND),BD=gt({},$a,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),KD=Mr(BD),WD=gt({},$a,{data:0}),y0=Mr(WD),GD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},HD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function VD(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=jD[e])?!!t[e]:!1}function Fh(){return VD}var zD=gt({},lo,{key:function(e){if(e.key){var t=GD[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ol(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?HD[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fh,charCode:function(e){return e.type==="keypress"?Ol(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ol(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),$D=Mr(zD),YD=gt({},xu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),E0=Mr(YD),XD=gt({},lo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fh}),QD=Mr(XD),ZD=gt({},$a,{propertyName:0,elapsedTime:0,pseudoElement:0}),JD=Mr(ZD),qD=gt({},xu,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),eR=Mr(qD),tR=[9,13,27,32],Nh=bn&&"CompositionEvent"in window,Is=null;bn&&"documentMode"in document&&(Is=document.documentMode);var rR=bn&&"TextEvent"in window&&!Is,Ay=bn&&(!Nh||Is&&8<Is&&11>=Is),_0=String.fromCharCode(32),T0=!1;function Py(e,t){switch(e){case"keyup":return tR.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dy(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ea=!1;function nR(e,t){switch(e){case"compositionend":return Dy(t);case"keypress":return t.which!==32?null:(T0=!0,_0);case"textInput":return e=t.data,e===_0&&T0?null:e;default:return null}}function iR(e,t){if(Ea)return e==="compositionend"||!Nh&&Py(e,t)?(e=Ly(),Il=kh=ii=null,Ea=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ay&&t.locale!=="ko"?null:t.data;default:return null}}var aR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function S0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!aR[e.type]:t==="textarea"}function Ry(e,t,r,a){ay(a),t=Xl(t,"onChange"),0<t.length&&(r=new bh("onChange","change",null,r,a),e.push({event:r,listeners:t}))}var Os=null,Vs=null;function sR(e){By(e,0)}function Lu(e){var t=Sa(e);if(Jm(t))return e}function oR(e,t){if(e==="change")return t}var Cy=!1;if(bn){var bc;if(bn){var Fc="oninput"in document;if(!Fc){var x0=document.createElement("div");x0.setAttribute("oninput","return;"),Fc=typeof x0.oninput=="function"}bc=Fc}else bc=!1;Cy=bc&&(!document.documentMode||9<document.documentMode)}function L0(){Os&&(Os.detachEvent("onpropertychange",Iy),Vs=Os=null)}function Iy(e){if(e.propertyName==="value"&&Lu(Vs)){var t=[];Ry(t,Vs,e,Ch(e)),uy(sR,t)}}function lR(e,t,r){e==="focusin"?(L0(),Os=t,Vs=r,Os.attachEvent("onpropertychange",Iy)):e==="focusout"&&L0()}function uR(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Lu(Vs)}function fR(e,t){if(e==="click")return Lu(t)}function cR(e,t){if(e==="input"||e==="change")return Lu(t)}function dR(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var fn=typeof Object.is=="function"?Object.is:dR;function zs(e,t){if(fn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!1;for(a=0;a<r.length;a++){var s=r[a];if(!fd.call(t,s)||!fn(e[s],t[s]))return!1}return!0}function A0(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function P0(e,t){var r=A0(e);e=0;for(var a;r;){if(r.nodeType===3){if(a=e+r.textContent.length,e<=t&&a>=t)return{node:r,offset:t-e};e=a}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=A0(r)}}function Oy(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Oy(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function wy(){for(var e=window,t=Gl();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Gl(e.document)}return t}function Uh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function hR(e){var t=wy(),r=e.focusedElem,a=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Oy(r.ownerDocument.documentElement,r)){if(a!==null&&Uh(r)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,c=Math.min(a.start,s);a=a.end===void 0?c:Math.min(a.end,s),!e.extend&&c>a&&(s=a,a=c,c=s),s=P0(r,c);var O=P0(r,a);s&&O&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==O.node||e.focusOffset!==O.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),c>a?(e.addRange(t),e.extend(O.node,O.offset)):(t.setEnd(O.node,O.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vR=bn&&"documentMode"in document&&11>=document.documentMode,_a=null,Cd=null,ws=null,Id=!1;function D0(e,t,r){var a=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Id||_a==null||_a!==Gl(a)||(a=_a,"selectionStart"in a&&Uh(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),ws&&zs(ws,a)||(ws=a,a=Xl(Cd,"onSelect"),0<a.length&&(t=new bh("onSelect","select",null,t,r),e.push({event:t,listeners:a}),t.target=_a)))}function yl(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Ta={animationend:yl("Animation","AnimationEnd"),animationiteration:yl("Animation","AnimationIteration"),animationstart:yl("Animation","AnimationStart"),transitionend:yl("Transition","TransitionEnd")},Nc={},My={};bn&&(My=document.createElement("div").style,"AnimationEvent"in window||(delete Ta.animationend.animation,delete Ta.animationiteration.animation,delete Ta.animationstart.animation),"TransitionEvent"in window||delete Ta.transitionend.transition);function Au(e){if(Nc[e])return Nc[e];if(!Ta[e])return e;var t=Ta[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in My)return Nc[e]=t[r];return e}var ky=Au("animationend"),by=Au("animationiteration"),Fy=Au("animationstart"),Ny=Au("transitionend"),Uy=new Map,R0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Si(e,t){Uy.set(e,t),Zi(t,[e])}for(var Uc=0;Uc<R0.length;Uc++){var Bc=R0[Uc],gR=Bc.toLowerCase(),pR=Bc[0].toUpperCase()+Bc.slice(1);Si(gR,"on"+pR)}Si(ky,"onAnimationEnd");Si(by,"onAnimationIteration");Si(Fy,"onAnimationStart");Si("dblclick","onDoubleClick");Si("focusin","onFocus");Si("focusout","onBlur");Si(Ny,"onTransitionEnd");Ua("onMouseEnter",["mouseout","mouseover"]);Ua("onMouseLeave",["mouseout","mouseover"]);Ua("onPointerEnter",["pointerout","pointerover"]);Ua("onPointerLeave",["pointerout","pointerover"]);Zi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Zi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Zi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Zi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Zi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Zi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ps="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mR=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ps));function C0(e,t,r){var a=e.type||"unknown-event";e.currentTarget=r,gD(a,t,void 0,e),e.currentTarget=null}function By(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var a=e[r],s=a.event;a=a.listeners;e:{var c=void 0;if(t)for(var O=a.length-1;0<=O;O--){var w=a[O],f=w.instance,F=w.currentTarget;if(w=w.listener,f!==c&&s.isPropagationStopped())break e;C0(s,w,F),c=f}else for(O=0;O<a.length;O++){if(w=a[O],f=w.instance,F=w.currentTarget,w=w.listener,f!==c&&s.isPropagationStopped())break e;C0(s,w,F),c=f}}}if(jl)throw e=Ad,jl=!1,Ad=null,e}function at(e,t){var r=t[bd];r===void 0&&(r=t[bd]=new Set);var a=e+"__bubble";r.has(a)||(Ky(t,e,2,!1),r.add(a))}function Kc(e,t,r){var a=0;t&&(a|=4),Ky(r,e,a,t)}var El="_reactListening"+Math.random().toString(36).slice(2);function $s(e){if(!e[El]){e[El]=!0,$m.forEach(function(r){r!=="selectionchange"&&(mR.has(r)||Kc(r,!1,e),Kc(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[El]||(t[El]=!0,Kc("selectionchange",!1,t))}}function Ky(e,t,r,a){switch(xy(t)){case 1:var s=OD;break;case 4:s=wD;break;default:s=Mh}r=s.bind(null,t,r,e),s=void 0,!Ld||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),a?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function Wc(e,t,r,a,s){var c=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var O=a.tag;if(O===3||O===4){var w=a.stateNode.containerInfo;if(w===s||w.nodeType===8&&w.parentNode===s)break;if(O===4)for(O=a.return;O!==null;){var f=O.tag;if((f===3||f===4)&&(f=O.stateNode.containerInfo,f===s||f.nodeType===8&&f.parentNode===s))return;O=O.return}for(;w!==null;){if(O=Ki(w),O===null)return;if(f=O.tag,f===5||f===6){a=c=O;continue e}w=w.parentNode}}a=a.return}uy(function(){var F=c,I=Ch(r),K=[];e:{var M=Uy.get(e);if(M!==void 0){var H=bh,B=e;switch(e){case"keypress":if(Ol(r)===0)break e;case"keydown":case"keyup":H=$D;break;case"focusin":B="focus",H=kc;break;case"focusout":B="blur",H=kc;break;case"beforeblur":case"afterblur":H=kc;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=m0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=bD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=QD;break;case ky:case by:case Fy:H=UD;break;case Ny:H=JD;break;case"scroll":H=MD;break;case"wheel":H=eR;break;case"copy":case"cut":case"paste":H=KD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=E0}var k=(t&4)!==0,N=!k&&e==="scroll",L=k?M!==null?M+"Capture":null:M;k=[];for(var T=F,l;T!==null;){l=T;var C=l.stateNode;if(l.tag===5&&C!==null&&(l=C,L!==null&&(C=Ws(T,L),C!=null&&k.push(Ys(T,C,l)))),N)break;T=T.return}0<k.length&&(M=new H(M,B,null,r,I),K.push({event:M,listeners:k}))}}if(!(t&7)){e:{if(M=e==="mouseover"||e==="pointerover",H=e==="mouseout"||e==="pointerout",M&&r!==Sd&&(B=r.relatedTarget||r.fromElement)&&(Ki(B)||B[Fn]))break e;if((H||M)&&(M=I.window===I?I:(M=I.ownerDocument)?M.defaultView||M.parentWindow:window,H?(B=r.relatedTarget||r.toElement,H=F,B=B?Ki(B):null,B!==null&&(N=Ji(B),B!==N||B.tag!==5&&B.tag!==6)&&(B=null)):(H=null,B=F),H!==B)){if(k=m0,C="onMouseLeave",L="onMouseEnter",T="mouse",(e==="pointerout"||e==="pointerover")&&(k=E0,C="onPointerLeave",L="onPointerEnter",T="pointer"),N=H==null?M:Sa(H),l=B==null?M:Sa(B),M=new k(C,T+"leave",H,r,I),M.target=N,M.relatedTarget=l,C=null,Ki(I)===F&&(k=new k(L,T+"enter",B,r,I),k.target=l,k.relatedTarget=N,C=k),N=C,H&&B)t:{for(k=H,L=B,T=0,l=k;l;l=va(l))T++;for(l=0,C=L;C;C=va(C))l++;for(;0<T-l;)k=va(k),T--;for(;0<l-T;)L=va(L),l--;for(;T--;){if(k===L||L!==null&&k===L.alternate)break t;k=va(k),L=va(L)}k=null}else k=null;H!==null&&I0(K,M,H,k,!1),B!==null&&N!==null&&I0(K,N,B,k,!0)}}e:{if(M=F?Sa(F):window,H=M.nodeName&&M.nodeName.toLowerCase(),H==="select"||H==="input"&&M.type==="file")var A=oR;else if(S0(M))if(Cy)A=cR;else{A=uR;var d=lR}else(H=M.nodeName)&&H.toLowerCase()==="input"&&(M.type==="checkbox"||M.type==="radio")&&(A=fR);if(A&&(A=A(e,F))){Ry(K,A,r,I);break e}d&&d(e,M,F),e==="focusout"&&(d=M._wrapperState)&&d.controlled&&M.type==="number"&&md(M,"number",M.value)}switch(d=F?Sa(F):window,e){case"focusin":(S0(d)||d.contentEditable==="true")&&(_a=d,Cd=F,ws=null);break;case"focusout":ws=Cd=_a=null;break;case"mousedown":Id=!0;break;case"contextmenu":case"mouseup":case"dragend":Id=!1,D0(K,r,I);break;case"selectionchange":if(vR)break;case"keydown":case"keyup":D0(K,r,I)}var v;if(Nh)e:{switch(e){case"compositionstart":var h="onCompositionStart";break e;case"compositionend":h="onCompositionEnd";break e;case"compositionupdate":h="onCompositionUpdate";break e}h=void 0}else Ea?Py(e,r)&&(h="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(h="onCompositionStart");h&&(Ay&&r.locale!=="ko"&&(Ea||h!=="onCompositionStart"?h==="onCompositionEnd"&&Ea&&(v=Ly()):(ii=I,kh="value"in ii?ii.value:ii.textContent,Ea=!0)),d=Xl(F,h),0<d.length&&(h=new y0(h,e,null,r,I),K.push({event:h,listeners:d}),v?h.data=v:(v=Dy(r),v!==null&&(h.data=v)))),(v=rR?nR(e,r):iR(e,r))&&(F=Xl(F,"onBeforeInput"),0<F.length&&(I=new y0("onBeforeInput","beforeinput",null,r,I),K.push({event:I,listeners:F}),I.data=v))}By(K,t)})}function Ys(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Xl(e,t){for(var r=t+"Capture",a=[];e!==null;){var s=e,c=s.stateNode;s.tag===5&&c!==null&&(s=c,c=Ws(e,r),c!=null&&a.unshift(Ys(e,c,s)),c=Ws(e,t),c!=null&&a.push(Ys(e,c,s))),e=e.return}return a}function va(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function I0(e,t,r,a,s){for(var c=t._reactName,O=[];r!==null&&r!==a;){var w=r,f=w.alternate,F=w.stateNode;if(f!==null&&f===a)break;w.tag===5&&F!==null&&(w=F,s?(f=Ws(r,c),f!=null&&O.unshift(Ys(r,f,w))):s||(f=Ws(r,c),f!=null&&O.push(Ys(r,f,w)))),r=r.return}O.length!==0&&e.push({event:t,listeners:O})}var yR=/\r\n?/g,ER=/\u0000|\uFFFD/g;function O0(e){return(typeof e=="string"?e:""+e).replace(yR,`
`).replace(ER,"")}function _l(e,t,r){if(t=O0(t),O0(e)!==t&&r)throw Error(me(425))}function Ql(){}var Od=null,wd=null;function Md(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var kd=typeof setTimeout=="function"?setTimeout:void 0,_R=typeof clearTimeout=="function"?clearTimeout:void 0,w0=typeof Promise=="function"?Promise:void 0,TR=typeof queueMicrotask=="function"?queueMicrotask:typeof w0<"u"?function(e){return w0.resolve(null).then(e).catch(SR)}:kd;function SR(e){setTimeout(function(){throw e})}function Gc(e,t){var r=t,a=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(a===0){e.removeChild(s),js(t);return}a--}else r!=="$"&&r!=="$?"&&r!=="$!"||a++;r=s}while(r);js(t)}function fi(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function M0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Ya=Math.random().toString(36).slice(2),pn="__reactFiber$"+Ya,Xs="__reactProps$"+Ya,Fn="__reactContainer$"+Ya,bd="__reactEvents$"+Ya,xR="__reactListeners$"+Ya,LR="__reactHandles$"+Ya;function Ki(e){var t=e[pn];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Fn]||r[pn]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=M0(e);e!==null;){if(r=e[pn])return r;e=M0(e)}return t}e=r,r=e.parentNode}return null}function uo(e){return e=e[pn]||e[Fn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Sa(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(me(33))}function Pu(e){return e[Xs]||null}var Fd=[],xa=-1;function xi(e){return{current:e}}function st(e){0>xa||(e.current=Fd[xa],Fd[xa]=null,xa--)}function rt(e,t){xa++,Fd[xa]=e.current,e.current=t}var Ei={},Yt=xi(Ei),hr=xi(!1),Vi=Ei;function Ba(e,t){var r=e.type.contextTypes;if(!r)return Ei;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var s={},c;for(c in r)s[c]=t[c];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function vr(e){return e=e.childContextTypes,e!=null}function Zl(){st(hr),st(Yt)}function k0(e,t,r){if(Yt.current!==Ei)throw Error(me(168));rt(Yt,t),rt(hr,r)}function Wy(e,t,r){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return r;a=a.getChildContext();for(var s in a)if(!(s in t))throw Error(me(108,lD(e)||"Unknown",s));return gt({},r,a)}function Jl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ei,Vi=Yt.current,rt(Yt,e),rt(hr,hr.current),!0}function b0(e,t,r){var a=e.stateNode;if(!a)throw Error(me(169));r?(e=Wy(e,t,Vi),a.__reactInternalMemoizedMergedChildContext=e,st(hr),st(Yt),rt(Yt,e)):st(hr),rt(hr,r)}var On=null,Du=!1,Hc=!1;function Gy(e){On===null?On=[e]:On.push(e)}function AR(e){Du=!0,Gy(e)}function Li(){if(!Hc&&On!==null){Hc=!0;var e=0,t=Xe;try{var r=On;for(Xe=1;e<r.length;e++){var a=r[e];do a=a(!0);while(a!==null)}On=null,Du=!1}catch(s){throw On!==null&&(On=On.slice(e+1)),hy(Ih,Li),s}finally{Xe=t,Hc=!1}}return null}var La=[],Aa=0,ql=null,eu=0,jr=[],Vr=0,zi=null,wn=1,Mn="";function Ni(e,t){La[Aa++]=eu,La[Aa++]=ql,ql=e,eu=t}function Hy(e,t,r){jr[Vr++]=wn,jr[Vr++]=Mn,jr[Vr++]=zi,zi=e;var a=wn;e=Mn;var s=32-ln(a)-1;a&=~(1<<s),r+=1;var c=32-ln(t)+s;if(30<c){var O=s-s%5;c=(a&(1<<O)-1).toString(32),a>>=O,s-=O,wn=1<<32-ln(t)+s|r<<s|a,Mn=c+e}else wn=1<<c|r<<s|a,Mn=e}function Bh(e){e.return!==null&&(Ni(e,1),Hy(e,1,0))}function Kh(e){for(;e===ql;)ql=La[--Aa],La[Aa]=null,eu=La[--Aa],La[Aa]=null;for(;e===zi;)zi=jr[--Vr],jr[Vr]=null,Mn=jr[--Vr],jr[Vr]=null,wn=jr[--Vr],jr[Vr]=null}var Cr=null,Dr=null,ft=!1,an=null;function jy(e,t){var r=zr(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function F0(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Cr=e,Dr=fi(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Cr=e,Dr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=zi!==null?{id:wn,overflow:Mn}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=zr(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Cr=e,Dr=null,!0):!1;default:return!1}}function Nd(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ud(e){if(ft){var t=Dr;if(t){var r=t;if(!F0(e,t)){if(Nd(e))throw Error(me(418));t=fi(r.nextSibling);var a=Cr;t&&F0(e,t)?jy(a,r):(e.flags=e.flags&-4097|2,ft=!1,Cr=e)}}else{if(Nd(e))throw Error(me(418));e.flags=e.flags&-4097|2,ft=!1,Cr=e}}}function N0(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Cr=e}function Tl(e){if(e!==Cr)return!1;if(!ft)return N0(e),ft=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Md(e.type,e.memoizedProps)),t&&(t=Dr)){if(Nd(e))throw Vy(),Error(me(418));for(;t;)jy(e,t),t=fi(t.nextSibling)}if(N0(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(me(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Dr=fi(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Dr=null}}else Dr=Cr?fi(e.stateNode.nextSibling):null;return!0}function Vy(){for(var e=Dr;e;)e=fi(e.nextSibling)}function Ka(){Dr=Cr=null,ft=!1}function Wh(e){an===null?an=[e]:an.push(e)}var PR=Kn.ReactCurrentBatchConfig;function rn(e,t){if(e&&e.defaultProps){t=gt({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var tu=xi(null),ru=null,Pa=null,Gh=null;function Hh(){Gh=Pa=ru=null}function jh(e){var t=tu.current;st(tu),e._currentValue=t}function Bd(e,t,r){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===r)break;e=e.return}}function ka(e,t){ru=e,Gh=Pa=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(dr=!0),e.firstContext=null)}function Yr(e){var t=e._currentValue;if(Gh!==e)if(e={context:e,memoizedValue:t,next:null},Pa===null){if(ru===null)throw Error(me(308));Pa=e,ru.dependencies={lanes:0,firstContext:e}}else Pa=Pa.next=e;return t}var Wi=null;function Vh(e){Wi===null?Wi=[e]:Wi.push(e)}function zy(e,t,r,a){var s=t.interleaved;return s===null?(r.next=r,Vh(t)):(r.next=s.next,s.next=r),t.interleaved=r,Nn(e,a)}function Nn(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var ei=!1;function zh(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $y(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function kn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ci(e,t,r){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,je&2){var s=a.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),a.pending=t,Nn(e,r)}return s=a.interleaved,s===null?(t.next=t,Vh(a)):(t.next=s.next,s.next=t),a.interleaved=t,Nn(e,r)}function wl(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,r|=a,t.lanes=r,Oh(e,r)}}function U0(e,t){var r=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,r===a)){var s=null,c=null;if(r=r.firstBaseUpdate,r!==null){do{var O={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};c===null?s=c=O:c=c.next=O,r=r.next}while(r!==null);c===null?s=c=t:c=c.next=t}else s=c=t;r={baseState:a.baseState,firstBaseUpdate:s,lastBaseUpdate:c,shared:a.shared,effects:a.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function nu(e,t,r,a){var s=e.updateQueue;ei=!1;var c=s.firstBaseUpdate,O=s.lastBaseUpdate,w=s.shared.pending;if(w!==null){s.shared.pending=null;var f=w,F=f.next;f.next=null,O===null?c=F:O.next=F,O=f;var I=e.alternate;I!==null&&(I=I.updateQueue,w=I.lastBaseUpdate,w!==O&&(w===null?I.firstBaseUpdate=F:w.next=F,I.lastBaseUpdate=f))}if(c!==null){var K=s.baseState;O=0,I=F=f=null,w=c;do{var M=w.lane,H=w.eventTime;if((a&M)===M){I!==null&&(I=I.next={eventTime:H,lane:0,tag:w.tag,payload:w.payload,callback:w.callback,next:null});e:{var B=e,k=w;switch(M=t,H=r,k.tag){case 1:if(B=k.payload,typeof B=="function"){K=B.call(H,K,M);break e}K=B;break e;case 3:B.flags=B.flags&-65537|128;case 0:if(B=k.payload,M=typeof B=="function"?B.call(H,K,M):B,M==null)break e;K=gt({},K,M);break e;case 2:ei=!0}}w.callback!==null&&w.lane!==0&&(e.flags|=64,M=s.effects,M===null?s.effects=[w]:M.push(w))}else H={eventTime:H,lane:M,tag:w.tag,payload:w.payload,callback:w.callback,next:null},I===null?(F=I=H,f=K):I=I.next=H,O|=M;if(w=w.next,w===null){if(w=s.shared.pending,w===null)break;M=w,w=M.next,M.next=null,s.lastBaseUpdate=M,s.shared.pending=null}}while(1);if(I===null&&(f=K),s.baseState=f,s.firstBaseUpdate=F,s.lastBaseUpdate=I,t=s.shared.interleaved,t!==null){s=t;do O|=s.lane,s=s.next;while(s!==t)}else c===null&&(s.shared.lanes=0);Yi|=O,e.lanes=O,e.memoizedState=K}}function B0(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],s=a.callback;if(s!==null){if(a.callback=null,a=r,typeof s!="function")throw Error(me(191,s));s.call(a)}}}var Yy=new zm.Component().refs;function Kd(e,t,r,a){t=e.memoizedState,r=r(a,t),r=r==null?t:gt({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Ru={isMounted:function(e){return(e=e._reactInternals)?Ji(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var a=tr(),s=hi(e),c=kn(a,s);c.payload=t,r!=null&&(c.callback=r),t=ci(e,c,s),t!==null&&(un(t,e,s,a),wl(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var a=tr(),s=hi(e),c=kn(a,s);c.tag=1,c.payload=t,r!=null&&(c.callback=r),t=ci(e,c,s),t!==null&&(un(t,e,s,a),wl(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=tr(),a=hi(e),s=kn(r,a);s.tag=2,t!=null&&(s.callback=t),t=ci(e,s,a),t!==null&&(un(t,e,a,r),wl(t,e,a))}};function K0(e,t,r,a,s,c,O){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,c,O):t.prototype&&t.prototype.isPureReactComponent?!zs(r,a)||!zs(s,c):!0}function Xy(e,t,r){var a=!1,s=Ei,c=t.contextType;return typeof c=="object"&&c!==null?c=Yr(c):(s=vr(t)?Vi:Yt.current,a=t.contextTypes,c=(a=a!=null)?Ba(e,s):Ei),t=new t(r,c),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ru,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=c),t}function W0(e,t,r,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,a),t.state!==e&&Ru.enqueueReplaceState(t,t.state,null)}function Wd(e,t,r,a){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs=Yy,zh(e);var c=t.contextType;typeof c=="object"&&c!==null?s.context=Yr(c):(c=vr(t)?Vi:Yt.current,s.context=Ba(e,c)),s.state=e.memoizedState,c=t.getDerivedStateFromProps,typeof c=="function"&&(Kd(e,t,c,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Ru.enqueueReplaceState(s,s.state,null),nu(e,r,s,a),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function _s(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(me(309));var a=r.stateNode}if(!a)throw Error(me(147,e));var s=a,c=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===c?t.ref:(t=function(O){var w=s.refs;w===Yy&&(w=s.refs={}),O===null?delete w[c]:w[c]=O},t._stringRef=c,t)}if(typeof e!="string")throw Error(me(284));if(!r._owner)throw Error(me(290,e))}return e}function Sl(e,t){throw e=Object.prototype.toString.call(t),Error(me(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function G0(e){var t=e._init;return t(e._payload)}function Qy(e){function t(L,T){if(e){var l=L.deletions;l===null?(L.deletions=[T],L.flags|=16):l.push(T)}}function r(L,T){if(!e)return null;for(;T!==null;)t(L,T),T=T.sibling;return null}function a(L,T){for(L=new Map;T!==null;)T.key!==null?L.set(T.key,T):L.set(T.index,T),T=T.sibling;return L}function s(L,T){return L=vi(L,T),L.index=0,L.sibling=null,L}function c(L,T,l){return L.index=l,e?(l=L.alternate,l!==null?(l=l.index,l<T?(L.flags|=2,T):l):(L.flags|=2,T)):(L.flags|=1048576,T)}function O(L){return e&&L.alternate===null&&(L.flags|=2),L}function w(L,T,l,C){return T===null||T.tag!==6?(T=Qc(l,L.mode,C),T.return=L,T):(T=s(T,l),T.return=L,T)}function f(L,T,l,C){var A=l.type;return A===ya?I(L,T,l.props.children,C,l.key):T!==null&&(T.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===qn&&G0(A)===T.type)?(C=s(T,l.props),C.ref=_s(L,T,l),C.return=L,C):(C=Ul(l.type,l.key,l.props,null,L.mode,C),C.ref=_s(L,T,l),C.return=L,C)}function F(L,T,l,C){return T===null||T.tag!==4||T.stateNode.containerInfo!==l.containerInfo||T.stateNode.implementation!==l.implementation?(T=Zc(l,L.mode,C),T.return=L,T):(T=s(T,l.children||[]),T.return=L,T)}function I(L,T,l,C,A){return T===null||T.tag!==7?(T=ji(l,L.mode,C,A),T.return=L,T):(T=s(T,l),T.return=L,T)}function K(L,T,l){if(typeof T=="string"&&T!==""||typeof T=="number")return T=Qc(""+T,L.mode,l),T.return=L,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case cl:return l=Ul(T.type,T.key,T.props,null,L.mode,l),l.ref=_s(L,null,T),l.return=L,l;case ma:return T=Zc(T,L.mode,l),T.return=L,T;case qn:var C=T._init;return K(L,C(T._payload),l)}if(Ls(T)||gs(T))return T=ji(T,L.mode,l,null),T.return=L,T;Sl(L,T)}return null}function M(L,T,l,C){var A=T!==null?T.key:null;if(typeof l=="string"&&l!==""||typeof l=="number")return A!==null?null:w(L,T,""+l,C);if(typeof l=="object"&&l!==null){switch(l.$$typeof){case cl:return l.key===A?f(L,T,l,C):null;case ma:return l.key===A?F(L,T,l,C):null;case qn:return A=l._init,M(L,T,A(l._payload),C)}if(Ls(l)||gs(l))return A!==null?null:I(L,T,l,C,null);Sl(L,l)}return null}function H(L,T,l,C,A){if(typeof C=="string"&&C!==""||typeof C=="number")return L=L.get(l)||null,w(T,L,""+C,A);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case cl:return L=L.get(C.key===null?l:C.key)||null,f(T,L,C,A);case ma:return L=L.get(C.key===null?l:C.key)||null,F(T,L,C,A);case qn:var d=C._init;return H(L,T,l,d(C._payload),A)}if(Ls(C)||gs(C))return L=L.get(l)||null,I(T,L,C,A,null);Sl(T,C)}return null}function B(L,T,l,C){for(var A=null,d=null,v=T,h=T=0,g=null;v!==null&&h<l.length;h++){v.index>h?(g=v,v=null):g=v.sibling;var P=M(L,v,l[h],C);if(P===null){v===null&&(v=g);break}e&&v&&P.alternate===null&&t(L,v),T=c(P,T,h),d===null?A=P:d.sibling=P,d=P,v=g}if(h===l.length)return r(L,v),ft&&Ni(L,h),A;if(v===null){for(;h<l.length;h++)v=K(L,l[h],C),v!==null&&(T=c(v,T,h),d===null?A=v:d.sibling=v,d=v);return ft&&Ni(L,h),A}for(v=a(L,v);h<l.length;h++)g=H(v,L,h,l[h],C),g!==null&&(e&&g.alternate!==null&&v.delete(g.key===null?h:g.key),T=c(g,T,h),d===null?A=g:d.sibling=g,d=g);return e&&v.forEach(function(D){return t(L,D)}),ft&&Ni(L,h),A}function k(L,T,l,C){var A=gs(l);if(typeof A!="function")throw Error(me(150));if(l=A.call(l),l==null)throw Error(me(151));for(var d=A=null,v=T,h=T=0,g=null,P=l.next();v!==null&&!P.done;h++,P=l.next()){v.index>h?(g=v,v=null):g=v.sibling;var D=M(L,v,P.value,C);if(D===null){v===null&&(v=g);break}e&&v&&D.alternate===null&&t(L,v),T=c(D,T,h),d===null?A=D:d.sibling=D,d=D,v=g}if(P.done)return r(L,v),ft&&Ni(L,h),A;if(v===null){for(;!P.done;h++,P=l.next())P=K(L,P.value,C),P!==null&&(T=c(P,T,h),d===null?A=P:d.sibling=P,d=P);return ft&&Ni(L,h),A}for(v=a(L,v);!P.done;h++,P=l.next())P=H(v,L,h,P.value,C),P!==null&&(e&&P.alternate!==null&&v.delete(P.key===null?h:P.key),T=c(P,T,h),d===null?A=P:d.sibling=P,d=P);return e&&v.forEach(function(p){return t(L,p)}),ft&&Ni(L,h),A}function N(L,T,l,C){if(typeof l=="object"&&l!==null&&l.type===ya&&l.key===null&&(l=l.props.children),typeof l=="object"&&l!==null){switch(l.$$typeof){case cl:e:{for(var A=l.key,d=T;d!==null;){if(d.key===A){if(A=l.type,A===ya){if(d.tag===7){r(L,d.sibling),T=s(d,l.props.children),T.return=L,L=T;break e}}else if(d.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===qn&&G0(A)===d.type){r(L,d.sibling),T=s(d,l.props),T.ref=_s(L,d,l),T.return=L,L=T;break e}r(L,d);break}else t(L,d);d=d.sibling}l.type===ya?(T=ji(l.props.children,L.mode,C,l.key),T.return=L,L=T):(C=Ul(l.type,l.key,l.props,null,L.mode,C),C.ref=_s(L,T,l),C.return=L,L=C)}return O(L);case ma:e:{for(d=l.key;T!==null;){if(T.key===d)if(T.tag===4&&T.stateNode.containerInfo===l.containerInfo&&T.stateNode.implementation===l.implementation){r(L,T.sibling),T=s(T,l.children||[]),T.return=L,L=T;break e}else{r(L,T);break}else t(L,T);T=T.sibling}T=Zc(l,L.mode,C),T.return=L,L=T}return O(L);case qn:return d=l._init,N(L,T,d(l._payload),C)}if(Ls(l))return B(L,T,l,C);if(gs(l))return k(L,T,l,C);Sl(L,l)}return typeof l=="string"&&l!==""||typeof l=="number"?(l=""+l,T!==null&&T.tag===6?(r(L,T.sibling),T=s(T,l),T.return=L,L=T):(r(L,T),T=Qc(l,L.mode,C),T.return=L,L=T),O(L)):r(L,T)}return N}var Wa=Qy(!0),Zy=Qy(!1),fo={},yn=xi(fo),Qs=xi(fo),Zs=xi(fo);function Gi(e){if(e===fo)throw Error(me(174));return e}function $h(e,t){switch(rt(Zs,t),rt(Qs,e),rt(yn,fo),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ed(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ed(t,e)}st(yn),rt(yn,t)}function Ga(){st(yn),st(Qs),st(Zs)}function Jy(e){Gi(Zs.current);var t=Gi(yn.current),r=Ed(t,e.type);t!==r&&(rt(Qs,e),rt(yn,r))}function Yh(e){Qs.current===e&&(st(yn),st(Qs))}var ht=xi(0);function iu(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var jc=[];function Xh(){for(var e=0;e<jc.length;e++)jc[e]._workInProgressVersionPrimary=null;jc.length=0}var Ml=Kn.ReactCurrentDispatcher,Vc=Kn.ReactCurrentBatchConfig,$i=0,vt=null,It=null,kt=null,au=!1,Ms=!1,Js=0,DR=0;function jt(){throw Error(me(321))}function Qh(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!fn(e[r],t[r]))return!1;return!0}function Zh(e,t,r,a,s,c){if($i=c,vt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ml.current=e===null||e.memoizedState===null?OR:wR,e=r(a,s),Ms){c=0;do{if(Ms=!1,Js=0,25<=c)throw Error(me(301));c+=1,kt=It=null,t.updateQueue=null,Ml.current=MR,e=r(a,s)}while(Ms)}if(Ml.current=su,t=It!==null&&It.next!==null,$i=0,kt=It=vt=null,au=!1,t)throw Error(me(300));return e}function Jh(){var e=Js!==0;return Js=0,e}function gn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?vt.memoizedState=kt=e:kt=kt.next=e,kt}function Xr(){if(It===null){var e=vt.alternate;e=e!==null?e.memoizedState:null}else e=It.next;var t=kt===null?vt.memoizedState:kt.next;if(t!==null)kt=t,It=e;else{if(e===null)throw Error(me(310));It=e,e={memoizedState:It.memoizedState,baseState:It.baseState,baseQueue:It.baseQueue,queue:It.queue,next:null},kt===null?vt.memoizedState=kt=e:kt=kt.next=e}return kt}function qs(e,t){return typeof t=="function"?t(e):t}function zc(e){var t=Xr(),r=t.queue;if(r===null)throw Error(me(311));r.lastRenderedReducer=e;var a=It,s=a.baseQueue,c=r.pending;if(c!==null){if(s!==null){var O=s.next;s.next=c.next,c.next=O}a.baseQueue=s=c,r.pending=null}if(s!==null){c=s.next,a=a.baseState;var w=O=null,f=null,F=c;do{var I=F.lane;if(($i&I)===I)f!==null&&(f=f.next={lane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),a=F.hasEagerState?F.eagerState:e(a,F.action);else{var K={lane:I,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null};f===null?(w=f=K,O=a):f=f.next=K,vt.lanes|=I,Yi|=I}F=F.next}while(F!==null&&F!==c);f===null?O=a:f.next=w,fn(a,t.memoizedState)||(dr=!0),t.memoizedState=a,t.baseState=O,t.baseQueue=f,r.lastRenderedState=a}if(e=r.interleaved,e!==null){s=e;do c=s.lane,vt.lanes|=c,Yi|=c,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function $c(e){var t=Xr(),r=t.queue;if(r===null)throw Error(me(311));r.lastRenderedReducer=e;var a=r.dispatch,s=r.pending,c=t.memoizedState;if(s!==null){r.pending=null;var O=s=s.next;do c=e(c,O.action),O=O.next;while(O!==s);fn(c,t.memoizedState)||(dr=!0),t.memoizedState=c,t.baseQueue===null&&(t.baseState=c),r.lastRenderedState=c}return[c,a]}function qy(){}function eE(e,t){var r=vt,a=Xr(),s=t(),c=!fn(a.memoizedState,s);if(c&&(a.memoizedState=s,dr=!0),a=a.queue,qh(nE.bind(null,r,a,e),[e]),a.getSnapshot!==t||c||kt!==null&&kt.memoizedState.tag&1){if(r.flags|=2048,eo(9,rE.bind(null,r,a,s,t),void 0,null),bt===null)throw Error(me(349));$i&30||tE(r,t,s)}return s}function tE(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=vt.updateQueue,t===null?(t={lastEffect:null,stores:null},vt.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function rE(e,t,r,a){t.value=r,t.getSnapshot=a,iE(t)&&aE(e)}function nE(e,t,r){return r(function(){iE(t)&&aE(e)})}function iE(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!fn(e,r)}catch{return!0}}function aE(e){var t=Nn(e,1);t!==null&&un(t,e,1,-1)}function H0(e){var t=gn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qs,lastRenderedState:e},t.queue=e,e=e.dispatch=IR.bind(null,vt,e),[t.memoizedState,e]}function eo(e,t,r,a){return e={tag:e,create:t,destroy:r,deps:a,next:null},t=vt.updateQueue,t===null?(t={lastEffect:null,stores:null},vt.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(a=r.next,r.next=e,e.next=a,t.lastEffect=e)),e}function sE(){return Xr().memoizedState}function kl(e,t,r,a){var s=gn();vt.flags|=e,s.memoizedState=eo(1|t,r,void 0,a===void 0?null:a)}function Cu(e,t,r,a){var s=Xr();a=a===void 0?null:a;var c=void 0;if(It!==null){var O=It.memoizedState;if(c=O.destroy,a!==null&&Qh(a,O.deps)){s.memoizedState=eo(t,r,c,a);return}}vt.flags|=e,s.memoizedState=eo(1|t,r,c,a)}function j0(e,t){return kl(8390656,8,e,t)}function qh(e,t){return Cu(2048,8,e,t)}function oE(e,t){return Cu(4,2,e,t)}function lE(e,t){return Cu(4,4,e,t)}function uE(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function fE(e,t,r){return r=r!=null?r.concat([e]):null,Cu(4,4,uE.bind(null,t,e),r)}function ev(){}function cE(e,t){var r=Xr();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&Qh(t,a[1])?a[0]:(r.memoizedState=[e,t],e)}function dE(e,t){var r=Xr();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&Qh(t,a[1])?a[0]:(e=e(),r.memoizedState=[e,t],e)}function hE(e,t,r){return $i&21?(fn(r,t)||(r=py(),vt.lanes|=r,Yi|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,dr=!0),e.memoizedState=r)}function RR(e,t){var r=Xe;Xe=r!==0&&4>r?r:4,e(!0);var a=Vc.transition;Vc.transition={};try{e(!1),t()}finally{Xe=r,Vc.transition=a}}function vE(){return Xr().memoizedState}function CR(e,t,r){var a=hi(e);if(r={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null},gE(e))pE(t,r);else if(r=zy(e,t,r,a),r!==null){var s=tr();un(r,e,a,s),mE(r,t,a)}}function IR(e,t,r){var a=hi(e),s={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null};if(gE(e))pE(t,s);else{var c=e.alternate;if(e.lanes===0&&(c===null||c.lanes===0)&&(c=t.lastRenderedReducer,c!==null))try{var O=t.lastRenderedState,w=c(O,r);if(s.hasEagerState=!0,s.eagerState=w,fn(w,O)){var f=t.interleaved;f===null?(s.next=s,Vh(t)):(s.next=f.next,f.next=s),t.interleaved=s;return}}catch{}finally{}r=zy(e,t,s,a),r!==null&&(s=tr(),un(r,e,a,s),mE(r,t,a))}}function gE(e){var t=e.alternate;return e===vt||t!==null&&t===vt}function pE(e,t){Ms=au=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function mE(e,t,r){if(r&4194240){var a=t.lanes;a&=e.pendingLanes,r|=a,t.lanes=r,Oh(e,r)}}var su={readContext:Yr,useCallback:jt,useContext:jt,useEffect:jt,useImperativeHandle:jt,useInsertionEffect:jt,useLayoutEffect:jt,useMemo:jt,useReducer:jt,useRef:jt,useState:jt,useDebugValue:jt,useDeferredValue:jt,useTransition:jt,useMutableSource:jt,useSyncExternalStore:jt,useId:jt,unstable_isNewReconciler:!1},OR={readContext:Yr,useCallback:function(e,t){return gn().memoizedState=[e,t===void 0?null:t],e},useContext:Yr,useEffect:j0,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,kl(4194308,4,uE.bind(null,t,e),r)},useLayoutEffect:function(e,t){return kl(4194308,4,e,t)},useInsertionEffect:function(e,t){return kl(4,2,e,t)},useMemo:function(e,t){var r=gn();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var a=gn();return t=r!==void 0?r(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=CR.bind(null,vt,e),[a.memoizedState,e]},useRef:function(e){var t=gn();return e={current:e},t.memoizedState=e},useState:H0,useDebugValue:ev,useDeferredValue:function(e){return gn().memoizedState=e},useTransition:function(){var e=H0(!1),t=e[0];return e=RR.bind(null,e[1]),gn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var a=vt,s=gn();if(ft){if(r===void 0)throw Error(me(407));r=r()}else{if(r=t(),bt===null)throw Error(me(349));$i&30||tE(a,t,r)}s.memoizedState=r;var c={value:r,getSnapshot:t};return s.queue=c,j0(nE.bind(null,a,c,e),[e]),a.flags|=2048,eo(9,rE.bind(null,a,c,r,t),void 0,null),r},useId:function(){var e=gn(),t=bt.identifierPrefix;if(ft){var r=Mn,a=wn;r=(a&~(1<<32-ln(a)-1)).toString(32)+r,t=":"+t+"R"+r,r=Js++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=DR++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},wR={readContext:Yr,useCallback:cE,useContext:Yr,useEffect:qh,useImperativeHandle:fE,useInsertionEffect:oE,useLayoutEffect:lE,useMemo:dE,useReducer:zc,useRef:sE,useState:function(){return zc(qs)},useDebugValue:ev,useDeferredValue:function(e){var t=Xr();return hE(t,It.memoizedState,e)},useTransition:function(){var e=zc(qs)[0],t=Xr().memoizedState;return[e,t]},useMutableSource:qy,useSyncExternalStore:eE,useId:vE,unstable_isNewReconciler:!1},MR={readContext:Yr,useCallback:cE,useContext:Yr,useEffect:qh,useImperativeHandle:fE,useInsertionEffect:oE,useLayoutEffect:lE,useMemo:dE,useReducer:$c,useRef:sE,useState:function(){return $c(qs)},useDebugValue:ev,useDeferredValue:function(e){var t=Xr();return It===null?t.memoizedState=e:hE(t,It.memoizedState,e)},useTransition:function(){var e=$c(qs)[0],t=Xr().memoizedState;return[e,t]},useMutableSource:qy,useSyncExternalStore:eE,useId:vE,unstable_isNewReconciler:!1};function Ha(e,t){try{var r="",a=t;do r+=oD(a),a=a.return;while(a);var s=r}catch(c){s=`
Error generating stack: `+c.message+`
`+c.stack}return{value:e,source:t,stack:s,digest:null}}function Yc(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Gd(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var kR=typeof WeakMap=="function"?WeakMap:Map;function yE(e,t,r){r=kn(-1,r),r.tag=3,r.payload={element:null};var a=t.value;return r.callback=function(){lu||(lu=!0,Jd=a),Gd(e,t)},r}function EE(e,t,r){r=kn(-1,r),r.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var s=t.value;r.payload=function(){return a(s)},r.callback=function(){Gd(e,t)}}var c=e.stateNode;return c!==null&&typeof c.componentDidCatch=="function"&&(r.callback=function(){Gd(e,t),typeof a!="function"&&(di===null?di=new Set([this]):di.add(this));var O=t.stack;this.componentDidCatch(t.value,{componentStack:O!==null?O:""})}),r}function V0(e,t,r){var a=e.pingCache;if(a===null){a=e.pingCache=new kR;var s=new Set;a.set(t,s)}else s=a.get(t),s===void 0&&(s=new Set,a.set(t,s));s.has(r)||(s.add(r),e=YR.bind(null,e,t,r),t.then(e,e))}function z0(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function $0(e,t,r,a,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=kn(-1,1),t.tag=2,ci(r,t,1))),r.lanes|=1),e)}var bR=Kn.ReactCurrentOwner,dr=!1;function er(e,t,r,a){t.child=e===null?Zy(t,null,r,a):Wa(t,e.child,r,a)}function Y0(e,t,r,a,s){r=r.render;var c=t.ref;return ka(t,s),a=Zh(e,t,r,a,c,s),r=Jh(),e!==null&&!dr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Un(e,t,s)):(ft&&r&&Bh(t),t.flags|=1,er(e,t,a,s),t.child)}function X0(e,t,r,a,s){if(e===null){var c=r.type;return typeof c=="function"&&!lv(c)&&c.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=c,_E(e,t,c,a,s)):(e=Ul(r.type,null,a,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(c=e.child,!(e.lanes&s)){var O=c.memoizedProps;if(r=r.compare,r=r!==null?r:zs,r(O,a)&&e.ref===t.ref)return Un(e,t,s)}return t.flags|=1,e=vi(c,a),e.ref=t.ref,e.return=t,t.child=e}function _E(e,t,r,a,s){if(e!==null){var c=e.memoizedProps;if(zs(c,a)&&e.ref===t.ref)if(dr=!1,t.pendingProps=a=c,(e.lanes&s)!==0)e.flags&131072&&(dr=!0);else return t.lanes=e.lanes,Un(e,t,s)}return Hd(e,t,r,a,s)}function TE(e,t,r){var a=t.pendingProps,s=a.children,c=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},rt(Ra,Pr),Pr|=r;else{if(!(r&1073741824))return e=c!==null?c.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,rt(Ra,Pr),Pr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=c!==null?c.baseLanes:r,rt(Ra,Pr),Pr|=a}else c!==null?(a=c.baseLanes|r,t.memoizedState=null):a=r,rt(Ra,Pr),Pr|=a;return er(e,t,s,r),t.child}function SE(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Hd(e,t,r,a,s){var c=vr(r)?Vi:Yt.current;return c=Ba(t,c),ka(t,s),r=Zh(e,t,r,a,c,s),a=Jh(),e!==null&&!dr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Un(e,t,s)):(ft&&a&&Bh(t),t.flags|=1,er(e,t,r,s),t.child)}function Q0(e,t,r,a,s){if(vr(r)){var c=!0;Jl(t)}else c=!1;if(ka(t,s),t.stateNode===null)bl(e,t),Xy(t,r,a),Wd(t,r,a,s),a=!0;else if(e===null){var O=t.stateNode,w=t.memoizedProps;O.props=w;var f=O.context,F=r.contextType;typeof F=="object"&&F!==null?F=Yr(F):(F=vr(r)?Vi:Yt.current,F=Ba(t,F));var I=r.getDerivedStateFromProps,K=typeof I=="function"||typeof O.getSnapshotBeforeUpdate=="function";K||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(w!==a||f!==F)&&W0(t,O,a,F),ei=!1;var M=t.memoizedState;O.state=M,nu(t,a,O,s),f=t.memoizedState,w!==a||M!==f||hr.current||ei?(typeof I=="function"&&(Kd(t,r,I,a),f=t.memoizedState),(w=ei||K0(t,r,w,a,M,f,F))?(K||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(t.flags|=4194308)):(typeof O.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=f),O.props=a,O.state=f,O.context=F,a=w):(typeof O.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{O=t.stateNode,$y(e,t),w=t.memoizedProps,F=t.type===t.elementType?w:rn(t.type,w),O.props=F,K=t.pendingProps,M=O.context,f=r.contextType,typeof f=="object"&&f!==null?f=Yr(f):(f=vr(r)?Vi:Yt.current,f=Ba(t,f));var H=r.getDerivedStateFromProps;(I=typeof H=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(w!==K||M!==f)&&W0(t,O,a,f),ei=!1,M=t.memoizedState,O.state=M,nu(t,a,O,s);var B=t.memoizedState;w!==K||M!==B||hr.current||ei?(typeof H=="function"&&(Kd(t,r,H,a),B=t.memoizedState),(F=ei||K0(t,r,F,a,M,B,f)||!1)?(I||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(a,B,f),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(a,B,f)),typeof O.componentDidUpdate=="function"&&(t.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof O.componentDidUpdate!="function"||w===e.memoizedProps&&M===e.memoizedState||(t.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||w===e.memoizedProps&&M===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=B),O.props=a,O.state=B,O.context=f,a=F):(typeof O.componentDidUpdate!="function"||w===e.memoizedProps&&M===e.memoizedState||(t.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||w===e.memoizedProps&&M===e.memoizedState||(t.flags|=1024),a=!1)}return jd(e,t,r,a,c,s)}function jd(e,t,r,a,s,c){SE(e,t);var O=(t.flags&128)!==0;if(!a&&!O)return s&&b0(t,r,!1),Un(e,t,c);a=t.stateNode,bR.current=t;var w=O&&typeof r.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&O?(t.child=Wa(t,e.child,null,c),t.child=Wa(t,null,w,c)):er(e,t,w,c),t.memoizedState=a.state,s&&b0(t,r,!0),t.child}function xE(e){var t=e.stateNode;t.pendingContext?k0(e,t.pendingContext,t.pendingContext!==t.context):t.context&&k0(e,t.context,!1),$h(e,t.containerInfo)}function Z0(e,t,r,a,s){return Ka(),Wh(s),t.flags|=256,er(e,t,r,a),t.child}var Vd={dehydrated:null,treeContext:null,retryLane:0};function zd(e){return{baseLanes:e,cachePool:null,transitions:null}}function LE(e,t,r){var a=t.pendingProps,s=ht.current,c=!1,O=(t.flags&128)!==0,w;if((w=O)||(w=e!==null&&e.memoizedState===null?!1:(s&2)!==0),w?(c=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),rt(ht,s&1),e===null)return Ud(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(O=a.children,e=a.fallback,c?(a=t.mode,c=t.child,O={mode:"hidden",children:O},!(a&1)&&c!==null?(c.childLanes=0,c.pendingProps=O):c=wu(O,a,0,null),e=ji(e,a,r,null),c.return=t,e.return=t,c.sibling=e,t.child=c,t.child.memoizedState=zd(r),t.memoizedState=Vd,e):tv(t,O));if(s=e.memoizedState,s!==null&&(w=s.dehydrated,w!==null))return FR(e,t,O,a,w,s,r);if(c){c=a.fallback,O=t.mode,s=e.child,w=s.sibling;var f={mode:"hidden",children:a.children};return!(O&1)&&t.child!==s?(a=t.child,a.childLanes=0,a.pendingProps=f,t.deletions=null):(a=vi(s,f),a.subtreeFlags=s.subtreeFlags&14680064),w!==null?c=vi(w,c):(c=ji(c,O,r,null),c.flags|=2),c.return=t,a.return=t,a.sibling=c,t.child=a,a=c,c=t.child,O=e.child.memoizedState,O=O===null?zd(r):{baseLanes:O.baseLanes|r,cachePool:null,transitions:O.transitions},c.memoizedState=O,c.childLanes=e.childLanes&~r,t.memoizedState=Vd,a}return c=e.child,e=c.sibling,a=vi(c,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=r),a.return=t,a.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=a,t.memoizedState=null,a}function tv(e,t){return t=wu({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function xl(e,t,r,a){return a!==null&&Wh(a),Wa(t,e.child,null,r),e=tv(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function FR(e,t,r,a,s,c,O){if(r)return t.flags&256?(t.flags&=-257,a=Yc(Error(me(422))),xl(e,t,O,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(c=a.fallback,s=t.mode,a=wu({mode:"visible",children:a.children},s,0,null),c=ji(c,s,O,null),c.flags|=2,a.return=t,c.return=t,a.sibling=c,t.child=a,t.mode&1&&Wa(t,e.child,null,O),t.child.memoizedState=zd(O),t.memoizedState=Vd,c);if(!(t.mode&1))return xl(e,t,O,null);if(s.data==="$!"){if(a=s.nextSibling&&s.nextSibling.dataset,a)var w=a.dgst;return a=w,c=Error(me(419)),a=Yc(c,a,void 0),xl(e,t,O,a)}if(w=(O&e.childLanes)!==0,dr||w){if(a=bt,a!==null){switch(O&-O){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(a.suspendedLanes|O)?0:s,s!==0&&s!==c.retryLane&&(c.retryLane=s,Nn(e,s),un(a,e,s,-1))}return ov(),a=Yc(Error(me(421))),xl(e,t,O,a)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=XR.bind(null,e),s._reactRetry=t,null):(e=c.treeContext,Dr=fi(s.nextSibling),Cr=t,ft=!0,an=null,e!==null&&(jr[Vr++]=wn,jr[Vr++]=Mn,jr[Vr++]=zi,wn=e.id,Mn=e.overflow,zi=t),t=tv(t,a.children),t.flags|=4096,t)}function J0(e,t,r){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),Bd(e.return,t,r)}function Xc(e,t,r,a,s){var c=e.memoizedState;c===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:r,tailMode:s}:(c.isBackwards=t,c.rendering=null,c.renderingStartTime=0,c.last=a,c.tail=r,c.tailMode=s)}function AE(e,t,r){var a=t.pendingProps,s=a.revealOrder,c=a.tail;if(er(e,t,a.children,r),a=ht.current,a&2)a=a&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&J0(e,r,t);else if(e.tag===19)J0(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(rt(ht,a),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&iu(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),Xc(t,!1,s,r,c);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&iu(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}Xc(t,!0,r,null,c);break;case"together":Xc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function bl(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Un(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Yi|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(me(153));if(t.child!==null){for(e=t.child,r=vi(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=vi(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function NR(e,t,r){switch(t.tag){case 3:xE(t),Ka();break;case 5:Jy(t);break;case 1:vr(t.type)&&Jl(t);break;case 4:$h(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,s=t.memoizedProps.value;rt(tu,a._currentValue),a._currentValue=s;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(rt(ht,ht.current&1),t.flags|=128,null):r&t.child.childLanes?LE(e,t,r):(rt(ht,ht.current&1),e=Un(e,t,r),e!==null?e.sibling:null);rt(ht,ht.current&1);break;case 19:if(a=(r&t.childLanes)!==0,e.flags&128){if(a)return AE(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),rt(ht,ht.current),a)break;return null;case 22:case 23:return t.lanes=0,TE(e,t,r)}return Un(e,t,r)}var PE,$d,DE,RE;PE=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};$d=function(){};DE=function(e,t,r,a){var s=e.memoizedProps;if(s!==a){e=t.stateNode,Gi(yn.current);var c=null;switch(r){case"input":s=gd(e,s),a=gd(e,a),c=[];break;case"select":s=gt({},s,{value:void 0}),a=gt({},a,{value:void 0}),c=[];break;case"textarea":s=yd(e,s),a=yd(e,a),c=[];break;default:typeof s.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=Ql)}_d(r,a);var O;r=null;for(F in s)if(!a.hasOwnProperty(F)&&s.hasOwnProperty(F)&&s[F]!=null)if(F==="style"){var w=s[F];for(O in w)w.hasOwnProperty(O)&&(r||(r={}),r[O]="")}else F!=="dangerouslySetInnerHTML"&&F!=="children"&&F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&F!=="autoFocus"&&(Bs.hasOwnProperty(F)?c||(c=[]):(c=c||[]).push(F,null));for(F in a){var f=a[F];if(w=s!=null?s[F]:void 0,a.hasOwnProperty(F)&&f!==w&&(f!=null||w!=null))if(F==="style")if(w){for(O in w)!w.hasOwnProperty(O)||f&&f.hasOwnProperty(O)||(r||(r={}),r[O]="");for(O in f)f.hasOwnProperty(O)&&w[O]!==f[O]&&(r||(r={}),r[O]=f[O])}else r||(c||(c=[]),c.push(F,r)),r=f;else F==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,w=w?w.__html:void 0,f!=null&&w!==f&&(c=c||[]).push(F,f)):F==="children"?typeof f!="string"&&typeof f!="number"||(c=c||[]).push(F,""+f):F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&(Bs.hasOwnProperty(F)?(f!=null&&F==="onScroll"&&at("scroll",e),c||w===f||(c=[])):(c=c||[]).push(F,f))}r&&(c=c||[]).push("style",r);var F=c;(t.updateQueue=F)&&(t.flags|=4)}};RE=function(e,t,r,a){r!==a&&(t.flags|=4)};function Ts(e,t){if(!ft)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Vt(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,a=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,a|=s.subtreeFlags&14680064,a|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,a|=s.subtreeFlags,a|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=a,e.childLanes=r,t}function UR(e,t,r){var a=t.pendingProps;switch(Kh(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vt(t),null;case 1:return vr(t.type)&&Zl(),Vt(t),null;case 3:return a=t.stateNode,Ga(),st(hr),st(Yt),Xh(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Tl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,an!==null&&(th(an),an=null))),$d(e,t),Vt(t),null;case 5:Yh(t);var s=Gi(Zs.current);if(r=t.type,e!==null&&t.stateNode!=null)DE(e,t,r,a,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(me(166));return Vt(t),null}if(e=Gi(yn.current),Tl(t)){a=t.stateNode,r=t.type;var c=t.memoizedProps;switch(a[pn]=t,a[Xs]=c,e=(t.mode&1)!==0,r){case"dialog":at("cancel",a),at("close",a);break;case"iframe":case"object":case"embed":at("load",a);break;case"video":case"audio":for(s=0;s<Ps.length;s++)at(Ps[s],a);break;case"source":at("error",a);break;case"img":case"image":case"link":at("error",a),at("load",a);break;case"details":at("toggle",a);break;case"input":o0(a,c),at("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!c.multiple},at("invalid",a);break;case"textarea":u0(a,c),at("invalid",a)}_d(r,c),s=null;for(var O in c)if(c.hasOwnProperty(O)){var w=c[O];O==="children"?typeof w=="string"?a.textContent!==w&&(c.suppressHydrationWarning!==!0&&_l(a.textContent,w,e),s=["children",w]):typeof w=="number"&&a.textContent!==""+w&&(c.suppressHydrationWarning!==!0&&_l(a.textContent,w,e),s=["children",""+w]):Bs.hasOwnProperty(O)&&w!=null&&O==="onScroll"&&at("scroll",a)}switch(r){case"input":dl(a),l0(a,c,!0);break;case"textarea":dl(a),f0(a);break;case"select":case"option":break;default:typeof c.onClick=="function"&&(a.onclick=Ql)}a=s,t.updateQueue=a,a!==null&&(t.flags|=4)}else{O=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ty(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=O.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=O.createElement(r,{is:a.is}):(e=O.createElement(r),r==="select"&&(O=e,a.multiple?O.multiple=!0:a.size&&(O.size=a.size))):e=O.createElementNS(e,r),e[pn]=t,e[Xs]=a,PE(e,t,!1,!1),t.stateNode=e;e:{switch(O=Td(r,a),r){case"dialog":at("cancel",e),at("close",e),s=a;break;case"iframe":case"object":case"embed":at("load",e),s=a;break;case"video":case"audio":for(s=0;s<Ps.length;s++)at(Ps[s],e);s=a;break;case"source":at("error",e),s=a;break;case"img":case"image":case"link":at("error",e),at("load",e),s=a;break;case"details":at("toggle",e),s=a;break;case"input":o0(e,a),s=gd(e,a),at("invalid",e);break;case"option":s=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},s=gt({},a,{value:void 0}),at("invalid",e);break;case"textarea":u0(e,a),s=yd(e,a),at("invalid",e);break;default:s=a}_d(r,s),w=s;for(c in w)if(w.hasOwnProperty(c)){var f=w[c];c==="style"?iy(e,f):c==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,f!=null&&ry(e,f)):c==="children"?typeof f=="string"?(r!=="textarea"||f!=="")&&Ks(e,f):typeof f=="number"&&Ks(e,""+f):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Bs.hasOwnProperty(c)?f!=null&&c==="onScroll"&&at("scroll",e):f!=null&&Ah(e,c,f,O))}switch(r){case"input":dl(e),l0(e,a,!1);break;case"textarea":dl(e),f0(e);break;case"option":a.value!=null&&e.setAttribute("value",""+yi(a.value));break;case"select":e.multiple=!!a.multiple,c=a.value,c!=null?Ia(e,!!a.multiple,c,!1):a.defaultValue!=null&&Ia(e,!!a.multiple,a.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Ql)}switch(r){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Vt(t),null;case 6:if(e&&t.stateNode!=null)RE(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(me(166));if(r=Gi(Zs.current),Gi(yn.current),Tl(t)){if(a=t.stateNode,r=t.memoizedProps,a[pn]=t,(c=a.nodeValue!==r)&&(e=Cr,e!==null))switch(e.tag){case 3:_l(a.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&_l(a.nodeValue,r,(e.mode&1)!==0)}c&&(t.flags|=4)}else a=(r.nodeType===9?r:r.ownerDocument).createTextNode(a),a[pn]=t,t.stateNode=a}return Vt(t),null;case 13:if(st(ht),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ft&&Dr!==null&&t.mode&1&&!(t.flags&128))Vy(),Ka(),t.flags|=98560,c=!1;else if(c=Tl(t),a!==null&&a.dehydrated!==null){if(e===null){if(!c)throw Error(me(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(me(317));c[pn]=t}else Ka(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Vt(t),c=!1}else an!==null&&(th(an),an=null),c=!0;if(!c)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(e===null||ht.current&1?Ot===0&&(Ot=3):ov())),t.updateQueue!==null&&(t.flags|=4),Vt(t),null);case 4:return Ga(),$d(e,t),e===null&&$s(t.stateNode.containerInfo),Vt(t),null;case 10:return jh(t.type._context),Vt(t),null;case 17:return vr(t.type)&&Zl(),Vt(t),null;case 19:if(st(ht),c=t.memoizedState,c===null)return Vt(t),null;if(a=(t.flags&128)!==0,O=c.rendering,O===null)if(a)Ts(c,!1);else{if(Ot!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(O=iu(e),O!==null){for(t.flags|=128,Ts(c,!1),a=O.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=r,r=t.child;r!==null;)c=r,e=a,c.flags&=14680066,O=c.alternate,O===null?(c.childLanes=0,c.lanes=e,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=O.childLanes,c.lanes=O.lanes,c.child=O.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=O.memoizedProps,c.memoizedState=O.memoizedState,c.updateQueue=O.updateQueue,c.type=O.type,e=O.dependencies,c.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return rt(ht,ht.current&1|2),t.child}e=e.sibling}c.tail!==null&&xt()>ja&&(t.flags|=128,a=!0,Ts(c,!1),t.lanes=4194304)}else{if(!a)if(e=iu(O),e!==null){if(t.flags|=128,a=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Ts(c,!0),c.tail===null&&c.tailMode==="hidden"&&!O.alternate&&!ft)return Vt(t),null}else 2*xt()-c.renderingStartTime>ja&&r!==1073741824&&(t.flags|=128,a=!0,Ts(c,!1),t.lanes=4194304);c.isBackwards?(O.sibling=t.child,t.child=O):(r=c.last,r!==null?r.sibling=O:t.child=O,c.last=O)}return c.tail!==null?(t=c.tail,c.rendering=t,c.tail=t.sibling,c.renderingStartTime=xt(),t.sibling=null,r=ht.current,rt(ht,a?r&1|2:r&1),t):(Vt(t),null);case 22:case 23:return sv(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?Pr&1073741824&&(Vt(t),t.subtreeFlags&6&&(t.flags|=8192)):Vt(t),null;case 24:return null;case 25:return null}throw Error(me(156,t.tag))}function BR(e,t){switch(Kh(t),t.tag){case 1:return vr(t.type)&&Zl(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Ga(),st(hr),st(Yt),Xh(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Yh(t),null;case 13:if(st(ht),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(me(340));Ka()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return st(ht),null;case 4:return Ga(),null;case 10:return jh(t.type._context),null;case 22:case 23:return sv(),null;case 24:return null;default:return null}}var Ll=!1,$t=!1,KR=typeof WeakSet=="function"?WeakSet:Set,xe=null;function Da(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(a){yt(e,t,a)}else r.current=null}function Yd(e,t,r){try{r()}catch(a){yt(e,t,a)}}var q0=!1;function WR(e,t){if(Od=$l,e=wy(),Uh(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var a=r.getSelection&&r.getSelection();if(a&&a.rangeCount!==0){r=a.anchorNode;var s=a.anchorOffset,c=a.focusNode;a=a.focusOffset;try{r.nodeType,c.nodeType}catch{r=null;break e}var O=0,w=-1,f=-1,F=0,I=0,K=e,M=null;t:for(;;){for(var H;K!==r||s!==0&&K.nodeType!==3||(w=O+s),K!==c||a!==0&&K.nodeType!==3||(f=O+a),K.nodeType===3&&(O+=K.nodeValue.length),(H=K.firstChild)!==null;)M=K,K=H;for(;;){if(K===e)break t;if(M===r&&++F===s&&(w=O),M===c&&++I===a&&(f=O),(H=K.nextSibling)!==null)break;K=M,M=K.parentNode}K=H}r=w===-1||f===-1?null:{start:w,end:f}}else r=null}r=r||{start:0,end:0}}else r=null;for(wd={focusedElem:e,selectionRange:r},$l=!1,xe=t;xe!==null;)if(t=xe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,xe=e;else for(;xe!==null;){t=xe;try{var B=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(B!==null){var k=B.memoizedProps,N=B.memoizedState,L=t.stateNode,T=L.getSnapshotBeforeUpdate(t.elementType===t.type?k:rn(t.type,k),N);L.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var l=t.stateNode.containerInfo;l.nodeType===1?l.textContent="":l.nodeType===9&&l.documentElement&&l.removeChild(l.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(me(163))}}catch(C){yt(t,t.return,C)}if(e=t.sibling,e!==null){e.return=t.return,xe=e;break}xe=t.return}return B=q0,q0=!1,B}function ks(e,t,r){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var s=a=a.next;do{if((s.tag&e)===e){var c=s.destroy;s.destroy=void 0,c!==void 0&&Yd(t,r,c)}s=s.next}while(s!==a)}}function Iu(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var a=r.create;r.destroy=a()}r=r.next}while(r!==t)}}function Xd(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function CE(e){var t=e.alternate;t!==null&&(e.alternate=null,CE(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[pn],delete t[Xs],delete t[bd],delete t[xR],delete t[LR])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function IE(e){return e.tag===5||e.tag===3||e.tag===4}function em(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||IE(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Qd(e,t,r){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Ql));else if(a!==4&&(e=e.child,e!==null))for(Qd(e,t,r),e=e.sibling;e!==null;)Qd(e,t,r),e=e.sibling}function Zd(e,t,r){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(Zd(e,t,r),e=e.sibling;e!==null;)Zd(e,t,r),e=e.sibling}var Bt=null,nn=!1;function Jn(e,t,r){for(r=r.child;r!==null;)OE(e,t,r),r=r.sibling}function OE(e,t,r){if(mn&&typeof mn.onCommitFiberUnmount=="function")try{mn.onCommitFiberUnmount(Su,r)}catch{}switch(r.tag){case 5:$t||Da(r,t);case 6:var a=Bt,s=nn;Bt=null,Jn(e,t,r),Bt=a,nn=s,Bt!==null&&(nn?(e=Bt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Bt.removeChild(r.stateNode));break;case 18:Bt!==null&&(nn?(e=Bt,r=r.stateNode,e.nodeType===8?Gc(e.parentNode,r):e.nodeType===1&&Gc(e,r),js(e)):Gc(Bt,r.stateNode));break;case 4:a=Bt,s=nn,Bt=r.stateNode.containerInfo,nn=!0,Jn(e,t,r),Bt=a,nn=s;break;case 0:case 11:case 14:case 15:if(!$t&&(a=r.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){s=a=a.next;do{var c=s,O=c.destroy;c=c.tag,O!==void 0&&(c&2||c&4)&&Yd(r,t,O),s=s.next}while(s!==a)}Jn(e,t,r);break;case 1:if(!$t&&(Da(r,t),a=r.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=r.memoizedProps,a.state=r.memoizedState,a.componentWillUnmount()}catch(w){yt(r,t,w)}Jn(e,t,r);break;case 21:Jn(e,t,r);break;case 22:r.mode&1?($t=(a=$t)||r.memoizedState!==null,Jn(e,t,r),$t=a):Jn(e,t,r);break;default:Jn(e,t,r)}}function tm(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new KR),t.forEach(function(a){var s=QR.bind(null,e,a);r.has(a)||(r.add(a),a.then(s,s))})}}function tn(e,t){var r=t.deletions;if(r!==null)for(var a=0;a<r.length;a++){var s=r[a];try{var c=e,O=t,w=O;e:for(;w!==null;){switch(w.tag){case 5:Bt=w.stateNode,nn=!1;break e;case 3:Bt=w.stateNode.containerInfo,nn=!0;break e;case 4:Bt=w.stateNode.containerInfo,nn=!0;break e}w=w.return}if(Bt===null)throw Error(me(160));OE(c,O,s),Bt=null,nn=!1;var f=s.alternate;f!==null&&(f.return=null),s.return=null}catch(F){yt(s,t,F)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)wE(t,e),t=t.sibling}function wE(e,t){var r=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(tn(t,e),vn(e),a&4){try{ks(3,e,e.return),Iu(3,e)}catch(k){yt(e,e.return,k)}try{ks(5,e,e.return)}catch(k){yt(e,e.return,k)}}break;case 1:tn(t,e),vn(e),a&512&&r!==null&&Da(r,r.return);break;case 5:if(tn(t,e),vn(e),a&512&&r!==null&&Da(r,r.return),e.flags&32){var s=e.stateNode;try{Ks(s,"")}catch(k){yt(e,e.return,k)}}if(a&4&&(s=e.stateNode,s!=null)){var c=e.memoizedProps,O=r!==null?r.memoizedProps:c,w=e.type,f=e.updateQueue;if(e.updateQueue=null,f!==null)try{w==="input"&&c.type==="radio"&&c.name!=null&&qm(s,c),Td(w,O);var F=Td(w,c);for(O=0;O<f.length;O+=2){var I=f[O],K=f[O+1];I==="style"?iy(s,K):I==="dangerouslySetInnerHTML"?ry(s,K):I==="children"?Ks(s,K):Ah(s,I,K,F)}switch(w){case"input":pd(s,c);break;case"textarea":ey(s,c);break;case"select":var M=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!c.multiple;var H=c.value;H!=null?Ia(s,!!c.multiple,H,!1):M!==!!c.multiple&&(c.defaultValue!=null?Ia(s,!!c.multiple,c.defaultValue,!0):Ia(s,!!c.multiple,c.multiple?[]:"",!1))}s[Xs]=c}catch(k){yt(e,e.return,k)}}break;case 6:if(tn(t,e),vn(e),a&4){if(e.stateNode===null)throw Error(me(162));s=e.stateNode,c=e.memoizedProps;try{s.nodeValue=c}catch(k){yt(e,e.return,k)}}break;case 3:if(tn(t,e),vn(e),a&4&&r!==null&&r.memoizedState.isDehydrated)try{js(t.containerInfo)}catch(k){yt(e,e.return,k)}break;case 4:tn(t,e),vn(e);break;case 13:tn(t,e),vn(e),s=e.child,s.flags&8192&&(c=s.memoizedState!==null,s.stateNode.isHidden=c,!c||s.alternate!==null&&s.alternate.memoizedState!==null||(iv=xt())),a&4&&tm(e);break;case 22:if(I=r!==null&&r.memoizedState!==null,e.mode&1?($t=(F=$t)||I,tn(t,e),$t=F):tn(t,e),vn(e),a&8192){if(F=e.memoizedState!==null,(e.stateNode.isHidden=F)&&!I&&e.mode&1)for(xe=e,I=e.child;I!==null;){for(K=xe=I;xe!==null;){switch(M=xe,H=M.child,M.tag){case 0:case 11:case 14:case 15:ks(4,M,M.return);break;case 1:Da(M,M.return);var B=M.stateNode;if(typeof B.componentWillUnmount=="function"){a=M,r=M.return;try{t=a,B.props=t.memoizedProps,B.state=t.memoizedState,B.componentWillUnmount()}catch(k){yt(a,r,k)}}break;case 5:Da(M,M.return);break;case 22:if(M.memoizedState!==null){nm(K);continue}}H!==null?(H.return=M,xe=H):nm(K)}I=I.sibling}e:for(I=null,K=e;;){if(K.tag===5){if(I===null){I=K;try{s=K.stateNode,F?(c=s.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none"):(w=K.stateNode,f=K.memoizedProps.style,O=f!=null&&f.hasOwnProperty("display")?f.display:null,w.style.display=ny("display",O))}catch(k){yt(e,e.return,k)}}}else if(K.tag===6){if(I===null)try{K.stateNode.nodeValue=F?"":K.memoizedProps}catch(k){yt(e,e.return,k)}}else if((K.tag!==22&&K.tag!==23||K.memoizedState===null||K===e)&&K.child!==null){K.child.return=K,K=K.child;continue}if(K===e)break e;for(;K.sibling===null;){if(K.return===null||K.return===e)break e;I===K&&(I=null),K=K.return}I===K&&(I=null),K.sibling.return=K.return,K=K.sibling}}break;case 19:tn(t,e),vn(e),a&4&&tm(e);break;case 21:break;default:tn(t,e),vn(e)}}function vn(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(IE(r)){var a=r;break e}r=r.return}throw Error(me(160))}switch(a.tag){case 5:var s=a.stateNode;a.flags&32&&(Ks(s,""),a.flags&=-33);var c=em(e);Zd(e,c,s);break;case 3:case 4:var O=a.stateNode.containerInfo,w=em(e);Qd(e,w,O);break;default:throw Error(me(161))}}catch(f){yt(e,e.return,f)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function GR(e,t,r){xe=e,ME(e)}function ME(e,t,r){for(var a=(e.mode&1)!==0;xe!==null;){var s=xe,c=s.child;if(s.tag===22&&a){var O=s.memoizedState!==null||Ll;if(!O){var w=s.alternate,f=w!==null&&w.memoizedState!==null||$t;w=Ll;var F=$t;if(Ll=O,($t=f)&&!F)for(xe=s;xe!==null;)O=xe,f=O.child,O.tag===22&&O.memoizedState!==null?im(s):f!==null?(f.return=O,xe=f):im(s);for(;c!==null;)xe=c,ME(c),c=c.sibling;xe=s,Ll=w,$t=F}rm(e)}else s.subtreeFlags&8772&&c!==null?(c.return=s,xe=c):rm(e)}}function rm(e){for(;xe!==null;){var t=xe;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:$t||Iu(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!$t)if(r===null)a.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:rn(t.type,r.memoizedProps);a.componentDidUpdate(s,r.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var c=t.updateQueue;c!==null&&B0(t,c,a);break;case 3:var O=t.updateQueue;if(O!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}B0(t,O,r)}break;case 5:var w=t.stateNode;if(r===null&&t.flags&4){r=w;var f=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":f.autoFocus&&r.focus();break;case"img":f.src&&(r.src=f.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var F=t.alternate;if(F!==null){var I=F.memoizedState;if(I!==null){var K=I.dehydrated;K!==null&&js(K)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(me(163))}$t||t.flags&512&&Xd(t)}catch(M){yt(t,t.return,M)}}if(t===e){xe=null;break}if(r=t.sibling,r!==null){r.return=t.return,xe=r;break}xe=t.return}}function nm(e){for(;xe!==null;){var t=xe;if(t===e){xe=null;break}var r=t.sibling;if(r!==null){r.return=t.return,xe=r;break}xe=t.return}}function im(e){for(;xe!==null;){var t=xe;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Iu(4,t)}catch(f){yt(t,r,f)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var s=t.return;try{a.componentDidMount()}catch(f){yt(t,s,f)}}var c=t.return;try{Xd(t)}catch(f){yt(t,c,f)}break;case 5:var O=t.return;try{Xd(t)}catch(f){yt(t,O,f)}}}catch(f){yt(t,t.return,f)}if(t===e){xe=null;break}var w=t.sibling;if(w!==null){w.return=t.return,xe=w;break}xe=t.return}}var HR=Math.ceil,ou=Kn.ReactCurrentDispatcher,rv=Kn.ReactCurrentOwner,$r=Kn.ReactCurrentBatchConfig,je=0,bt=null,At=null,Kt=0,Pr=0,Ra=xi(0),Ot=0,to=null,Yi=0,Ou=0,nv=0,bs=null,cr=null,iv=0,ja=1/0,In=null,lu=!1,Jd=null,di=null,Al=!1,ai=null,uu=0,Fs=0,qd=null,Fl=-1,Nl=0;function tr(){return je&6?xt():Fl!==-1?Fl:Fl=xt()}function hi(e){return e.mode&1?je&2&&Kt!==0?Kt&-Kt:PR.transition!==null?(Nl===0&&(Nl=py()),Nl):(e=Xe,e!==0||(e=window.event,e=e===void 0?16:xy(e.type)),e):1}function un(e,t,r,a){if(50<Fs)throw Fs=0,qd=null,Error(me(185));oo(e,r,a),(!(je&2)||e!==bt)&&(e===bt&&(!(je&2)&&(Ou|=r),Ot===4&&ri(e,Kt)),gr(e,a),r===1&&je===0&&!(t.mode&1)&&(ja=xt()+500,Du&&Li()))}function gr(e,t){var r=e.callbackNode;PD(e,t);var a=zl(e,e===bt?Kt:0);if(a===0)r!==null&&h0(r),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(r!=null&&h0(r),t===1)e.tag===0?AR(am.bind(null,e)):Gy(am.bind(null,e)),TR(function(){!(je&6)&&Li()}),r=null;else{switch(my(a)){case 1:r=Ih;break;case 4:r=vy;break;case 16:r=Vl;break;case 536870912:r=gy;break;default:r=Vl}r=WE(r,kE.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function kE(e,t){if(Fl=-1,Nl=0,je&6)throw Error(me(327));var r=e.callbackNode;if(ba()&&e.callbackNode!==r)return null;var a=zl(e,e===bt?Kt:0);if(a===0)return null;if(a&30||a&e.expiredLanes||t)t=fu(e,a);else{t=a;var s=je;je|=2;var c=FE();(bt!==e||Kt!==t)&&(In=null,ja=xt()+500,Hi(e,t));do try{zR();break}catch(w){bE(e,w)}while(1);Hh(),ou.current=c,je=s,At!==null?t=0:(bt=null,Kt=0,t=Ot)}if(t!==0){if(t===2&&(s=Pd(e),s!==0&&(a=s,t=eh(e,s))),t===1)throw r=to,Hi(e,0),ri(e,a),gr(e,xt()),r;if(t===6)ri(e,a);else{if(s=e.current.alternate,!(a&30)&&!jR(s)&&(t=fu(e,a),t===2&&(c=Pd(e),c!==0&&(a=c,t=eh(e,c))),t===1))throw r=to,Hi(e,0),ri(e,a),gr(e,xt()),r;switch(e.finishedWork=s,e.finishedLanes=a,t){case 0:case 1:throw Error(me(345));case 2:Ui(e,cr,In);break;case 3:if(ri(e,a),(a&130023424)===a&&(t=iv+500-xt(),10<t)){if(zl(e,0)!==0)break;if(s=e.suspendedLanes,(s&a)!==a){tr(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=kd(Ui.bind(null,e,cr,In),t);break}Ui(e,cr,In);break;case 4:if(ri(e,a),(a&4194240)===a)break;for(t=e.eventTimes,s=-1;0<a;){var O=31-ln(a);c=1<<O,O=t[O],O>s&&(s=O),a&=~c}if(a=s,a=xt()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*HR(a/1960))-a,10<a){e.timeoutHandle=kd(Ui.bind(null,e,cr,In),a);break}Ui(e,cr,In);break;case 5:Ui(e,cr,In);break;default:throw Error(me(329))}}}return gr(e,xt()),e.callbackNode===r?kE.bind(null,e):null}function eh(e,t){var r=bs;return e.current.memoizedState.isDehydrated&&(Hi(e,t).flags|=256),e=fu(e,t),e!==2&&(t=cr,cr=r,t!==null&&th(t)),e}function th(e){cr===null?cr=e:cr.push.apply(cr,e)}function jR(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var a=0;a<r.length;a++){var s=r[a],c=s.getSnapshot;s=s.value;try{if(!fn(c(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ri(e,t){for(t&=~nv,t&=~Ou,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ln(t),a=1<<r;e[r]=-1,t&=~a}}function am(e){if(je&6)throw Error(me(327));ba();var t=zl(e,0);if(!(t&1))return gr(e,xt()),null;var r=fu(e,t);if(e.tag!==0&&r===2){var a=Pd(e);a!==0&&(t=a,r=eh(e,a))}if(r===1)throw r=to,Hi(e,0),ri(e,t),gr(e,xt()),r;if(r===6)throw Error(me(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ui(e,cr,In),gr(e,xt()),null}function av(e,t){var r=je;je|=1;try{return e(t)}finally{je=r,je===0&&(ja=xt()+500,Du&&Li())}}function Xi(e){ai!==null&&ai.tag===0&&!(je&6)&&ba();var t=je;je|=1;var r=$r.transition,a=Xe;try{if($r.transition=null,Xe=1,e)return e()}finally{Xe=a,$r.transition=r,je=t,!(je&6)&&Li()}}function sv(){Pr=Ra.current,st(Ra)}function Hi(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,_R(r)),At!==null)for(r=At.return;r!==null;){var a=r;switch(Kh(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&Zl();break;case 3:Ga(),st(hr),st(Yt),Xh();break;case 5:Yh(a);break;case 4:Ga();break;case 13:st(ht);break;case 19:st(ht);break;case 10:jh(a.type._context);break;case 22:case 23:sv()}r=r.return}if(bt=e,At=e=vi(e.current,null),Kt=Pr=t,Ot=0,to=null,nv=Ou=Yi=0,cr=bs=null,Wi!==null){for(t=0;t<Wi.length;t++)if(r=Wi[t],a=r.interleaved,a!==null){r.interleaved=null;var s=a.next,c=r.pending;if(c!==null){var O=c.next;c.next=s,a.next=O}r.pending=a}Wi=null}return e}function bE(e,t){do{var r=At;try{if(Hh(),Ml.current=su,au){for(var a=vt.memoizedState;a!==null;){var s=a.queue;s!==null&&(s.pending=null),a=a.next}au=!1}if($i=0,kt=It=vt=null,Ms=!1,Js=0,rv.current=null,r===null||r.return===null){Ot=1,to=t,At=null;break}e:{var c=e,O=r.return,w=r,f=t;if(t=Kt,w.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){var F=f,I=w,K=I.tag;if(!(I.mode&1)&&(K===0||K===11||K===15)){var M=I.alternate;M?(I.updateQueue=M.updateQueue,I.memoizedState=M.memoizedState,I.lanes=M.lanes):(I.updateQueue=null,I.memoizedState=null)}var H=z0(O);if(H!==null){H.flags&=-257,$0(H,O,w,c,t),H.mode&1&&V0(c,F,t),t=H,f=F;var B=t.updateQueue;if(B===null){var k=new Set;k.add(f),t.updateQueue=k}else B.add(f);break e}else{if(!(t&1)){V0(c,F,t),ov();break e}f=Error(me(426))}}else if(ft&&w.mode&1){var N=z0(O);if(N!==null){!(N.flags&65536)&&(N.flags|=256),$0(N,O,w,c,t),Wh(Ha(f,w));break e}}c=f=Ha(f,w),Ot!==4&&(Ot=2),bs===null?bs=[c]:bs.push(c),c=O;do{switch(c.tag){case 3:c.flags|=65536,t&=-t,c.lanes|=t;var L=yE(c,f,t);U0(c,L);break e;case 1:w=f;var T=c.type,l=c.stateNode;if(!(c.flags&128)&&(typeof T.getDerivedStateFromError=="function"||l!==null&&typeof l.componentDidCatch=="function"&&(di===null||!di.has(l)))){c.flags|=65536,t&=-t,c.lanes|=t;var C=EE(c,w,t);U0(c,C);break e}}c=c.return}while(c!==null)}UE(r)}catch(A){t=A,At===r&&r!==null&&(At=r=r.return);continue}break}while(1)}function FE(){var e=ou.current;return ou.current=su,e===null?su:e}function ov(){(Ot===0||Ot===3||Ot===2)&&(Ot=4),bt===null||!(Yi&268435455)&&!(Ou&268435455)||ri(bt,Kt)}function fu(e,t){var r=je;je|=2;var a=FE();(bt!==e||Kt!==t)&&(In=null,Hi(e,t));do try{VR();break}catch(s){bE(e,s)}while(1);if(Hh(),je=r,ou.current=a,At!==null)throw Error(me(261));return bt=null,Kt=0,Ot}function VR(){for(;At!==null;)NE(At)}function zR(){for(;At!==null&&!mD();)NE(At)}function NE(e){var t=KE(e.alternate,e,Pr);e.memoizedProps=e.pendingProps,t===null?UE(e):At=t,rv.current=null}function UE(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=BR(r,t),r!==null){r.flags&=32767,At=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ot=6,At=null;return}}else if(r=UR(r,t,Pr),r!==null){At=r;return}if(t=t.sibling,t!==null){At=t;return}At=t=e}while(t!==null);Ot===0&&(Ot=5)}function Ui(e,t,r){var a=Xe,s=$r.transition;try{$r.transition=null,Xe=1,$R(e,t,r,a)}finally{$r.transition=s,Xe=a}return null}function $R(e,t,r,a){do ba();while(ai!==null);if(je&6)throw Error(me(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(me(177));e.callbackNode=null,e.callbackPriority=0;var c=r.lanes|r.childLanes;if(DD(e,c),e===bt&&(At=bt=null,Kt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Al||(Al=!0,WE(Vl,function(){return ba(),null})),c=(r.flags&15990)!==0,r.subtreeFlags&15990||c){c=$r.transition,$r.transition=null;var O=Xe;Xe=1;var w=je;je|=4,rv.current=null,WR(e,r),wE(r,e),hR(wd),$l=!!Od,wd=Od=null,e.current=r,GR(r),yD(),je=w,Xe=O,$r.transition=c}else e.current=r;if(Al&&(Al=!1,ai=e,uu=s),c=e.pendingLanes,c===0&&(di=null),TD(r.stateNode),gr(e,xt()),t!==null)for(a=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],a(s.value,{componentStack:s.stack,digest:s.digest});if(lu)throw lu=!1,e=Jd,Jd=null,e;return uu&1&&e.tag!==0&&ba(),c=e.pendingLanes,c&1?e===qd?Fs++:(Fs=0,qd=e):Fs=0,Li(),null}function ba(){if(ai!==null){var e=my(uu),t=$r.transition,r=Xe;try{if($r.transition=null,Xe=16>e?16:e,ai===null)var a=!1;else{if(e=ai,ai=null,uu=0,je&6)throw Error(me(331));var s=je;for(je|=4,xe=e.current;xe!==null;){var c=xe,O=c.child;if(xe.flags&16){var w=c.deletions;if(w!==null){for(var f=0;f<w.length;f++){var F=w[f];for(xe=F;xe!==null;){var I=xe;switch(I.tag){case 0:case 11:case 15:ks(8,I,c)}var K=I.child;if(K!==null)K.return=I,xe=K;else for(;xe!==null;){I=xe;var M=I.sibling,H=I.return;if(CE(I),I===F){xe=null;break}if(M!==null){M.return=H,xe=M;break}xe=H}}}var B=c.alternate;if(B!==null){var k=B.child;if(k!==null){B.child=null;do{var N=k.sibling;k.sibling=null,k=N}while(k!==null)}}xe=c}}if(c.subtreeFlags&2064&&O!==null)O.return=c,xe=O;else e:for(;xe!==null;){if(c=xe,c.flags&2048)switch(c.tag){case 0:case 11:case 15:ks(9,c,c.return)}var L=c.sibling;if(L!==null){L.return=c.return,xe=L;break e}xe=c.return}}var T=e.current;for(xe=T;xe!==null;){O=xe;var l=O.child;if(O.subtreeFlags&2064&&l!==null)l.return=O,xe=l;else e:for(O=T;xe!==null;){if(w=xe,w.flags&2048)try{switch(w.tag){case 0:case 11:case 15:Iu(9,w)}}catch(A){yt(w,w.return,A)}if(w===O){xe=null;break e}var C=w.sibling;if(C!==null){C.return=w.return,xe=C;break e}xe=w.return}}if(je=s,Li(),mn&&typeof mn.onPostCommitFiberRoot=="function")try{mn.onPostCommitFiberRoot(Su,e)}catch{}a=!0}return a}finally{Xe=r,$r.transition=t}}return!1}function sm(e,t,r){t=Ha(r,t),t=yE(e,t,1),e=ci(e,t,1),t=tr(),e!==null&&(oo(e,1,t),gr(e,t))}function yt(e,t,r){if(e.tag===3)sm(e,e,r);else for(;t!==null;){if(t.tag===3){sm(t,e,r);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(di===null||!di.has(a))){e=Ha(r,e),e=EE(t,e,1),t=ci(t,e,1),e=tr(),t!==null&&(oo(t,1,e),gr(t,e));break}}t=t.return}}function YR(e,t,r){var a=e.pingCache;a!==null&&a.delete(t),t=tr(),e.pingedLanes|=e.suspendedLanes&r,bt===e&&(Kt&r)===r&&(Ot===4||Ot===3&&(Kt&130023424)===Kt&&500>xt()-iv?Hi(e,0):nv|=r),gr(e,t)}function BE(e,t){t===0&&(e.mode&1?(t=gl,gl<<=1,!(gl&130023424)&&(gl=4194304)):t=1);var r=tr();e=Nn(e,t),e!==null&&(oo(e,t,r),gr(e,r))}function XR(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),BE(e,r)}function QR(e,t){var r=0;switch(e.tag){case 13:var a=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(me(314))}a!==null&&a.delete(t),BE(e,r)}var KE;KE=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||hr.current)dr=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return dr=!1,NR(e,t,r);dr=!!(e.flags&131072)}else dr=!1,ft&&t.flags&1048576&&Hy(t,eu,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;bl(e,t),e=t.pendingProps;var s=Ba(t,Yt.current);ka(t,r),s=Zh(null,t,a,e,s,r);var c=Jh();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,vr(a)?(c=!0,Jl(t)):c=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,zh(t),s.updater=Ru,t.stateNode=s,s._reactInternals=t,Wd(t,a,e,r),t=jd(null,t,a,!0,c,r)):(t.tag=0,ft&&c&&Bh(t),er(null,t,s,r),t=t.child),t;case 16:a=t.elementType;e:{switch(bl(e,t),e=t.pendingProps,s=a._init,a=s(a._payload),t.type=a,s=t.tag=JR(a),e=rn(a,e),s){case 0:t=Hd(null,t,a,e,r);break e;case 1:t=Q0(null,t,a,e,r);break e;case 11:t=Y0(null,t,a,e,r);break e;case 14:t=X0(null,t,a,rn(a.type,e),r);break e}throw Error(me(306,a,""))}return t;case 0:return a=t.type,s=t.pendingProps,s=t.elementType===a?s:rn(a,s),Hd(e,t,a,s,r);case 1:return a=t.type,s=t.pendingProps,s=t.elementType===a?s:rn(a,s),Q0(e,t,a,s,r);case 3:e:{if(xE(t),e===null)throw Error(me(387));a=t.pendingProps,c=t.memoizedState,s=c.element,$y(e,t),nu(t,a,null,r);var O=t.memoizedState;if(a=O.element,c.isDehydrated)if(c={element:a,isDehydrated:!1,cache:O.cache,pendingSuspenseBoundaries:O.pendingSuspenseBoundaries,transitions:O.transitions},t.updateQueue.baseState=c,t.memoizedState=c,t.flags&256){s=Ha(Error(me(423)),t),t=Z0(e,t,a,r,s);break e}else if(a!==s){s=Ha(Error(me(424)),t),t=Z0(e,t,a,r,s);break e}else for(Dr=fi(t.stateNode.containerInfo.firstChild),Cr=t,ft=!0,an=null,r=Zy(t,null,a,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ka(),a===s){t=Un(e,t,r);break e}er(e,t,a,r)}t=t.child}return t;case 5:return Jy(t),e===null&&Ud(t),a=t.type,s=t.pendingProps,c=e!==null?e.memoizedProps:null,O=s.children,Md(a,s)?O=null:c!==null&&Md(a,c)&&(t.flags|=32),SE(e,t),er(e,t,O,r),t.child;case 6:return e===null&&Ud(t),null;case 13:return LE(e,t,r);case 4:return $h(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=Wa(t,null,a,r):er(e,t,a,r),t.child;case 11:return a=t.type,s=t.pendingProps,s=t.elementType===a?s:rn(a,s),Y0(e,t,a,s,r);case 7:return er(e,t,t.pendingProps,r),t.child;case 8:return er(e,t,t.pendingProps.children,r),t.child;case 12:return er(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(a=t.type._context,s=t.pendingProps,c=t.memoizedProps,O=s.value,rt(tu,a._currentValue),a._currentValue=O,c!==null)if(fn(c.value,O)){if(c.children===s.children&&!hr.current){t=Un(e,t,r);break e}}else for(c=t.child,c!==null&&(c.return=t);c!==null;){var w=c.dependencies;if(w!==null){O=c.child;for(var f=w.firstContext;f!==null;){if(f.context===a){if(c.tag===1){f=kn(-1,r&-r),f.tag=2;var F=c.updateQueue;if(F!==null){F=F.shared;var I=F.pending;I===null?f.next=f:(f.next=I.next,I.next=f),F.pending=f}}c.lanes|=r,f=c.alternate,f!==null&&(f.lanes|=r),Bd(c.return,r,t),w.lanes|=r;break}f=f.next}}else if(c.tag===10)O=c.type===t.type?null:c.child;else if(c.tag===18){if(O=c.return,O===null)throw Error(me(341));O.lanes|=r,w=O.alternate,w!==null&&(w.lanes|=r),Bd(O,r,t),O=c.sibling}else O=c.child;if(O!==null)O.return=c;else for(O=c;O!==null;){if(O===t){O=null;break}if(c=O.sibling,c!==null){c.return=O.return,O=c;break}O=O.return}c=O}er(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,a=t.pendingProps.children,ka(t,r),s=Yr(s),a=a(s),t.flags|=1,er(e,t,a,r),t.child;case 14:return a=t.type,s=rn(a,t.pendingProps),s=rn(a.type,s),X0(e,t,a,s,r);case 15:return _E(e,t,t.type,t.pendingProps,r);case 17:return a=t.type,s=t.pendingProps,s=t.elementType===a?s:rn(a,s),bl(e,t),t.tag=1,vr(a)?(e=!0,Jl(t)):e=!1,ka(t,r),Xy(t,a,s),Wd(t,a,s,r),jd(null,t,a,!0,e,r);case 19:return AE(e,t,r);case 22:return TE(e,t,r)}throw Error(me(156,t.tag))};function WE(e,t){return hy(e,t)}function ZR(e,t,r,a){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zr(e,t,r,a){return new ZR(e,t,r,a)}function lv(e){return e=e.prototype,!(!e||!e.isReactComponent)}function JR(e){if(typeof e=="function")return lv(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Dh)return 11;if(e===Rh)return 14}return 2}function vi(e,t){var r=e.alternate;return r===null?(r=zr(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ul(e,t,r,a,s,c){var O=2;if(a=e,typeof e=="function")lv(e)&&(O=1);else if(typeof e=="string")O=5;else e:switch(e){case ya:return ji(r.children,s,c,t);case Ph:O=8,s|=8;break;case cd:return e=zr(12,r,t,s|2),e.elementType=cd,e.lanes=c,e;case dd:return e=zr(13,r,t,s),e.elementType=dd,e.lanes=c,e;case hd:return e=zr(19,r,t,s),e.elementType=hd,e.lanes=c,e;case Qm:return wu(r,s,c,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ym:O=10;break e;case Xm:O=9;break e;case Dh:O=11;break e;case Rh:O=14;break e;case qn:O=16,a=null;break e}throw Error(me(130,e==null?e:typeof e,""))}return t=zr(O,r,t,s),t.elementType=e,t.type=a,t.lanes=c,t}function ji(e,t,r,a){return e=zr(7,e,a,t),e.lanes=r,e}function wu(e,t,r,a){return e=zr(22,e,a,t),e.elementType=Qm,e.lanes=r,e.stateNode={isHidden:!1},e}function Qc(e,t,r){return e=zr(6,e,null,t),e.lanes=r,e}function Zc(e,t,r){return t=zr(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function qR(e,t,r,a,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Oc(0),this.expirationTimes=Oc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Oc(0),this.identifierPrefix=a,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function uv(e,t,r,a,s,c,O,w,f){return e=new qR(e,t,r,w,f),t===1?(t=1,c===!0&&(t|=8)):t=0,c=zr(3,null,null,t),e.current=c,c.stateNode=e,c.memoizedState={element:a,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},zh(c),e}function eC(e,t,r){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ma,key:a==null?null:""+a,children:e,containerInfo:t,implementation:r}}function GE(e){if(!e)return Ei;e=e._reactInternals;e:{if(Ji(e)!==e||e.tag!==1)throw Error(me(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(vr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(me(171))}if(e.tag===1){var r=e.type;if(vr(r))return Wy(e,r,t)}return t}function HE(e,t,r,a,s,c,O,w,f){return e=uv(r,a,!0,e,s,c,O,w,f),e.context=GE(null),r=e.current,a=tr(),s=hi(r),c=kn(a,s),c.callback=t??null,ci(r,c,s),e.current.lanes=s,oo(e,s,a),gr(e,a),e}function Mu(e,t,r,a){var s=t.current,c=tr(),O=hi(s);return r=GE(r),t.context===null?t.context=r:t.pendingContext=r,t=kn(c,O),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=ci(s,t,O),e!==null&&(un(e,s,O,c),wl(e,s,O)),O}function cu(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function om(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function fv(e,t){om(e,t),(e=e.alternate)&&om(e,t)}function tC(){return null}var jE=typeof reportError=="function"?reportError:function(e){console.error(e)};function cv(e){this._internalRoot=e}ku.prototype.render=cv.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(me(409));Mu(e,t,null,null)};ku.prototype.unmount=cv.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Xi(function(){Mu(null,e,null,null)}),t[Fn]=null}};function ku(e){this._internalRoot=e}ku.prototype.unstable_scheduleHydration=function(e){if(e){var t=_y();e={blockedOn:null,target:e,priority:t};for(var r=0;r<ti.length&&t!==0&&t<ti[r].priority;r++);ti.splice(r,0,e),r===0&&Sy(e)}};function dv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function bu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function lm(){}function rC(e,t,r,a,s){if(s){if(typeof a=="function"){var c=a;a=function(){var F=cu(O);c.call(F)}}var O=HE(t,a,e,0,null,!1,!1,"",lm);return e._reactRootContainer=O,e[Fn]=O.current,$s(e.nodeType===8?e.parentNode:e),Xi(),O}for(;s=e.lastChild;)e.removeChild(s);if(typeof a=="function"){var w=a;a=function(){var F=cu(f);w.call(F)}}var f=uv(e,0,!1,null,null,!1,!1,"",lm);return e._reactRootContainer=f,e[Fn]=f.current,$s(e.nodeType===8?e.parentNode:e),Xi(function(){Mu(t,f,r,a)}),f}function Fu(e,t,r,a,s){var c=r._reactRootContainer;if(c){var O=c;if(typeof s=="function"){var w=s;s=function(){var f=cu(O);w.call(f)}}Mu(t,O,e,s)}else O=rC(r,t,e,s,a);return cu(O)}yy=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=As(t.pendingLanes);r!==0&&(Oh(t,r|1),gr(t,xt()),!(je&6)&&(ja=xt()+500,Li()))}break;case 13:Xi(function(){var a=Nn(e,1);if(a!==null){var s=tr();un(a,e,1,s)}}),fv(e,1)}};wh=function(e){if(e.tag===13){var t=Nn(e,134217728);if(t!==null){var r=tr();un(t,e,134217728,r)}fv(e,134217728)}};Ey=function(e){if(e.tag===13){var t=hi(e),r=Nn(e,t);if(r!==null){var a=tr();un(r,e,t,a)}fv(e,t)}};_y=function(){return Xe};Ty=function(e,t){var r=Xe;try{return Xe=e,t()}finally{Xe=r}};xd=function(e,t,r){switch(t){case"input":if(pd(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var a=r[t];if(a!==e&&a.form===e.form){var s=Pu(a);if(!s)throw Error(me(90));Jm(a),pd(a,s)}}}break;case"textarea":ey(e,r);break;case"select":t=r.value,t!=null&&Ia(e,!!r.multiple,t,!1)}};oy=av;ly=Xi;var nC={usingClientEntryPoint:!1,Events:[uo,Sa,Pu,ay,sy,av]},Ss={findFiberByHostInstance:Ki,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},iC={bundleType:Ss.bundleType,version:Ss.version,rendererPackageName:Ss.rendererPackageName,rendererConfig:Ss.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Kn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=cy(e),e===null?null:e.stateNode},findFiberByHostInstance:Ss.findFiberByHostInstance||tC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pl.isDisabled&&Pl.supportsFiber)try{Su=Pl.inject(iC),mn=Pl}catch{}}wr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nC;wr.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!dv(t))throw Error(me(200));return eC(e,t,null,r)};wr.createRoot=function(e,t){if(!dv(e))throw Error(me(299));var r=!1,a="",s=jE;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=uv(e,1,!1,null,null,r,!1,a,s),e[Fn]=t.current,$s(e.nodeType===8?e.parentNode:e),new cv(t)};wr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(me(188)):(e=Object.keys(e).join(","),Error(me(268,e)));return e=cy(t),e=e===null?null:e.stateNode,e};wr.flushSync=function(e){return Xi(e)};wr.hydrate=function(e,t,r){if(!bu(t))throw Error(me(200));return Fu(null,e,t,!0,r)};wr.hydrateRoot=function(e,t,r){if(!dv(e))throw Error(me(405));var a=r!=null&&r.hydratedSources||null,s=!1,c="",O=jE;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onRecoverableError!==void 0&&(O=r.onRecoverableError)),t=HE(t,null,e,1,r??null,s,!1,c,O),e[Fn]=t.current,$s(e),a)for(e=0;e<a.length;e++)r=a[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new ku(t)};wr.render=function(e,t,r){if(!bu(t))throw Error(me(200));return Fu(null,e,t,!1,r)};wr.unmountComponentAtNode=function(e){if(!bu(e))throw Error(me(40));return e._reactRootContainer?(Xi(function(){Fu(null,null,e,!1,function(){e._reactRootContainer=null,e[Fn]=null})}),!0):!1};wr.unstable_batchedUpdates=av;wr.unstable_renderSubtreeIntoContainer=function(e,t,r,a){if(!bu(r))throw Error(me(200));if(e==null||e._reactInternals===void 0)throw Error(me(38));return Fu(e,t,r,!1,a)};wr.version="18.2.0-next-9e3b772b8-20220608";(function(e){function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(r){console.error(r)}}t(),e.exports=wr})(tD);var VE,um=Wl;VE=um.createRoot,um.hydrateRoot;var rh={},aC={get exports(){return rh},set exports(e){rh=e}},zE={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Va=pe;function sC(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var oC=typeof Object.is=="function"?Object.is:sC,lC=Va.useState,uC=Va.useEffect,fC=Va.useLayoutEffect,cC=Va.useDebugValue;function dC(e,t){var r=t(),a=lC({inst:{value:r,getSnapshot:t}}),s=a[0].inst,c=a[1];return fC(function(){s.value=r,s.getSnapshot=t,Jc(s)&&c({inst:s})},[e,r,t]),uC(function(){return Jc(s)&&c({inst:s}),e(function(){Jc(s)&&c({inst:s})})},[e]),cC(r),r}function Jc(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!oC(e,r)}catch{return!0}}function hC(e,t){return t()}var vC=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?hC:dC;zE.useSyncExternalStore=Va.useSyncExternalStore!==void 0?Va.useSyncExternalStore:vC;(function(e){e.exports=zE})(aC);var nh={},gC={get exports(){return nh},set exports(e){nh=e}},$E={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nu=pe,pC=rh;function mC(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var yC=typeof Object.is=="function"?Object.is:mC,EC=pC.useSyncExternalStore,_C=Nu.useRef,TC=Nu.useEffect,SC=Nu.useMemo,xC=Nu.useDebugValue;$E.useSyncExternalStoreWithSelector=function(e,t,r,a,s){var c=_C(null);if(c.current===null){var O={hasValue:!1,value:null};c.current=O}else O=c.current;c=SC(function(){function f(H){if(!F){if(F=!0,I=H,H=a(H),s!==void 0&&O.hasValue){var B=O.value;if(s(B,H))return K=B}return K=H}if(B=K,yC(I,H))return B;var k=a(H);return s!==void 0&&s(B,k)?B:(I=H,K=k)}var F=!1,I,K,M=r===void 0?null:r;return[function(){return f(t())},M===null?void 0:function(){return f(M())}]},[t,r,a,s]);var w=EC(e,c[0],c[1]);return TC(function(){O.hasValue=!0,O.value=w},[w]),xC(w),w};(function(e){e.exports=$E})(gC);function LC(e){e()}let YE=LC;const AC=e=>YE=e,PC=()=>YE,_i=pe.createContext(null);function XE(){return pe.useContext(_i)}const DC=()=>{throw new Error("uSES not initialized!")};let QE=DC;const RC=e=>{QE=e},CC=(e,t)=>e===t;function IC(e=_i){const t=e===_i?XE:()=>pe.useContext(e);return function(a,s=CC){const{store:c,subscription:O,getServerState:w}=t(),f=QE(O.addNestedSub,c.getState,w||c.getState,a,s);return pe.useDebugValue(f),f}}const OC=IC();var ih={},wC={get exports(){return ih},set exports(e){ih=e}},Qe={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ft=typeof Symbol=="function"&&Symbol.for,hv=Ft?Symbol.for("react.element"):60103,vv=Ft?Symbol.for("react.portal"):60106,Uu=Ft?Symbol.for("react.fragment"):60107,Bu=Ft?Symbol.for("react.strict_mode"):60108,Ku=Ft?Symbol.for("react.profiler"):60114,Wu=Ft?Symbol.for("react.provider"):60109,Gu=Ft?Symbol.for("react.context"):60110,gv=Ft?Symbol.for("react.async_mode"):60111,Hu=Ft?Symbol.for("react.concurrent_mode"):60111,ju=Ft?Symbol.for("react.forward_ref"):60112,Vu=Ft?Symbol.for("react.suspense"):60113,MC=Ft?Symbol.for("react.suspense_list"):60120,zu=Ft?Symbol.for("react.memo"):60115,$u=Ft?Symbol.for("react.lazy"):60116,kC=Ft?Symbol.for("react.block"):60121,bC=Ft?Symbol.for("react.fundamental"):60117,FC=Ft?Symbol.for("react.responder"):60118,NC=Ft?Symbol.for("react.scope"):60119;function kr(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case hv:switch(e=e.type,e){case gv:case Hu:case Uu:case Ku:case Bu:case Vu:return e;default:switch(e=e&&e.$$typeof,e){case Gu:case ju:case $u:case zu:case Wu:return e;default:return t}}case vv:return t}}}function ZE(e){return kr(e)===Hu}Qe.AsyncMode=gv;Qe.ConcurrentMode=Hu;Qe.ContextConsumer=Gu;Qe.ContextProvider=Wu;Qe.Element=hv;Qe.ForwardRef=ju;Qe.Fragment=Uu;Qe.Lazy=$u;Qe.Memo=zu;Qe.Portal=vv;Qe.Profiler=Ku;Qe.StrictMode=Bu;Qe.Suspense=Vu;Qe.isAsyncMode=function(e){return ZE(e)||kr(e)===gv};Qe.isConcurrentMode=ZE;Qe.isContextConsumer=function(e){return kr(e)===Gu};Qe.isContextProvider=function(e){return kr(e)===Wu};Qe.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===hv};Qe.isForwardRef=function(e){return kr(e)===ju};Qe.isFragment=function(e){return kr(e)===Uu};Qe.isLazy=function(e){return kr(e)===$u};Qe.isMemo=function(e){return kr(e)===zu};Qe.isPortal=function(e){return kr(e)===vv};Qe.isProfiler=function(e){return kr(e)===Ku};Qe.isStrictMode=function(e){return kr(e)===Bu};Qe.isSuspense=function(e){return kr(e)===Vu};Qe.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Uu||e===Hu||e===Ku||e===Bu||e===Vu||e===MC||typeof e=="object"&&e!==null&&(e.$$typeof===$u||e.$$typeof===zu||e.$$typeof===Wu||e.$$typeof===Gu||e.$$typeof===ju||e.$$typeof===bC||e.$$typeof===FC||e.$$typeof===NC||e.$$typeof===kC)};Qe.typeOf=kr;(function(e){e.exports=Qe})(wC);var JE=ih,UC={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},BC={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},qE={};qE[JE.ForwardRef]=UC;qE[JE.Memo]=BC;var fm={},KC={get exports(){return fm},set exports(e){fm=e}},Ze={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pv=Symbol.for("react.element"),mv=Symbol.for("react.portal"),Yu=Symbol.for("react.fragment"),Xu=Symbol.for("react.strict_mode"),Qu=Symbol.for("react.profiler"),Zu=Symbol.for("react.provider"),Ju=Symbol.for("react.context"),WC=Symbol.for("react.server_context"),qu=Symbol.for("react.forward_ref"),ef=Symbol.for("react.suspense"),tf=Symbol.for("react.suspense_list"),rf=Symbol.for("react.memo"),nf=Symbol.for("react.lazy"),GC=Symbol.for("react.offscreen"),e_;e_=Symbol.for("react.module.reference");function Qr(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case pv:switch(e=e.type,e){case Yu:case Qu:case Xu:case ef:case tf:return e;default:switch(e=e&&e.$$typeof,e){case WC:case Ju:case qu:case nf:case rf:case Zu:return e;default:return t}}case mv:return t}}}Ze.ContextConsumer=Ju;Ze.ContextProvider=Zu;Ze.Element=pv;Ze.ForwardRef=qu;Ze.Fragment=Yu;Ze.Lazy=nf;Ze.Memo=rf;Ze.Portal=mv;Ze.Profiler=Qu;Ze.StrictMode=Xu;Ze.Suspense=ef;Ze.SuspenseList=tf;Ze.isAsyncMode=function(){return!1};Ze.isConcurrentMode=function(){return!1};Ze.isContextConsumer=function(e){return Qr(e)===Ju};Ze.isContextProvider=function(e){return Qr(e)===Zu};Ze.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===pv};Ze.isForwardRef=function(e){return Qr(e)===qu};Ze.isFragment=function(e){return Qr(e)===Yu};Ze.isLazy=function(e){return Qr(e)===nf};Ze.isMemo=function(e){return Qr(e)===rf};Ze.isPortal=function(e){return Qr(e)===mv};Ze.isProfiler=function(e){return Qr(e)===Qu};Ze.isStrictMode=function(e){return Qr(e)===Xu};Ze.isSuspense=function(e){return Qr(e)===ef};Ze.isSuspenseList=function(e){return Qr(e)===tf};Ze.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Yu||e===Qu||e===Xu||e===ef||e===tf||e===GC||typeof e=="object"&&e!==null&&(e.$$typeof===nf||e.$$typeof===rf||e.$$typeof===Zu||e.$$typeof===Ju||e.$$typeof===qu||e.$$typeof===e_||e.getModuleId!==void 0)};Ze.typeOf=Qr;(function(e){e.exports=Ze})(KC);function HC(){const e=PC();let t=null,r=null;return{clear(){t=null,r=null},notify(){e(()=>{let a=t;for(;a;)a.callback(),a=a.next})},get(){let a=[],s=t;for(;s;)a.push(s),s=s.next;return a},subscribe(a){let s=!0,c=r={callback:a,next:null,prev:r};return c.prev?c.prev.next=c:t=c,function(){!s||t===null||(s=!1,c.next?c.next.prev=c.prev:r=c.prev,c.prev?c.prev.next=c.next:t=c.next)}}}}const cm={notify(){},get:()=>[]};function jC(e,t){let r,a=cm;function s(K){return f(),a.subscribe(K)}function c(){a.notify()}function O(){I.onStateChange&&I.onStateChange()}function w(){return Boolean(r)}function f(){r||(r=t?t.addNestedSub(O):e.subscribe(O),a=HC())}function F(){r&&(r(),r=void 0,a.clear(),a=cm)}const I={addNestedSub:s,notifyNestedSubs:c,handleChangeWrapper:O,isSubscribed:w,trySubscribe:f,tryUnsubscribe:F,getListeners:()=>a};return I}const VC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",zC=VC?pe.useLayoutEffect:pe.useEffect;function $C({store:e,context:t,children:r,serverState:a}){const s=pe.useMemo(()=>{const w=jC(e);return{store:e,subscription:w,getServerState:a?()=>a:void 0}},[e,a]),c=pe.useMemo(()=>e.getState(),[e]);zC(()=>{const{subscription:w}=s;return w.onStateChange=w.notifyNestedSubs,w.trySubscribe(),c!==e.getState()&&w.notifyNestedSubs(),()=>{w.tryUnsubscribe(),w.onStateChange=void 0}},[s,c]);const O=t||_i;return Hm.createElement(O.Provider,{value:s},r)}function t_(e=_i){const t=e===_i?XE:()=>pe.useContext(e);return function(){const{store:a}=t();return a}}const YC=t_();function XC(e=_i){const t=e===_i?YC:t_(e);return function(){return t().dispatch}}const QC=XC();RC(nh.useSyncExternalStoreWithSelector);AC(Wl.unstable_batchedUpdates);/**
 * @remix-run/router v1.4.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ro(){return ro=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ro.apply(this,arguments)}var si;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(si||(si={}));const dm="popstate";function ZC(e){e===void 0&&(e={});function t(s,c){let{pathname:O="/",search:w="",hash:f=""}=qi(s.location.hash.substr(1));return ah("",{pathname:O,search:w,hash:f},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function r(s,c){let O=s.document.querySelector("base"),w="";if(O&&O.getAttribute("href")){let f=s.location.href,F=f.indexOf("#");w=F===-1?f:f.slice(0,F)}return w+"#"+(typeof c=="string"?c:du(c))}function a(s,c){af(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(c)+")")}return qC(t,r,a,e)}function Pt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function af(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function JC(){return Math.random().toString(36).substr(2,8)}function hm(e,t){return{usr:e.state,key:e.key,idx:t}}function ah(e,t,r,a){return r===void 0&&(r=null),ro({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?qi(t):t,{state:r,key:t&&t.key||a||JC()})}function du(e){let{pathname:t="/",search:r="",hash:a=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),a&&a!=="#"&&(t+=a.charAt(0)==="#"?a:"#"+a),t}function qi(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let a=e.indexOf("?");a>=0&&(t.search=e.substr(a),e=e.substr(0,a)),e&&(t.pathname=e)}return t}function qC(e,t,r,a){a===void 0&&(a={});let{window:s=document.defaultView,v5Compat:c=!1}=a,O=s.history,w=si.Pop,f=null,F=I();F==null&&(F=0,O.replaceState(ro({},O.state,{idx:F}),""));function I(){return(O.state||{idx:null}).idx}function K(){w=si.Pop;let N=I(),L=N==null?null:N-F;F=N,f&&f({action:w,location:k.location,delta:L})}function M(N,L){w=si.Push;let T=ah(k.location,N,L);r&&r(T,N),F=I()+1;let l=hm(T,F),C=k.createHref(T);try{O.pushState(l,"",C)}catch{s.location.assign(C)}c&&f&&f({action:w,location:k.location,delta:1})}function H(N,L){w=si.Replace;let T=ah(k.location,N,L);r&&r(T,N),F=I();let l=hm(T,F),C=k.createHref(T);O.replaceState(l,"",C),c&&f&&f({action:w,location:k.location,delta:0})}function B(N){let L=s.location.origin!=="null"?s.location.origin:s.location.href,T=typeof N=="string"?N:du(N);return Pt(L,"No window.location.(origin|href) available to create URL for href: "+T),new URL(T,L)}let k={get action(){return w},get location(){return e(s,O)},listen(N){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(dm,K),f=N,()=>{s.removeEventListener(dm,K),f=null}},createHref(N){return t(s,N)},createURL:B,encodeLocation(N){let L=B(N);return{pathname:L.pathname,search:L.search,hash:L.hash}},push:M,replace:H,go(N){return O.go(N)}};return k}var vm;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(vm||(vm={}));function eI(e,t,r){r===void 0&&(r="/");let a=typeof t=="string"?qi(t):t,s=yv(a.pathname||"/",r);if(s==null)return null;let c=r_(e);tI(c);let O=null;for(let w=0;O==null&&w<c.length;++w)O=fI(c[w],hI(s));return O}function r_(e,t,r,a){t===void 0&&(t=[]),r===void 0&&(r=[]),a===void 0&&(a="");let s=(c,O,w)=>{let f={relativePath:w===void 0?c.path||"":w,caseSensitive:c.caseSensitive===!0,childrenIndex:O,route:c};f.relativePath.startsWith("/")&&(Pt(f.relativePath.startsWith(a),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(a.length));let F=gi([a,f.relativePath]),I=r.concat(f);c.children&&c.children.length>0&&(Pt(c.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+F+'".')),r_(c.children,t,I,F)),!(c.path==null&&!c.index)&&t.push({path:F,score:lI(F,c.index),routesMeta:I})};return e.forEach((c,O)=>{var w;if(c.path===""||!((w=c.path)!=null&&w.includes("?")))s(c,O);else for(let f of n_(c.path))s(c,O,f)}),t}function n_(e){let t=e.split("/");if(t.length===0)return[];let[r,...a]=t,s=r.endsWith("?"),c=r.replace(/\?$/,"");if(a.length===0)return s?[c,""]:[c];let O=n_(a.join("/")),w=[];return w.push(...O.map(f=>f===""?c:[c,f].join("/"))),s&&w.push(...O),w.map(f=>e.startsWith("/")&&f===""?"/":f)}function tI(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:uI(t.routesMeta.map(a=>a.childrenIndex),r.routesMeta.map(a=>a.childrenIndex)))}const rI=/^:\w+$/,nI=3,iI=2,aI=1,sI=10,oI=-2,gm=e=>e==="*";function lI(e,t){let r=e.split("/"),a=r.length;return r.some(gm)&&(a+=oI),t&&(a+=iI),r.filter(s=>!gm(s)).reduce((s,c)=>s+(rI.test(c)?nI:c===""?aI:sI),a)}function uI(e,t){return e.length===t.length&&e.slice(0,-1).every((a,s)=>a===t[s])?e[e.length-1]-t[t.length-1]:0}function fI(e,t){let{routesMeta:r}=e,a={},s="/",c=[];for(let O=0;O<r.length;++O){let w=r[O],f=O===r.length-1,F=s==="/"?t:t.slice(s.length)||"/",I=cI({path:w.relativePath,caseSensitive:w.caseSensitive,end:f},F);if(!I)return null;Object.assign(a,I.params);let K=w.route;c.push({params:a,pathname:gi([s,I.pathname]),pathnameBase:mI(gi([s,I.pathnameBase])),route:K}),I.pathnameBase!=="/"&&(s=gi([s,I.pathnameBase]))}return c}function cI(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,a]=dI(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let c=s[0],O=c.replace(/(.)\/+$/,"$1"),w=s.slice(1);return{params:a.reduce((F,I,K)=>{if(I==="*"){let M=w[K]||"";O=c.slice(0,c.length-M.length).replace(/(.)\/+$/,"$1")}return F[I]=vI(w[K]||"",I),F},{}),pathname:c,pathnameBase:O,pattern:e}}function dI(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),af(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let a=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(O,w)=>(a.push(w),"/([^\\/]+)"));return e.endsWith("*")?(a.push("*"),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),a]}function hI(e){try{return decodeURI(e)}catch(t){return af(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function vI(e,t){try{return decodeURIComponent(e)}catch(r){return af(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+r+").")),e}}function yv(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,a=e.charAt(r);return a&&a!=="/"?null:e.slice(r)||"/"}function gI(e,t){t===void 0&&(t="/");let{pathname:r,search:a="",hash:s=""}=typeof e=="string"?qi(e):e;return{pathname:r?r.startsWith("/")?r:pI(r,t):t,search:yI(a),hash:EI(s)}}function pI(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function qc(e,t,r,a){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function i_(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function a_(e,t,r,a){a===void 0&&(a=!1);let s;typeof e=="string"?s=qi(e):(s=ro({},e),Pt(!s.pathname||!s.pathname.includes("?"),qc("?","pathname","search",s)),Pt(!s.pathname||!s.pathname.includes("#"),qc("#","pathname","hash",s)),Pt(!s.search||!s.search.includes("#"),qc("#","search","hash",s)));let c=e===""||s.pathname==="",O=c?"/":s.pathname,w;if(a||O==null)w=r;else{let K=t.length-1;if(O.startsWith("..")){let M=O.split("/");for(;M[0]==="..";)M.shift(),K-=1;s.pathname=M.join("/")}w=K>=0?t[K]:"/"}let f=gI(s,w),F=O&&O!=="/"&&O.endsWith("/"),I=(c||O===".")&&r.endsWith("/");return!f.pathname.endsWith("/")&&(F||I)&&(f.pathname+="/"),f}const gi=e=>e.join("/").replace(/\/\/+/g,"/"),mI=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),yI=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,EI=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function _I(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const TI=["post","put","patch","delete"];[...TI];/**
 * React Router v6.9.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function SI(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}const xI=typeof Object.is=="function"?Object.is:SI,{useState:LI,useEffect:AI,useLayoutEffect:PI,useDebugValue:DI}=ld;function RI(e,t,r){const a=t(),[{inst:s},c]=LI({inst:{value:a,getSnapshot:t}});return PI(()=>{s.value=a,s.getSnapshot=t,ed(s)&&c({inst:s})},[e,a,t]),AI(()=>(ed(s)&&c({inst:s}),e(()=>{ed(s)&&c({inst:s})})),[e]),DI(a),a}function ed(e){const t=e.getSnapshot,r=e.value;try{const a=t();return!xI(r,a)}catch{return!0}}function CI(e,t,r){return t()}const II=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",OI=!II,wI=OI?CI:RI;"useSyncExternalStore"in ld&&(e=>e.useSyncExternalStore)(ld);const s_=pe.createContext(null),Ev=pe.createContext(null),co=pe.createContext(null),sf=pe.createContext(null),Ai=pe.createContext({outlet:null,matches:[]}),o_=pe.createContext(null);function sh(){return sh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},sh.apply(this,arguments)}function MI(e,t){let{relative:r}=t===void 0?{}:t;Xa()||Pt(!1);let{basename:a,navigator:s}=pe.useContext(co),{hash:c,pathname:O,search:w}=l_(e,{relative:r}),f=O;return a!=="/"&&(f=O==="/"?a:gi([a,O])),s.createHref({pathname:f,search:w,hash:c})}function Xa(){return pe.useContext(sf)!=null}function Qa(){return Xa()||Pt(!1),pe.useContext(sf).location}function ho(){Xa()||Pt(!1);let{basename:e,navigator:t}=pe.useContext(co),{matches:r}=pe.useContext(Ai),{pathname:a}=Qa(),s=JSON.stringify(i_(r).map(w=>w.pathnameBase)),c=pe.useRef(!1);return pe.useEffect(()=>{c.current=!0}),pe.useCallback(function(w,f){if(f===void 0&&(f={}),!c.current)return;if(typeof w=="number"){t.go(w);return}let F=a_(w,JSON.parse(s),a,f.relative==="path");e!=="/"&&(F.pathname=F.pathname==="/"?e:gi([e,F.pathname])),(f.replace?t.replace:t.push)(F,f.state,f)},[e,t,s,a])}const kI=pe.createContext(null);function bI(e){let t=pe.useContext(Ai).outlet;return t&&pe.createElement(kI.Provider,{value:e},t)}function FI(){let{matches:e}=pe.useContext(Ai),t=e[e.length-1];return t?t.params:{}}function l_(e,t){let{relative:r}=t===void 0?{}:t,{matches:a}=pe.useContext(Ai),{pathname:s}=Qa(),c=JSON.stringify(i_(a).map(O=>O.pathnameBase));return pe.useMemo(()=>a_(e,JSON.parse(c),s,r==="path"),[e,c,s,r])}function NI(e,t){Xa()||Pt(!1);let{navigator:r}=pe.useContext(co),a=pe.useContext(Ev),{matches:s}=pe.useContext(Ai),c=s[s.length-1],O=c?c.params:{};c&&c.pathname;let w=c?c.pathnameBase:"/";c&&c.route;let f=Qa(),F;if(t){var I;let k=typeof t=="string"?qi(t):t;w==="/"||(I=k.pathname)!=null&&I.startsWith(w)||Pt(!1),F=k}else F=f;let K=F.pathname||"/",M=w==="/"?K:K.slice(w.length)||"/",H=eI(e,{pathname:M}),B=WI(H&&H.map(k=>Object.assign({},k,{params:Object.assign({},O,k.params),pathname:gi([w,r.encodeLocation?r.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?w:gi([w,r.encodeLocation?r.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),s,a||void 0);return t&&B?pe.createElement(sf.Provider,{value:{location:sh({pathname:"/",search:"",hash:"",state:null,key:"default"},F),navigationType:si.Pop}},B):B}function UI(){let e=VI(),t=_I(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},c=null;return pe.createElement(pe.Fragment,null,pe.createElement("h2",null,"Unexpected Application Error!"),pe.createElement("h3",{style:{fontStyle:"italic"}},t),r?pe.createElement("pre",{style:s},r):null,c)}class BI extends pe.Component{constructor(t){super(t),this.state={location:t.location,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location?{error:t.error,location:t.location}:{error:t.error||r.error,location:r.location}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error?pe.createElement(Ai.Provider,{value:this.props.routeContext},pe.createElement(o_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function KI(e){let{routeContext:t,match:r,children:a}=e,s=pe.useContext(s_);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),pe.createElement(Ai.Provider,{value:t},a)}function WI(e,t,r){if(t===void 0&&(t=[]),e==null)if(r!=null&&r.errors)e=r.matches;else return null;let a=e,s=r==null?void 0:r.errors;if(s!=null){let c=a.findIndex(O=>O.route.id&&(s==null?void 0:s[O.route.id]));c>=0||Pt(!1),a=a.slice(0,Math.min(a.length,c+1))}return a.reduceRight((c,O,w)=>{let f=O.route.id?s==null?void 0:s[O.route.id]:null,F=null;r&&(O.route.ErrorBoundary?F=pe.createElement(O.route.ErrorBoundary,null):O.route.errorElement?F=O.route.errorElement:F=pe.createElement(UI,null));let I=t.concat(a.slice(0,w+1)),K=()=>{let M=c;return f?M=F:O.route.Component?M=pe.createElement(O.route.Component,null):O.route.element&&(M=O.route.element),pe.createElement(KI,{match:O,routeContext:{outlet:c,matches:I},children:M})};return r&&(O.route.ErrorBoundary||O.route.errorElement||w===0)?pe.createElement(BI,{location:r.location,component:F,error:f,children:K(),routeContext:{outlet:null,matches:I}}):K()},null)}var pm;(function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator"})(pm||(pm={}));var hu;(function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"})(hu||(hu={}));function GI(e){let t=pe.useContext(Ev);return t||Pt(!1),t}function HI(e){let t=pe.useContext(Ai);return t||Pt(!1),t}function jI(e){let t=HI(),r=t.matches[t.matches.length-1];return r.route.id||Pt(!1),r.route.id}function VI(){var e;let t=pe.useContext(o_),r=GI(hu.UseRouteError),a=jI(hu.UseRouteError);return t||((e=r.errors)==null?void 0:e[a])}function zI(e){let{to:t,replace:r,state:a,relative:s}=e;Xa()||Pt(!1);let c=pe.useContext(Ev),O=ho();return pe.useEffect(()=>{c&&c.navigation.state!=="idle"||O(t,{replace:r,state:a,relative:s})}),null}function $I(e){return bI(e.context)}function pa(e){Pt(!1)}function YI(e){let{basename:t="/",children:r=null,location:a,navigationType:s=si.Pop,navigator:c,static:O=!1}=e;Xa()&&Pt(!1);let w=t.replace(/^\/*/,"/"),f=pe.useMemo(()=>({basename:w,navigator:c,static:O}),[w,c,O]);typeof a=="string"&&(a=qi(a));let{pathname:F="/",search:I="",hash:K="",state:M=null,key:H="default"}=a,B=pe.useMemo(()=>{let k=yv(F,w);return k==null?null:{location:{pathname:k,search:I,hash:K,state:M,key:H},navigationType:s}},[w,F,I,K,M,H,s]);return B==null?null:pe.createElement(co.Provider,{value:f},pe.createElement(sf.Provider,{children:r,value:B}))}function XI(e){let{children:t,location:r}=e,a=pe.useContext(s_),s=a&&!t?a.router.routes:oh(t);return NI(s,r)}var mm;(function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"})(mm||(mm={}));new Promise(()=>{});function oh(e,t){t===void 0&&(t=[]);let r=[];return pe.Children.forEach(e,(a,s)=>{if(!pe.isValidElement(a))return;if(a.type===pe.Fragment){r.push.apply(r,oh(a.props.children,t));return}a.type!==pa&&Pt(!1),!a.props.index||!a.props.children||Pt(!1);let c=[...t,s],O={id:a.props.id||c.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(O.children=oh(a.props.children,c)),r.push(O)}),r}/**
 * React Router DOM v6.9.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lh(){return lh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},lh.apply(this,arguments)}function QI(e,t){if(e==null)return{};var r={},a=Object.keys(e),s,c;for(c=0;c<a.length;c++)s=a[c],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function ZI(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function JI(e,t){return e.button===0&&(!t||t==="_self")&&!ZI(e)}function uh(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let a=e[r];return t.concat(Array.isArray(a)?a.map(s=>[r,s]):[[r,a]])},[]))}function qI(e,t){let r=uh(e);if(t)for(let a of t.keys())r.has(a)||t.getAll(a).forEach(s=>{r.append(a,s)});return r}const eO=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function tO(e){let{basename:t,children:r,window:a}=e,s=pe.useRef();s.current==null&&(s.current=ZC({window:a,v5Compat:!0}));let c=s.current,[O,w]=pe.useState({action:c.action,location:c.location});return pe.useLayoutEffect(()=>c.listen(w),[c]),pe.createElement(YI,{basename:t,children:r,location:O.location,navigationType:O.action,navigator:c})}const rO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",nO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vo=pe.forwardRef(function(t,r){let{onClick:a,relative:s,reloadDocument:c,replace:O,state:w,target:f,to:F,preventScrollReset:I}=t,K=QI(t,eO),{basename:M}=pe.useContext(co),H,B=!1;if(typeof F=="string"&&nO.test(F)&&(H=F,rO)){let T=new URL(window.location.href),l=F.startsWith("//")?new URL(T.protocol+F):new URL(F),C=yv(l.pathname,M);l.origin===T.origin&&C!=null?F=C+l.search+l.hash:B=!0}let k=MI(F,{relative:s}),N=iO(F,{replace:O,state:w,target:f,preventScrollReset:I,relative:s});function L(T){a&&a(T),T.defaultPrevented||N(T)}return pe.createElement("a",lh({},K,{href:H||k,onClick:B||c?a:L,ref:r,target:f}))});var ym;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(ym||(ym={}));var Em;(function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Em||(Em={}));function iO(e,t){let{target:r,replace:a,state:s,preventScrollReset:c,relative:O}=t===void 0?{}:t,w=ho(),f=Qa(),F=l_(e,{relative:O});return pe.useCallback(I=>{if(JI(I,r)){I.preventDefault();let K=a!==void 0?a:du(f)===du(F);w(e,{replace:K,state:s,preventScrollReset:c,relative:O})}},[f,w,F,a,s,r,e,c,O])}function _v(e){let t=pe.useRef(uh(e)),r=pe.useRef(!1),a=Qa(),s=pe.useMemo(()=>qI(a.search,r.current?null:t.current),[a.search]),c=ho(),O=pe.useCallback((w,f)=>{const F=uh(typeof w=="function"?w(s):w);r.current=!0,c("?"+F,f)},[c,s]);return[s,O]}const Tv=()=>QC(),go=OC;function aO(e,t){const[r,a]=pe.useState(()=>{if(typeof window>"u")return t;try{const c=window.localStorage.getItem(e);return c?JSON.parse(c):t}catch{return t}});return[c=>{const O=c instanceof Function?c(r):c;a(O),typeof window<"u"&&window.localStorage.setItem(e,JSON.stringify(O))}]}function sO(){const[e,t]=pe.useState({width:0,height:0});return pe.useEffect(()=>{function r(){t({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",r),r(),()=>window.removeEventListener("resize",r)},[]),e}const fh=({type:e})=>_e(vo,{to:"/",children:_e("img",{src:e==="big"?"./images/icons/logo.svg":"./images/icons/logo-small.svg",alt:"logo"})});var Rr=(e=>(e.ARROW_LEFT="icon__arrow-left",e.ARROW_LEFT_DISABLED="icon__arrow-left--disabled",e.ARROW_RIGHT="icon__arrow-right",e.ARROW_RIGHT_DISABLED="icon__arrow-right--disabled",e.ARROW_UP="icon__arrow-up",e.ARROW_UP_DISABLED="icon__arrow-up--disabled",e.PLAY="icon__play",e.PAUSE="icon__pause",e.BLOCKED="icon__blocked",e.STAR_EMPTY="icon__star-empty",e.STAR_FILLED="icon__star-filled",e.STAR_HALF_FILLED="icon__star-half-filled",e))(Rr||{}),ch={},oO={get exports(){return ch},set exports(e){ch=e}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function r(){for(var a=[],s=0;s<arguments.length;s++){var c=arguments[s];if(c){var O=typeof c;if(O==="string"||O==="number")a.push(c);else if(Array.isArray(c)){if(c.length){var w=r.apply(null,c);w&&a.push(w)}}else if(O==="object"){if(c.toString!==Object.prototype.toString&&!c.toString.toString().includes("[native code]")){a.push(c.toString());continue}for(var f in c)t.call(c,f)&&c[f]&&a.push(f)}}}return a.join(" ")}e.exports?(r.default=r,e.exports=r):window.classNames=r})()})(oO);const of=ch;const on=({type:e,addClassName:t})=>_e("span",{className:of("icon",e,t)});const lO=()=>{const e=Qa(),t=()=>{window.scrollTo({top:0,left:0,behavior:"smooth"})};return tt(vo,{to:`${e.pathname}`,className:"footer__button-top button-top",type:"button",onClick:t,children:[_e("p",{className:"button-top__text",children:"Back to top"}),_e(on,{type:Rr.ARROW_UP,addClassName:"button-top__icon"})]})};const uO=()=>{const{width:e}=sO();return _e("footer",{className:"footer",children:tt("div",{className:"footer__container",children:[e>640?_e(fh,{type:"big"}):_e(fh,{type:"small"}),_e(vo,{to:"https://github.com/dmytro-lebedchenko",className:"footer__link",target:"_blank",rel:"noreferrer",children:"Github"}),_e(lO,{})]})})};const fO=()=>_e("header",{className:"header",children:_e(fh,{type:"big"})});function sn(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map(function(s){return"'"+s+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Ti(e){return!!e&&!!e[ut]}function Bn(e){var t;return!!e&&(function(r){if(!r||typeof r!="object")return!1;var a=Object.getPrototypeOf(r);if(a===null)return!0;var s=Object.hasOwnProperty.call(a,"constructor")&&a.constructor;return s===Object||typeof s=="function"&&Function.toString.call(s)===EO}(e)||Array.isArray(e)||!!e[Pm]||!!(!((t=e.constructor)===null||t===void 0)&&t[Pm])||Sv(e)||xv(e))}function Qi(e,t,r){r===void 0&&(r=!1),Za(e)===0?(r?Object.keys:Na)(e).forEach(function(a){r&&typeof a=="symbol"||t(a,e[a],e)}):e.forEach(function(a,s){return t(s,a,e)})}function Za(e){var t=e[ut];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:Sv(e)?2:xv(e)?3:0}function Fa(e,t){return Za(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function cO(e,t){return Za(e)===2?e.get(t):e[t]}function u_(e,t,r){var a=Za(e);a===2?e.set(t,r):a===3?e.add(r):e[t]=r}function f_(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function Sv(e){return mO&&e instanceof Map}function xv(e){return yO&&e instanceof Set}function Bi(e){return e.o||e.t}function Lv(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=d_(e);delete t[ut];for(var r=Na(t),a=0;a<r.length;a++){var s=r[a],c=t[s];c.writable===!1&&(c.writable=!0,c.configurable=!0),(c.get||c.set)&&(t[s]={configurable:!0,writable:!0,enumerable:c.enumerable,value:e[s]})}return Object.create(Object.getPrototypeOf(e),t)}function Av(e,t){return t===void 0&&(t=!1),Pv(e)||Ti(e)||!Bn(e)||(Za(e)>1&&(e.set=e.add=e.clear=e.delete=dO),Object.freeze(e),t&&Qi(e,function(r,a){return Av(a,!0)},!0)),e}function dO(){sn(2)}function Pv(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function En(e){var t=gh[e];return t||sn(18,e),t}function hO(e,t){gh[e]||(gh[e]=t)}function dh(){return no}function td(e,t){t&&(En("Patches"),e.u=[],e.s=[],e.v=t)}function vu(e){hh(e),e.p.forEach(vO),e.p=null}function hh(e){e===no&&(no=e.l)}function _m(e){return no={p:[],l:no,h:e,m:!0,_:0}}function vO(e){var t=e[ut];t.i===0||t.i===1?t.j():t.O=!0}function rd(e,t){t._=t.p.length;var r=t.p[0],a=e!==void 0&&e!==r;return t.h.g||En("ES5").S(t,e,a),a?(r[ut].P&&(vu(t),sn(4)),Bn(e)&&(e=gu(t,e),t.l||pu(t,e)),t.u&&En("Patches").M(r[ut].t,e,t.u,t.s)):e=gu(t,r,[]),vu(t),t.u&&t.v(t.u,t.s),e!==c_?e:void 0}function gu(e,t,r){if(Pv(t))return t;var a=t[ut];if(!a)return Qi(t,function(w,f){return Tm(e,a,t,w,f,r)},!0),t;if(a.A!==e)return t;if(!a.P)return pu(e,a.t,!0),a.t;if(!a.I){a.I=!0,a.A._--;var s=a.i===4||a.i===5?a.o=Lv(a.k):a.o,c=s,O=!1;a.i===3&&(c=new Set(s),s.clear(),O=!0),Qi(c,function(w,f){return Tm(e,a,s,w,f,r,O)}),pu(e,s,!1),r&&e.u&&En("Patches").N(a,r,e.u,e.s)}return a.o}function Tm(e,t,r,a,s,c,O){if(Ti(s)){var w=gu(e,s,c&&t&&t.i!==3&&!Fa(t.R,a)?c.concat(a):void 0);if(u_(r,a,w),!Ti(w))return;e.m=!1}else O&&r.add(s);if(Bn(s)&&!Pv(s)){if(!e.h.D&&e._<1)return;gu(e,s),t&&t.A.l||pu(e,s)}}function pu(e,t,r){r===void 0&&(r=!1),!e.l&&e.h.D&&e.m&&Av(t,r)}function nd(e,t){var r=e[ut];return(r?Bi(r):e)[t]}function Sm(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var a=Object.getOwnPropertyDescriptor(r,t);if(a)return a;r=Object.getPrototypeOf(r)}}function ni(e){e.P||(e.P=!0,e.l&&ni(e.l))}function id(e){e.o||(e.o=Lv(e.t))}function vh(e,t,r){var a=Sv(t)?En("MapSet").F(t,r):xv(t)?En("MapSet").T(t,r):e.g?function(s,c){var O=Array.isArray(s),w={i:O?1:0,A:c?c.A:dh(),P:!1,I:!1,R:{},l:c,t:s,k:null,o:null,j:null,C:!1},f=w,F=io;O&&(f=[w],F=Ds);var I=Proxy.revocable(f,F),K=I.revoke,M=I.proxy;return w.k=M,w.j=K,M}(t,r):En("ES5").J(t,r);return(r?r.A:dh()).p.push(a),a}function gO(e){return Ti(e)||sn(22,e),function t(r){if(!Bn(r))return r;var a,s=r[ut],c=Za(r);if(s){if(!s.P&&(s.i<4||!En("ES5").K(s)))return s.t;s.I=!0,a=xm(r,c),s.I=!1}else a=xm(r,c);return Qi(a,function(O,w){s&&cO(s.t,O)===w||u_(a,O,t(w))}),c===3?new Set(a):a}(e)}function xm(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return Lv(e)}function pO(){function e(c,O){var w=s[c];return w?w.enumerable=O:s[c]=w={configurable:!0,enumerable:O,get:function(){var f=this[ut];return io.get(f,c)},set:function(f){var F=this[ut];io.set(F,c,f)}},w}function t(c){for(var O=c.length-1;O>=0;O--){var w=c[O][ut];if(!w.P)switch(w.i){case 5:a(w)&&ni(w);break;case 4:r(w)&&ni(w)}}}function r(c){for(var O=c.t,w=c.k,f=Na(w),F=f.length-1;F>=0;F--){var I=f[F];if(I!==ut){var K=O[I];if(K===void 0&&!Fa(O,I))return!0;var M=w[I],H=M&&M[ut];if(H?H.t!==K:!f_(M,K))return!0}}var B=!!O[ut];return f.length!==Na(O).length+(B?0:1)}function a(c){var O=c.k;if(O.length!==c.t.length)return!0;var w=Object.getOwnPropertyDescriptor(O,O.length-1);if(w&&!w.get)return!0;for(var f=0;f<O.length;f++)if(!O.hasOwnProperty(f))return!0;return!1}var s={};hO("ES5",{J:function(c,O){var w=Array.isArray(c),f=function(I,K){if(I){for(var M=Array(K.length),H=0;H<K.length;H++)Object.defineProperty(M,""+H,e(H,!0));return M}var B=d_(K);delete B[ut];for(var k=Na(B),N=0;N<k.length;N++){var L=k[N];B[L]=e(L,I||!!B[L].enumerable)}return Object.create(Object.getPrototypeOf(K),B)}(w,c),F={i:w?5:4,A:O?O.A:dh(),P:!1,I:!1,R:{},l:O,t:c,k:f,o:null,O:!1,C:!1};return Object.defineProperty(f,ut,{value:F,writable:!0}),f},S:function(c,O,w){w?Ti(O)&&O[ut].A===c&&t(c.p):(c.u&&function f(F){if(F&&typeof F=="object"){var I=F[ut];if(I){var K=I.t,M=I.k,H=I.R,B=I.i;if(B===4)Qi(M,function(l){l!==ut&&(K[l]!==void 0||Fa(K,l)?H[l]||f(M[l]):(H[l]=!0,ni(I)))}),Qi(K,function(l){M[l]!==void 0||Fa(M,l)||(H[l]=!1,ni(I))});else if(B===5){if(a(I)&&(ni(I),H.length=!0),M.length<K.length)for(var k=M.length;k<K.length;k++)H[k]=!1;else for(var N=K.length;N<M.length;N++)H[N]=!0;for(var L=Math.min(M.length,K.length),T=0;T<L;T++)M.hasOwnProperty(T)||(H[T]=!0),H[T]===void 0&&f(M[T])}}}}(c.p[0]),t(c.p))},K:function(c){return c.i===4?r(c):a(c)}})}var Lm,no,Dv=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",mO=typeof Map<"u",yO=typeof Set<"u",Am=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",c_=Dv?Symbol.for("immer-nothing"):((Lm={})["immer-nothing"]=!0,Lm),Pm=Dv?Symbol.for("immer-draftable"):"__$immer_draftable",ut=Dv?Symbol.for("immer-state"):"__$immer_state",EO=""+Object.prototype.constructor,Na=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,d_=Object.getOwnPropertyDescriptors||function(e){var t={};return Na(e).forEach(function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)}),t},gh={},io={get:function(e,t){if(t===ut)return e;var r=Bi(e);if(!Fa(r,t))return function(s,c,O){var w,f=Sm(c,O);return f?"value"in f?f.value:(w=f.get)===null||w===void 0?void 0:w.call(s.k):void 0}(e,r,t);var a=r[t];return e.I||!Bn(a)?a:a===nd(e.t,t)?(id(e),e.o[t]=vh(e.A.h,a,e)):a},has:function(e,t){return t in Bi(e)},ownKeys:function(e){return Reflect.ownKeys(Bi(e))},set:function(e,t,r){var a=Sm(Bi(e),t);if(a!=null&&a.set)return a.set.call(e.k,r),!0;if(!e.P){var s=nd(Bi(e),t),c=s==null?void 0:s[ut];if(c&&c.t===r)return e.o[t]=r,e.R[t]=!1,!0;if(f_(r,s)&&(r!==void 0||Fa(e.t,t)))return!0;id(e),ni(e)}return e.o[t]===r&&(r!==void 0||t in e.o)||Number.isNaN(r)&&Number.isNaN(e.o[t])||(e.o[t]=r,e.R[t]=!0),!0},deleteProperty:function(e,t){return nd(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,id(e),ni(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=Bi(e),a=Reflect.getOwnPropertyDescriptor(r,t);return a&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:a.enumerable,value:r[t]}},defineProperty:function(){sn(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){sn(12)}},Ds={};Qi(io,function(e,t){Ds[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Ds.deleteProperty=function(e,t){return Ds.set.call(this,e,t,void 0)},Ds.set=function(e,t,r){return io.set.call(this,e[0],t,r,e[0])};var _O=function(){function e(r){var a=this;this.g=Am,this.D=!0,this.produce=function(s,c,O){if(typeof s=="function"&&typeof c!="function"){var w=c;c=s;var f=a;return function(k){var N=this;k===void 0&&(k=w);for(var L=arguments.length,T=Array(L>1?L-1:0),l=1;l<L;l++)T[l-1]=arguments[l];return f.produce(k,function(C){var A;return(A=c).call.apply(A,[N,C].concat(T))})}}var F;if(typeof c!="function"&&sn(6),O!==void 0&&typeof O!="function"&&sn(7),Bn(s)){var I=_m(a),K=vh(a,s,void 0),M=!0;try{F=c(K),M=!1}finally{M?vu(I):hh(I)}return typeof Promise<"u"&&F instanceof Promise?F.then(function(k){return td(I,O),rd(k,I)},function(k){throw vu(I),k}):(td(I,O),rd(F,I))}if(!s||typeof s!="object"){if((F=c(s))===void 0&&(F=s),F===c_&&(F=void 0),a.D&&Av(F,!0),O){var H=[],B=[];En("Patches").M(s,F,H,B),O(H,B)}return F}sn(21,s)},this.produceWithPatches=function(s,c){if(typeof s=="function")return function(F){for(var I=arguments.length,K=Array(I>1?I-1:0),M=1;M<I;M++)K[M-1]=arguments[M];return a.produceWithPatches(F,function(H){return s.apply(void 0,[H].concat(K))})};var O,w,f=a.produce(s,c,function(F,I){O=F,w=I});return typeof Promise<"u"&&f instanceof Promise?f.then(function(F){return[F,O,w]}):[f,O,w]},typeof(r==null?void 0:r.useProxies)=="boolean"&&this.setUseProxies(r.useProxies),typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var t=e.prototype;return t.createDraft=function(r){Bn(r)||sn(8),Ti(r)&&(r=gO(r));var a=_m(this),s=vh(this,r,void 0);return s[ut].C=!0,hh(a),s},t.finishDraft=function(r,a){var s=r&&r[ut],c=s.A;return td(c,a),rd(void 0,c)},t.setAutoFreeze=function(r){this.D=r},t.setUseProxies=function(r){r&&!Am&&sn(20),this.g=r},t.applyPatches=function(r,a){var s;for(s=a.length-1;s>=0;s--){var c=a[s];if(c.path.length===0&&c.op==="replace"){r=c.value;break}}s>-1&&(a=a.slice(s+1));var O=En("Patches").$;return Ti(r)?O(r,a):this.produce(r,function(w){return O(w,a)})},e}(),Or=new _O,h_=Or.produce;Or.produceWithPatches.bind(Or);Or.setAutoFreeze.bind(Or);Or.setUseProxies.bind(Or);Or.applyPatches.bind(Or);Or.createDraft.bind(Or);Or.finishDraft.bind(Or);function ao(e){return ao=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ao(e)}function TO(e,t){if(ao(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t||"default");if(ao(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function SO(e){var t=TO(e,"string");return ao(t)==="symbol"?t:String(t)}function xO(e,t,r){return t=SO(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Rm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Dm(Object(r),!0).forEach(function(a){xO(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dm(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function zt(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Cm=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),ad=function(){return Math.random().toString(36).substring(7).split("").join(".")},mu={INIT:"@@redux/INIT"+ad(),REPLACE:"@@redux/REPLACE"+ad(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+ad()}};function LO(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function v_(e,t,r){var a;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(zt(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(zt(1));return r(v_)(e,t)}if(typeof e!="function")throw new Error(zt(2));var s=e,c=t,O=[],w=O,f=!1;function F(){w===O&&(w=O.slice())}function I(){if(f)throw new Error(zt(3));return c}function K(k){if(typeof k!="function")throw new Error(zt(4));if(f)throw new Error(zt(5));var N=!0;return F(),w.push(k),function(){if(N){if(f)throw new Error(zt(6));N=!1,F();var T=w.indexOf(k);w.splice(T,1),O=null}}}function M(k){if(!LO(k))throw new Error(zt(7));if(typeof k.type>"u")throw new Error(zt(8));if(f)throw new Error(zt(9));try{f=!0,c=s(c,k)}finally{f=!1}for(var N=O=w,L=0;L<N.length;L++){var T=N[L];T()}return k}function H(k){if(typeof k!="function")throw new Error(zt(10));s=k,M({type:mu.REPLACE})}function B(){var k,N=K;return k={subscribe:function(T){if(typeof T!="object"||T===null)throw new Error(zt(11));function l(){T.next&&T.next(I())}l();var C=N(l);return{unsubscribe:C}}},k[Cm]=function(){return this},k}return M({type:mu.INIT}),a={dispatch:M,subscribe:K,getState:I,replaceReducer:H},a[Cm]=B,a}function AO(e){Object.keys(e).forEach(function(t){var r=e[t],a=r(void 0,{type:mu.INIT});if(typeof a>"u")throw new Error(zt(12));if(typeof r(void 0,{type:mu.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(zt(13))})}function PO(e){for(var t=Object.keys(e),r={},a=0;a<t.length;a++){var s=t[a];typeof e[s]=="function"&&(r[s]=e[s])}var c=Object.keys(r),O;try{AO(r)}catch(w){O=w}return function(f,F){if(f===void 0&&(f={}),O)throw O;for(var I=!1,K={},M=0;M<c.length;M++){var H=c[M],B=r[H],k=f[H],N=B(k,F);if(typeof N>"u")throw F&&F.type,new Error(zt(14));K[H]=N,I=I||N!==k}return I=I||c.length!==Object.keys(f).length,I?K:f}}function yu(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length===0?function(a){return a}:t.length===1?t[0]:t.reduce(function(a,s){return function(){return a(s.apply(void 0,arguments))}})}function DO(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(a){return function(){var s=a.apply(void 0,arguments),c=function(){throw new Error(zt(15))},O={getState:s.getState,dispatch:function(){return c.apply(void 0,arguments)}},w=t.map(function(f){return f(O)});return c=yu.apply(void 0,w)(s.dispatch),Rm(Rm({},s),{},{dispatch:c})}}}function g_(e){var t=function(a){var s=a.dispatch,c=a.getState;return function(O){return function(w){return typeof w=="function"?w(s,c,e):O(w)}}};return t}var p_=g_();p_.withExtraArgument=g_;const Im=p_;var RO=globalThis&&globalThis.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,s){a.__proto__=s}||function(a,s){for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&(a[c]=s[c])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function a(){this.constructor=t}t.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}}(),CO=globalThis&&globalThis.__generator||function(e,t){var r={label:0,sent:function(){if(c[0]&1)throw c[1];return c[1]},trys:[],ops:[]},a,s,c,O;return O={next:w(0),throw:w(1),return:w(2)},typeof Symbol=="function"&&(O[Symbol.iterator]=function(){return this}),O;function w(F){return function(I){return f([F,I])}}function f(F){if(a)throw new TypeError("Generator is already executing.");for(;r;)try{if(a=1,s&&(c=F[0]&2?s.return:F[0]?s.throw||((c=s.return)&&c.call(s),0):s.next)&&!(c=c.call(s,F[1])).done)return c;switch(s=0,c&&(F=[F[0]&2,c.value]),F[0]){case 0:case 1:c=F;break;case 4:return r.label++,{value:F[1],done:!1};case 5:r.label++,s=F[1],F=[0];continue;case 7:F=r.ops.pop(),r.trys.pop();continue;default:if(c=r.trys,!(c=c.length>0&&c[c.length-1])&&(F[0]===6||F[0]===2)){r=0;continue}if(F[0]===3&&(!c||F[1]>c[0]&&F[1]<c[3])){r.label=F[1];break}if(F[0]===6&&r.label<c[1]){r.label=c[1],c=F;break}if(c&&r.label<c[2]){r.label=c[2],r.ops.push(F);break}c[2]&&r.ops.pop(),r.trys.pop();continue}F=t.call(e,r)}catch(I){F=[6,I],s=0}finally{a=c=0}if(F[0]&5)throw F[1];return{value:F[0]?F[1]:void 0,done:!0}}},Eu=globalThis&&globalThis.__spreadArray||function(e,t){for(var r=0,a=t.length,s=e.length;r<a;r++,s++)e[s]=t[r];return e},IO=Object.defineProperty,OO=Object.defineProperties,wO=Object.getOwnPropertyDescriptors,Om=Object.getOwnPropertySymbols,MO=Object.prototype.hasOwnProperty,kO=Object.prototype.propertyIsEnumerable,wm=function(e,t,r){return t in e?IO(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},pi=function(e,t){for(var r in t||(t={}))MO.call(t,r)&&wm(e,r,t[r]);if(Om)for(var a=0,s=Om(t);a<s.length;a++){var r=s[a];kO.call(t,r)&&wm(e,r,t[r])}return e},sd=function(e,t){return OO(e,wO(t))},bO=function(e,t,r){return new Promise(function(a,s){var c=function(f){try{w(r.next(f))}catch(F){s(F)}},O=function(f){try{w(r.throw(f))}catch(F){s(F)}},w=function(f){return f.done?a(f.value):Promise.resolve(f.value).then(c,O)};w((r=r.apply(e,t)).next())})},FO=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?yu:yu.apply(null,arguments)};function NO(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var r=t;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return t===r}var UO=function(e){RO(t,e);function t(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];var s=e.apply(this,r)||this;return Object.setPrototypeOf(s,t.prototype),s}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return e.prototype.concat.apply(this,r)},t.prototype.prepend=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];return r.length===1&&Array.isArray(r[0])?new(t.bind.apply(t,Eu([void 0],r[0].concat(this)))):new(t.bind.apply(t,Eu([void 0],r.concat(this))))},t}(Array);function ph(e){return Bn(e)?h_(e,function(){}):e}function BO(e){return typeof e=="boolean"}function KO(){return function(t){return WO(t)}}function WO(e){e===void 0&&(e={});var t=e.thunk,r=t===void 0?!0:t;e.immutableCheck,e.serializableCheck;var a=new UO;return r&&(BO(r)?a.push(Im):a.push(Im.withExtraArgument(r.extraArgument))),a}var GO=!0;function HO(e){var t=KO(),r=e||{},a=r.reducer,s=a===void 0?void 0:a,c=r.middleware,O=c===void 0?t():c,w=r.devTools,f=w===void 0?!0:w,F=r.preloadedState,I=F===void 0?void 0:F,K=r.enhancers,M=K===void 0?void 0:K,H;if(typeof s=="function")H=s;else if(NO(s))H=PO(s);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var B=O;typeof B=="function"&&(B=B(t));var k=DO.apply(void 0,B),N=yu;f&&(N=FO(pi({trace:!GO},typeof f=="object"&&f)));var L=[k];Array.isArray(M)?L=Eu([k],M):typeof M=="function"&&(L=M(L));var T=N.apply(void 0,L);return v_(H,I,T)}function mi(e,t){function r(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];if(t){var c=t.apply(void 0,a);if(!c)throw new Error("prepareAction did not return an object");return pi(pi({type:e,payload:c.payload},"meta"in c&&{meta:c.meta}),"error"in c&&{error:c.error})}return{type:e,payload:a[0]}}return r.toString=function(){return""+e},r.type=e,r.match=function(a){return a.type===e},r}function m_(e){var t={},r=[],a,s={addCase:function(c,O){var w=typeof c=="string"?c:c.type;if(w in t)throw new Error("addCase cannot be called with two reducers for the same action type");return t[w]=O,s},addMatcher:function(c,O){return r.push({matcher:c,reducer:O}),s},addDefaultCase:function(c){return a=c,s}};return e(s),[t,r,a]}function jO(e){return typeof e=="function"}function VO(e,t,r,a){r===void 0&&(r=[]);var s=typeof t=="function"?m_(t):[t,r,a],c=s[0],O=s[1],w=s[2],f;if(jO(e))f=function(){return ph(e())};else{var F=ph(e);f=function(){return F}}function I(K,M){K===void 0&&(K=f());var H=Eu([c[M.type]],O.filter(function(B){var k=B.matcher;return k(M)}).map(function(B){var k=B.reducer;return k}));return H.filter(function(B){return!!B}).length===0&&(H=[w]),H.reduce(function(B,k){if(k)if(Ti(B)){var N=B,L=k(N,M);return L===void 0?B:L}else{if(Bn(B))return h_(B,function(T){return k(T,M)});var L=k(B,M);if(L===void 0){if(B===null)return B;throw Error("A case reducer on a non-draftable value must not return undefined")}return L}return B},K)}return I.getInitialState=f,I}function zO(e,t){return e+"/"+t}function y_(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");typeof process<"u";var r=typeof e.initialState=="function"?e.initialState:ph(e.initialState),a=e.reducers||{},s=Object.keys(a),c={},O={},w={};s.forEach(function(I){var K=a[I],M=zO(t,I),H,B;"reducer"in K?(H=K.reducer,B=K.prepare):H=K,c[I]=H,O[M]=H,w[I]=B?mi(M,B):mi(M)});function f(){var I=typeof e.extraReducers=="function"?m_(e.extraReducers):[e.extraReducers],K=I[0],M=K===void 0?{}:K,H=I[1],B=H===void 0?[]:H,k=I[2],N=k===void 0?void 0:k,L=pi(pi({},M),O);return VO(r,function(T){for(var l in L)T.addCase(l,L[l]);for(var C=0,A=B;C<A.length;C++){var d=A[C];T.addMatcher(d.matcher,d.reducer)}N&&T.addDefaultCase(N)})}var F;return{name:t,reducer:function(I,K){return F||(F=f()),F(I,K)},actions:w,caseReducers:c,getInitialState:function(){return F||(F=f()),F.getInitialState()}}}var $O="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",YO=function(e){e===void 0&&(e=21);for(var t="",r=e;r--;)t+=$O[Math.random()*64|0];return t},XO=["name","message","stack","code"],od=function(){function e(t,r){this.payload=t,this.meta=r}return e}(),Mm=function(){function e(t,r){this.payload=t,this.meta=r}return e}(),QO=function(e){if(typeof e=="object"&&e!==null){for(var t={},r=0,a=XO;r<a.length;r++){var s=a[r];typeof e[s]=="string"&&(t[s]=e[s])}return t}return{message:String(e)}},E_=function(){function e(t,r,a){var s=mi(t+"/fulfilled",function(F,I,K,M){return{payload:F,meta:sd(pi({},M||{}),{arg:K,requestId:I,requestStatus:"fulfilled"})}}),c=mi(t+"/pending",function(F,I,K){return{payload:void 0,meta:sd(pi({},K||{}),{arg:I,requestId:F,requestStatus:"pending"})}}),O=mi(t+"/rejected",function(F,I,K,M,H){return{payload:M,error:(a&&a.serializeError||QO)(F||"Rejected"),meta:sd(pi({},H||{}),{arg:K,requestId:I,rejectedWithValue:!!M,requestStatus:"rejected",aborted:(F==null?void 0:F.name)==="AbortError",condition:(F==null?void 0:F.name)==="ConditionError"})}}),w=typeof AbortController<"u"?AbortController:function(){function F(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return F.prototype.abort=function(){},F}();function f(F){return function(I,K,M){var H=a!=null&&a.idGenerator?a.idGenerator(F):YO(),B=new w,k;function N(T){k=T,B.abort()}var L=function(){return bO(this,null,function(){var T,l,C,A,d,v,h;return CO(this,function(g){switch(g.label){case 0:return g.trys.push([0,4,,5]),A=(T=a==null?void 0:a.condition)==null?void 0:T.call(a,F,{getState:K,extra:M}),JO(A)?[4,A]:[3,2];case 1:A=g.sent(),g.label=2;case 2:if(A===!1||B.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return d=new Promise(function(P,D){return B.signal.addEventListener("abort",function(){return D({name:"AbortError",message:k||"Aborted"})})}),I(c(H,F,(l=a==null?void 0:a.getPendingMeta)==null?void 0:l.call(a,{requestId:H,arg:F},{getState:K,extra:M}))),[4,Promise.race([d,Promise.resolve(r(F,{dispatch:I,getState:K,extra:M,requestId:H,signal:B.signal,abort:N,rejectWithValue:function(P,D){return new od(P,D)},fulfillWithValue:function(P,D){return new Mm(P,D)}})).then(function(P){if(P instanceof od)throw P;return P instanceof Mm?s(P.payload,H,F,P.meta):s(P,H,F)})])];case 3:return C=g.sent(),[3,5];case 4:return v=g.sent(),C=v instanceof od?O(null,H,F,v.payload,v.meta):O(v,H,F),[3,5];case 5:return h=a&&!a.dispatchConditionRejection&&O.match(C)&&C.meta.condition,h||I(C),[2,C]}})})}();return Object.assign(L,{abort:N,requestId:H,arg:F,unwrap:function(){return L.then(ZO)}})}}return Object.assign(f,{pending:c,rejected:O,fulfilled:s,typePrefix:t})}return e.withTypes=function(){return e},e}();function ZO(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function JO(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var Rv="listenerMiddleware";mi(Rv+"/add");mi(Rv+"/removeAll");mi(Rv+"/remove");var km;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);pO();const qO="https://api.wisey.app/api/v1/core/preview-courses",ew="Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJkOTRlNjg4NS1kM2U5LTQwY2EtYTVjYy01MDRkNjZlZDVlN2QiLCJwbGF0Zm9ybSI6InN1YnNjcmlwdGlvbnMiLCJpYXQiOjE2Nzg3MDQ3NjIsImV4cCI6MTY3OTYwNDc2Mn0.Qw3LF39CDp27ZxoGzt5rikJM_OTx0eNaoyFFLxxrXUM";async function tw(e,t="GET",r=null){const a={method:t,headers:{Authorization:ew}};r&&(a.body=JSON.stringify(r),a.headers={"Content-Type":"application/json;"});const s=await fetch(`${qO}${e}`,{...a});if(!s.ok)throw new Error;return s.json()}const __={get:e=>tw(e)},rw=async()=>{const{courses:e}=await __.get("");return e},nw=e=>__.get(`/${e}`),iw={courses:[],loaded:!1,hasError:!1},Bl=E_("courses/fetch",()=>rw()),aw=y_({name:"courses",initialState:iw,reducers:{setCourses:(e,t)=>({...e,courses:t.payload})},extraReducers:e=>{e.addCase(Bl.pending,t=>({...t,loaded:!1,hasError:!1})),e.addCase(Bl.fulfilled,(t,r)=>({...t,courses:r.payload,loaded:!0,hasError:!1})),e.addCase(Bl.rejected,t=>({...t,loaded:!0,hasError:!0}))}}),sw=aw.reducer;const ow=()=>{const e=Tv();return pe.useEffect(()=>{e(Bl())},[e]),tt("div",{className:"App",children:[_e(fO,{}),_e("main",{children:_e("div",{className:"container",children:_e($I,{})})}),_e(uO,{})]})},lw={selectedCourse:null,loaded:!1,hasError:!1},Ns=E_("selectedCourse/fetch",async e=>e?nw(e):null),uw=y_({name:"selectedCourse",initialState:lw,reducers:{setSelectedCourse:(e,t)=>({...e,selectedCourse:t.payload})},extraReducers:e=>{e.addCase(Ns.pending,t=>({...t,loaded:!1,hasError:!1})),e.addCase(Ns.fulfilled,(t,r)=>({...t,selectedCourse:r.payload??null,loaded:!0,hasError:!1})),e.addCase(Ns.rejected,t=>({...t,loaded:!0,hasError:!0}))}}),fw=uw.reducer,cw=HO({reducer:{courses:sw,selectedCourse:fw}});const dw=()=>tt(vo,{to:"/",className:"back-button",type:"button","data-cy":"backButton",children:[_e(on,{type:Rr.ARROW_LEFT,addClassName:"back-button__arrow"}),"Back"]});var mh={},hw={get exports(){return mh},set exports(e){mh=e}};(function(e,t){typeof window<"u"&&function(a,s){e.exports=s()}(ga,()=>(()=>{var r={"./src/config.ts":(O,w,f)=>{f.r(w),f.d(w,{enableStreamingMode:()=>m,hlsDefaultConfig:()=>y,mergeConfig:()=>u});var F=f("./src/controller/abr-controller.ts"),I=f("./src/controller/audio-stream-controller.ts"),K=f("./src/controller/audio-track-controller.ts"),M=f("./src/controller/subtitle-stream-controller.ts"),H=f("./src/controller/subtitle-track-controller.ts"),B=f("./src/controller/buffer-controller.ts"),k=f("./src/controller/timeline-controller.ts"),N=f("./src/controller/cap-level-controller.ts"),L=f("./src/controller/fps-controller.ts"),T=f("./src/controller/eme-controller.ts"),l=f("./src/controller/cmcd-controller.ts"),C=f("./src/utils/xhr-loader.ts"),A=f("./src/utils/fetch-loader.ts"),d=f("./src/utils/cues.ts"),v=f("./src/utils/mediakeys-helper.ts"),h=f("./src/utils/logger.ts");function g(){return g=Object.assign?Object.assign.bind():function(o){for(var S=1;S<arguments.length;S++){var U=arguments[S];for(var R in U)Object.prototype.hasOwnProperty.call(U,R)&&(o[R]=U[R])}return o},g.apply(this,arguments)}function P(o,S){var U=Object.keys(o);if(Object.getOwnPropertySymbols){var R=Object.getOwnPropertySymbols(o);S&&(R=R.filter(function(G){return Object.getOwnPropertyDescriptor(o,G).enumerable})),U.push.apply(U,R)}return U}function D(o){for(var S=1;S<arguments.length;S++){var U=arguments[S]!=null?arguments[S]:{};S%2?P(Object(U),!0).forEach(function(R){p(o,R,U[R])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(U)):P(Object(U)).forEach(function(R){Object.defineProperty(o,R,Object.getOwnPropertyDescriptor(U,R))})}return o}function p(o,S,U){return S=x(S),S in o?Object.defineProperty(o,S,{value:U,enumerable:!0,configurable:!0,writable:!0}):o[S]=U,o}function x(o){var S=b(o,"string");return typeof S=="symbol"?S:String(S)}function b(o,S){if(typeof o!="object"||o===null)return o;var U=o[Symbol.toPrimitive];if(U!==void 0){var R=U.call(o,S||"default");if(typeof R!="object")return R;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(o)}var y=D(D({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:60*1e3*1e3,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:C.default,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:F.default,bufferController:B.default,capLevelController:N.default,fpsController:L.default,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:v.requestMediaKeySystemAccess,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0},_()),{},{subtitleStreamController:M.SubtitleStreamController,subtitleTrackController:H.default,timelineController:k.TimelineController,audioStreamController:I.default,audioTrackController:K.default,emeController:T.default,cmcdController:l.default});function _(){return{cueHandler:d.default,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function u(o,S){if((S.liveSyncDurationCount||S.liveMaxLatencyDurationCount)&&(S.liveSyncDuration||S.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(S.liveMaxLatencyDurationCount!==void 0&&(S.liveSyncDurationCount===void 0||S.liveMaxLatencyDurationCount<=S.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(S.liveMaxLatencyDuration!==void 0&&(S.liveSyncDuration===void 0||S.liveMaxLatencyDuration<=S.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');return g({},o,S)}function m(o){var S=o.loader;if(S!==A.default&&S!==C.default)h.logger.log("[config]: Custom loader detected, cannot enable progressive streaming"),o.progressive=!1;else{var U=(0,A.fetchSupported)();U&&(o.loader=A.default,o.progressive=!0,o.enableSoftwareAES=!0,h.logger.log("[config]: Progressive streaming enabled, using FetchLoader"))}}},"./src/controller/abr-controller.ts":(O,w,f)=>{f.r(w),f.d(w,{default:()=>C});var F=f("./src/polyfills/number.ts"),I=f("./src/utils/ewma-bandwidth-estimator.ts"),K=f("./src/events.ts"),M=f("./src/errors.ts"),H=f("./src/types/loader.ts"),B=f("./src/utils/logger.ts");function k(A,d){for(var v=0;v<d.length;v++){var h=d[v];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(A,L(h.key),h)}}function N(A,d,v){return d&&k(A.prototype,d),v&&k(A,v),Object.defineProperty(A,"prototype",{writable:!1}),A}function L(A){var d=T(A,"string");return typeof d=="symbol"?d:String(d)}function T(A,d){if(typeof A!="object"||A===null)return A;var v=A[Symbol.toPrimitive];if(v!==void 0){var h=v.call(A,d||"default");if(typeof h!="object")return h;throw new TypeError("@@toPrimitive must return a primitive value.")}return(d==="string"?String:Number)(A)}var l=function(){function A(v){this.hls=void 0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=void 0,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this.hls=v;var h=v.config;this.bwEstimator=new I.default(h.abrEwmaSlowVoD,h.abrEwmaFastVoD,h.abrEwmaDefaultEstimate),this.registerListeners()}var d=A.prototype;return d.registerListeners=function(){var h=this.hls;h.on(K.Events.FRAG_LOADING,this.onFragLoading,this),h.on(K.Events.FRAG_LOADED,this.onFragLoaded,this),h.on(K.Events.FRAG_BUFFERED,this.onFragBuffered,this),h.on(K.Events.LEVEL_LOADED,this.onLevelLoaded,this),h.on(K.Events.ERROR,this.onError,this)},d.unregisterListeners=function(){var h=this.hls;h.off(K.Events.FRAG_LOADING,this.onFragLoading,this),h.off(K.Events.FRAG_LOADED,this.onFragLoaded,this),h.off(K.Events.FRAG_BUFFERED,this.onFragBuffered,this),h.off(K.Events.LEVEL_LOADED,this.onLevelLoaded,this),h.off(K.Events.ERROR,this.onError,this)},d.destroy=function(){this.unregisterListeners(),this.clearTimer(),this.hls=this.onCheck=null,this.fragCurrent=this.partCurrent=null},d.onFragLoading=function(h,g){var P=g.frag;if(P.type===H.PlaylistLevelType.MAIN&&!this.timer){var D;this.fragCurrent=P,this.partCurrent=(D=g.part)!=null?D:null,this.timer=self.setInterval(this.onCheck,100)}},d.onLevelLoaded=function(h,g){var P=this.hls.config;g.details.live?this.bwEstimator.update(P.abrEwmaSlowLive,P.abrEwmaFastLive):this.bwEstimator.update(P.abrEwmaSlowVoD,P.abrEwmaFastVoD)},d._abandonRulesCheck=function(){var h=this.fragCurrent,g=this.partCurrent,P=this.hls,D=P.autoLevelEnabled,p=P.media;if(!(!h||!p)){var x=g?g.stats:h.stats,b=g?g.duration:h.duration;if(x.aborted||x.loaded&&x.loaded===x.total||h.level===0){this.clearTimer(),this._nextAutoLevel=-1;return}if(!(!D||p.paused||!p.playbackRate||!p.readyState)){var y=P.mainForwardBufferInfo;if(y!==null){var _=performance.now()-x.loading.start,u=Math.abs(p.playbackRate);if(!(_<=500*b/u)){var m=x.loaded&&x.loading.first,o=this.bwEstimator.getEstimate(),S=P.levels,U=P.minAutoLevel,R=S[h.level],G=x.total||Math.max(x.loaded,Math.round(b*R.maxBitrate/8)),j=m?x.loaded*1e3/_:0,V=j?(G-x.loaded)/j:G*8/o,z=y.len/u;if(!(V<=z)){var $=Number.POSITIVE_INFINITY,X;for(X=h.level-1;X>U;X--){var J=S[X].maxBitrate;if($=j?b*J/(8*.8*j):b*J/o,$<z)break}$>=V||(B.logger.warn("Fragment "+h.sn+(g?" part "+g.index:"")+" of level "+h.level+" is loading too slowly and will cause an underbuffer; aborting and switching to level "+X+`
      Current BW estimate: `+((0,F.isFiniteNumber)(o)?(o/1024).toFixed(3):"Unknown")+` Kb/s
      Estimated load time for current fragment: `+V.toFixed(3)+` s
      Estimated load time for the next fragment: `+$.toFixed(3)+` s
      Time to underbuffer: `+z.toFixed(3)+" s"),P.nextLoadLevel=X,m&&this.bwEstimator.sample(_,x.loaded),this.clearTimer(),(h.loader||h.keyLoader)&&(this.fragCurrent=this.partCurrent=null,h.abortRequests()),P.trigger(K.Events.FRAG_LOAD_EMERGENCY_ABORTED,{frag:h,part:g,stats:x}))}}}}}},d.onFragLoaded=function(h,g){var P=g.frag,D=g.part;if(P.type===H.PlaylistLevelType.MAIN&&(0,F.isFiniteNumber)(P.sn)){var p=D?D.stats:P.stats,x=D?D.duration:P.duration;if(this.clearTimer(),this.lastLoadedFragLevel=P.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var b=this.hls.levels[P.level],y=(b.loaded?b.loaded.bytes:0)+p.loaded,_=(b.loaded?b.loaded.duration:0)+x;b.loaded={bytes:y,duration:_},b.realBitrate=Math.round(8*y/_)}if(P.bitrateTest){var u={stats:p,frag:P,part:D,id:P.type};this.onFragBuffered(K.Events.FRAG_BUFFERED,u)}}},d.onFragBuffered=function(h,g){var P=g.frag,D=g.part,p=D?D.stats:P.stats;if(!p.aborted&&!(P.type!==H.PlaylistLevelType.MAIN||P.sn==="initSegment")){var x=p.parsing.end-p.loading.start;this.bwEstimator.sample(x,p.loaded),p.bwEstimate=this.bwEstimator.getEstimate(),P.bitrateTest?this.bitrateTestDelay=x/1e3:this.bitrateTestDelay=0}},d.onError=function(h,g){var P;if(((P=g.frag)===null||P===void 0?void 0:P.type)===H.PlaylistLevelType.MAIN){if(g.type===M.ErrorTypes.KEY_SYSTEM_ERROR){this.clearTimer();return}switch(g.details){case M.ErrorDetails.FRAG_LOAD_ERROR:case M.ErrorDetails.FRAG_LOAD_TIMEOUT:case M.ErrorDetails.KEY_LOAD_ERROR:case M.ErrorDetails.KEY_LOAD_TIMEOUT:this.clearTimer();break}}},d.clearTimer=function(){self.clearInterval(this.timer),this.timer=void 0},d.getNextABRAutoLevel=function(){var h=this.fragCurrent,g=this.partCurrent,P=this.hls,D=P.maxAutoLevel,p=P.config,x=P.minAutoLevel,b=P.media,y=g?g.duration:h?h.duration:0,_=b&&b.playbackRate!==0?Math.abs(b.playbackRate):1,u=this.bwEstimator?this.bwEstimator.getEstimate():p.abrEwmaDefaultEstimate,m=P.mainForwardBufferInfo,o=(m?m.len:0)/_,S=this.findBestLevel(u,x,D,o,p.abrBandWidthFactor,p.abrBandWidthUpFactor);if(S>=0)return S;B.logger.trace((o?"rebuffering expected":"buffer is empty")+", finding optimal quality level");var U=y?Math.min(y,p.maxStarvationDelay):p.maxStarvationDelay,R=p.abrBandWidthFactor,G=p.abrBandWidthUpFactor;if(!o){var j=this.bitrateTestDelay;if(j){var V=y?Math.min(y,p.maxLoadingDelay):p.maxLoadingDelay;U=V-j,B.logger.trace("bitrate test took "+Math.round(1e3*j)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*U)+" ms"),R=G=1}}return S=this.findBestLevel(u,x,D,o+U,R,G),Math.max(S,0)},d.findBestLevel=function(h,g,P,D,p,x){for(var b,y=this.fragCurrent,_=this.partCurrent,u=this.lastLoadedFragLevel,m=this.hls.levels,o=m[u],S=!!(o!=null&&(b=o.details)!==null&&b!==void 0&&b.live),U=o==null?void 0:o.codecSet,R=_?_.duration:y?y.duration:0,G=P;G>=g;G--){var j=m[G];if(!(!j||U&&j.codecSet!==U)){var V=j.details,z=(_?V==null?void 0:V.partTarget:V==null?void 0:V.averagetargetduration)||R,$=void 0;G<=u?$=p*h:$=x*h;var X=m[G].maxBitrate,J=X*z/$;if(B.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+G+"/"+Math.round($)+"/"+X+"/"+z+"/"+D+"/"+J),$>X&&(J===0||!(0,F.isFiniteNumber)(J)||S&&!this.bitrateTestDelay||J<D))return G}}return-1},N(A,[{key:"nextAutoLevel",get:function(){var h=this._nextAutoLevel,g=this.bwEstimator;if(h!==-1&&!g.canEstimate())return h;var P=this.getNextABRAutoLevel();return h!==-1&&this.hls.levels[P].loadError?h:(h!==-1&&(P=Math.min(h,P)),P)},set:function(h){this._nextAutoLevel=h}}]),A}();const C=l},"./src/controller/audio-stream-controller.ts":(O,w,f)=>{f.r(w),f.d(w,{default:()=>p});var F=f("./src/polyfills/number.ts"),I=f("./src/controller/base-stream-controller.ts"),K=f("./src/events.ts"),M=f("./src/utils/buffer-helper.ts"),H=f("./src/controller/fragment-tracker.ts"),B=f("./src/types/level.ts"),k=f("./src/types/loader.ts"),N=f("./src/loader/fragment.ts"),L=f("./src/demux/chunk-cache.ts"),T=f("./src/demux/transmuxer-interface.ts"),l=f("./src/types/transmuxer.ts"),C=f("./src/controller/fragment-finders.ts"),A=f("./src/utils/discontinuities.ts"),d=f("./src/errors.ts");function v(){return v=Object.assign?Object.assign.bind():function(x){for(var b=1;b<arguments.length;b++){var y=arguments[b];for(var _ in y)Object.prototype.hasOwnProperty.call(y,_)&&(x[_]=y[_])}return x},v.apply(this,arguments)}function h(x,b){x.prototype=Object.create(b.prototype),x.prototype.constructor=x,g(x,b)}function g(x,b){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(_,u){return _.__proto__=u,_},g(x,b)}var P=100,D=function(x){h(b,x);function b(_,u,m){var o;return o=x.call(this,_,u,m,"[audio-stream-controller]")||this,o.videoBuffer=null,o.videoTrackCC=-1,o.waitingVideoCC=-1,o.audioSwitch=!1,o.trackId=-1,o.waitingData=null,o.mainDetails=null,o.bufferFlushed=!1,o.cachedTrackLoadedData=null,o._registerListeners(),o}var y=b.prototype;return y.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},y._registerListeners=function(){var u=this.hls;u.on(K.Events.MEDIA_ATTACHED,this.onMediaAttached,this),u.on(K.Events.MEDIA_DETACHING,this.onMediaDetaching,this),u.on(K.Events.MANIFEST_LOADING,this.onManifestLoading,this),u.on(K.Events.LEVEL_LOADED,this.onLevelLoaded,this),u.on(K.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),u.on(K.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),u.on(K.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),u.on(K.Events.ERROR,this.onError,this),u.on(K.Events.BUFFER_RESET,this.onBufferReset,this),u.on(K.Events.BUFFER_CREATED,this.onBufferCreated,this),u.on(K.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),u.on(K.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),u.on(K.Events.FRAG_BUFFERED,this.onFragBuffered,this)},y._unregisterListeners=function(){var u=this.hls;u.off(K.Events.MEDIA_ATTACHED,this.onMediaAttached,this),u.off(K.Events.MEDIA_DETACHING,this.onMediaDetaching,this),u.off(K.Events.MANIFEST_LOADING,this.onManifestLoading,this),u.off(K.Events.LEVEL_LOADED,this.onLevelLoaded,this),u.off(K.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),u.off(K.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),u.off(K.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),u.off(K.Events.ERROR,this.onError,this),u.off(K.Events.BUFFER_RESET,this.onBufferReset,this),u.off(K.Events.BUFFER_CREATED,this.onBufferCreated,this),u.off(K.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),u.off(K.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),u.off(K.Events.FRAG_BUFFERED,this.onFragBuffered,this)},y.onInitPtsFound=function(u,m){var o=m.frag,S=m.id,U=m.initPTS;if(S==="main"){var R=o.cc;this.initPTS[o.cc]=U,this.log("InitPTS for cc: "+R+" found from main: "+U),this.videoTrackCC=R,this.state===I.State.WAITING_INIT_PTS&&this.tick()}},y.startLoad=function(u){if(!this.levels){this.startPosition=u,this.state=I.State.STOPPED;return}var m=this.lastCurrentTime;this.stopLoad(),this.setInterval(P),this.fragLoadError=0,m>0&&u===-1?(this.log("Override startPosition with lastCurrentTime @"+m.toFixed(3)),u=m,this.state=I.State.IDLE):(this.loadedmetadata=!1,this.state=I.State.WAITING_TRACK),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=u,this.tick()},y.doTick=function(){switch(this.state){case I.State.IDLE:this.doTickIdle();break;case I.State.WAITING_TRACK:{var u,m=this.levels,o=this.trackId,S=m==null||(u=m[o])===null||u===void 0?void 0:u.details;if(S){if(this.waitForCdnTuneIn(S))break;this.state=I.State.WAITING_INIT_PTS}break}case I.State.FRAG_LOADING_WAITING_RETRY:{var U,R=performance.now(),G=this.retryDate;(!G||R>=G||(U=this.media)!==null&&U!==void 0&&U.seeking)&&(this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(this.trackId),this.state=I.State.IDLE);break}case I.State.WAITING_INIT_PTS:{var j=this.waitingData;if(j){var V=j.frag,z=j.part,$=j.cache,X=j.complete;if(this.initPTS[V.cc]!==void 0){this.waitingData=null,this.waitingVideoCC=-1,this.state=I.State.FRAG_LOADING;var J=$.flush(),q={frag:V,part:z,payload:J,networkDetails:null};this._handleFragmentLoadProgress(q),X&&x.prototype._handleFragmentLoadComplete.call(this,q)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log("Waiting fragment cc ("+V.cc+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment();else{var ee=this.getLoadPosition(),ne=M.BufferHelper.bufferInfo(this.mediaBuffer,ee,this.config.maxBufferHole),ae=(0,C.fragmentWithinToleranceTest)(ne.end,this.config.maxFragLookUpTolerance,V);ae<0&&(this.log("Waiting fragment cc ("+V.cc+") @ "+V.start+" cancelled because another fragment at "+ne.end+" is needed"),this.clearWaitingFragment())}}else this.state=I.State.IDLE}}this.onTickEnd()},y.clearWaitingFragment=function(){var u=this.waitingData;u&&(this.fragmentTracker.removeFragment(u.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=I.State.IDLE)},y.resetLoadingState=function(){this.clearWaitingFragment(),x.prototype.resetLoadingState.call(this)},y.onTickEnd=function(){var u=this.media;!u||!u.readyState||(this.lastCurrentTime=u.currentTime)},y.doTickIdle=function(){var u=this.hls,m=this.levels,o=this.media,S=this.trackId,U=u.config;if(!(!m||!m[S])&&!(!o&&(this.startFragRequested||!U.startFragPrefetch))){var R=m[S],G=R.details;if(!G||G.live&&this.levelLastLoaded!==S||this.waitForCdnTuneIn(G)){this.state=I.State.WAITING_TRACK;return}var j=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&j&&(this.bufferFlushed=!1,this.afterBufferFlushed(j,N.ElementaryStreamTypes.AUDIO,k.PlaylistLevelType.AUDIO));var V=this.getFwdBufferInfo(j,k.PlaylistLevelType.AUDIO);if(V!==null){var z=this.audioSwitch;if(!z&&this._streamEnded(V,G)){u.trigger(K.Events.BUFFER_EOS,{type:"audio"}),this.state=I.State.ENDED;return}var $=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,k.PlaylistLevelType.MAIN),X=V.len,J=this.getMaxBufferLength($==null?void 0:$.len);if(!(X>=J&&!z)){var q=G.fragments,ee=q[0].start,ne=V.end;if(z&&o){var ae=this.getLoadPosition();ne=ae,G.PTSKnown&&ae<ee&&(V.end>ee||V.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),o.currentTime=ee+.05)}if(!($&&ne>$.end+G.targetduration)&&!((!$||!$.len)&&V.len)){var ue=this.getNextFragment(ne,G);if(!ue){this.bufferFlushed=!0;return}this.loadFragment(ue,G,ne)}}}}},y.getMaxBufferLength=function(u){var m=x.prototype.getMaxBufferLength.call(this);return u?Math.max(m,u):m},y.onMediaDetaching=function(){this.videoBuffer=null,x.prototype.onMediaDetaching.call(this)},y.onAudioTracksUpdated=function(u,m){var o=m.audioTracks;this.resetTransmuxer(),this.levels=o.map(function(S){return new B.Level(S)})},y.onAudioTrackSwitching=function(u,m){var o=!!m.url;this.trackId=m.id;var S=this.fragCurrent;S&&S.abortRequests(),this.fragCurrent=null,this.clearWaitingFragment(),o?this.setInterval(P):this.resetTransmuxer(),o?(this.audioSwitch=!0,this.state=I.State.IDLE):this.state=I.State.STOPPED,this.tick()},y.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=!1},y.onLevelLoaded=function(u,m){this.mainDetails=m.details,this.cachedTrackLoadedData!==null&&(this.hls.trigger(K.Events.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)},y.onAudioTrackLoaded=function(u,m){var o;if(this.mainDetails==null){this.cachedTrackLoadedData=m;return}var S=this.levels,U=m.details,R=m.id;if(!S){this.warn("Audio tracks were reset while loading level "+R);return}this.log("Track "+R+" loaded ["+U.startSN+","+U.endSN+"],duration:"+U.totalduration);var G=S[R],j=0;if(U.live||(o=G.details)!==null&&o!==void 0&&o.live){var V=this.mainDetails;if(U.fragments[0]||(U.deltaUpdateFailed=!0),U.deltaUpdateFailed||!V)return;!G.details&&U.hasProgramDateTime&&V.hasProgramDateTime?((0,A.alignMediaPlaylistByPDT)(U,V),j=U.fragments[0].start):j=this.alignPlaylists(U,G.details)}G.details=U,this.levelLastLoaded=R,!this.startFragRequested&&(this.mainDetails||!U.live)&&this.setStartPosition(G.details,j),this.state===I.State.WAITING_TRACK&&!this.waitForCdnTuneIn(U)&&(this.state=I.State.IDLE),this.tick()},y._handleFragmentLoadProgress=function(u){var m,o=u.frag,S=u.part,U=u.payload,R=this.config,G=this.trackId,j=this.levels;if(!j){this.warn("Audio tracks were reset while fragment load was in progress. Fragment "+o.sn+" of level "+o.level+" will not be buffered");return}var V=j[G];console.assert(V,"Audio track is defined on fragment load progress");var z=V.details;console.assert(z,"Audio track details are defined on fragment load progress");var $=R.defaultAudioCodec||V.audioCodec||"mp4a.40.2",X=this.transmuxer;X||(X=this.transmuxer=new T.default(this.hls,k.PlaylistLevelType.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));var J=this.initPTS[o.cc],q=(m=o.initSegment)===null||m===void 0?void 0:m.data;if(J!==void 0){var ee=!1,ne=S?S.index:-1,ae=ne!==-1,ue=new l.ChunkMetadata(o.level,o.sn,o.stats.chunkCount,U.byteLength,ne,ae);X.push(U,q,$,"",o,S,z.totalduration,ee,ue,J)}else{this.log("Unknown video PTS for cc "+o.cc+", waiting for video PTS before demuxing audio frag "+o.sn+" of ["+z.startSN+" ,"+z.endSN+"],track "+G);var le=this.waitingData=this.waitingData||{frag:o,part:S,cache:new L.default,complete:!1},fe=le.cache;fe.push(new Uint8Array(U)),this.waitingVideoCC=this.videoTrackCC,this.state=I.State.WAITING_INIT_PTS}},y._handleFragmentLoadComplete=function(u){if(this.waitingData){this.waitingData.complete=!0;return}x.prototype._handleFragmentLoadComplete.call(this,u)},y.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},y.onBufferCreated=function(u,m){var o=m.tracks.audio;o&&(this.mediaBuffer=o.buffer||null),m.tracks.video&&(this.videoBuffer=m.tracks.video.buffer||null)},y.onFragBuffered=function(u,m){var o=m.frag,S=m.part;if(o.type!==k.PlaylistLevelType.AUDIO){if(!this.loadedmetadata&&o.type===k.PlaylistLevelType.MAIN){var U;(U=this.videoBuffer||this.media)!==null&&U!==void 0&&U.buffered.length&&(this.loadedmetadata=!0)}return}if(this.fragContextChanged(o)){this.warn("Fragment "+o.sn+(S?" p: "+S.index:"")+" of level "+o.level+" finished buffering, but was aborted. state: "+this.state+", audioSwitch: "+this.audioSwitch);return}o.sn!=="initSegment"&&(this.fragPrevious=o,this.audioSwitch&&(this.audioSwitch=!1,this.hls.trigger(K.Events.AUDIO_TRACK_SWITCHED,{id:this.trackId}))),this.fragBufferedComplete(o,S)},y.onError=function(u,m){if(m.type===d.ErrorTypes.KEY_SYSTEM_ERROR){this.onFragmentOrKeyLoadError(k.PlaylistLevelType.AUDIO,m);return}switch(m.details){case d.ErrorDetails.FRAG_LOAD_ERROR:case d.ErrorDetails.FRAG_LOAD_TIMEOUT:case d.ErrorDetails.FRAG_PARSING_ERROR:case d.ErrorDetails.KEY_LOAD_ERROR:case d.ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(k.PlaylistLevelType.AUDIO,m);break;case d.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case d.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:this.state!==I.State.ERROR&&this.state!==I.State.STOPPED&&(this.state=m.fatal?I.State.ERROR:I.State.IDLE,this.warn(m.details+" while loading frag, switching to "+this.state+" state"));break;case d.ErrorDetails.BUFFER_FULL_ERROR:if(m.parent==="audio"&&(this.state===I.State.PARSING||this.state===I.State.PARSED)){var o=!0,S=this.getFwdBufferInfo(this.mediaBuffer,k.PlaylistLevelType.AUDIO);S&&S.len>.5&&(o=!this.reduceMaxBufferLength(S.len)),o&&(this.warn("Buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,x.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.resetLoadingState()}break}},y.onBufferFlushed=function(u,m){var o=m.type;o===N.ElementaryStreamTypes.AUDIO&&(this.bufferFlushed=!0,this.state===I.State.ENDED&&(this.state=I.State.IDLE))},y._handleTransmuxComplete=function(u){var m,o="audio",S=this.hls,U=u.remuxResult,R=u.chunkMeta,G=this.getCurrentContext(R);if(!G){this.warn("The loading context changed while buffering fragment "+R.sn+" of level "+R.level+". This chunk will not be buffered."),this.resetStartWhenNotLoaded(R.level);return}var j=G.frag,V=G.part,z=G.level.details,$=U.audio,X=U.text,J=U.id3,q=U.initSegment;if(!(this.fragContextChanged(j)||!z)){if(this.state=I.State.PARSING,this.audioSwitch&&$&&this.completeAudioSwitch(),q!=null&&q.tracks&&(this._bufferInitSegment(q.tracks,j,R),S.trigger(K.Events.FRAG_PARSING_INIT_SEGMENT,{frag:j,id:o,tracks:q.tracks})),$){var ee=$.startPTS,ne=$.endPTS,ae=$.startDTS,ue=$.endDTS;V&&(V.elementaryStreams[N.ElementaryStreamTypes.AUDIO]={startPTS:ee,endPTS:ne,startDTS:ae,endDTS:ue}),j.setElementaryStreamInfo(N.ElementaryStreamTypes.AUDIO,ee,ne,ae,ue),this.bufferFragmentData($,j,V,R)}if(J!=null&&(m=J.samples)!==null&&m!==void 0&&m.length){var le=v({id:o,frag:j,details:z},J);S.trigger(K.Events.FRAG_PARSING_METADATA,le)}if(X){var fe=v({id:o,frag:j,details:z},X);S.trigger(K.Events.FRAG_PARSING_USERDATA,fe)}}},y._bufferInitSegment=function(u,m,o){if(this.state===I.State.PARSING){u.video&&delete u.video;var S=u.audio;if(S){S.levelCodec=S.codec,S.id="audio",this.log("Init audio buffer, container:"+S.container+", codecs[parsed]=["+S.codec+"]"),this.hls.trigger(K.Events.BUFFER_CODECS,u);var U=S.initSegment;if(U!=null&&U.byteLength){var R={type:"audio",frag:m,part:null,chunkMeta:o,parent:m.type,data:U};this.hls.trigger(K.Events.BUFFER_APPENDING,R)}this.tick()}}},y.loadFragment=function(u,m,o){var S=this.fragmentTracker.getState(u);this.fragCurrent=u,(this.audioSwitch||S===H.FragmentState.NOT_LOADED||S===H.FragmentState.PARTIAL)&&(u.sn==="initSegment"?this._loadInitSegment(u,m):m.live&&!(0,F.isFiniteNumber)(this.initPTS[u.cc])?(this.log("Waiting for video PTS in continuity counter "+u.cc+" of live stream before loading audio fragment "+u.sn+" of level "+this.trackId),this.state=I.State.WAITING_INIT_PTS):(this.startFragRequested=!0,x.prototype.loadFragment.call(this,u,m,o)))},y.completeAudioSwitch=function(){var u=this.hls,m=this.media,o=this.trackId;m&&(this.log("Switching audio track : flushing all audio"),x.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.audioSwitch=!1,u.trigger(K.Events.AUDIO_TRACK_SWITCHED,{id:o})},b}(I.default);const p=D},"./src/controller/audio-track-controller.ts":(O,w,f)=>{f.r(w),f.d(w,{default:()=>C});var F=f("./src/events.ts"),I=f("./src/errors.ts"),K=f("./src/controller/base-playlist-controller.ts"),M=f("./src/types/loader.ts");function H(A,d){for(var v=0;v<d.length;v++){var h=d[v];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(A,k(h.key),h)}}function B(A,d,v){return d&&H(A.prototype,d),v&&H(A,v),Object.defineProperty(A,"prototype",{writable:!1}),A}function k(A){var d=N(A,"string");return typeof d=="symbol"?d:String(d)}function N(A,d){if(typeof A!="object"||A===null)return A;var v=A[Symbol.toPrimitive];if(v!==void 0){var h=v.call(A,d||"default");if(typeof h!="object")return h;throw new TypeError("@@toPrimitive must return a primitive value.")}return(d==="string"?String:Number)(A)}function L(A,d){A.prototype=Object.create(d.prototype),A.prototype.constructor=A,T(A,d)}function T(A,d){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(h,g){return h.__proto__=g,h},T(A,d)}var l=function(A){L(d,A);function d(h){var g;return g=A.call(this,h,"[audio-track-controller]")||this,g.tracks=[],g.groupId=null,g.tracksInGroup=[],g.trackId=-1,g.trackName="",g.selectDefaultTrack=!0,g.registerListeners(),g}var v=d.prototype;return v.registerListeners=function(){var g=this.hls;g.on(F.Events.MANIFEST_LOADING,this.onManifestLoading,this),g.on(F.Events.MANIFEST_PARSED,this.onManifestParsed,this),g.on(F.Events.LEVEL_LOADING,this.onLevelLoading,this),g.on(F.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),g.on(F.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),g.on(F.Events.ERROR,this.onError,this)},v.unregisterListeners=function(){var g=this.hls;g.off(F.Events.MANIFEST_LOADING,this.onManifestLoading,this),g.off(F.Events.MANIFEST_PARSED,this.onManifestParsed,this),g.off(F.Events.LEVEL_LOADING,this.onLevelLoading,this),g.off(F.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),g.off(F.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),g.off(F.Events.ERROR,this.onError,this)},v.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,A.prototype.destroy.call(this)},v.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.trackName="",this.selectDefaultTrack=!0},v.onManifestParsed=function(g,P){this.tracks=P.audioTracks||[]},v.onAudioTrackLoaded=function(g,P){var D=P.id,p=P.details,x=this.tracksInGroup[D];if(!x){this.warn("Invalid audio track id "+D);return}var b=x.details;x.details=P.details,this.log("audioTrack "+D+" loaded ["+p.startSN+"-"+p.endSN+"]"),D===this.trackId&&(this.retryCount=0,this.playlistLoaded(D,P,b))},v.onLevelLoading=function(g,P){this.switchLevel(P.level)},v.onLevelSwitching=function(g,P){this.switchLevel(P.level)},v.switchLevel=function(g){var P=this.hls.levels[g];if(P!=null&&P.audioGroupIds){var D=P.audioGroupIds[P.urlId];if(this.groupId!==D){this.groupId=D;var p=this.tracks.filter(function(b){return!D||b.groupId===D});this.selectDefaultTrack&&!p.some(function(b){return b.default})&&(this.selectDefaultTrack=!1),this.tracksInGroup=p;var x={audioTracks:p};this.log("Updating audio tracks, "+p.length+' track(s) found in "'+D+'" group-id'),this.hls.trigger(F.Events.AUDIO_TRACKS_UPDATED,x),this.selectInitialTrack()}}},v.onError=function(g,P){A.prototype.onError.call(this,g,P),!(P.fatal||!P.context)&&P.context.type===M.PlaylistContextType.AUDIO_TRACK&&P.context.id===this.trackId&&P.context.groupId===this.groupId&&this.retryLoadingOrFail(P)},v.setAudioTrack=function(g){var P=this.tracksInGroup;if(g<0||g>=P.length){this.warn("Invalid id passed to audio-track controller");return}this.clearTimer();var D=P[this.trackId];this.log("Now switching to audio-track index "+g);var p=P[g],x=p.id,b=p.groupId,y=b===void 0?"":b,_=p.name,u=p.type,m=p.url;if(this.trackId=g,this.trackName=_,this.selectDefaultTrack=!1,this.hls.trigger(F.Events.AUDIO_TRACK_SWITCHING,{id:x,groupId:y,name:_,type:u,url:m}),!(p.details&&!p.details.live)){var o=this.switchParams(p.url,D==null?void 0:D.details);this.loadPlaylist(o)}},v.selectInitialTrack=function(){var g=this.tracksInGroup;console.assert(g.length,"Initial audio track should be selected when tracks are known");var P=this.trackName,D=this.findTrackId(P)||this.findTrackId();D!==-1?this.setAudioTrack(D):(this.warn("No track found for running audio group-ID: "+this.groupId),this.hls.trigger(F.Events.ERROR,{type:I.ErrorTypes.MEDIA_ERROR,details:I.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))},v.findTrackId=function(g){for(var P=this.tracksInGroup,D=0;D<P.length;D++){var p=P[D];if((!this.selectDefaultTrack||p.default)&&(!g||g===p.name))return p.id}return-1},v.loadPlaylist=function(g){A.prototype.loadPlaylist.call(this);var P=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(P)){var D=P.id,p=P.groupId,x=P.url;if(g)try{x=g.addDirectives(x)}catch(b){this.warn("Could not construct new URL with HLS Delivery Directives: "+b)}this.log("loading audio-track playlist for id: "+D),this.clearTimer(),this.hls.trigger(F.Events.AUDIO_TRACK_LOADING,{url:x,id:D,groupId:p,deliveryDirectives:g||null})}},B(d,[{key:"audioTracks",get:function(){return this.tracksInGroup}},{key:"audioTrack",get:function(){return this.trackId},set:function(g){this.selectDefaultTrack=!1,this.setAudioTrack(g)}}]),d}(K.default);const C=l},"./src/controller/base-playlist-controller.ts":(O,w,f)=>{f.r(w),f.d(w,{default:()=>H});var F=f("./src/types/level.ts"),I=f("./src/controller/level-helper.ts"),K=f("./src/utils/logger.ts"),M=f("./src/errors.ts"),H=function(){function B(N,L){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.retryCount=0,this.log=void 0,this.warn=void 0,this.log=K.logger.log.bind(K.logger,L+":"),this.warn=K.logger.warn.bind(K.logger,L+":"),this.hls=N}var k=B.prototype;return k.destroy=function(){this.clearTimer(),this.hls=this.log=this.warn=null},k.onError=function(L,T){T.fatal&&(T.type===M.ErrorTypes.NETWORK_ERROR||T.type===M.ErrorTypes.KEY_SYSTEM_ERROR)&&this.stopLoad()},k.clearTimer=function(){clearTimeout(this.timer),this.timer=-1},k.startLoad=function(){this.canLoad=!0,this.retryCount=0,this.requestScheduled=-1,this.loadPlaylist()},k.stopLoad=function(){this.canLoad=!1,this.clearTimer()},k.switchParams=function(L,T){var l=T==null?void 0:T.renditionReports;if(l)for(var C=0;C<l.length;C++){var A=l[C],d=void 0;try{d=new self.URL(A.URI,T.url).href}catch(P){K.logger.warn("Could not construct new URL for Rendition Report: "+P),d=A.URI||""}if(d===L.slice(-d.length)){var v=parseInt(A["LAST-MSN"])||(T==null?void 0:T.lastPartSn),h=parseInt(A["LAST-PART"])||(T==null?void 0:T.lastPartIndex);if(this.hls.config.lowLatencyMode){var g=Math.min(T.age-T.partTarget,T.targetduration);h>=0&&g>T.partTarget&&(h+=1)}return new F.HlsUrlParameters(v,h>=0?h:void 0,F.HlsSkip.No)}}},k.loadPlaylist=function(L){this.requestScheduled===-1&&(this.requestScheduled=self.performance.now())},k.shouldLoadTrack=function(L){return this.canLoad&&L&&!!L.url&&(!L.details||L.details.live)},k.playlistLoaded=function(L,T,l){var C=this,A=T.details,d=T.stats,v=self.performance.now(),h=d.loading.first?Math.max(0,v-d.loading.first):0;if(A.advancedDateTime=Date.now()-h,A.live||l!=null&&l.live){if(A.reloaded(l),l&&this.log("live playlist "+L+" "+(A.advanced?"REFRESHED "+A.lastPartSn+"-"+A.lastPartIndex:"MISSED")),l&&A.fragments.length>0&&(0,I.mergeDetails)(l,A),!this.canLoad||!A.live)return;var g,P=void 0,D=void 0;if(A.canBlockReload&&A.endSN&&A.advanced){var p=this.hls.config.lowLatencyMode,x=A.lastPartSn,b=A.endSN,y=A.lastPartIndex,_=y!==-1,u=x===b,m=p?0:y;_?(P=u?b+1:x,D=u?m:y+1):P=b+1;var o=A.age,S=o+A.ageHeader,U=Math.min(S-A.partTarget,A.targetduration*1.5);if(U>0){if(l&&U>l.tuneInGoal)this.warn("CDN Tune-in goal increased from: "+l.tuneInGoal+" to: "+U+" with playlist age: "+A.age),U=0;else{var R=Math.floor(U/A.targetduration);if(P+=R,D!==void 0){var G=Math.round(U%A.targetduration/A.partTarget);D+=G}this.log("CDN Tune-in age: "+A.ageHeader+"s last advanced "+o.toFixed(2)+"s goal: "+U+" skip sn "+R+" to part "+D)}A.tuneInGoal=U}if(g=this.getDeliveryDirectives(A,T.deliveryDirectives,P,D),p||!u){this.loadPlaylist(g);return}}else g=this.getDeliveryDirectives(A,T.deliveryDirectives,P,D);var j=this.hls.mainForwardBufferInfo,V=j?j.end-j.len:0,z=(A.edge-V)*1e3,$=(0,I.computeReloadInterval)(A,z);A.updated?v>this.requestScheduled+$&&(this.requestScheduled=d.loading.start):this.requestScheduled=-1,P!==void 0&&A.canBlockReload?this.requestScheduled=d.loading.first+$-(A.partTarget*1e3||1e3):this.requestScheduled=(this.requestScheduled===-1?v:this.requestScheduled)+$;var X=this.requestScheduled-v;X=Math.max(0,X),this.log("reload live playlist "+L+" in "+Math.round(X)+" ms"),this.timer=self.setTimeout(function(){return C.loadPlaylist(g)},X)}else this.clearTimer()},k.getDeliveryDirectives=function(L,T,l,C){var A=(0,F.getSkipValue)(L,l);return T!=null&&T.skip&&L.deltaUpdateFailed&&(l=T.msn,C=T.part,A=F.HlsSkip.No),new F.HlsUrlParameters(l,C,A)},k.retryLoadingOrFail=function(L){var T=this,l=this.hls.config,C=this.retryCount<l.levelLoadingMaxRetry;if(C){var A;if(this.requestScheduled=-1,this.retryCount++,L.details.indexOf("LoadTimeOut")>-1&&(A=L.context)!==null&&A!==void 0&&A.deliveryDirectives)this.warn("retry playlist loading #"+this.retryCount+' after "'+L.details+'"'),this.loadPlaylist();else{var d=Math.min(Math.pow(2,this.retryCount)*l.levelLoadingRetryDelay,l.levelLoadingMaxRetryTimeout);this.timer=self.setTimeout(function(){return T.loadPlaylist()},d),this.warn("retry playlist loading #"+this.retryCount+" in "+d+' ms after "'+L.details+'"')}}else this.warn('cannot recover from error "'+L.details+'"'),this.clearTimer(),L.fatal=!0;return C},B}()},"./src/controller/base-stream-controller.ts":(O,w,f)=>{f.r(w),f.d(w,{State:()=>_,default:()=>u});var F=f("./src/polyfills/number.ts"),I=f("./src/task-loop.ts"),K=f("./src/controller/fragment-tracker.ts"),M=f("./src/utils/buffer-helper.ts"),H=f("./src/utils/logger.ts"),B=f("./src/events.ts"),k=f("./src/errors.ts"),N=f("./src/types/transmuxer.ts"),L=f("./src/utils/mp4-tools.ts"),T=f("./src/utils/discontinuities.ts"),l=f("./src/controller/fragment-finders.ts"),C=f("./src/controller/level-helper.ts"),A=f("./src/loader/fragment-loader.ts"),d=f("./src/crypt/decrypter.ts"),v=f("./src/utils/time-ranges.ts"),h=f("./src/types/loader.ts");function g(m,o){for(var S=0;S<o.length;S++){var U=o[S];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(m,D(U.key),U)}}function P(m,o,S){return o&&g(m.prototype,o),S&&g(m,S),Object.defineProperty(m,"prototype",{writable:!1}),m}function D(m){var o=p(m,"string");return typeof o=="symbol"?o:String(o)}function p(m,o){if(typeof m!="object"||m===null)return m;var S=m[Symbol.toPrimitive];if(S!==void 0){var U=S.call(m,o||"default");if(typeof U!="object")return U;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(m)}function x(m){if(m===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m}function b(m,o){m.prototype=Object.create(o.prototype),m.prototype.constructor=m,y(m,o)}function y(m,o){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(U,R){return U.__proto__=R,U},y(m,o)}var _={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"},u=function(m){b(o,m);function o(U,R,G,j){var V;return V=m.call(this)||this,V.hls=void 0,V.fragPrevious=null,V.fragCurrent=null,V.fragmentTracker=void 0,V.transmuxer=null,V._state=_.STOPPED,V.media=null,V.mediaBuffer=null,V.config=void 0,V.bitrateTest=!1,V.lastCurrentTime=0,V.nextLoadPosition=0,V.startPosition=0,V.loadedmetadata=!1,V.fragLoadError=0,V.retryDate=0,V.levels=null,V.fragmentLoader=void 0,V.keyLoader=void 0,V.levelLastLoaded=null,V.startFragRequested=!1,V.decrypter=void 0,V.initPTS=[],V.onvseeking=null,V.onvended=null,V.logPrefix="",V.log=void 0,V.warn=void 0,V.logPrefix=j,V.log=H.logger.log.bind(H.logger,j+":"),V.warn=H.logger.warn.bind(H.logger,j+":"),V.hls=U,V.fragmentLoader=new A.default(U.config),V.keyLoader=G,V.fragmentTracker=R,V.config=U.config,V.decrypter=new d.default(U.config),U.on(B.Events.LEVEL_SWITCHING,V.onLevelSwitching,x(V)),V}var S=o.prototype;return S.doTick=function(){this.onTickEnd()},S.onTickEnd=function(){},S.startLoad=function(R){},S.stopLoad=function(){this.fragmentLoader.abort(),this.keyLoader.abort();var R=this.fragCurrent;R&&(R.abortRequests(),this.fragmentTracker.removeFragment(R)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=_.STOPPED},S._streamEnded=function(R,G){if(G.live||R.nextStart||!R.end||!this.media)return!1;var j=G.partList;if(j!=null&&j.length){var V=j[j.length-1],z=M.BufferHelper.isBuffered(this.media,V.start+V.duration/2);return z}var $=G.fragments[G.fragments.length-1].type;return this.fragmentTracker.isEndListAppended($)},S.getLevelDetails=function(){if(this.levels&&this.levelLastLoaded!==null){var R;return(R=this.levels[this.levelLastLoaded])===null||R===void 0?void 0:R.details}},S.onMediaAttached=function(R,G){var j=this.media=this.mediaBuffer=G.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),j.addEventListener("seeking",this.onvseeking),j.addEventListener("ended",this.onvended);var V=this.config;this.levels&&V.autoStartLoad&&this.state===_.STOPPED&&this.startLoad(V.startPosition)},S.onMediaDetaching=function(){var R=this.media;R!=null&&R.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),R&&this.onvseeking&&this.onvended&&(R.removeEventListener("seeking",this.onvseeking),R.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},S.onMediaSeeking=function(){var R=this.config,G=this.fragCurrent,j=this.media,V=this.mediaBuffer,z=this.state,$=j?j.currentTime:0,X=M.BufferHelper.bufferInfo(V||j,$,R.maxBufferHole);if(this.log("media seeking to "+((0,F.isFiniteNumber)($)?$.toFixed(3):$)+", state: "+z),this.state===_.ENDED)this.resetLoadingState();else if(G){var J=R.maxFragLookUpTolerance,q=G.start-J,ee=G.start+G.duration+J;if(!X.len||ee<X.start||q>X.end){var ne=$>ee;($<q||ne)&&(ne&&G.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),G.abortRequests()),this.resetLoadingState())}}j&&(this.lastCurrentTime=$),!this.loadedmetadata&&!X.len&&(this.nextLoadPosition=this.startPosition=$),this.tickImmediate()},S.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},S.onLevelSwitching=function(R,G){this.fragLoadError=0},S.onHandlerDestroying=function(){this.stopLoad(),m.prototype.onHandlerDestroying.call(this)},S.onHandlerDestroyed=function(){this.state=_.STOPPED,this.hls.off(B.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,m.prototype.onHandlerDestroyed.call(this)},S.loadFragment=function(R,G,j){this._loadFragForPlayback(R,G,j)},S._loadFragForPlayback=function(R,G,j){var V=this,z=function(X){if(V.fragContextChanged(R)){V.warn("Fragment "+R.sn+(X.part?" p: "+X.part.index:"")+" of level "+R.level+" was dropped during download."),V.fragmentTracker.removeFragment(R);return}R.stats.chunkCount++,V._handleFragmentLoadProgress(X)};this._doFragLoad(R,G,j,z).then(function($){if($){V.fragLoadError=0;var X=V.state;if(V.fragContextChanged(R)){(X===_.FRAG_LOADING||!V.fragCurrent&&X===_.PARSING)&&(V.fragmentTracker.removeFragment(R),V.state=_.IDLE);return}"payload"in $&&(V.log("Loaded fragment "+R.sn+" of level "+R.level),V.hls.trigger(B.Events.FRAG_LOADED,$)),V._handleFragmentLoadComplete($)}}).catch(function($){V.state===_.STOPPED||V.state===_.ERROR||(V.warn($),V.resetFragmentLoading(R))})},S.flushMainBuffer=function(R,G,j){if(j===void 0&&(j=null),!!(R-G)){var V={startOffset:R,endOffset:G,type:j};this.fragLoadError=0,this.hls.trigger(B.Events.BUFFER_FLUSHING,V)}},S._loadInitSegment=function(R,G){var j=this;this._doFragLoad(R,G).then(function(V){if(!V||j.fragContextChanged(R)||!j.levels)throw new Error("init load aborted");return V}).then(function(V){var z=j.hls,$=V.payload,X=R.decryptdata;if($&&$.byteLength>0&&X&&X.key&&X.iv&&X.method==="AES-128"){var J=self.performance.now();return j.decrypter.decrypt(new Uint8Array($),X.key.buffer,X.iv.buffer).then(function(q){var ee=self.performance.now();return z.trigger(B.Events.FRAG_DECRYPTED,{frag:R,payload:q,stats:{tstart:J,tdecrypt:ee}}),V.payload=q,V})}return V}).then(function(V){var z=j.fragCurrent,$=j.hls,X=j.levels;if(!X)throw new Error("init load aborted, missing levels");var J=X[R.level].details;console.assert(J,"Level details are defined when init segment is loaded");var q=R.stats;j.state=_.IDLE,j.fragLoadError=0,R.data=new Uint8Array(V.payload),q.parsing.start=q.buffering.start=self.performance.now(),q.parsing.end=q.buffering.end=self.performance.now(),V.frag===z&&$.trigger(B.Events.FRAG_BUFFERED,{stats:q,frag:z,part:null,id:R.type}),j.tick()}).catch(function(V){j.state===_.STOPPED||j.state===_.ERROR||(j.warn(V),j.resetFragmentLoading(R))})},S.fragContextChanged=function(R){var G=this.fragCurrent;return!R||!G||R.level!==G.level||R.sn!==G.sn||R.urlId!==G.urlId},S.fragBufferedComplete=function(R,G){var j,V,z,$,X=this.mediaBuffer?this.mediaBuffer:this.media;this.log("Buffered "+R.type+" sn: "+R.sn+(G?" part: "+G.index:"")+" of "+(this.logPrefix==="[stream-controller]"?"level":"track")+" "+R.level+" (frag:["+((j=R.startPTS)!=null?j:NaN).toFixed(3)+"-"+((V=R.endPTS)!=null?V:NaN).toFixed(3)+"] > buffer:"+(X?v.default.toString(M.BufferHelper.getBuffered(X)):"(detached)")+")"),this.state=_.IDLE,X&&(!this.loadedmetadata&&R.type==h.PlaylistLevelType.MAIN&&X.buffered.length&&((z=this.fragCurrent)===null||z===void 0?void 0:z.sn)===(($=this.fragPrevious)===null||$===void 0?void 0:$.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())},S.seekToStartPos=function(){},S._handleFragmentLoadComplete=function(R){var G=this.transmuxer;if(G){var j=R.frag,V=R.part,z=R.partsLoaded,$=!z||z.length===0||z.some(function(J){return!J}),X=new N.ChunkMetadata(j.level,j.sn,j.stats.chunkCount+1,0,V?V.index:-1,!$);G.flush(X)}},S._handleFragmentLoadProgress=function(R){},S._doFragLoad=function(R,G,j,V){var z,$=this;if(j===void 0&&(j=null),!this.levels)throw new Error("frag load aborted, missing levels");var X=null;if(R.encrypted&&!((z=R.decryptdata)!==null&&z!==void 0&&z.key)?(this.log("Loading key for "+R.sn+" of ["+G.startSN+"-"+G.endSN+"], "+(this.logPrefix==="[stream-controller]"?"level":"track")+" "+R.level),this.state=_.KEY_LOADING,this.fragCurrent=R,X=this.keyLoader.load(R).then(function(ae){if(!$.fragContextChanged(ae.frag))return $.hls.trigger(B.Events.KEY_LOADED,ae),$.state===_.KEY_LOADING&&($.state=_.IDLE),ae}),this.hls.trigger(B.Events.KEY_LOADING,{frag:R}),this.throwIfFragContextChanged("KEY_LOADING")):!R.encrypted&&G.encryptedFragments.length&&this.keyLoader.loadClear(R,G.encryptedFragments),j=Math.max(R.start,j||0),this.config.lowLatencyMode&&G){var J=G.partList;if(J&&V){j>R.end&&G.fragmentHint&&(R=G.fragmentHint);var q=this.getNextPart(J,R,j);if(q>-1){var ee=J[q];return this.log("Loading part sn: "+R.sn+" p: "+ee.index+" cc: "+R.cc+" of playlist ["+G.startSN+"-"+G.endSN+"] parts [0-"+q+"-"+(J.length-1)+"] "+(this.logPrefix==="[stream-controller]"?"level":"track")+": "+R.level+", target: "+parseFloat(j.toFixed(3))),this.nextLoadPosition=ee.start+ee.duration,this.state=_.FRAG_LOADING,this.hls.trigger(B.Events.FRAG_LOADING,{frag:R,part:J[q],targetBufferTime:j}),this.throwIfFragContextChanged("FRAG_LOADING parts"),X?X.then(function(ae){return!ae||$.fragContextChanged(ae.frag)?null:$.doFragPartsLoad(R,J,q,V)}).catch(function(ae){return $.handleFragLoadError(ae)}):this.doFragPartsLoad(R,J,q,V).catch(function(ae){return $.handleFragLoadError(ae)})}else if(!R.url||this.loadedEndOfParts(J,j))return Promise.resolve(null)}}this.log("Loading fragment "+R.sn+" cc: "+R.cc+" "+(G?"of ["+G.startSN+"-"+G.endSN+"] ":"")+(this.logPrefix==="[stream-controller]"?"level":"track")+": "+R.level+", target: "+parseFloat(j.toFixed(3))),(0,F.isFiniteNumber)(R.sn)&&!this.bitrateTest&&(this.nextLoadPosition=R.start+R.duration),this.state=_.FRAG_LOADING,this.hls.trigger(B.Events.FRAG_LOADING,{frag:R,targetBufferTime:j}),this.throwIfFragContextChanged("FRAG_LOADING");var ne=this.config.progressive;return ne&&X?X.then(function(ae){return!ae||$.fragContextChanged(ae==null?void 0:ae.frag)?null:$.fragmentLoader.load(R,V)}).catch(function(ae){return $.handleFragLoadError(ae)}):Promise.all([this.fragmentLoader.load(R,ne?V:void 0),X]).then(function(ae){var ue=ae[0];return!ne&&ue&&V&&V(ue),ue}).catch(function(ae){return $.handleFragLoadError(ae)})},S.throwIfFragContextChanged=function(R){if(this.fragCurrent===null)throw new Error("frag load aborted, context changed in "+R)},S.doFragPartsLoad=function(R,G,j,V){var z=this;return new Promise(function($,X){var J=[],q=function ee(ne){var ae=G[ne];z.fragmentLoader.loadPart(R,ae,V).then(function(ue){J[ae.index]=ue;var le=ue.part;z.hls.trigger(B.Events.FRAG_LOADED,ue);var fe=G[ne+1];if(fe&&fe.fragment===R)ee(ne+1);else return $({frag:R,part:le,partsLoaded:J})}).catch(X)};q(j)})},S.handleFragLoadError=function(R){if("data"in R){var G=R.data;R.data&&G.details===k.ErrorDetails.INTERNAL_ABORTED?this.handleFragLoadAborted(G.frag,G.part):this.hls.trigger(B.Events.ERROR,G)}else this.hls.trigger(B.Events.ERROR,{type:k.ErrorTypes.OTHER_ERROR,details:k.ErrorDetails.INTERNAL_EXCEPTION,err:R,fatal:!0});return null},S._handleTransmuxerFlush=function(R){var G=this.getCurrentContext(R);if(!G||this.state!==_.PARSING){!this.fragCurrent&&this.state!==_.STOPPED&&this.state!==_.ERROR&&(this.state=_.IDLE);return}var j=G.frag,V=G.part,z=G.level,$=self.performance.now();j.stats.parsing.end=$,V&&(V.stats.parsing.end=$),this.updateLevelTiming(j,V,z,R.partial)},S.getCurrentContext=function(R){var G=this.levels,j=R.level,V=R.sn,z=R.part;if(!G||!G[j])return this.warn("Levels object was unset while buffering fragment "+V+" of level "+j+". The current chunk will not be buffered."),null;var $=G[j],X=z>-1?(0,C.getPartWith)($,V,z):null,J=X?X.fragment:(0,C.getFragmentWithSN)($,V,this.fragCurrent);return J?{frag:J,part:X,level:$}:null},S.bufferFragmentData=function(R,G,j,V){if(!(!R||this.state!==_.PARSING)){var z=R.data1,$=R.data2,X=z;if(z&&$&&(X=(0,L.appendUint8Array)(z,$)),!(!X||!X.length)){var J={type:R.type,frag:G,part:j,chunkMeta:V,parent:G.type,data:X};this.hls.trigger(B.Events.BUFFER_APPENDING,J),R.dropped&&R.independent&&!j&&this.flushBufferGap(G)}}},S.flushBufferGap=function(R){var G=this.media;if(G){if(!M.BufferHelper.isBuffered(G,G.currentTime)){this.flushMainBuffer(0,R.start);return}var j=G.currentTime,V=M.BufferHelper.bufferInfo(G,j,0),z=R.duration,$=Math.min(this.config.maxFragLookUpTolerance*2,z*.25),X=Math.max(Math.min(R.start-$,V.end-$),j+$);R.start-X>$&&this.flushMainBuffer(X,R.start)}},S.getFwdBufferInfo=function(R,G){var j=this.config,V=this.getLoadPosition();if(!(0,F.isFiniteNumber)(V))return null;var z=M.BufferHelper.bufferInfo(R,V,j.maxBufferHole);if(z.len===0&&z.nextStart!==void 0){var $=this.fragmentTracker.getBufferedFrag(V,G);if($&&z.nextStart<$.end)return M.BufferHelper.bufferInfo(R,V,Math.max(z.nextStart,j.maxBufferHole))}return z},S.getMaxBufferLength=function(R){var G=this.config,j;return R?j=Math.max(8*G.maxBufferSize/R,G.maxBufferLength):j=G.maxBufferLength,Math.min(j,G.maxMaxBufferLength)},S.reduceMaxBufferLength=function(R){var G=this.config,j=R||G.maxBufferLength;return G.maxMaxBufferLength>=j?(G.maxMaxBufferLength/=2,this.warn("Reduce max buffer length to "+G.maxMaxBufferLength+"s"),!0):!1},S.getNextFragment=function(R,G){var j=G.fragments,V=j.length;if(!V)return null;var z=this.config,$=j[0].start,X;if(G.live){var J=z.initialLiveManifestSize;if(V<J)return this.warn("Not enough fragments to start playback (have: "+V+", need: "+J+")"),null;!G.PTSKnown&&!this.startFragRequested&&this.startPosition===-1&&(X=this.getInitialLiveFragment(G,j),this.startPosition=X?this.hls.liveSyncPosition||X.start:R)}else R<=$&&(X=j[0]);if(!X){var q=z.lowLatencyMode?G.partEnd:G.fragmentEnd;X=this.getFragmentAtPosition(R,q,G)}return this.mapToInitFragWhenRequired(X)},S.mapToInitFragWhenRequired=function(R){return R!=null&&R.initSegment&&!(R!=null&&R.initSegment.data)&&!this.bitrateTest?R.initSegment:R},S.getNextPart=function(R,G,j){for(var V=-1,z=!1,$=!0,X=0,J=R.length;X<J;X++){var q=R[X];if($=$&&!q.independent,V>-1&&j<q.start)break;var ee=q.loaded;ee?V=-1:(z||q.independent||$)&&q.fragment===G&&(V=X),z=ee}return V},S.loadedEndOfParts=function(R,G){var j=R[R.length-1];return j&&G>j.start&&j.loaded},S.getInitialLiveFragment=function(R,G){var j=this.fragPrevious,V=null;if(j){if(R.hasProgramDateTime&&(this.log("Live playlist, switching playlist, load frag with same PDT: "+j.programDateTime),V=(0,l.findFragmentByPDT)(G,j.endProgramDateTime,this.config.maxFragLookUpTolerance)),!V){var z=j.sn+1;if(z>=R.startSN&&z<=R.endSN){var $=G[z-R.startSN];j.cc===$.cc&&(V=$,this.log("Live playlist, switching playlist, load frag with next SN: "+V.sn))}V||(V=(0,l.findFragWithCC)(G,j.cc),V&&this.log("Live playlist, switching playlist, load frag with same CC: "+V.sn))}}else{var X=this.hls.liveSyncPosition;X!==null&&(V=this.getFragmentAtPosition(X,this.bitrateTest?R.fragmentEnd:R.edge,R))}return V},S.getFragmentAtPosition=function(R,G,j){var V=this.config,z=this.fragPrevious,$=j.fragments,X=j.endSN,J=j.fragmentHint,q=V.maxFragLookUpTolerance,ee=!!(V.lowLatencyMode&&j.partList&&J);ee&&J&&!this.bitrateTest&&($=$.concat(J),X=J.sn);var ne;if(R<G){var ae=R>G-q?0:q;ne=(0,l.findFragmentByPTS)(z,$,R,ae)}else ne=$[$.length-1];if(ne){var ue=ne.sn-j.startSN;if(this.fragmentTracker.getState(ne)===K.FragmentState.OK&&(z=ne),z&&ne.sn===z.sn&&!ee){var le=z&&ne.level===z.level;if(le){var fe=$[ue+1];ne.sn<X&&this.fragmentTracker.getState(fe)!==K.FragmentState.OK?(this.log("SN "+ne.sn+" just loaded, load next one: "+fe.sn),ne=fe):ne=null}}}return ne},S.synchronizeToLiveEdge=function(R){var G=this.config,j=this.media;if(j){var V=this.hls.liveSyncPosition,z=j.currentTime,$=R.fragments[0].start,X=R.edge,J=z>=$-G.maxFragLookUpTolerance&&z<=X;if(V!==null&&j.duration>V&&(z<V||!J)){var q=G.liveMaxLatencyDuration!==void 0?G.liveMaxLatencyDuration:G.liveMaxLatencyDurationCount*R.targetduration;(!J&&j.readyState<4||z<X-q)&&(this.loadedmetadata||(this.nextLoadPosition=V),j.readyState&&(this.warn("Playback: "+z.toFixed(3)+" is located too far from the end of live sliding playlist: "+X+", reset currentTime to : "+V.toFixed(3)),j.currentTime=V))}}},S.alignPlaylists=function(R,G){var j=this.levels,V=this.levelLastLoaded,z=this.fragPrevious,$=V!==null?j[V]:null,X=R.fragments.length;if(!X)return this.warn("No fragments in live playlist"),0;var J=R.fragments[0].start,q=!G,ee=R.alignedSliding&&(0,F.isFiniteNumber)(J);if(q||!ee&&!J){(0,T.alignStream)(z,$,R);var ne=R.fragments[0].start;return this.log("Live playlist sliding: "+ne.toFixed(2)+" start-sn: "+(G?G.startSN:"na")+"->"+R.startSN+" prev-sn: "+(z?z.sn:"na")+" fragments: "+X),ne}return J},S.waitForCdnTuneIn=function(R){var G=3;return R.live&&R.canBlockReload&&R.partTarget&&R.tuneInGoal>Math.max(R.partHoldBack,R.partTarget*G)},S.setStartPosition=function(R,G){var j=this.startPosition;if(j<G&&(j=-1),j===-1||this.lastCurrentTime===-1){var V=R.startTimeOffset;(0,F.isFiniteNumber)(V)?(j=G+V,V<0&&(j+=R.totalduration),j=Math.min(Math.max(G,j),G+R.totalduration),this.log("Start time offset "+V+" found in playlist, adjust startPosition to "+j),this.startPosition=j):R.live?j=this.hls.liveSyncPosition||G:this.startPosition=j=0,this.lastCurrentTime=j}this.nextLoadPosition=j},S.getLoadPosition=function(){var R=this.media,G=0;return this.loadedmetadata&&R?G=R.currentTime:this.nextLoadPosition&&(G=this.nextLoadPosition),G},S.handleFragLoadAborted=function(R,G){this.transmuxer&&R.sn!=="initSegment"&&R.stats.aborted&&(this.warn("Fragment "+R.sn+(G?" part"+G.index:"")+" of level "+R.level+" was aborted"),this.resetFragmentLoading(R))},S.resetFragmentLoading=function(R){(!this.fragCurrent||!this.fragContextChanged(R)&&this.state!==_.FRAG_LOADING_WAITING_RETRY)&&(this.state=_.IDLE)},S.onFragmentOrKeyLoadError=function(R,G){if(G.fatal){this.stopLoad(),this.state=_.ERROR;return}var j=this.config;if(G.chunkMeta){var V=this.getCurrentContext(G.chunkMeta);V&&(G.frag=V.frag,G.levelRetry=!0,this.fragLoadError=j.fragLoadingMaxRetry)}var z=G.frag;if(!(!z||z.type!==R)){var $=this.fragCurrent;if(console.assert($&&z.sn===$.sn&&z.level===$.level&&z.urlId===$.urlId,"Frag load error must match current frag to retry"),this.fragLoadError+1<=j.fragLoadingMaxRetry){this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition);var X=Math.min(Math.pow(2,this.fragLoadError)*j.fragLoadingRetryDelay,j.fragLoadingMaxRetryTimeout);this.warn("Fragment "+z.sn+" of "+R+" "+z.level+" failed to load, retrying in "+X+"ms"),this.retryDate=self.performance.now()+X,this.fragLoadError++,this.state=_.FRAG_LOADING_WAITING_RETRY}else G.levelRetry?(R===h.PlaylistLevelType.AUDIO&&(this.fragCurrent=null),this.fragLoadError=0,this.state=_.IDLE):(H.logger.error(G.details+" reaches max retry, redispatch as fatal ..."),G.fatal=!0,this.hls.stopLoad(),this.state=_.ERROR)}},S.afterBufferFlushed=function(R,G,j){if(R){var V=M.BufferHelper.getBuffered(R);this.fragmentTracker.detectEvictedFragments(G,V,j),this.state===_.ENDED&&this.resetLoadingState()}},S.resetLoadingState=function(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state=_.IDLE},S.resetStartWhenNotLoaded=function(R){if(!this.loadedmetadata){this.startFragRequested=!1;var G=this.levels?this.levels[R].details:null;G!=null&&G.live?(this.startPosition=-1,this.setStartPosition(G,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}},S.updateLevelTiming=function(R,G,j,V){var z=this,$=j.details;console.assert(!!$,"level.details must be defined");var X=Object.keys(R.elementaryStreams).reduce(function(J,q){var ee=R.elementaryStreams[q];if(ee){var ne=ee.endPTS-ee.startPTS;if(ne<=0)return z.warn("Could not parse fragment "+R.sn+" "+q+" duration reliably ("+ne+")"),J||!1;var ae=V?0:(0,C.updateFragPTSDTS)($,R,ee.startPTS,ee.endPTS,ee.startDTS,ee.endDTS);return z.hls.trigger(B.Events.LEVEL_PTS_UPDATED,{details:$,level:j,drift:ae,type:q,frag:R,start:ee.startPTS,end:ee.endPTS}),!0}return J},!1);X||(this.warn("Found no media in fragment "+R.sn+" of level "+j.id+" resetting transmuxer to fallback to playlist timing"),this.resetTransmuxer()),this.state=_.PARSED,this.hls.trigger(B.Events.FRAG_PARSED,{frag:R,part:G})},S.resetTransmuxer=function(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)},P(o,[{key:"state",get:function(){return this._state},set:function(R){var G=this._state;G!==R&&(this._state=R,this.log(G+"->"+R))}}]),o}(I.default)},"./src/controller/buffer-controller.ts":(O,w,f)=>{f.r(w),f.d(w,{default:()=>l});var F=f("./src/polyfills/number.ts"),I=f("./src/events.ts"),K=f("./src/utils/logger.ts"),M=f("./src/errors.ts"),H=f("./src/utils/buffer-helper.ts"),B=f("./src/utils/mediasource-helper.ts"),k=f("./src/loader/fragment.ts"),N=f("./src/controller/buffer-operation-queue.ts"),L=(0,B.getMediaSource)(),T=/([ha]vc.)(?:\.[^.,]+)+/,l=function(){function C(d){var v=this;this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendError=0,this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this._onMediaSourceOpen=function(){var h=v.media,g=v.mediaSource;K.logger.log("[buffer-controller]: Media source opened"),h&&(h.removeEventListener("emptied",v._onMediaEmptied),v.updateMediaElementDuration(),v.hls.trigger(I.Events.MEDIA_ATTACHED,{media:h})),g&&g.removeEventListener("sourceopen",v._onMediaSourceOpen),v.checkPendingTracks()},this._onMediaSourceClose=function(){K.logger.log("[buffer-controller]: Media source closed")},this._onMediaSourceEnded=function(){K.logger.log("[buffer-controller]: Media source ended")},this._onMediaEmptied=function(){var h=v.media,g=v._objectUrl;h&&h.src!==g&&K.logger.error("Media element src was set while attaching MediaSource ("+g+" > "+h.src+")")},this.hls=d,this._initSourceBuffer(),this.registerListeners()}var A=C.prototype;return A.hasSourceTypes=function(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0},A.destroy=function(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null},A.registerListeners=function(){var v=this.hls;v.on(I.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),v.on(I.Events.MEDIA_DETACHING,this.onMediaDetaching,this),v.on(I.Events.MANIFEST_PARSED,this.onManifestParsed,this),v.on(I.Events.BUFFER_RESET,this.onBufferReset,this),v.on(I.Events.BUFFER_APPENDING,this.onBufferAppending,this),v.on(I.Events.BUFFER_CODECS,this.onBufferCodecs,this),v.on(I.Events.BUFFER_EOS,this.onBufferEos,this),v.on(I.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),v.on(I.Events.LEVEL_UPDATED,this.onLevelUpdated,this),v.on(I.Events.FRAG_PARSED,this.onFragParsed,this),v.on(I.Events.FRAG_CHANGED,this.onFragChanged,this)},A.unregisterListeners=function(){var v=this.hls;v.off(I.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),v.off(I.Events.MEDIA_DETACHING,this.onMediaDetaching,this),v.off(I.Events.MANIFEST_PARSED,this.onManifestParsed,this),v.off(I.Events.BUFFER_RESET,this.onBufferReset,this),v.off(I.Events.BUFFER_APPENDING,this.onBufferAppending,this),v.off(I.Events.BUFFER_CODECS,this.onBufferCodecs,this),v.off(I.Events.BUFFER_EOS,this.onBufferEos,this),v.off(I.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),v.off(I.Events.LEVEL_UPDATED,this.onLevelUpdated,this),v.off(I.Events.FRAG_PARSED,this.onFragParsed,this),v.off(I.Events.FRAG_CHANGED,this.onFragChanged,this)},A._initSourceBuffer=function(){this.sourceBuffer={},this.operationQueue=new N.default(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.lastMpegAudioChunk=null},A.onManifestParsed=function(v,h){var g=2;(h.audio&&!h.video||!h.altAudio)&&(g=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=g,this.details=null,K.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},A.onMediaAttaching=function(v,h){var g=this.media=h.media;if(g&&L){var P=this.mediaSource=new L;P.addEventListener("sourceopen",this._onMediaSourceOpen),P.addEventListener("sourceended",this._onMediaSourceEnded),P.addEventListener("sourceclose",this._onMediaSourceClose),g.src=self.URL.createObjectURL(P),this._objectUrl=g.src,g.addEventListener("emptied",this._onMediaEmptied)}},A.onMediaDetaching=function(){var v=this.media,h=this.mediaSource,g=this._objectUrl;if(h){if(K.logger.log("[buffer-controller]: media source detaching"),h.readyState==="open")try{h.endOfStream()}catch(P){K.logger.warn("[buffer-controller]: onMediaDetaching: "+P.message+" while calling endOfStream")}this.onBufferReset(),h.removeEventListener("sourceopen",this._onMediaSourceOpen),h.removeEventListener("sourceended",this._onMediaSourceEnded),h.removeEventListener("sourceclose",this._onMediaSourceClose),v&&(v.removeEventListener("emptied",this._onMediaEmptied),g&&self.URL.revokeObjectURL(g),v.src===g?(v.removeAttribute("src"),v.load()):K.logger.warn("[buffer-controller]: media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(I.Events.MEDIA_DETACHED,void 0)},A.onBufferReset=function(){var v=this;this.getSourceBufferTypes().forEach(function(h){var g=v.sourceBuffer[h];try{g&&(v.removeBufferListeners(h),v.mediaSource&&v.mediaSource.removeSourceBuffer(g),v.sourceBuffer[h]=void 0)}catch(P){K.logger.warn("[buffer-controller]: Failed to reset the "+h+" buffer",P)}}),this._initSourceBuffer()},A.onBufferCodecs=function(v,h){var g=this,P=this.getSourceBufferTypes().length;Object.keys(h).forEach(function(D){if(P){var p=g.tracks[D];if(p&&typeof p.buffer.changeType=="function"){var x=h[D],b=x.id,y=x.codec,_=x.levelCodec,u=x.container,m=x.metadata,o=(p.levelCodec||p.codec).replace(T,"$1"),S=(_||y).replace(T,"$1");if(o!==S){var U=u+";codecs="+(_||y);g.appendChangeType(D,U),K.logger.log("[buffer-controller]: switching codec "+o+" to "+S),g.tracks[D]={buffer:p.buffer,codec:y,container:u,levelCodec:_,metadata:m,id:b}}}}else g.pendingTracks[D]=h[D]}),!P&&(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&this.mediaSource.readyState==="open"&&this.checkPendingTracks())},A.appendChangeType=function(v,h){var g=this,P=this.operationQueue,D={execute:function(){var x=g.sourceBuffer[v];x&&(K.logger.log("[buffer-controller]: changing "+v+" sourceBuffer type to "+h),x.changeType(h)),P.shiftAndExecuteNext(v)},onStart:function(){},onComplete:function(){},onError:function(x){K.logger.warn("[buffer-controller]: Failed to change "+v+" SourceBuffer type",x)}};P.append(D,v)},A.onBufferAppending=function(v,h){var g=this,P=this.hls,D=this.operationQueue,p=this.tracks,x=h.data,b=h.type,y=h.frag,_=h.part,u=h.chunkMeta,m=u.buffering[b],o=self.performance.now();m.start=o;var S=y.stats.buffering,U=_?_.stats.buffering:null;S.start===0&&(S.start=o),U&&U.start===0&&(U.start=o);var R=p.audio,G=!1;b==="audio"&&(R==null?void 0:R.container)==="audio/mpeg"&&(G=!this.lastMpegAudioChunk||u.id===1||this.lastMpegAudioChunk.sn!==u.sn,this.lastMpegAudioChunk=u);var j=y.start,V={execute:function(){if(m.executeStart=self.performance.now(),G){var $=g.sourceBuffer[b];if($){var X=j-$.timestampOffset;Math.abs(X)>=.1&&(K.logger.log("[buffer-controller]: Updating audio SourceBuffer timestampOffset to "+j+" (delta: "+X+") sn: "+y.sn+")"),$.timestampOffset=j)}}g.appendExecutor(x,b)},onStart:function(){},onComplete:function(){var $=self.performance.now();m.executeEnd=m.end=$,S.first===0&&(S.first=$),U&&U.first===0&&(U.first=$);var X=g.sourceBuffer,J={};for(var q in X)J[q]=H.BufferHelper.getBuffered(X[q]);g.appendError=0,g.hls.trigger(I.Events.BUFFER_APPENDED,{type:b,frag:y,part:_,chunkMeta:u,parent:y.type,timeRanges:J})},onError:function($){K.logger.error("[buffer-controller]: Error encountered while trying to append to the "+b+" SourceBuffer",$);var X={type:M.ErrorTypes.MEDIA_ERROR,parent:y.type,details:M.ErrorDetails.BUFFER_APPEND_ERROR,err:$,fatal:!1};$.code===DOMException.QUOTA_EXCEEDED_ERR?X.details=M.ErrorDetails.BUFFER_FULL_ERROR:(g.appendError++,X.details=M.ErrorDetails.BUFFER_APPEND_ERROR,g.appendError>P.config.appendErrorMaxRetry&&(K.logger.error("[buffer-controller]: Failed "+P.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),X.fatal=!0,P.stopLoad())),P.trigger(I.Events.ERROR,X)}};D.append(V,b)},A.onBufferFlushing=function(v,h){var g=this,P=this.operationQueue,D=function(x){return{execute:g.removeExecutor.bind(g,x,h.startOffset,h.endOffset),onStart:function(){},onComplete:function(){g.hls.trigger(I.Events.BUFFER_FLUSHED,{type:x})},onError:function(y){K.logger.warn("[buffer-controller]: Failed to remove from "+x+" SourceBuffer",y)}}};h.type?P.append(D(h.type),h.type):this.getSourceBufferTypes().forEach(function(p){P.append(D(p),p)})},A.onFragParsed=function(v,h){var g=this,P=h.frag,D=h.part,p=[],x=D?D.elementaryStreams:P.elementaryStreams;x[k.ElementaryStreamTypes.AUDIOVIDEO]?p.push("audiovideo"):(x[k.ElementaryStreamTypes.AUDIO]&&p.push("audio"),x[k.ElementaryStreamTypes.VIDEO]&&p.push("video"));var b=function(){var _=self.performance.now();P.stats.buffering.end=_,D&&(D.stats.buffering.end=_);var u=D?D.stats:P.stats;g.hls.trigger(I.Events.FRAG_BUFFERED,{frag:P,part:D,stats:u,id:P.type})};p.length===0&&K.logger.warn("Fragments must have at least one ElementaryStreamType set. type: "+P.type+" level: "+P.level+" sn: "+P.sn),this.blockBuffers(b,p)},A.onFragChanged=function(v,h){this.flushBackBuffer()},A.onBufferEos=function(v,h){var g=this,P=this.getSourceBufferTypes().reduce(function(D,p){var x=g.sourceBuffer[p];return x&&(!h.type||h.type===p)&&(x.ending=!0,x.ended||(x.ended=!0,K.logger.log("[buffer-controller]: "+p+" sourceBuffer now EOS"))),D&&!!(!x||x.ended)},!0);P&&(K.logger.log("[buffer-controller]: Queueing mediaSource.endOfStream()"),this.blockBuffers(function(){g.getSourceBufferTypes().forEach(function(p){var x=g.sourceBuffer[p];x&&(x.ending=!1)});var D=g.mediaSource;if(!D||D.readyState!=="open"){D&&K.logger.info("[buffer-controller]: Could not call mediaSource.endOfStream(). mediaSource.readyState: "+D.readyState);return}K.logger.log("[buffer-controller]: Calling mediaSource.endOfStream()"),D.endOfStream()}))},A.onLevelUpdated=function(v,h){var g=h.details;g.fragments.length&&(this.details=g,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())},A.flushBackBuffer=function(){var v=this.hls,h=this.details,g=this.media,P=this.sourceBuffer;if(!(!g||h===null)){var D=this.getSourceBufferTypes();if(D.length){var p=h.live&&v.config.liveBackBufferLength!==null?v.config.liveBackBufferLength:v.config.backBufferLength;if(!(!(0,F.isFiniteNumber)(p)||p<0)){var x=g.currentTime,b=h.levelTargetDuration,y=Math.max(p,b),_=Math.floor(x/b)*b-y;D.forEach(function(u){var m=P[u];if(m){var o=H.BufferHelper.getBuffered(m);if(o.length>0&&_>o.start(0)){if(v.trigger(I.Events.BACK_BUFFER_REACHED,{bufferEnd:_}),h.live)v.trigger(I.Events.LIVE_BACK_BUFFER_REACHED,{bufferEnd:_});else if(m.ended&&o.end(o.length-1)-x<b*2){K.logger.info("[buffer-controller]: Cannot flush "+u+" back buffer while SourceBuffer is in ended state");return}v.trigger(I.Events.BUFFER_FLUSHING,{startOffset:0,endOffset:_,type:u})}}})}}}},A.updateMediaElementDuration=function(){if(!(!this.details||!this.media||!this.mediaSource||this.mediaSource.readyState!=="open")){var v=this.details,h=this.hls,g=this.media,P=this.mediaSource,D=v.fragments[0].start+v.totalduration,p=g.duration,x=(0,F.isFiniteNumber)(P.duration)?P.duration:0;v.live&&h.config.liveDurationInfinity?(K.logger.log("[buffer-controller]: Media Source duration is set to Infinity"),P.duration=1/0,this.updateSeekableRange(v)):(D>x&&D>p||!(0,F.isFiniteNumber)(p))&&(K.logger.log("[buffer-controller]: Updating Media Source duration to "+D.toFixed(3)),P.duration=D)}},A.updateSeekableRange=function(v){var h=this.mediaSource,g=v.fragments,P=g.length;if(P&&v.live&&h!==null&&h!==void 0&&h.setLiveSeekableRange){var D=Math.max(0,g[0].start),p=Math.max(D,D+v.totalduration);h.setLiveSeekableRange(D,p)}},A.checkPendingTracks=function(){var v=this.bufferCodecEventsExpected,h=this.operationQueue,g=this.pendingTracks,P=Object.keys(g).length;if(P&&!v||P===2){this.createSourceBuffers(g),this.pendingTracks={};var D=this.getSourceBufferTypes();if(D.length===0){this.hls.trigger(I.Events.ERROR,{type:M.ErrorTypes.MEDIA_ERROR,details:M.ErrorDetails.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,reason:"could not create source buffer for media codec(s)"});return}D.forEach(function(p){h.executeNext(p)})}},A.createSourceBuffers=function(v){var h=this.sourceBuffer,g=this.mediaSource;if(!g)throw Error("createSourceBuffers called when mediaSource was null");var P=0;for(var D in v)if(!h[D]){var p=v[D];if(!p)throw Error("source buffer exists for track "+D+", however track does not");var x=p.levelCodec||p.codec,b=p.container+";codecs="+x;K.logger.log("[buffer-controller]: creating sourceBuffer("+b+")");try{var y=h[D]=g.addSourceBuffer(b),_=D;this.addBufferListener(_,"updatestart",this._onSBUpdateStart),this.addBufferListener(_,"updateend",this._onSBUpdateEnd),this.addBufferListener(_,"error",this._onSBUpdateError),this.tracks[D]={buffer:y,codec:x,container:p.container,levelCodec:p.levelCodec,metadata:p.metadata,id:p.id},P++}catch(u){K.logger.error("[buffer-controller]: error while trying to add sourceBuffer: "+u.message),this.hls.trigger(I.Events.ERROR,{type:M.ErrorTypes.MEDIA_ERROR,details:M.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:u,mimeType:b})}}P&&this.hls.trigger(I.Events.BUFFER_CREATED,{tracks:this.tracks})},A._onSBUpdateStart=function(v){var h=this.operationQueue,g=h.current(v);g.onStart()},A._onSBUpdateEnd=function(v){var h=this.operationQueue,g=h.current(v);g.onComplete(),h.shiftAndExecuteNext(v)},A._onSBUpdateError=function(v,h){K.logger.error("[buffer-controller]: "+v+" SourceBuffer error",h),this.hls.trigger(I.Events.ERROR,{type:M.ErrorTypes.MEDIA_ERROR,details:M.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1});var g=this.operationQueue.current(v);g&&g.onError(h)},A.removeExecutor=function(v,h,g){var P=this.media,D=this.mediaSource,p=this.operationQueue,x=this.sourceBuffer,b=x[v];if(!P||!D||!b){K.logger.warn("[buffer-controller]: Attempting to remove from the "+v+" SourceBuffer, but it does not exist"),p.shiftAndExecuteNext(v);return}var y=(0,F.isFiniteNumber)(P.duration)?P.duration:1/0,_=(0,F.isFiniteNumber)(D.duration)?D.duration:1/0,u=Math.max(0,h),m=Math.min(g,y,_);m>u&&!b.ending?(b.ended=!1,K.logger.log("[buffer-controller]: Removing ["+u+","+m+"] from the "+v+" SourceBuffer"),console.assert(!b.updating,v+" sourceBuffer must not be updating"),b.remove(u,m)):p.shiftAndExecuteNext(v)},A.appendExecutor=function(v,h){var g=this.operationQueue,P=this.sourceBuffer,D=P[h];if(!D){K.logger.warn("[buffer-controller]: Attempting to append to the "+h+" SourceBuffer, but it does not exist"),g.shiftAndExecuteNext(h);return}D.ended=!1,console.assert(!D.updating,h+" sourceBuffer must not be updating"),D.appendBuffer(v)},A.blockBuffers=function(v,h){var g=this;if(h===void 0&&(h=this.getSourceBufferTypes()),!h.length){K.logger.log("[buffer-controller]: Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(v);return}var P=this.operationQueue,D=h.map(function(p){return P.appendBlocker(p)});Promise.all(D).then(function(){v(),h.forEach(function(p){var x=g.sourceBuffer[p];(!x||!x.updating)&&P.shiftAndExecuteNext(p)})})},A.getSourceBufferTypes=function(){return Object.keys(this.sourceBuffer)},A.addBufferListener=function(v,h,g){var P=this.sourceBuffer[v];if(P){var D=g.bind(this,v);this.listeners[v].push({event:h,listener:D}),P.addEventListener(h,D)}},A.removeBufferListeners=function(v){var h=this.sourceBuffer[v];h&&this.listeners[v].forEach(function(g){h.removeEventListener(g.event,g.listener)})},C}()},"./src/controller/buffer-operation-queue.ts":(O,w,f)=>{f.r(w),f.d(w,{default:()=>I});var F=f("./src/utils/logger.ts"),I=function(){function K(H){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=H}var M=K.prototype;return M.append=function(B,k){var N=this.queues[k];N.push(B),N.length===1&&this.buffers[k]&&this.executeNext(k)},M.insertAbort=function(B,k){var N=this.queues[k];N.unshift(B),this.executeNext(k)},M.appendBlocker=function(B){var k,N=new Promise(function(T){k=T}),L={execute:k,onStart:function(){},onComplete:function(){},onError:function(){}};return this.append(L,B),N},M.executeNext=function(B){var k=this.buffers,N=this.queues,L=k[B],T=N[B];if(T.length){var l=T[0];try{l.execute()}catch(C){F.logger.warn("[buffer-operation-queue]: Unhandled exception executing the current operation"),l.onError(C),(!L||!L.updating)&&(T.shift(),this.executeNext(B))}}},M.shiftAndExecuteNext=function(B){this.queues[B].shift(),this.executeNext(B)},M.current=function(B){return this.queues[B][0]},K}()},"./src/controller/cap-level-controller.ts":(O,w,f)=>{f.r(w),f.d(w,{default:()=>k});var F=f("./src/events.ts");function I(N,L){for(var T=0;T<L.length;T++){var l=L[T];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(N,M(l.key),l)}}function K(N,L,T){return L&&I(N.prototype,L),T&&I(N,T),Object.defineProperty(N,"prototype",{writable:!1}),N}function M(N){var L=H(N,"string");return typeof L=="symbol"?L:String(L)}function H(N,L){if(typeof N!="object"||N===null)return N;var T=N[Symbol.toPrimitive];if(T!==void 0){var l=T.call(N,L||"default");if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(L==="string"?String:Number)(N)}var B=function(){function N(T){this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.hls=void 0,this.streamController=void 0,this.clientRect=void 0,this.hls=T,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}var L=N.prototype;return L.setStreamController=function(l){this.streamController=l},L.destroy=function(){this.unregisterListener(),this.hls.config.capLevelToPlayerSize&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null},L.registerListeners=function(){var l=this.hls;l.on(F.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),l.on(F.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),l.on(F.Events.MANIFEST_PARSED,this.onManifestParsed,this),l.on(F.Events.BUFFER_CODECS,this.onBufferCodecs,this),l.on(F.Events.MEDIA_DETACHING,this.onMediaDetaching,this)},L.unregisterListener=function(){var l=this.hls;l.off(F.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),l.off(F.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),l.off(F.Events.MANIFEST_PARSED,this.onManifestParsed,this),l.off(F.Events.BUFFER_CODECS,this.onBufferCodecs,this),l.off(F.Events.MEDIA_DETACHING,this.onMediaDetaching,this)},L.onFpsDropLevelCapping=function(l,C){N.isLevelAllowed(C.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(C.droppedLevel)},L.onMediaAttaching=function(l,C){this.media=C.media instanceof HTMLVideoElement?C.media:null,this.clientRect=null},L.onManifestParsed=function(l,C){var A=this.hls;this.restrictedLevels=[],this.firstLevel=C.firstLevel,A.config.capLevelToPlayerSize&&C.video&&this.startCapping()},L.onBufferCodecs=function(l,C){var A=this.hls;A.config.capLevelToPlayerSize&&C.video&&this.startCapping()},L.onMediaDetaching=function(){this.stopCapping()},L.detectPlayerSize=function(){if(this.media&&this.mediaHeight>0&&this.mediaWidth>0){var l=this.hls.levels;if(l.length){var C=this.hls;C.autoLevelCapping=this.getMaxLevel(l.length-1),C.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=C.autoLevelCapping}}},L.getMaxLevel=function(l){var C=this,A=this.hls.levels;if(!A.length)return-1;var d=A.filter(function(v,h){return N.isLevelAllowed(h,C.restrictedLevels)&&h<=l});return this.clientRect=null,N.getMaxLevelByMediaSize(d,this.mediaWidth,this.mediaHeight)},L.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},L.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)},L.getDimensions=function(){if(this.clientRect)return this.clientRect;var l=this.media,C={width:0,height:0};if(l){var A=l.getBoundingClientRect();C.width=A.width,C.height=A.height,!C.width&&!C.height&&(C.width=A.right-A.left||l.width||0,C.height=A.bottom-A.top||l.height||0)}return this.clientRect=C,C},N.isLevelAllowed=function(l,C){return C===void 0&&(C=[]),C.indexOf(l)===-1},N.getMaxLevelByMediaSize=function(l,C,A){if(!l||!l.length)return-1;for(var d=function(D,p){return p?D.width!==p.width||D.height!==p.height:!0},v=l.length-1,h=0;h<l.length;h+=1){var g=l[h];if((g.width>=C||g.height>=A)&&d(g,l[h+1])){v=h;break}}return v},K(N,[{key:"mediaWidth",get:function(){return this.getDimensions().width*this.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*this.contentScaleFactor}},{key:"contentScaleFactor",get:function(){var l=1;if(!this.hls.config.ignoreDevicePixelRatio)try{l=self.devicePixelRatio}catch{}return l}}]),N}();const k=B},"./src/controller/cmcd-controller.ts":(O,w,f)=>{f.r(w),f.d(w,{default:()=>A});var F=f("./src/events.ts"),I=f("./src/types/cmcd.ts"),K=f("./src/utils/buffer-helper.ts"),M=f("./src/utils/logger.ts");function H(d,v){for(var h=0;h<v.length;h++){var g=v[h];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(d,k(g.key),g)}}function B(d,v,h){return v&&H(d.prototype,v),h&&H(d,h),Object.defineProperty(d,"prototype",{writable:!1}),d}function k(d){var v=N(d,"string");return typeof v=="symbol"?v:String(v)}function N(d,v){if(typeof d!="object"||d===null)return d;var h=d[Symbol.toPrimitive];if(h!==void 0){var g=h.call(d,v||"default");if(typeof g!="object")return g;throw new TypeError("@@toPrimitive must return a primitive value.")}return(v==="string"?String:Number)(d)}function L(d,v){var h=typeof Symbol<"u"&&d[Symbol.iterator]||d["@@iterator"];if(h)return(h=h.call(d)).next.bind(h);if(Array.isArray(d)||(h=T(d))||v&&d&&typeof d.length=="number"){h&&(d=h);var g=0;return function(){return g>=d.length?{done:!0}:{done:!1,value:d[g++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function T(d,v){if(d){if(typeof d=="string")return l(d,v);var h=Object.prototype.toString.call(d).slice(8,-1);if(h==="Object"&&d.constructor&&(h=d.constructor.name),h==="Map"||h==="Set")return Array.from(d);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return l(d,v)}}function l(d,v){(v==null||v>d.length)&&(v=d.length);for(var h=0,g=new Array(v);h<v;h++)g[h]=d[h];return g}function C(){return C=Object.assign?Object.assign.bind():function(d){for(var v=1;v<arguments.length;v++){var h=arguments[v];for(var g in h)Object.prototype.hasOwnProperty.call(h,g)&&(d[g]=h[g])}return d},C.apply(this,arguments)}var A=function(){function d(h){var g=this;this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=function(){g.initialized&&(g.starved=!0),g.buffering=!0},this.onPlaying=function(){g.initialized||(g.initialized=!0),g.buffering=!1},this.applyPlaylistData=function(p){try{g.apply(p,{ot:I.CMCDObjectType.MANIFEST,su:!g.initialized})}catch(x){M.logger.warn("Could not generate manifest CMCD data.",x)}},this.applyFragmentData=function(p){try{var x=p.frag,b=g.hls.levels[x.level],y=g.getObjectType(x),_={d:x.duration*1e3,ot:y};(y===I.CMCDObjectType.VIDEO||y===I.CMCDObjectType.AUDIO||y==I.CMCDObjectType.MUXED)&&(_.br=b.bitrate/1e3,_.tb=g.getTopBandwidth(y)/1e3,_.bl=g.getBufferLength(y)),g.apply(p,_)}catch(u){M.logger.warn("Could not generate segment CMCD data.",u)}},this.hls=h;var P=this.config=h.config,D=P.cmcd;D!=null&&(P.pLoader=this.createPlaylistLoader(),P.fLoader=this.createFragmentLoader(),this.sid=D.sessionId||d.uuid(),this.cid=D.contentId,this.useHeaders=D.useHeaders===!0,this.registerListeners())}var v=d.prototype;return v.registerListeners=function(){var g=this.hls;g.on(F.Events.MEDIA_ATTACHED,this.onMediaAttached,this),g.on(F.Events.MEDIA_DETACHED,this.onMediaDetached,this),g.on(F.Events.BUFFER_CREATED,this.onBufferCreated,this)},v.unregisterListeners=function(){var g=this.hls;g.off(F.Events.MEDIA_ATTACHED,this.onMediaAttached,this),g.off(F.Events.MEDIA_DETACHED,this.onMediaDetached,this),g.off(F.Events.BUFFER_CREATED,this.onBufferCreated,this),this.onMediaDetached()},v.destroy=function(){this.unregisterListeners(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null},v.onMediaAttached=function(g,P){this.media=P.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)},v.onMediaDetached=function(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)},v.onBufferCreated=function(g,P){var D,p;this.audioBuffer=(D=P.tracks.audio)===null||D===void 0?void 0:D.buffer,this.videoBuffer=(p=P.tracks.video)===null||p===void 0?void 0:p.buffer},v.createData=function(){var g;return{v:I.CMCDVersion,sf:I.CMCDStreamingFormat.HLS,sid:this.sid,cid:this.cid,pr:(g=this.media)===null||g===void 0?void 0:g.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}},v.apply=function(g,P){P===void 0&&(P={}),C(P,this.createData());var D=P.ot===I.CMCDObjectType.INIT||P.ot===I.CMCDObjectType.VIDEO||P.ot===I.CMCDObjectType.MUXED;if(this.starved&&D&&(P.bs=!0,P.su=!0,this.starved=!1),P.su==null&&(P.su=this.buffering),this.useHeaders){var p=d.toHeaders(P);if(!Object.keys(p).length)return;g.headers||(g.headers={}),C(g.headers,p)}else{var x=d.toQuery(P);if(!x)return;g.url=d.appendQueryToUri(g.url,x)}},v.getObjectType=function(g){var P=g.type;if(P==="subtitle")return I.CMCDObjectType.TIMED_TEXT;if(g.sn==="initSegment")return I.CMCDObjectType.INIT;if(P==="audio")return I.CMCDObjectType.AUDIO;if(P==="main")return this.hls.audioTracks.length?I.CMCDObjectType.VIDEO:I.CMCDObjectType.MUXED},v.getTopBandwidth=function(g){var P=0,D,p=this.hls;if(g===I.CMCDObjectType.AUDIO)D=p.audioTracks;else{var x=p.maxAutoLevel,b=x>-1?x+1:p.levels.length;D=p.levels.slice(0,b)}for(var y=L(D),_;!(_=y()).done;){var u=_.value;u.bitrate>P&&(P=u.bitrate)}return P>0?P:NaN},v.getBufferLength=function(g){var P=this.hls.media,D=g===I.CMCDObjectType.AUDIO?this.audioBuffer:this.videoBuffer;if(!D||!P)return NaN;var p=K.BufferHelper.bufferInfo(D,P.currentTime,this.config.maxBufferHole);return p.len*1e3},v.createPlaylistLoader=function(){var g=this.config.pLoader,P=this.applyPlaylistData,D=g||this.config.loader;return function(){function p(b){this.loader=void 0,this.loader=new D(b)}var x=p.prototype;return x.destroy=function(){this.loader.destroy()},x.abort=function(){this.loader.abort()},x.load=function(y,_,u){P(y),this.loader.load(y,_,u)},B(p,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),p}()},v.createFragmentLoader=function(){var g=this.config.fLoader,P=this.applyFragmentData,D=g||this.config.loader;return function(){function p(b){this.loader=void 0,this.loader=new D(b)}var x=p.prototype;return x.destroy=function(){this.loader.destroy()},x.abort=function(){this.loader.abort()},x.load=function(y,_,u){P(y),this.loader.load(y,_,u)},B(p,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),p}()},d.uuid=function(){var g=URL.createObjectURL(new Blob),P=g.toString();return URL.revokeObjectURL(g),P.slice(P.lastIndexOf("/")+1)},d.serialize=function(g){for(var P=[],D=function(V){return!Number.isNaN(V)&&V!=null&&V!==""&&V!==!1},p=function(V){return Math.round(V)},x=function(V){return p(V/100)*100},b=function(V){return encodeURIComponent(V)},y={br:p,d:p,bl:x,dl:x,mtp:x,nor:b,rtp:x,tb:p},_=Object.keys(g||{}).sort(),u=L(_),m;!(m=u()).done;){var o=m.value,S=g[o];if(D(S)&&!(o==="v"&&S===1)&&!(o=="pr"&&S===1)){var U=y[o];U&&(S=U(S));var R=typeof S,G=void 0;o==="ot"||o==="sf"||o==="st"?G=o+"="+S:R==="boolean"?G=o:R==="number"?G=o+"="+S:G=o+"="+JSON.stringify(S),P.push(G)}}return P.join(",")},d.toHeaders=function(g){for(var P=Object.keys(g),D={},p=["Object","Request","Session","Status"],x=[{},{},{},{}],b={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3},y=0,_=P;y<_.length;y++){var u=_[y],m=b[u]!=null?b[u]:1;x[m][u]=g[u]}for(var o=0;o<x.length;o++){var S=d.serialize(x[o]);S&&(D["CMCD-"+p[o]]=S)}return D},d.toQuery=function(g){return"CMCD="+encodeURIComponent(d.serialize(g))},d.appendQueryToUri=function(g,P){if(!P)return g;var D=g.includes("?")?"&":"?";return""+g+D+P},d}()},"./src/controller/eme-controller.ts":(O,w,f)=>{f.r(w),f.d(w,{default:()=>y});var F=f("./src/events.ts"),I=f("./src/errors.ts"),K=f("./src/utils/logger.ts"),M=f("./src/utils/mediakeys-helper.ts"),H=f("./src/utils/keysystem-util.ts"),B=f("./src/utils/numeric-encoding-utils.ts"),k=f("./src/loader/level-key.ts"),N=f("./src/utils/hex.ts"),L=f("./src/utils/mp4-tools.ts"),T=f("./node_modules/eventemitter3/index.js"),l=f.n(T);function C(_,u){_.prototype=Object.create(u.prototype),_.prototype.constructor=_,g(_,u)}function A(_){var u=typeof Map=="function"?new Map:void 0;return A=function(o){if(o===null||!h(o))return o;if(typeof o!="function")throw new TypeError("Super expression must either be null or a function");if(typeof u<"u"){if(u.has(o))return u.get(o);u.set(o,S)}function S(){return d(o,arguments,P(this).constructor)}return S.prototype=Object.create(o.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),g(S,o)},A(_)}function d(_,u,m){return v()?d=Reflect.construct.bind():d=function(S,U,R){var G=[null];G.push.apply(G,U);var j=Function.bind.apply(S,G),V=new j;return R&&g(V,R.prototype),V},d.apply(null,arguments)}function v(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function h(_){return Function.toString.call(_).indexOf("[native code]")!==-1}function g(_,u){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(o,S){return o.__proto__=S,o},g(_,u)}function P(_){return P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(m){return m.__proto__||Object.getPrototypeOf(m)},P(_)}var D=3,p="[eme]",x=function(){function _(m){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=_.CDMCleanupPromise?[_.CDMCleanupPromise]:[],this.onMediaEncrypted=this._onMediaEncrypted.bind(this),this.onWaitingForKey=this._onWaitingForKey.bind(this),this.debug=K.logger.debug.bind(K.logger,p),this.log=K.logger.log.bind(K.logger,p),this.warn=K.logger.warn.bind(K.logger,p),this.error=K.logger.error.bind(K.logger,p),this.hls=m,this.config=m.config,this.registerListeners()}var u=_.prototype;return u.destroy=function(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.onMediaEncrypted=this.onWaitingForKey=this.keyIdToKeySessionPromise=null},u.registerListeners=function(){this.hls.on(F.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(F.Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(F.Events.MANIFEST_LOADED,this.onManifestLoaded,this)},u.unregisterListeners=function(){this.hls.off(F.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(F.Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(F.Events.MANIFEST_LOADED,this.onManifestLoaded,this)},u.getLicenseServerUrl=function(o){var S=this.config,U=S.drmSystems,R=S.widevineLicenseUrl,G=U[o];if(G)return G.licenseUrl;if(o===M.KeySystems.WIDEVINE&&R)return R;throw new Error('no license server URL configured for key-system "'+o+'"')},u.getServerCertificateUrl=function(o){var S=this.config.drmSystems,U=S[o];if(U)return U.serverCertificateUrl;this.log('No Server Certificate in config.drmSystems["'+o+'"]')},u.attemptKeySystemAccess=function(o){var S=this,U=this.hls.levels,R=function(z,$,X){return!!z&&X.indexOf(z)===$},G=U.map(function(V){return V.audioCodec}).filter(R),j=U.map(function(V){return V.videoCodec}).filter(R);return G.length+j.length===0&&j.push("avc1.42e01e"),new Promise(function(V,z){var $=function X(J){var q=J.shift();S.getMediaKeysPromise(q,G,j).then(function(ee){return V({keySystem:q,mediaKeys:ee})}).catch(function(ee){J.length?X(J):ee instanceof b?z(ee):z(new b({type:I.ErrorTypes.KEY_SYSTEM_ERROR,details:I.ErrorDetails.KEY_SYSTEM_NO_ACCESS,error:ee,fatal:!0},ee.message))})};$(o)})},u.requestMediaKeySystemAccess=function(o,S){var U=this.config.requestMediaKeySystemAccessFunc;if(typeof U!="function"){var R="Configured requestMediaKeySystemAccess is not a function "+U;return M.requestMediaKeySystemAccess===null&&self.location.protocol==="http:"&&(R="navigator.requestMediaKeySystemAccess is not available over insecure protocol "+location.protocol),Promise.reject(new Error(R))}return U(o,S)},u.getMediaKeysPromise=function(o,S,U){var R=this,G=(0,M.getSupportedMediaKeySystemConfigurations)(o,S,U,this.config.drmSystemOptions),j=this.keySystemAccessPromises[o],V=j==null?void 0:j.keySystemAccess;if(!V){this.log('Requesting encrypted media "'+o+'" key-system access with config: '+JSON.stringify(G)),V=this.requestMediaKeySystemAccess(o,G);var z=this.keySystemAccessPromises[o]={keySystemAccess:V};return V.catch(function($){R.log('Failed to obtain access to key-system "'+o+'": '+$)}),V.then(function($){R.log('Access for key-system "'+$.keySystem+'" obtained');var X=R.fetchServerCertificate(o);return R.log('Create media-keys for "'+o+'"'),z.mediaKeys=$.createMediaKeys().then(function(J){return R.log('Media-keys created for "'+o+'"'),X.then(function(q){return q?R.setMediaKeysServerCertificate(J,o,q):J})}),z.mediaKeys.catch(function(J){R.error('Failed to create media-keys for "'+o+'"}: '+J)}),z.mediaKeys})}return V.then(function(){return j.mediaKeys})},u.createMediaKeySessionContext=function(o){var S=o.decryptdata,U=o.keySystem,R=o.mediaKeys;console.assert(!!R,"mediaKeys is defined"),this.log('Creating key-system session "'+U+'" keyId: '+N.default.hexDump(S.keyId||[]));var G=R.createSession(),j={decryptdata:S,keySystem:U,mediaKeys:R,mediaKeysSession:G,keyStatus:"status-pending"};return this.mediaKeySessions.push(j),j},u.renewKeySession=function(o){var S=o.decryptdata;if(S.pssh){var U=this.createMediaKeySessionContext(o),R=this.getKeyIdString(S),G="cenc";this.keyIdToKeySessionPromise[R]=this.generateRequestWithPreferredKeySession(U,G,S.pssh,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(o)},u.getKeyIdString=function(o){if(!o)throw new Error("Could not read keyId of undefined decryptdata");if(o.keyId===null)throw new Error("keyId is null");return N.default.hexDump(o.keyId)},u.updateKeySession=function(o,S){var U,R=o.mediaKeysSession;return this.log('Updating key-session "'+R.sessionId+'" for keyID '+N.default.hexDump(((U=o.decryptdata)===null||U===void 0?void 0:U.keyId)||[])+`
      } (data length: `+(S&&S.byteLength)+")"),R.update(S)},u.selectKeySystemFormat=function(o){var S=Object.keys(o.levelkeys||{});return this.keyFormatPromise||(this.log("Selecting key-system from fragment (sn: "+o.sn+" "+o.type+": "+o.level+") key formats "+S.join(", ")),this.keyFormatPromise=this.getKeyFormatPromise(S)),this.keyFormatPromise},u.getKeyFormatPromise=function(o){var S=this;return new Promise(function(U,R){var G=(0,M.getKeySystemsForConfig)(S.config),j=o.map(M.keySystemFormatToKeySystemDomain).filter(function(V){return!!V&&G.indexOf(V)!==-1});return S.getKeySystemSelectionPromise(j).then(function(V){var z=V.keySystem,$=(0,M.keySystemDomainToKeySystemFormat)(z);$?U($):R(new Error('Unable to find format for key-system "'+z+'"'))}).catch(R)})},u.loadKey=function(o){var S=this,U=o.keyInfo.decryptdata,R=this.getKeyIdString(U),G="(keyId: "+R+' format: "'+U.keyFormat+'" method: '+U.method+" uri: "+U.uri+")";this.log("Starting session for key "+G);var j=this.keyIdToKeySessionPromise[R];return j||(j=this.keyIdToKeySessionPromise[R]=this.getKeySystemForKeyPromise(U).then(function(V){var z=V.keySystem,$=V.mediaKeys;return S.throwIfDestroyed(),S.log("Handle encrypted media sn: "+o.frag.sn+" "+o.frag.type+": "+o.frag.level+" using key "+G),S.attemptSetMediaKeys(z,$).then(function(){S.throwIfDestroyed();var X=S.createMediaKeySessionContext({keySystem:z,mediaKeys:$,decryptdata:U}),J="cenc";return S.generateRequestWithPreferredKeySession(X,J,U.pssh,"playlist-key")})}),j.catch(function(V){return S.handleError(V)})),j},u.throwIfDestroyed=function(o){if(!this.hls)throw new Error("invalid state")},u.handleError=function(o){this.hls&&(this.error(o.message),o instanceof b?this.hls.trigger(F.Events.ERROR,o.data):this.hls.trigger(F.Events.ERROR,{type:I.ErrorTypes.KEY_SYSTEM_ERROR,details:I.ErrorDetails.KEY_SYSTEM_NO_KEYS,error:o,fatal:!0}))},u.getKeySystemForKeyPromise=function(o){var S=this.getKeyIdString(o),U=this.keyIdToKeySessionPromise[S];if(!U){var R=(0,M.keySystemFormatToKeySystemDomain)(o.keyFormat),G=R?[R]:(0,M.getKeySystemsForConfig)(this.config);return this.attemptKeySystemAccess(G)}return U},u.getKeySystemSelectionPromise=function(o){if(o.length||(o=(0,M.getKeySystemsForConfig)(this.config)),o.length===0)throw new b({type:I.ErrorTypes.KEY_SYSTEM_ERROR,details:I.ErrorDetails.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},"Missing key-system license configuration options "+JSON.stringify({drmSystems:this.config.drmSystems}));return this.attemptKeySystemAccess(o)},u._onMediaEncrypted=function(o){var S=this,U=o.initDataType,R=o.initData;if(this.debug('"'+o.type+'" event: init data type: "'+U+'"'),R!==null){var G,j;if(U==="sinf"&&this.config.drmSystems[M.KeySystems.FAIRPLAY]){var V=(0,L.bin2str)(new Uint8Array(R));try{var z=(0,B.base64Decode)(JSON.parse(V).sinf),$=(0,L.parseSinf)(new Uint8Array(z));if(!$)return;G=$.subarray(8,24),j=M.KeySystems.FAIRPLAY}catch{this.warn('Failed to parse sinf "encrypted" event message initData');return}}else{var X=(0,L.parsePssh)(R);if(X===null)return;X.version===0&&X.systemId===M.KeySystemIds.WIDEVINE&&X.data&&(G=X.data.subarray(8,24)),j=(0,M.keySystemIdToKeySystemDomain)(X.systemId)}if(!(!j||!G)){for(var J=N.default.hexDump(G),q=this.keyIdToKeySessionPromise,ee=this.mediaKeySessions,ne=q[J],ae=function(ye){var Le=ee[ye],Ee=Le.decryptdata;if(Ee.pssh||!Ee.keyId)return"continue";var ve=N.default.hexDump(Ee.keyId);if(J===ve||Ee.uri.replace(/-/g,"").indexOf(J)!==-1)return ne=q[ve],delete q[ve],Ee.pssh=new Uint8Array(R),Ee.keyId=G,ne=q[J]=ne.then(function(){return S.generateRequestWithPreferredKeySession(Le,U,R,"encrypted-event-key-match")}),"break"},ue=0;ue<ee.length;ue++){var le=ae(ue);if(le!=="continue"&&le==="break")break}ne||(ne=q[J]=this.getKeySystemSelectionPromise([j]).then(function(fe){var ye,Le=fe.keySystem,Ee=fe.mediaKeys;S.throwIfDestroyed();var ve=new k.LevelKey("ISO-23001-7",J,(ye=(0,M.keySystemDomainToKeySystemFormat)(Le))!=null?ye:"");return ve.pssh=new Uint8Array(R),ve.keyId=G,S.attemptSetMediaKeys(Le,Ee).then(function(){S.throwIfDestroyed();var Ae=S.createMediaKeySessionContext({decryptdata:ve,keySystem:Le,mediaKeys:Ee});return S.generateRequestWithPreferredKeySession(Ae,U,R,"encrypted-event-no-match")})})),ne.catch(function(fe){return S.handleError(fe)})}}},u._onWaitingForKey=function(o){this.log('"'+o.type+'" event')},u.attemptSetMediaKeys=function(o,S){var U=this,R=this.setMediaKeysQueue.slice();this.log('Setting media-keys for "'+o+'"');var G=Promise.all(R).then(function(){if(!U.media)throw new Error("Attempted to set mediaKeys without media element attached");return U.media.setMediaKeys(S)});return this.setMediaKeysQueue.push(G),G.then(function(){U.log('Media-keys set for "'+o+'"'),R.push(G),U.setMediaKeysQueue=U.setMediaKeysQueue.filter(function(j){return R.indexOf(j)===-1})})},u.generateRequestWithPreferredKeySession=function(o,S,U,R){var G,j,V=this,z=(G=this.config.drmSystems)===null||G===void 0||(j=G[o.keySystem])===null||j===void 0?void 0:j.generateRequest;if(z)try{var $=z.call(this.hls,S,U,o);if(!$)throw new Error("Invalid response from configured generateRequest filter");S=$.initDataType,U=o.decryptdata.pssh=$.initData?new Uint8Array($.initData):null}catch(ne){var X;if(this.warn(ne.message),(X=this.hls)!==null&&X!==void 0&&X.config.debug)throw ne}if(U===null)return this.log('Skipping key-session request for "'+R+'" (no initData)'),Promise.resolve(o);var J=this.getKeyIdString(o.decryptdata);this.log('Generating key-session request for "'+R+'": '+J+" (init data type: "+S+" length: "+(U?U.byteLength:null)+")");var q=new(l());o.mediaKeysSession.onmessage=function(ne){var ae=o.mediaKeysSession;if(!ae){q.emit("error",new Error("invalid state"));return}var ue=ne.messageType,le=ne.message;V.log('"'+ue+'" message event for session "'+ae.sessionId+'" message size: '+le.byteLength),ue==="license-request"||ue==="license-renewal"?V.renewLicense(o,le).catch(function(fe){V.handleError(fe),q.emit("error",fe)}):ue==="license-release"?o.keySystem===M.KeySystems.FAIRPLAY&&(V.updateKeySession(o,(0,H.strToUtf8array)("acknowledged")),V.removeSession(o)):V.warn('unhandled media key message type "'+ue+'"')},o.mediaKeysSession.onkeystatuseschange=function(ne){var ae=o.mediaKeysSession;if(!ae){q.emit("error",new Error("invalid state"));return}V.onKeyStatusChange(o);var ue=o.keyStatus;q.emit("keyStatus",ue),ue==="expired"&&(V.warn(o.keySystem+" expired for key "+J),V.renewKeySession(o))};var ee=new Promise(function(ne,ae){q.on("error",ae),q.on("keyStatus",function(ue){ue.startsWith("usable")?ne():ue==="output-restricted"?ae(new b({type:I.ErrorTypes.KEY_SYSTEM_ERROR,details:I.ErrorDetails.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):ue==="internal-error"?ae(new b({type:I.ErrorTypes.KEY_SYSTEM_ERROR,details:I.ErrorDetails.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},'key status changed to "'+ue+'"')):ue==="expired"?ae(new Error("key expired while generating request")):V.warn('unhandled key status change "'+ue+'"')})});return o.mediaKeysSession.generateRequest(S,U).then(function(){var ne;V.log('Request generated for key-session "'+((ne=o.mediaKeysSession)===null||ne===void 0?void 0:ne.sessionId)+'" keyId: '+J)}).catch(function(ne){throw new b({type:I.ErrorTypes.KEY_SYSTEM_ERROR,details:I.ErrorDetails.KEY_SYSTEM_NO_SESSION,error:ne,fatal:!1},"Error generating key-session request: "+ne)}).then(function(){return ee}).catch(function(ne){throw q.removeAllListeners(),V.removeSession(o),ne}).then(function(){return q.removeAllListeners(),o})},u.onKeyStatusChange=function(o){var S=this;o.mediaKeysSession.keyStatuses.forEach(function(U,R){S.log('key status change "'+U+'" for keyStatuses keyId: '+N.default.hexDump("buffer"in R?new Uint8Array(R.buffer,R.byteOffset,R.byteLength):new Uint8Array(R))+" session keyId: "+N.default.hexDump(new Uint8Array(o.decryptdata.keyId||[]))+" uri: "+o.decryptdata.uri),o.keyStatus=U})},u.fetchServerCertificate=function(o){var S=this;return new Promise(function(U,R){var G=S.getServerCertificateUrl(o);if(!G)return U();S.log('Fetching serverCertificate for "'+o+'"');var j=new XMLHttpRequest;j.open("GET",G,!0),j.responseType="arraybuffer",j.onreadystatechange=function(){j.readyState===XMLHttpRequest.DONE&&(j.status===200?U(j.response):R(new b({type:I.ErrorTypes.KEY_SYSTEM_ERROR,details:I.ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:j},'"'+o+'" certificate request XHR failed ('+G+"). Status: "+j.status+" ("+j.statusText+")")))},j.send()})},u.setMediaKeysServerCertificate=function(o,S,U){var R=this;return new Promise(function(G,j){o.setServerCertificate(U).then(function(V){R.log("setServerCertificate "+(V?"success":"not supported by CDM")+" ("+(U==null?void 0:U.byteLength)+') on "'+S+'"'),G(o)}).catch(function(V){j(new b({type:I.ErrorTypes.KEY_SYSTEM_ERROR,details:I.ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:V,fatal:!0},V.message))})})},u.renewLicense=function(o,S){var U=this;return this.requestLicense(o,new Uint8Array(S)).then(function(R){return U.updateKeySession(o,new Uint8Array(R)).catch(function(G){throw new b({type:I.ErrorTypes.KEY_SYSTEM_ERROR,details:I.ErrorDetails.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:G,fatal:!0},G.message)})})},u.setupLicenseXHR=function(o,S,U,R){var G=this,j=this.config.licenseXhrSetup;return j?Promise.resolve().then(function(){if(!U.decryptdata)throw new Error("Key removed");return j.call(G.hls,o,S,U,R)}).catch(function(V){if(!U.decryptdata)throw V;return o.open("POST",S,!0),j.call(G.hls,o,S,U,R)}).then(function(V){o.readyState||o.open("POST",S,!0);var z=V||R;return{xhr:o,licenseChallenge:z}}):(o.open("POST",S,!0),Promise.resolve({xhr:o,licenseChallenge:R}))},u.requestLicense=function(o,S){var U=this;return new Promise(function(R,G){var j=U.getLicenseServerUrl(o.keySystem);U.log("Sending license request to URL: "+j);var V=new XMLHttpRequest;V.responseType="arraybuffer",V.onreadystatechange=function(){if(!U.hls||!o.mediaKeysSession)return G(new Error("invalid state"));if(V.readyState===4)if(V.status===200){U._requestLicenseFailureCount=0;var z=V.response;U.log("License received "+(z instanceof ArrayBuffer?z.byteLength:z));var $=U.config.licenseResponseCallback;if($)try{z=$.call(U.hls,V,j,o)}catch(J){U.error(J)}R(z)}else if(U._requestLicenseFailureCount++,U._requestLicenseFailureCount>D||V.status>=400&&V.status<500)G(new b({type:I.ErrorTypes.KEY_SYSTEM_ERROR,details:I.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:V},"License Request XHR failed ("+j+"). Status: "+V.status+" ("+V.statusText+")"));else{var X=D-U._requestLicenseFailureCount+1;U.warn("Retrying license request, "+X+" attempts left"),U.requestLicense(o,S).then(R,G)}},o.licenseXhr&&o.licenseXhr.readyState!==XMLHttpRequest.DONE&&o.licenseXhr.abort(),o.licenseXhr=V,U.setupLicenseXHR(V,j,o,S).then(function(z){var $=z.xhr,X=z.licenseChallenge;$.send(X)})})},u.onMediaAttached=function(o,S){if(this.config.emeEnabled){var U=S.media;this.media=U,U.addEventListener("encrypted",this.onMediaEncrypted),U.addEventListener("waitingforkey",this.onWaitingForKey)}},u.onMediaDetached=function(){var o=this,S=this.media,U=this.mediaKeySessions;S&&(S.removeEventListener("encrypted",this.onMediaEncrypted),S.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},k.LevelKey.clearKeyUriToKeyIdMap();var R=U.length;_.CDMCleanupPromise=Promise.all(U.map(function(G){return o.removeSession(G)}).concat(S==null?void 0:S.setMediaKeys(null).catch(function(G){o.log("Could not clear media keys: "+G+". media.src: "+(S==null?void 0:S.src))}))).then(function(){R&&(o.log("finished closing key sessions and clearing media keys"),U.length=0)}).catch(function(G){o.log("Could not close sessions and clear media keys: "+G+". media.src: "+(S==null?void 0:S.src))})},u.onManifestLoaded=function(o,S){var U=S.sessionKeys;if(!(!U||!this.config.emeEnabled)&&!this.keyFormatPromise){var R=U.reduce(function(G,j){return G.indexOf(j.keyFormat)===-1&&G.push(j.keyFormat),G},[]);this.log("Selecting key-system from session-keys "+R.join(", ")),this.keyFormatPromise=this.getKeyFormatPromise(R)}},u.removeSession=function(o){var S=this,U=o.mediaKeysSession,R=o.licenseXhr;if(U){this.log("Remove licenses and keys and close session "+U.sessionId),U.onmessage=null,U.onkeystatuseschange=null,R&&R.readyState!==XMLHttpRequest.DONE&&R.abort(),o.mediaKeysSession=o.decryptdata=o.licenseXhr=void 0;var G=this.mediaKeySessions.indexOf(o);return G>-1&&this.mediaKeySessions.splice(G,1),U.remove().catch(function(j){S.log("Could not remove session: "+j)}).then(function(){return U.close()}).catch(function(j){S.log("Could not close session: "+j)})}},_}();x.CDMCleanupPromise=void 0;var b=function(_){C(u,_);function u(m,o){var S;return S=_.call(this,o)||this,S.data=void 0,S.data=m,m.err=m.error,S}return u}(A(Error));const y=x},"./src/controller/fps-controller.ts":(O,w,f)=>{f.r(w),f.d(w,{default:()=>M});var F=f("./src/events.ts"),I=f("./src/utils/logger.ts"),K=function(){function H(k){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=k,this.registerListeners()}var B=H.prototype;return B.setStreamController=function(N){this.streamController=N},B.registerListeners=function(){this.hls.on(F.Events.MEDIA_ATTACHING,this.onMediaAttaching,this)},B.unregisterListeners=function(){this.hls.off(F.Events.MEDIA_ATTACHING,this.onMediaAttaching)},B.destroy=function(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null},B.onMediaAttaching=function(N,L){var T=this.hls.config;if(T.capLevelOnFPSDrop){var l=L.media instanceof self.HTMLVideoElement?L.media:null;this.media=l,l&&typeof l.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),T.fpsDroppedMonitoringPeriod)}},B.checkFPS=function(N,L,T){var l=performance.now();if(L){if(this.lastTime){var C=l-this.lastTime,A=T-this.lastDroppedFrames,d=L-this.lastDecodedFrames,v=1e3*A/C,h=this.hls;if(h.trigger(F.Events.FPS_DROP,{currentDropped:A,currentDecoded:d,totalDroppedFrames:T}),v>0&&A>h.config.fpsDroppedMonitoringThreshold*d){var g=h.currentLevel;I.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+g),g>0&&(h.autoLevelCapping===-1||h.autoLevelCapping>=g)&&(g=g-1,h.trigger(F.Events.FPS_DROP_LEVEL_CAPPING,{level:g,droppedLevel:h.currentLevel}),h.autoLevelCapping=g,this.streamController.nextLevelSwitch())}}this.lastTime=l,this.lastDroppedFrames=T,this.lastDecodedFrames=L}},B.checkFPSInterval=function(){var N=this.media;if(N)if(this.isVideoPlaybackQualityAvailable){var L=N.getVideoPlaybackQuality();this.checkFPS(N,L.totalVideoFrames,L.droppedVideoFrames)}else this.checkFPS(N,N.webkitDecodedFrameCount,N.webkitDroppedFrameCount)},H}();const M=K},"./src/controller/fragment-finders.ts":(O,w,f)=>{f.r(w),f.d(w,{findFragWithCC:()=>k,findFragmentByPDT:()=>K,findFragmentByPTS:()=>M,fragmentWithinToleranceTest:()=>H,pdtWithinToleranceTest:()=>B});var F=f("./src/polyfills/number.ts"),I=f("./src/utils/binary-search.ts");function K(N,L,T){if(L===null||!Array.isArray(N)||!N.length||!(0,F.isFiniteNumber)(L))return null;var l=N[0].programDateTime;if(L<(l||0))return null;var C=N[N.length-1].endProgramDateTime;if(L>=(C||0))return null;T=T||0;for(var A=0;A<N.length;++A){var d=N[A];if(B(L,T,d))return d}return null}function M(N,L,T,l){T===void 0&&(T=0),l===void 0&&(l=0);var C=null;if(N?C=L[N.sn-L[0].sn+1]||null:T===0&&L[0].start===0&&(C=L[0]),C&&H(T,l,C)===0)return C;var A=I.default.search(L,H.bind(null,T,l));return A&&(A!==N||!C)?A:C}function H(N,L,T){if(N===void 0&&(N=0),L===void 0&&(L=0),T.start<=N&&T.start+T.duration>N)return 0;var l=Math.min(L,T.duration+(T.deltaPTS?T.deltaPTS:0));return T.start+T.duration-l<=N?1:T.start-l>N&&T.start?-1:0}function B(N,L,T){var l=Math.min(L,T.duration+(T.deltaPTS?T.deltaPTS:0))*1e3,C=T.endProgramDateTime||0;return C-l>N}function k(N,L){return I.default.search(N,function(T){return T.cc<L?1:T.cc>L?-1:0})}},"./src/controller/fragment-tracker.ts":(O,w,f)=>{f.r(w),f.d(w,{FragmentState:()=>K,FragmentTracker:()=>M});var F=f("./src/events.ts"),I=f("./src/types/loader.ts"),K;(function(k){k.NOT_LOADED="NOT_LOADED",k.APPENDING="APPENDING",k.PARTIAL="PARTIAL",k.OK="OK"})(K||(K={}));var M=function(){function k(L){this.activeFragment=null,this.activeParts=null,this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hls=L,this._registerListeners()}var N=k.prototype;return N._registerListeners=function(){var T=this.hls;T.on(F.Events.BUFFER_APPENDED,this.onBufferAppended,this),T.on(F.Events.FRAG_BUFFERED,this.onFragBuffered,this),T.on(F.Events.FRAG_LOADED,this.onFragLoaded,this)},N._unregisterListeners=function(){var T=this.hls;T.off(F.Events.BUFFER_APPENDED,this.onBufferAppended,this),T.off(F.Events.FRAG_BUFFERED,this.onFragBuffered,this),T.off(F.Events.FRAG_LOADED,this.onFragLoaded,this)},N.destroy=function(){this._unregisterListeners(),this.fragments=this.endListFragments=this.timeRanges=this.activeFragment=this.activeParts=null},N.getAppendedFrag=function(T,l){if(l===I.PlaylistLevelType.MAIN){var C=this.activeFragment,A=this.activeParts;if(!C)return null;if(A)for(var d=A.length;d--;){var v=A[d],h=v?v.end:C.appendedPTS;if(v.start<=T&&h!==void 0&&T<=h)return d>9&&(this.activeParts=A.slice(d-9)),v}else if(C.start<=T&&C.appendedPTS!==void 0&&T<=C.appendedPTS)return C}return this.getBufferedFrag(T,l)},N.getBufferedFrag=function(T,l){for(var C=this.fragments,A=Object.keys(C),d=A.length;d--;){var v=C[A[d]];if((v==null?void 0:v.body.type)===l&&v.buffered){var h=v.body;if(h.start<=T&&T<=h.end)return h}}return null},N.detectEvictedFragments=function(T,l,C){var A=this;this.timeRanges&&(this.timeRanges[T]=l),Object.keys(this.fragments).forEach(function(d){var v=A.fragments[d];if(v){if(!v.buffered&&!v.loaded){v.body.type===C&&A.removeFragment(v.body);return}var h=v.range[T];h&&h.time.some(function(g){var P=!A.isTimeBuffered(g.startPTS,g.endPTS,l);return P&&A.removeFragment(v.body),P})}})},N.detectPartialFragments=function(T){var l=this,C=this.timeRanges,A=T.frag,d=T.part;if(!(!C||A.sn==="initSegment")){var v=B(A),h=this.fragments[v];h&&(Object.keys(C).forEach(function(g){var P=A.elementaryStreams[g];if(P){var D=C[g],p=d!==null||P.partial===!0;h.range[g]=l.getBufferedTimes(A,d,p,D)}}),h.loaded=null,Object.keys(h.range).length?(h.buffered=!0,h.body.endList&&(this.endListFragments[h.body.type]=h)):this.removeFragment(h.body))}},N.fragBuffered=function(T){var l=B(T),C=this.fragments[l];C&&(C.loaded=null,C.buffered=!0)},N.getBufferedTimes=function(T,l,C,A){for(var d={time:[],partial:C},v=l?l.start:T.start,h=l?l.end:T.end,g=T.minEndPTS||h,P=T.maxStartPTS||v,D=0;D<A.length;D++){var p=A.start(D)-this.bufferPadding,x=A.end(D)+this.bufferPadding;if(P>=p&&g<=x){d.time.push({startPTS:Math.max(v,A.start(D)),endPTS:Math.min(h,A.end(D))});break}else if(v<x&&h>p)d.partial=!0,d.time.push({startPTS:Math.max(v,A.start(D)),endPTS:Math.min(h,A.end(D))});else if(h<=p)break}return d},N.getPartialFragment=function(T){var l=null,C,A,d,v=0,h=this.bufferPadding,g=this.fragments;return Object.keys(g).forEach(function(P){var D=g[P];D&&H(D)&&(A=D.body.start-h,d=D.body.end+h,T>=A&&T<=d&&(C=Math.min(T-A,d-T),v<=C&&(l=D.body,v=C)))}),l},N.isEndListAppended=function(T){var l=this.endListFragments[T];return l!==void 0&&(l.buffered||H(l))},N.getState=function(T){var l=B(T),C=this.fragments[l];return C?C.buffered?H(C)?K.PARTIAL:K.OK:K.APPENDING:K.NOT_LOADED},N.isTimeBuffered=function(T,l,C){for(var A,d,v=0;v<C.length;v++){if(A=C.start(v)-this.bufferPadding,d=C.end(v)+this.bufferPadding,T>=A&&l<=d)return!0;if(l<=A)return!1}return!1},N.onFragLoaded=function(T,l){var C=l.frag,A=l.part;if(!(C.sn==="initSegment"||C.bitrateTest||A)){var d=B(C);this.fragments[d]={body:C,loaded:l,buffered:!1,range:Object.create(null)}}},N.onBufferAppended=function(T,l){var C=this,A=l.frag,d=l.part,v=l.timeRanges;if(A.type===I.PlaylistLevelType.MAIN)if(this.activeFragment!==A&&(this.activeFragment=A,A.appendedPTS=void 0),d){var h=this.activeParts;h||(this.activeParts=h=[]),h.push(d)}else this.activeParts=null;this.timeRanges=v,Object.keys(v).forEach(function(g){var P=v[g];if(C.detectEvictedFragments(g,P),!d&&A.type===I.PlaylistLevelType.MAIN){var D=A.elementaryStreams[g];if(!D)return;for(var p=0;p<P.length;p++){var x=P.end(p);x<=D.endPTS&&x>D.startPTS?A.appendedPTS=Math.max(x,A.appendedPTS||0):A.appendedPTS=D.endPTS}}})},N.onFragBuffered=function(T,l){this.detectPartialFragments(l)},N.hasFragment=function(T){var l=B(T);return!!this.fragments[l]},N.removeFragmentsInRange=function(T,l,C){var A=this;Object.keys(this.fragments).forEach(function(d){var v=A.fragments[d];if(v&&v.buffered){var h=v.body;h.type===C&&h.start<l&&h.end>T&&A.removeFragment(h)}})},N.removeFragment=function(T){var l=B(T);T.stats.loaded=0,T.clearElementaryStreamInfo(),T.appendedPTS=void 0,delete this.fragments[l],T.endList&&delete this.endListFragments[T.type]},N.removeAllFragments=function(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activeFragment=null,this.activeParts=null},k}();function H(k){var N,L;return k.buffered&&(((N=k.range.video)===null||N===void 0?void 0:N.partial)||((L=k.range.audio)===null||L===void 0?void 0:L.partial))}function B(k){return k.type+"_"+k.level+"_"+k.urlId+"_"+k.sn}},"./src/controller/gap-controller.ts":(O,w,f)=>{f.r(w),f.d(w,{MAX_START_GAP_JUMP:()=>B,SKIP_BUFFER_HOLE_STEP_SECONDS:()=>k,SKIP_BUFFER_RANGE_START:()=>N,STALL_MINIMUM_DURATION_MS:()=>H,default:()=>L});var F=f("./src/utils/buffer-helper.ts"),I=f("./src/errors.ts"),K=f("./src/events.ts"),M=f("./src/utils/logger.ts"),H=250,B=2,k=.1,N=.05,L=function(){function T(C,A,d,v){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=C,this.media=A,this.fragmentTracker=d,this.hls=v}var l=T.prototype;return l.destroy=function(){this.media=null,this.hls=this.fragmentTracker=null},l.poll=function(A,d){var v=this.config,h=this.media,g=this.stalled;if(h!==null){var P=h.currentTime,D=h.seeking,p=this.seeking&&!D,x=!this.seeking&&D;if(this.seeking=D,P!==A){if(this.moved=!0,g!==null){if(this.stallReported){var b=self.performance.now()-g;M.logger.warn("playback not stuck anymore @"+P+", after "+Math.round(b)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}return}if((x||p)&&(this.stalled=null),!(h.paused&&!D||h.ended||h.playbackRate===0||!F.BufferHelper.getBuffered(h).length)){var y=F.BufferHelper.bufferInfo(h,P,0),_=y.len>0,u=y.nextStart||0;if(!(!_&&!u)){if(D){var m=y.len>B,o=!u||d&&d.start<=P||u-P>B&&!this.fragmentTracker.getPartialFragment(P);if(m||o)return;this.moved=!1}if(!this.moved&&this.stalled!==null){var S,U=Math.max(u,y.start||0)-P,R=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,G=R==null||(S=R.details)===null||S===void 0?void 0:S.live,j=G?R.details.targetduration*2:B;if(U>0&&U<=j){this._trySkipBufferHole(null);return}}var V=self.performance.now();if(g===null){this.stalled=V;return}var z=V-g;if(!(!D&&z>=H&&(this._reportStall(y),!this.media))){var $=F.BufferHelper.bufferInfo(h,P,v.maxBufferHole);this._tryFixBufferStall($,z)}}}}},l._tryFixBufferStall=function(A,d){var v=this.config,h=this.fragmentTracker,g=this.media;if(g!==null){var P=g.currentTime,D=h.getPartialFragment(P);if(D){var p=this._trySkipBufferHole(D);if(p||!this.media)return}A.len>v.maxBufferHole&&d>v.highBufferWatchdogPeriod*1e3&&(M.logger.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}},l._reportStall=function(A){var d=this.hls,v=this.media,h=this.stallReported;!h&&v&&(this.stallReported=!0,M.logger.warn("Playback stalling at @"+v.currentTime+" due to low buffer ("+JSON.stringify(A)+")"),d.trigger(K.Events.ERROR,{type:I.ErrorTypes.MEDIA_ERROR,details:I.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:A.len}))},l._trySkipBufferHole=function(A){var d=this.config,v=this.hls,h=this.media;if(h===null)return 0;for(var g=h.currentTime,P=0,D=F.BufferHelper.getBuffered(h),p=0;p<D.length;p++){var x=D.start(p);if(g+d.maxBufferHole>=P&&g<x){var b=Math.max(x+N,h.currentTime+k);return M.logger.warn("skipping hole, adjusting currentTime from "+g+" to "+b),this.moved=!0,this.stalled=null,h.currentTime=b,A&&v.trigger(K.Events.ERROR,{type:I.ErrorTypes.MEDIA_ERROR,details:I.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+g+" to "+b,frag:A}),b}P=D.end(p)}return 0},l._tryNudgeBuffer=function(){var A=this.config,d=this.hls,v=this.media,h=this.nudgeRetry;if(v!==null){var g=v.currentTime;if(this.nudgeRetry++,h<A.nudgeMaxRetry){var P=g+(h+1)*A.nudgeOffset;M.logger.warn("Nudging 'currentTime' from "+g+" to "+P),v.currentTime=P,d.trigger(K.Events.ERROR,{type:I.ErrorTypes.MEDIA_ERROR,details:I.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else M.logger.error("Playhead still not moving while enough data buffered @"+g+" after "+A.nudgeMaxRetry+" nudges"),d.trigger(K.Events.ERROR,{type:I.ErrorTypes.MEDIA_ERROR,details:I.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})}},T}()},"./src/controller/id3-track-controller.ts":(O,w,f)=>{f.r(w),f.d(w,{default:()=>A});var F=f("./src/polyfills/number.ts"),I=f("./src/events.ts"),K=f("./src/utils/texttrack-utils.ts"),M=f("./src/demux/id3.ts"),H=f("./src/loader/date-range.ts"),B=f("./src/types/demuxer.ts"),k=.25;function N(){return self.WebKitDataCue||self.VTTCue||self.TextTrackCue}var L=function(){var d=N();try{new d(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY}();function T(d,v){return d.getTime()/1e3-v}function l(d){return Uint8Array.from(d.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}var C=function(){function d(h){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=h,this._registerListeners()}var v=d.prototype;return v.destroy=function(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null},v._registerListeners=function(){var g=this.hls;g.on(I.Events.MEDIA_ATTACHED,this.onMediaAttached,this),g.on(I.Events.MEDIA_DETACHING,this.onMediaDetaching,this),g.on(I.Events.MANIFEST_LOADING,this.onManifestLoading,this),g.on(I.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),g.on(I.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),g.on(I.Events.LEVEL_UPDATED,this.onLevelUpdated,this)},v._unregisterListeners=function(){var g=this.hls;g.off(I.Events.MEDIA_ATTACHED,this.onMediaAttached,this),g.off(I.Events.MEDIA_DETACHING,this.onMediaDetaching,this),g.off(I.Events.MANIFEST_LOADING,this.onManifestLoading,this),g.off(I.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),g.off(I.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),g.off(I.Events.LEVEL_UPDATED,this.onLevelUpdated,this)},v.onMediaAttached=function(g,P){this.media=P.media},v.onMediaDetaching=function(){this.id3Track&&((0,K.clearCurrentCues)(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})},v.onManifestLoading=function(){this.dateRangeCuesAppended={}},v.createTrack=function(g){var P=this.getID3Track(g.textTracks);return P.mode="hidden",P},v.getID3Track=function(g){if(this.media){for(var P=0;P<g.length;P++){var D=g[P];if(D.kind==="metadata"&&D.label==="id3")return(0,K.sendAddTrackEvent)(D,this.media),D}return this.media.addTextTrack("metadata","id3")}},v.onFragParsingMetadata=function(g,P){if(this.media){var D=this.hls.config,p=D.enableEmsgMetadataCues,x=D.enableID3MetadataCues;if(!(!p&&!x)){var b=P.samples;this.id3Track||(this.id3Track=this.createTrack(this.media));for(var y=N(),_=0;_<b.length;_++){var u=b[_].type;if(!(u===B.MetadataSchema.emsg&&!p||!x)){var m=M.getID3Frames(b[_].data);if(m){var o=b[_].pts,S=o+b[_].duration;S>L&&(S=L);var U=S-o;U<=0&&(S=o+k);for(var R=0;R<m.length;R++){var G=m[R];if(!M.isTimeStampFrame(G)){this.updateId3CueEnds(o);var j=new y(o,S,"");j.value=G,u&&(j.type=u),this.id3Track.addCue(j)}}}}}}}},v.updateId3CueEnds=function(g){var P,D=(P=this.id3Track)===null||P===void 0?void 0:P.cues;if(D)for(var p=D.length;p--;){var x=D[p];x.startTime<g&&x.endTime===L&&(x.endTime=g)}},v.onBufferFlushing=function(g,P){var D=P.startOffset,p=P.endOffset,x=P.type,b=this.id3Track,y=this.hls;if(y){var _=y.config,u=_.enableEmsgMetadataCues,m=_.enableID3MetadataCues;if(b&&(u||m)){var o;x==="audio"?o=function(U){return U.type===B.MetadataSchema.audioId3&&m}:x==="video"?o=function(U){return U.type===B.MetadataSchema.emsg&&u}:o=function(U){return U.type===B.MetadataSchema.audioId3&&m||U.type===B.MetadataSchema.emsg&&u},(0,K.removeCuesInRange)(b,D,p,o)}}},v.onLevelUpdated=function(g,P){var D=this,p=P.details;if(!(!this.media||!p.hasProgramDateTime||!this.hls.config.enableDateRangeMetadataCues)){var x=this.dateRangeCuesAppended,b=this.id3Track,y=p.dateRanges,_=Object.keys(y);if(b)for(var u=Object.keys(x).filter(function(V){return!_.includes(V)}),m=function(z){var $=u[z];Object.keys(x[$].cues).forEach(function(X){b.removeCue(x[$].cues[X])}),delete x[$]},o=u.length;o--;)m(o);var S=p.fragments[p.fragments.length-1];if(!(_.length===0||!(0,F.isFiniteNumber)(S==null?void 0:S.programDateTime))){this.id3Track||(this.id3Track=this.createTrack(this.media));for(var U=S.programDateTime/1e3-S.start,R=N(),G=function(z){var $=_[z],X=y[$],J=x[$],q=(J==null?void 0:J.cues)||{},ee=(J==null?void 0:J.durationKnown)||!1,ne=T(X.startDate,U),ae=L,ue=X.endDate;if(ue)ae=T(ue,U),ee=!0;else if(X.endOnNext&&!ee){var le=_.reduce(function(Ae,we){var be=y[we];return be.class===X.class&&be.id!==we&&be.startDate>X.startDate&&Ae.push(be),Ae},[]).sort(function(Ae,we){return Ae.startDate.getTime()-we.startDate.getTime()})[0];le&&(ae=T(le.startDate,U),ee=!0)}for(var fe=Object.keys(X.attr),ye=0;ye<fe.length;ye++){var Le=fe[ye];if(!(Le===H.DateRangeAttribute.ID||Le===H.DateRangeAttribute.CLASS||Le===H.DateRangeAttribute.START_DATE||Le===H.DateRangeAttribute.DURATION||Le===H.DateRangeAttribute.END_DATE||Le===H.DateRangeAttribute.END_ON_NEXT)){var Ee=q[Le];if(Ee)ee&&!J.durationKnown&&(Ee.endTime=ae);else{var ve=X.attr[Le];Ee=new R(ne,ae,""),(Le===H.DateRangeAttribute.SCTE35_OUT||Le===H.DateRangeAttribute.SCTE35_IN)&&(ve=l(ve)),Ee.value={key:Le,data:ve},Ee.type=B.MetadataSchema.dateRange,D.id3Track.addCue(Ee),q[Le]=Ee}}}x[$]={cues:q,dateRange:X,durationKnown:ee}},j=0;j<_.length;j++)G(j)}}},d}();const A=C},"./src/controller/latency-controller.ts":(O,w,f)=>{f.r(w),f.d(w,{default:()=>N});var F=f("./src/errors.ts"),I=f("./src/events.ts"),K=f("./src/utils/logger.ts");function M(L,T){for(var l=0;l<T.length;l++){var C=T[l];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(L,B(C.key),C)}}function H(L,T,l){return T&&M(L.prototype,T),l&&M(L,l),Object.defineProperty(L,"prototype",{writable:!1}),L}function B(L){var T=k(L,"string");return typeof T=="symbol"?T:String(T)}function k(L,T){if(typeof L!="object"||L===null)return L;var l=L[Symbol.toPrimitive];if(l!==void 0){var C=l.call(L,T||"default");if(typeof C!="object")return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return(T==="string"?String:Number)(L)}var N=function(){function L(l){var C=this;this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=function(){return C.timeupdate()},this.hls=l,this.config=l.config,this.registerListeners()}var T=L.prototype;return T.destroy=function(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null},T.registerListeners=function(){this.hls.on(I.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(I.Events.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(I.Events.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(I.Events.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(I.Events.ERROR,this.onError,this)},T.unregisterListeners=function(){this.hls.off(I.Events.MEDIA_ATTACHED,this.onMediaAttached),this.hls.off(I.Events.MEDIA_DETACHING,this.onMediaDetaching),this.hls.off(I.Events.MANIFEST_LOADING,this.onManifestLoading),this.hls.off(I.Events.LEVEL_UPDATED,this.onLevelUpdated),this.hls.off(I.Events.ERROR,this.onError)},T.onMediaAttached=function(C,A){this.media=A.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)},T.onMediaDetaching=function(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)},T.onManifestLoading=function(){this.levelDetails=null,this._latency=null,this.stallCount=0},T.onLevelUpdated=function(C,A){var d=A.details;this.levelDetails=d,d.advanced&&this.timeupdate(),!d.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)},T.onError=function(C,A){A.details===F.ErrorDetails.BUFFER_STALLED_ERROR&&(this.stallCount++,K.logger.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))},T.timeupdate=function(){var C=this.media,A=this.levelDetails;if(!(!C||!A)){this.currentTime=C.currentTime;var d=this.computeLatency();if(d!==null){this._latency=d;var v=this.config,h=v.lowLatencyMode,g=v.maxLiveSyncPlaybackRate;if(!(!h||g===1)){var P=this.targetLatency;if(P!==null){var D=d-P,p=Math.min(this.maxLatency,P+A.targetduration),x=D<p;if(A.live&&x&&D>.05&&this.forwardBufferLength>1){var b=Math.min(2,Math.max(1,g)),y=Math.round(2/(1+Math.exp(-.75*D-this.edgeStalled))*20)/20;C.playbackRate=Math.min(b,Math.max(1,y))}else C.playbackRate!==1&&C.playbackRate!==0&&(C.playbackRate=1)}}}}},T.estimateLiveEdge=function(){var C=this.levelDetails;return C===null?null:C.edge+C.age},T.computeLatency=function(){var C=this.estimateLiveEdge();return C===null?null:C-this.currentTime},H(L,[{key:"latency",get:function(){return this._latency||0}},{key:"maxLatency",get:function(){var C=this.config,A=this.levelDetails;return C.liveMaxLatencyDuration!==void 0?C.liveMaxLatencyDuration:A?C.liveMaxLatencyDurationCount*A.targetduration:0}},{key:"targetLatency",get:function(){var C=this.levelDetails;if(C===null)return null;var A=C.holdBack,d=C.partHoldBack,v=C.targetduration,h=this.config,g=h.liveSyncDuration,P=h.liveSyncDurationCount,D=h.lowLatencyMode,p=this.hls.userConfig,x=D&&d||A;(p.liveSyncDuration||p.liveSyncDurationCount||x===0)&&(x=g!==void 0?g:P*v);var b=v,y=1;return x+Math.min(this.stallCount*y,b)}},{key:"liveSyncPosition",get:function(){var C=this.estimateLiveEdge(),A=this.targetLatency,d=this.levelDetails;if(C===null||A===null||d===null)return null;var v=d.edge,h=C-A-this.edgeStalled,g=v-d.totalduration,P=v-(this.config.lowLatencyMode&&d.partTarget||d.targetduration);return Math.min(Math.max(g,h),P)}},{key:"drift",get:function(){var C=this.levelDetails;return C===null?1:C.drift}},{key:"edgeStalled",get:function(){var C=this.levelDetails;if(C===null)return 0;var A=(this.config.lowLatencyMode&&C.partTarget||C.targetduration)*3;return Math.max(C.age-A,0)}},{key:"forwardBufferLength",get:function(){var C=this.media,A=this.levelDetails;if(!C||!A)return 0;var d=C.buffered.length;return(d?C.buffered.end(d-1):A.edge)-this.currentTime}}]),L}()},"./src/controller/level-controller.ts":(O,w,f)=>{f.r(w),f.d(w,{default:()=>h});var F=f("./src/types/level.ts"),I=f("./src/events.ts"),K=f("./src/errors.ts"),M=f("./src/utils/codecs.ts"),H=f("./src/controller/level-helper.ts"),B=f("./src/controller/base-playlist-controller.ts"),k=f("./src/types/loader.ts");function N(){return N=Object.assign?Object.assign.bind():function(g){for(var P=1;P<arguments.length;P++){var D=arguments[P];for(var p in D)Object.prototype.hasOwnProperty.call(D,p)&&(g[p]=D[p])}return g},N.apply(this,arguments)}function L(g,P){for(var D=0;D<P.length;D++){var p=P[D];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(g,l(p.key),p)}}function T(g,P,D){return P&&L(g.prototype,P),D&&L(g,D),Object.defineProperty(g,"prototype",{writable:!1}),g}function l(g){var P=C(g,"string");return typeof P=="symbol"?P:String(P)}function C(g,P){if(typeof g!="object"||g===null)return g;var D=g[Symbol.toPrimitive];if(D!==void 0){var p=D.call(g,P||"default");if(typeof p!="object")return p;throw new TypeError("@@toPrimitive must return a primitive value.")}return(P==="string"?String:Number)(g)}function A(g,P){g.prototype=Object.create(P.prototype),g.prototype.constructor=g,d(g,P)}function d(g,P){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(p,x){return p.__proto__=x,p},d(g,P)}var v=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),h=function(g){A(P,g);function P(p){var x;return x=g.call(this,p,"[level-controller]")||this,x._levels=[],x._firstLevel=-1,x._startLevel=void 0,x.currentLevelIndex=-1,x.manualLevelIndex=-1,x.onParsedComplete=void 0,x._registerListeners(),x}var D=P.prototype;return D._registerListeners=function(){var x=this.hls;x.on(I.Events.MANIFEST_LOADED,this.onManifestLoaded,this),x.on(I.Events.LEVEL_LOADED,this.onLevelLoaded,this),x.on(I.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),x.on(I.Events.FRAG_LOADED,this.onFragLoaded,this),x.on(I.Events.ERROR,this.onError,this)},D._unregisterListeners=function(){var x=this.hls;x.off(I.Events.MANIFEST_LOADED,this.onManifestLoaded,this),x.off(I.Events.LEVEL_LOADED,this.onLevelLoaded,this),x.off(I.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),x.off(I.Events.FRAG_LOADED,this.onFragLoaded,this),x.off(I.Events.ERROR,this.onError,this)},D.destroy=function(){this._unregisterListeners(),this.manualLevelIndex=-1,this._levels.length=0,g.prototype.destroy.call(this)},D.startLoad=function(){var x=this._levels;x.forEach(function(b){b.loadError=0}),g.prototype.startLoad.call(this)},D.onManifestLoaded=function(x,b){var y=[],_=[],u=[],m,o={},S,U=!1,R=!1,G=!1;if(b.levels.forEach(function($){var X=$.attrs;U=U||!!($.width&&$.height),R=R||!!$.videoCodec,G=G||!!$.audioCodec,v&&$.audioCodec&&$.audioCodec.indexOf("mp4a.40.34")!==-1&&($.audioCodec=void 0);var J=$.bitrate+"-"+$.attrs.RESOLUTION+"-"+$.attrs.CODECS;S=o[J],S?S.url.push($.url):(S=new F.Level($),o[J]=S,y.push(S)),X&&(X.AUDIO&&(0,H.addGroupId)(S,"audio",X.AUDIO),X.SUBTITLES&&(0,H.addGroupId)(S,"text",X.SUBTITLES))}),(U||R)&&G&&(y=y.filter(function($){var X=$.videoCodec,J=$.width,q=$.height;return!!X||!!(J&&q)})),y=y.filter(function($){var X=$.audioCodec,J=$.videoCodec;return(!X||(0,M.isCodecSupportedInMp4)(X,"audio"))&&(!J||(0,M.isCodecSupportedInMp4)(J,"video"))}),b.audioTracks&&(_=b.audioTracks.filter(function($){return!$.audioCodec||(0,M.isCodecSupportedInMp4)($.audioCodec,"audio")}),(0,H.assignTrackIdsByGroup)(_)),b.subtitles&&(u=b.subtitles,(0,H.assignTrackIdsByGroup)(u)),y.length>0){m=y[0].bitrate,y.sort(function($,X){return $.attrs["HDCP-LEVEL"]!==X.attrs["HDCP-LEVEL"]?($.attrs["HDCP-LEVEL"]||"")>(X.attrs["HDCP-LEVEL"]||"")?1:-1:$.bitrate!==X.bitrate?$.bitrate-X.bitrate:$.attrs.SCORE!==X.attrs.SCORE?$.attrs.decimalFloatingPoint("SCORE")-X.attrs.decimalFloatingPoint("SCORE"):U&&$.height!==X.height?$.height-X.height:0}),this._levels=y;for(var j=0;j<y.length;j++)if(y[j].bitrate===m){this._firstLevel=j,this.log("manifest loaded, "+y.length+" level(s) found, first bitrate: "+m);break}var V=G&&!R,z={levels:y,audioTracks:_,subtitleTracks:u,sessionData:b.sessionData,sessionKeys:b.sessionKeys,firstLevel:this._firstLevel,stats:b.stats,audio:G,video:R,altAudio:!V&&_.some(function($){return!!$.url})};this.hls.trigger(I.Events.MANIFEST_PARSED,z),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}else this.hls.trigger(I.Events.ERROR,{type:K.ErrorTypes.MEDIA_ERROR,details:K.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:b.url,reason:"no level with compatible codecs found in manifest"})},D.onError=function(x,b){var y,_;if(g.prototype.onError.call(this,x,b),!b.fatal){var u=b.context,m=this._levels[this.currentLevelIndex];if(u&&(u.type===k.PlaylistContextType.AUDIO_TRACK&&m.audioGroupIds&&u.groupId===m.audioGroupIds[m.urlId]||u.type===k.PlaylistContextType.SUBTITLE_TRACK&&m.textGroupIds&&u.groupId===m.textGroupIds[m.urlId])){this.redundantFailover(this.currentLevelIndex);return}var o=!1,S=!0,U;switch(b.details){case K.ErrorDetails.FRAG_LOAD_ERROR:case K.ErrorDetails.FRAG_LOAD_TIMEOUT:case K.ErrorDetails.KEY_LOAD_ERROR:case K.ErrorDetails.KEY_LOAD_TIMEOUT:if(b.frag){var R=b.frag.type===k.PlaylistLevelType.MAIN?b.frag.level:this.currentLevelIndex,G=this._levels[R];G?(G.fragmentError++,G.fragmentError>this.hls.config.fragLoadingMaxRetry&&(U=R)):U=R}break;case K.ErrorDetails.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{var j=m.attrs["HDCP-LEVEL"];j&&(this.hls.maxHdcpLevel=F.HdcpLevels[F.HdcpLevels.indexOf(j)-1],this.warn('Restricting playback to HDCP-LEVEL of "'+this.hls.maxHdcpLevel+'" or lower'))}case K.ErrorDetails.FRAG_PARSING_ERROR:case K.ErrorDetails.KEY_SYSTEM_NO_SESSION:U=((y=b.frag)===null||y===void 0?void 0:y.type)===k.PlaylistLevelType.MAIN?b.frag.level:this.currentLevelIndex,b.levelRetry=!1;break;case K.ErrorDetails.LEVEL_LOAD_ERROR:case K.ErrorDetails.LEVEL_LOAD_TIMEOUT:u&&(u.deliveryDirectives&&(S=!1),U=u.level),o=!0;break;case K.ErrorDetails.REMUX_ALLOC_ERROR:U=(_=b.level)!=null?_:this.currentLevelIndex,o=!0;break}U!==void 0&&this.recoverLevel(b,U,o,S)}},D.recoverLevel=function(x,b,y,_){var u=x.details,m=this._levels[b];if(m.loadError++,y){var o=this.retryLoadingOrFail(x);if(o)x.levelRetry=!0;else{this.currentLevelIndex=-1;return}}if(_){var S=m.url.length;if(S>1&&m.loadError<S)x.levelRetry=!0,this.redundantFailover(b);else if(this.manualLevelIndex===-1){for(var U=-1,R=this._levels,G=R.length;G--;){var j=(G+this.currentLevelIndex)%R.length;if(j!==this.currentLevelIndex&&R[j].loadError===0){U=j;break}}U>-1&&this.currentLevelIndex!==U?(this.warn(u+": switch to "+U),x.levelRetry=!0,this.hls.nextAutoLevel=U):x.levelRetry===!1&&(x.fatal=!0)}}},D.redundantFailover=function(x){var b=this._levels[x],y=b.url.length;if(y>1){var _=(b.urlId+1)%y;this.warn("Switching to redundant URL-id "+_),this._levels.forEach(function(u){u.urlId=_}),this.level=x}},D.onFragLoaded=function(x,b){var y=b.frag;if(y!==void 0&&y.type===k.PlaylistLevelType.MAIN){var _=this._levels[y.level];_!==void 0&&(_.fragmentError=0,_.loadError=0)}},D.onLevelLoaded=function(x,b){var y,_=b.level,u=b.details,m=this._levels[_];if(!m){var o;this.warn("Invalid level index "+_),(o=b.deliveryDirectives)!==null&&o!==void 0&&o.skip&&(u.deltaUpdateFailed=!0);return}_===this.currentLevelIndex?(m.fragmentError===0&&(m.loadError=0,this.retryCount=0),this.playlistLoaded(_,b,m.details)):(y=b.deliveryDirectives)!==null&&y!==void 0&&y.skip&&(u.deltaUpdateFailed=!0)},D.onAudioTrackSwitched=function(x,b){var y=this.hls.levels[this.currentLevelIndex];if(y&&y.audioGroupIds){for(var _=-1,u=this.hls.audioTracks[b.id].groupId,m=0;m<y.audioGroupIds.length;m++)if(y.audioGroupIds[m]===u){_=m;break}_!==y.urlId&&(y.urlId=_,this.startLoad())}},D.loadPlaylist=function(x){g.prototype.loadPlaylist.call(this);var b=this.currentLevelIndex,y=this._levels[b];if(this.canLoad&&y&&y.url.length>0){var _=y.urlId,u=y.url[_];if(x)try{u=x.addDirectives(u)}catch(m){this.warn("Could not construct new URL with HLS Delivery Directives: "+m)}this.log("Attempt loading level index "+b+((x==null?void 0:x.msn)!==void 0?" at sn "+x.msn+" part "+x.part:"")+" with URL-id "+_+" "+u),this.clearTimer(),this.hls.trigger(I.Events.LEVEL_LOADING,{url:u,level:b,id:_,deliveryDirectives:x||null})}},D.removeLevel=function(x,b){var y=function(m,o){return o!==b},_=this._levels.filter(function(u,m){return m!==x?!0:u.url.length>1&&b!==void 0?(u.url=u.url.filter(y),u.audioGroupIds&&(u.audioGroupIds=u.audioGroupIds.filter(y)),u.textGroupIds&&(u.textGroupIds=u.textGroupIds.filter(y)),u.urlId=0,!0):!1}).map(function(u,m){var o=u.details;return o!=null&&o.fragments&&o.fragments.forEach(function(S){S.level=m}),u});this._levels=_,this.hls.trigger(I.Events.LEVELS_UPDATED,{levels:_})},T(P,[{key:"levels",get:function(){return this._levels.length===0?null:this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(x){var b,y=this._levels;if(y.length!==0&&!(this.currentLevelIndex===x&&(b=y[x])!==null&&b!==void 0&&b.details)){if(x<0||x>=y.length){var _=x<0;if(this.hls.trigger(I.Events.ERROR,{type:K.ErrorTypes.OTHER_ERROR,details:K.ErrorDetails.LEVEL_SWITCH_ERROR,level:x,fatal:_,reason:"invalid level idx"}),_)return;x=Math.min(x,y.length-1)}this.clearTimer();var u=this.currentLevelIndex,m=y[u],o=y[x];this.log("switching to level "+x+" from "+u),this.currentLevelIndex=x;var S=N({},o,{level:x,maxBitrate:o.maxBitrate,uri:o.uri,urlId:o.urlId});delete S._urlId,this.hls.trigger(I.Events.LEVEL_SWITCHING,S);var U=o.details;if(!U||U.live){var R=this.switchParams(o.uri,m==null?void 0:m.details);this.loadPlaylist(R)}}}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(x){this.manualLevelIndex=x,this._startLevel===void 0&&(this._startLevel=x),x!==-1&&(this.level=x)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(x){this._firstLevel=x}},{key:"startLevel",get:function(){if(this._startLevel===void 0){var x=this.hls.config.startLevel;return x!==void 0?x:this._firstLevel}else return this._startLevel},set:function(x){this._startLevel=x}},{key:"nextLoadLevel",get:function(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(x){this.level=x,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=x)}}]),P}(B.default)},"./src/controller/level-helper.ts":(O,w,f)=>{f.r(w),f.d(w,{addGroupId:()=>H,addSliding:()=>v,adjustSliding:()=>d,assignTrackIdsByGroup:()=>B,computeReloadInterval:()=>h,getFragmentWithSN:()=>g,getPartWith:()=>P,mapFragmentIntersection:()=>A,mapPartIntersection:()=>C,mergeDetails:()=>T,updateFragPTSDTS:()=>L,updatePTS:()=>k});var F=f("./src/polyfills/number.ts"),I=f("./src/utils/logger.ts"),K=f("./src/loader/date-range.ts");function M(){return M=Object.assign?Object.assign.bind():function(D){for(var p=1;p<arguments.length;p++){var x=arguments[p];for(var b in x)Object.prototype.hasOwnProperty.call(x,b)&&(D[b]=x[b])}return D},M.apply(this,arguments)}function H(D,p,x){switch(p){case"audio":D.audioGroupIds||(D.audioGroupIds=[]),D.audioGroupIds.push(x);break;case"text":D.textGroupIds||(D.textGroupIds=[]),D.textGroupIds.push(x);break}}function B(D){var p={};D.forEach(function(x){var b=x.groupId||"";x.id=p[b]=p[b]||0,p[b]++})}function k(D,p,x){var b=D[p],y=D[x];N(b,y)}function N(D,p){var x=p.startPTS;if((0,F.isFiniteNumber)(x)){var b=0,y;p.sn>D.sn?(b=x-D.start,y=D):(b=D.start-x,y=p),y.duration!==b&&(y.duration=b)}else if(p.sn>D.sn){var _=D.cc===p.cc;_&&D.minEndPTS?p.start=D.start+(D.minEndPTS-D.start):p.start=D.start+D.duration}else p.start=Math.max(D.start-p.duration,0)}function L(D,p,x,b,y,_){var u=b-x;u<=0&&(I.logger.warn("Fragment should have a positive duration",p),b=x+p.duration,_=y+p.duration);var m=x,o=b,S=p.startPTS,U=p.endPTS;if((0,F.isFiniteNumber)(S)){var R=Math.abs(S-x);(0,F.isFiniteNumber)(p.deltaPTS)?p.deltaPTS=Math.max(R,p.deltaPTS):p.deltaPTS=R,m=Math.max(x,S),x=Math.min(x,S),y=Math.min(y,p.startDTS),o=Math.min(b,U),b=Math.max(b,U),_=Math.max(_,p.endDTS)}p.duration=b-x;var G=x-p.start;p.start=p.startPTS=x,p.maxStartPTS=m,p.startDTS=y,p.endPTS=b,p.minEndPTS=o,p.endDTS=_;var j=p.sn;if(!D||j<D.startSN||j>D.endSN)return 0;var V,z=j-D.startSN,$=D.fragments;for($[z]=p,V=z;V>0;V--)N($[V],$[V-1]);for(V=z;V<$.length-1;V++)N($[V],$[V+1]);return D.fragmentHint&&N($[$.length-1],D.fragmentHint),D.PTSKnown=D.alignedSliding=!0,G}function T(D,p){for(var x=null,b=D.fragments,y=b.length-1;y>=0;y--){var _=b[y].initSegment;if(_){x=_;break}}D.fragmentHint&&delete D.fragmentHint.endPTS;var u=0,m;if(A(D,p,function(V,z){V.relurl&&(u=V.cc-z.cc),(0,F.isFiniteNumber)(V.startPTS)&&(0,F.isFiniteNumber)(V.endPTS)&&(z.start=z.startPTS=V.startPTS,z.startDTS=V.startDTS,z.appendedPTS=V.appendedPTS,z.maxStartPTS=V.maxStartPTS,z.endPTS=V.endPTS,z.endDTS=V.endDTS,z.minEndPTS=V.minEndPTS,z.duration=V.endPTS-V.startPTS,z.duration&&(m=z),p.PTSKnown=p.alignedSliding=!0),z.elementaryStreams=V.elementaryStreams,z.loader=V.loader,z.stats=V.stats,z.urlId=V.urlId,V.initSegment&&(z.initSegment=V.initSegment,x=V.initSegment)}),x){var o=p.fragmentHint?p.fragments.concat(p.fragmentHint):p.fragments;o.forEach(function(V){var z;(!V.initSegment||V.initSegment.relurl===((z=x)===null||z===void 0?void 0:z.relurl))&&(V.initSegment=x)})}if(p.skippedSegments)if(p.deltaUpdateFailed=p.fragments.some(function(V){return!V}),p.deltaUpdateFailed){I.logger.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(var S=p.skippedSegments;S--;)p.fragments.shift();p.startSN=p.fragments[0].sn,p.startCC=p.fragments[0].cc}else p.canSkipDateRanges&&(p.dateRanges=l(D.dateRanges,p.dateRanges,p.recentlyRemovedDateranges));var U=p.fragments;if(u){I.logger.warn("discontinuity sliding from playlist, take drift into account");for(var R=0;R<U.length;R++)U[R].cc+=u}p.skippedSegments&&(p.startCC=p.fragments[0].cc),C(D.partList,p.partList,function(V,z){z.elementaryStreams=V.elementaryStreams,z.stats=V.stats}),m?L(p,m,m.startPTS,m.endPTS,m.startDTS,m.endDTS):d(D,p),U.length&&(p.totalduration=p.edge-U[0].start),p.driftStartTime=D.driftStartTime,p.driftStart=D.driftStart;var G=p.advancedDateTime;if(p.advanced&&G){var j=p.edge;p.driftStart||(p.driftStartTime=G,p.driftStart=j),p.driftEndTime=G,p.driftEnd=j}else p.driftEndTime=D.driftEndTime,p.driftEnd=D.driftEnd,p.advancedDateTime=D.advancedDateTime}function l(D,p,x){var b=M({},D);return x&&x.forEach(function(y){delete b[y]}),Object.keys(p).forEach(function(y){var _=new K.DateRange(p[y].attr,b[y]);_.isValid?b[y]=_:I.logger.warn('Ignoring invalid Playlist Delta Update DATERANGE tag: "'+JSON.stringify(p[y].attr)+'"')}),b}function C(D,p,x){if(D&&p)for(var b=0,y=0,_=D.length;y<=_;y++){var u=D[y],m=p[y+b];u&&m&&u.index===m.index&&u.fragment.sn===m.fragment.sn?x(u,m):b--}}function A(D,p,x){for(var b=p.skippedSegments,y=Math.max(D.startSN,p.startSN)-p.startSN,_=(D.fragmentHint?1:0)+(b?p.endSN:Math.min(D.endSN,p.endSN))-p.startSN,u=p.startSN-D.startSN,m=p.fragmentHint?p.fragments.concat(p.fragmentHint):p.fragments,o=D.fragmentHint?D.fragments.concat(D.fragmentHint):D.fragments,S=y;S<=_;S++){var U=o[u+S],R=m[S];b&&!R&&S<b&&(R=p.fragments[S]=U),U&&R&&x(U,R)}}function d(D,p){var x=p.startSN+p.skippedSegments-D.startSN,b=D.fragments;x<0||x>=b.length||v(p,b[x].start)}function v(D,p){if(p){for(var x=D.fragments,b=D.skippedSegments;b<x.length;b++)x[b].start+=p;D.fragmentHint&&(D.fragmentHint.start+=p)}}function h(D,p){p===void 0&&(p=1/0);var x=1e3*D.targetduration;if(D.updated){var b=D.fragments,y=4;if(b.length&&x*y>p){var _=b[b.length-1].duration*1e3;_<x&&(x=_)}}else x/=2;return Math.round(x)}function g(D,p,x){if(!D||!D.details)return null;var b=D.details,y=b.fragments[p-b.startSN];return y||(y=b.fragmentHint,y&&y.sn===p)?y:p<b.startSN&&x&&x.sn===p?x:null}function P(D,p,x){if(!D||!D.details)return null;var b=D.details.partList;if(b)for(var y=b.length;y--;){var _=b[y];if(_.index===x&&_.fragment.sn===p)return _}return null}},"./src/controller/stream-controller.ts":(O,w,f)=>{f.r(w),f.d(w,{default:()=>p});var F=f("./src/polyfills/number.ts"),I=f("./src/controller/base-stream-controller.ts"),K=f("./src/is-supported.ts"),M=f("./src/events.ts"),H=f("./src/utils/buffer-helper.ts"),B=f("./src/controller/fragment-tracker.ts"),k=f("./src/types/loader.ts"),N=f("./src/loader/fragment.ts"),L=f("./src/demux/transmuxer-interface.ts"),T=f("./src/types/transmuxer.ts"),l=f("./src/controller/gap-controller.ts"),C=f("./src/errors.ts");function A(x,b){for(var y=0;y<b.length;y++){var _=b[y];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(x,v(_.key),_)}}function d(x,b,y){return b&&A(x.prototype,b),y&&A(x,y),Object.defineProperty(x,"prototype",{writable:!1}),x}function v(x){var b=h(x,"string");return typeof b=="symbol"?b:String(b)}function h(x,b){if(typeof x!="object"||x===null)return x;var y=x[Symbol.toPrimitive];if(y!==void 0){var _=y.call(x,b||"default");if(typeof _!="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(x)}function g(x,b){x.prototype=Object.create(b.prototype),x.prototype.constructor=x,P(x,b)}function P(x,b){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(_,u){return _.__proto__=u,_},P(x,b)}var D=100,p=function(x){g(b,x);function b(_,u,m){var o;return o=x.call(this,_,u,m,"[stream-controller]")||this,o.audioCodecSwap=!1,o.gapController=null,o.level=-1,o._forceStartLoad=!1,o.altAudio=!1,o.audioOnly=!1,o.fragPlaying=null,o.onvplaying=null,o.onvseeked=null,o.fragLastKbps=0,o.couldBacktrack=!1,o.backtrackFragment=null,o.audioCodecSwitch=!1,o.videoBuffer=null,o._registerListeners(),o}var y=b.prototype;return y._registerListeners=function(){var u=this.hls;u.on(M.Events.MEDIA_ATTACHED,this.onMediaAttached,this),u.on(M.Events.MEDIA_DETACHING,this.onMediaDetaching,this),u.on(M.Events.MANIFEST_LOADING,this.onManifestLoading,this),u.on(M.Events.MANIFEST_PARSED,this.onManifestParsed,this),u.on(M.Events.LEVEL_LOADING,this.onLevelLoading,this),u.on(M.Events.LEVEL_LOADED,this.onLevelLoaded,this),u.on(M.Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),u.on(M.Events.ERROR,this.onError,this),u.on(M.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),u.on(M.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),u.on(M.Events.BUFFER_CREATED,this.onBufferCreated,this),u.on(M.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),u.on(M.Events.LEVELS_UPDATED,this.onLevelsUpdated,this),u.on(M.Events.FRAG_BUFFERED,this.onFragBuffered,this)},y._unregisterListeners=function(){var u=this.hls;u.off(M.Events.MEDIA_ATTACHED,this.onMediaAttached,this),u.off(M.Events.MEDIA_DETACHING,this.onMediaDetaching,this),u.off(M.Events.MANIFEST_LOADING,this.onManifestLoading,this),u.off(M.Events.MANIFEST_PARSED,this.onManifestParsed,this),u.off(M.Events.LEVEL_LOADED,this.onLevelLoaded,this),u.off(M.Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),u.off(M.Events.ERROR,this.onError,this),u.off(M.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),u.off(M.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),u.off(M.Events.BUFFER_CREATED,this.onBufferCreated,this),u.off(M.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),u.off(M.Events.LEVELS_UPDATED,this.onLevelsUpdated,this),u.off(M.Events.FRAG_BUFFERED,this.onFragBuffered,this)},y.onHandlerDestroying=function(){this._unregisterListeners(),this.onMediaDetaching()},y.startLoad=function(u){if(this.levels){var m=this.lastCurrentTime,o=this.hls;if(this.stopLoad(),this.setInterval(D),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var S=o.startLevel;S===-1&&(o.config.testBandwidth&&this.levels.length>1?(S=0,this.bitrateTest=!0):S=o.nextAutoLevel),this.level=o.nextLoadLevel=S,this.loadedmetadata=!1}m>0&&u===-1&&(this.log("Override startPosition with lastCurrentTime @"+m.toFixed(3)),u=m),this.state=I.State.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=u,this.tick()}else this._forceStartLoad=!0,this.state=I.State.STOPPED},y.stopLoad=function(){this._forceStartLoad=!1,x.prototype.stopLoad.call(this)},y.doTick=function(){switch(this.state){case I.State.IDLE:this.doTickIdle();break;case I.State.WAITING_LEVEL:{var u,m=this.levels,o=this.level,S=m==null||(u=m[o])===null||u===void 0?void 0:u.details;if(S&&(!S.live||this.levelLastLoaded===this.level)){if(this.waitForCdnTuneIn(S))break;this.state=I.State.IDLE;break}break}case I.State.FRAG_LOADING_WAITING_RETRY:{var U,R=self.performance.now(),G=this.retryDate;(!G||R>=G||(U=this.media)!==null&&U!==void 0&&U.seeking)&&(this.log("retryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(this.level),this.state=I.State.IDLE)}break}this.onTickEnd()},y.onTickEnd=function(){x.prototype.onTickEnd.call(this),this.checkBuffer(),this.checkFragmentChanged()},y.doTickIdle=function(){var u=this.hls,m=this.levelLastLoaded,o=this.levels,S=this.media,U=u.config,R=u.nextLoadLevel;if(!(m===null||!S&&(this.startFragRequested||!U.startFragPrefetch))&&!(this.altAudio&&this.audioOnly)&&!(!o||!o[R])){var G=o[R],j=this.getMainFwdBufferInfo();if(j!==null){var V=this.getLevelDetails();if(V&&this._streamEnded(j,V)){var z={};this.altAudio&&(z.type="video"),this.hls.trigger(M.Events.BUFFER_EOS,z),this.state=I.State.ENDED;return}this.level=u.nextLoadLevel=R;var $=G.details;if(!$||this.state===I.State.WAITING_LEVEL||$.live&&this.levelLastLoaded!==R){this.level=R,this.state=I.State.WAITING_LEVEL;return}var X=j.len,J=this.getMaxBufferLength(G.maxBitrate);if(!(X>=J)){this.backtrackFragment&&this.backtrackFragment.start>j.end&&(this.backtrackFragment=null);var q=this.backtrackFragment?this.backtrackFragment.start:j.end,ee=this.getNextFragment(q,$);if(this.couldBacktrack&&!this.fragPrevious&&ee&&ee.sn!=="initSegment"&&this.fragmentTracker.getState(ee)!==B.FragmentState.OK){var ne,ae=((ne=this.backtrackFragment)!=null?ne:ee).sn,ue=ae-$.startSN,le=$.fragments[ue-1];le&&ee.cc===le.cc&&(ee=le,this.fragmentTracker.removeFragment(le))}else this.backtrackFragment&&j.len&&(this.backtrackFragment=null);if(ee&&this.fragmentTracker.getState(ee)===B.FragmentState.OK&&this.nextLoadPosition>q){var fe=this.audioOnly&&!this.altAudio?N.ElementaryStreamTypes.AUDIO:N.ElementaryStreamTypes.VIDEO,ye=(fe===N.ElementaryStreamTypes.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;ye&&this.afterBufferFlushed(ye,fe,k.PlaylistLevelType.MAIN),ee=this.getNextFragment(this.nextLoadPosition,$)}ee&&(ee.initSegment&&!ee.initSegment.data&&!this.bitrateTest&&(ee=ee.initSegment),this.loadFragment(ee,$,q))}}}},y.loadFragment=function(u,m,o){var S,U=this.fragmentTracker.getState(u);this.fragCurrent=u,U===B.FragmentState.NOT_LOADED?u.sn==="initSegment"?this._loadInitSegment(u,m):this.bitrateTest?(this.log("Fragment "+u.sn+" of level "+u.level+" is being downloaded to test bitrate and will not be buffered"),this._loadBitrateTestFrag(u,m)):(this.startFragRequested=!0,x.prototype.loadFragment.call(this,u,m,o)):U===B.FragmentState.APPENDING?this.reduceMaxBufferLength(u.duration)&&this.fragmentTracker.removeFragment(u):((S=this.media)===null||S===void 0?void 0:S.buffered.length)===0&&this.fragmentTracker.removeAllFragments()},y.getAppendedFrag=function(u){var m=this.fragmentTracker.getAppendedFrag(u,k.PlaylistLevelType.MAIN);return m&&"fragment"in m?m.fragment:m},y.getBufferedFrag=function(u){return this.fragmentTracker.getBufferedFrag(u,k.PlaylistLevelType.MAIN)},y.followingBufferedFrag=function(u){return u?this.getBufferedFrag(u.end+.5):null},y.immediateLevelSwitch=function(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},y.nextLevelSwitch=function(){var u=this.levels,m=this.media;if(m!=null&&m.readyState){var o,S=this.getAppendedFrag(m.currentTime);if(S&&S.start>1&&this.flushMainBuffer(0,S.start-1),!m.paused&&u){var U=this.hls.nextLoadLevel,R=u[U],G=this.fragLastKbps;G&&this.fragCurrent?o=this.fragCurrent.duration*R.maxBitrate/(1e3*G)+1:o=0}else o=0;var j=this.getBufferedFrag(m.currentTime+o);if(j){var V=this.followingBufferedFrag(j);if(V){this.abortCurrentFrag();var z=V.maxStartPTS?V.maxStartPTS:V.start,$=V.duration,X=Math.max(j.end,z+Math.min(Math.max($-this.config.maxFragLookUpTolerance,$*.5),$*.75));this.flushMainBuffer(X,Number.POSITIVE_INFINITY)}}}},y.abortCurrentFrag=function(){var u=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,u&&u.abortRequests(),this.state){case I.State.KEY_LOADING:case I.State.FRAG_LOADING:case I.State.FRAG_LOADING_WAITING_RETRY:case I.State.PARSING:case I.State.PARSED:this.state=I.State.IDLE;break}this.nextLoadPosition=this.getLoadPosition()},y.flushMainBuffer=function(u,m){x.prototype.flushMainBuffer.call(this,u,m,this.altAudio?"video":null)},y.onMediaAttached=function(u,m){x.prototype.onMediaAttached.call(this,u,m);var o=m.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),o.addEventListener("playing",this.onvplaying),o.addEventListener("seeked",this.onvseeked),this.gapController=new l.default(this.config,o,this.fragmentTracker,this.hls)},y.onMediaDetaching=function(){var u=this.media;u&&this.onvplaying&&this.onvseeked&&(u.removeEventListener("playing",this.onvplaying),u.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),x.prototype.onMediaDetaching.call(this)},y.onMediaPlaying=function(){this.tick()},y.onMediaSeeked=function(){var u=this.media,m=u?u.currentTime:null;(0,F.isFiniteNumber)(m)&&this.log("Media seeked to "+m.toFixed(3)),this.tick()},y.onManifestLoading=function(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(M.Events.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=0,this.fragPlaying=null,this.backtrackFragment=null},y.onManifestParsed=function(u,m){var o=!1,S=!1,U;m.levels.forEach(function(R){U=R.audioCodec,U&&(U.indexOf("mp4a.40.2")!==-1&&(o=!0),U.indexOf("mp4a.40.5")!==-1&&(S=!0))}),this.audioCodecSwitch=o&&S&&!(0,K.changeTypeSupported)(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=m.levels,this.startFragRequested=!1},y.onLevelLoading=function(u,m){var o=this.levels;if(!(!o||this.state!==I.State.IDLE)){var S=o[m.level];(!S.details||S.details.live&&this.levelLastLoaded!==m.level||this.waitForCdnTuneIn(S.details))&&(this.state=I.State.WAITING_LEVEL)}},y.onLevelLoaded=function(u,m){var o,S=this.levels,U=m.level,R=m.details,G=R.totalduration;if(!S){this.warn("Levels were reset while loading level "+U);return}this.log("Level "+U+" loaded ["+R.startSN+","+R.endSN+"], cc ["+R.startCC+", "+R.endCC+"] duration:"+G);var j=this.fragCurrent;j&&(this.state===I.State.FRAG_LOADING||this.state===I.State.FRAG_LOADING_WAITING_RETRY)&&j.level!==m.level&&j.loader&&(this.state=I.State.IDLE,this.backtrackFragment=null,j.abortRequests());var V=S[U],z=0;if(R.live||(o=V.details)!==null&&o!==void 0&&o.live){if(R.fragments[0]||(R.deltaUpdateFailed=!0),R.deltaUpdateFailed)return;z=this.alignPlaylists(R,V.details)}if(V.details=R,this.levelLastLoaded=U,this.hls.trigger(M.Events.LEVEL_UPDATED,{details:R,level:U}),this.state===I.State.WAITING_LEVEL){if(this.waitForCdnTuneIn(R))return;this.state=I.State.IDLE}this.startFragRequested?R.live&&this.synchronizeToLiveEdge(R):this.setStartPosition(R,z),this.tick()},y._handleFragmentLoadProgress=function(u){var m,o=u.frag,S=u.part,U=u.payload,R=this.levels;if(!R){this.warn("Levels were reset while fragment load was in progress. Fragment "+o.sn+" of level "+o.level+" will not be buffered");return}var G=R[o.level],j=G.details;if(!j){this.warn("Dropping fragment "+o.sn+" of level "+o.level+" after level details were reset");return}var V=G.videoCodec,z=j.PTSKnown||!j.live,$=(m=o.initSegment)===null||m===void 0?void 0:m.data,X=this._getAudioCodec(G),J=this.transmuxer=this.transmuxer||new L.default(this.hls,k.PlaylistLevelType.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),q=S?S.index:-1,ee=q!==-1,ne=new T.ChunkMetadata(o.level,o.sn,o.stats.chunkCount,U.byteLength,q,ee),ae=this.initPTS[o.cc];J.push(U,$,X,V,o,S,j.totalduration,z,ne,ae)},y.onAudioTrackSwitching=function(u,m){var o=this.altAudio,S=!!m.url,U=m.id;if(!S){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var R=this.fragCurrent;R&&(this.log("Switching to main audio track, cancel main fragment load"),R.abortRequests()),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();var G=this.hls;o&&G.trigger(M.Events.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),G.trigger(M.Events.AUDIO_TRACK_SWITCHED,{id:U})}},y.onAudioTrackSwitched=function(u,m){var o=m.id,S=!!this.hls.audioTracks[o].url;if(S){var U=this.videoBuffer;U&&this.mediaBuffer!==U&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=U)}this.altAudio=S,this.tick()},y.onBufferCreated=function(u,m){var o=m.tracks,S,U,R=!1;for(var G in o){var j=o[G];if(j.id==="main"){if(U=G,S=j,G==="video"){var V=o[G];V&&(this.videoBuffer=V.buffer)}}else R=!0}R&&S?(this.log("Alternate track found, use "+U+".buffered to schedule main fragment loading"),this.mediaBuffer=S.buffer):this.mediaBuffer=this.media},y.onFragBuffered=function(u,m){var o=m.frag,S=m.part;if(!(o&&o.type!==k.PlaylistLevelType.MAIN)){if(this.fragContextChanged(o)){this.warn("Fragment "+o.sn+(S?" p: "+S.index:"")+" of level "+o.level+" finished buffering, but was aborted. state: "+this.state),this.state===I.State.PARSED&&(this.state=I.State.IDLE);return}var U=S?S.stats:o.stats;this.fragLastKbps=Math.round(8*U.total/(U.buffering.end-U.loading.first)),o.sn!=="initSegment"&&(this.fragPrevious=o),this.fragBufferedComplete(o,S)}},y.onError=function(u,m){if(m.type===C.ErrorTypes.KEY_SYSTEM_ERROR){this.onFragmentOrKeyLoadError(k.PlaylistLevelType.MAIN,m);return}switch(m.details){case C.ErrorDetails.FRAG_LOAD_ERROR:case C.ErrorDetails.FRAG_LOAD_TIMEOUT:case C.ErrorDetails.FRAG_PARSING_ERROR:case C.ErrorDetails.KEY_LOAD_ERROR:case C.ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(k.PlaylistLevelType.MAIN,m);break;case C.ErrorDetails.LEVEL_LOAD_ERROR:case C.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==I.State.ERROR&&(m.fatal?(this.warn(""+m.details),this.state=I.State.ERROR):!m.levelRetry&&this.state===I.State.WAITING_LEVEL&&(this.state=I.State.IDLE));break;case C.ErrorDetails.BUFFER_FULL_ERROR:if(m.parent==="main"&&(this.state===I.State.PARSING||this.state===I.State.PARSED)){var o=!0,S=this.getFwdBufferInfo(this.media,k.PlaylistLevelType.MAIN);S&&S.len>.5&&(o=!this.reduceMaxBufferLength(S.len)),o&&(this.warn("buffer full error also media.currentTime is not buffered, flush main"),this.immediateLevelSwitch()),this.resetLoadingState()}break}},y.checkBuffer=function(){var u=this.media,m=this.gapController;if(!(!u||!m||!u.readyState)){if(this.loadedmetadata||!H.BufferHelper.getBuffered(u).length){var o=this.state!==I.State.IDLE?this.fragCurrent:null;m.poll(this.lastCurrentTime,o)}this.lastCurrentTime=u.currentTime}},y.onFragLoadEmergencyAborted=function(){this.state=I.State.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()},y.onBufferFlushed=function(u,m){var o=m.type;if(o!==N.ElementaryStreamTypes.AUDIO||this.audioOnly&&!this.altAudio){var S=(o===N.ElementaryStreamTypes.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(S,o,k.PlaylistLevelType.MAIN)}},y.onLevelsUpdated=function(u,m){this.levels=m.levels},y.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},y.seekToStartPos=function(){var u=this.media;if(u){var m=u.currentTime,o=this.startPosition;if(o>=0&&m<o){if(u.seeking){this.log("could not seek to "+o+", already seeking at "+m);return}var S=H.BufferHelper.getBuffered(u),U=S.length?S.start(0):0,R=U-o;R>0&&(R<this.config.maxBufferHole||R<this.config.maxFragLookUpTolerance)&&(this.log("adjusting start position by "+R+" to match buffer start"),o+=R,this.startPosition=o),this.log("seek to target start position "+o+" from current time "+m),u.currentTime=o}}},y._getAudioCodec=function(u){var m=this.config.defaultAudioCodec||u.audioCodec;return this.audioCodecSwap&&m&&(this.log("Swapping audio codec"),m.indexOf("mp4a.40.5")!==-1?m="mp4a.40.2":m="mp4a.40.5"),m},y._loadBitrateTestFrag=function(u,m){var o=this;u.bitrateTest=!0,this._doFragLoad(u,m).then(function(S){var U=o.hls;if(!(!S||o.fragContextChanged(u))){o.fragLoadError=0,o.state=I.State.IDLE,o.startFragRequested=!1,o.bitrateTest=!1;var R=u.stats;R.parsing.start=R.parsing.end=R.buffering.start=R.buffering.end=self.performance.now(),U.trigger(M.Events.FRAG_LOADED,S),u.bitrateTest=!1}})},y._handleTransmuxComplete=function(u){var m,o="main",S=this.hls,U=u.remuxResult,R=u.chunkMeta,G=this.getCurrentContext(R);if(!G){this.warn("The loading context changed while buffering fragment "+R.sn+" of level "+R.level+". This chunk will not be buffered."),this.resetStartWhenNotLoaded(R.level);return}var j=G.frag,V=G.part,z=G.level,$=U.video,X=U.text,J=U.id3,q=U.initSegment,ee=z.details,ne=this.altAudio?void 0:U.audio;if(!this.fragContextChanged(j)){if(this.state=I.State.PARSING,q){q.tracks&&(this._bufferInitSegment(z,q.tracks,j,R),S.trigger(M.Events.FRAG_PARSING_INIT_SEGMENT,{frag:j,id:o,tracks:q.tracks}));var ae=q.initPTS,ue=q.timescale;(0,F.isFiniteNumber)(ae)&&(this.initPTS[j.cc]=ae,S.trigger(M.Events.INIT_PTS_FOUND,{frag:j,id:o,initPTS:ae,timescale:ue}))}if($&&U.independent!==!1){if(ee){var le=$.startPTS,fe=$.endPTS,ye=$.startDTS,Le=$.endDTS;if(V)V.elementaryStreams[$.type]={startPTS:le,endPTS:fe,startDTS:ye,endDTS:Le};else if($.firstKeyFrame&&$.independent&&R.id===1&&(this.couldBacktrack=!0),$.dropped&&$.independent){var Ee=this.getMainFwdBufferInfo(),ve=(Ee?Ee.end:this.getLoadPosition())+this.config.maxBufferHole,Ae=$.firstKeyFramePTS?$.firstKeyFramePTS:le;if(ve<Ae-this.config.maxBufferHole){this.backtrack(j);return}j.setElementaryStreamInfo($.type,j.start,fe,j.start,Le,!0)}j.setElementaryStreamInfo($.type,le,fe,ye,Le),this.backtrackFragment&&(this.backtrackFragment=j),this.bufferFragmentData($,j,V,R)}}else if(U.independent===!1){this.backtrack(j);return}if(ne){var we=ne.startPTS,be=ne.endPTS,ct=ne.startDTS,Ge=ne.endDTS;V&&(V.elementaryStreams[N.ElementaryStreamTypes.AUDIO]={startPTS:we,endPTS:be,startDTS:ct,endDTS:Ge}),j.setElementaryStreamInfo(N.ElementaryStreamTypes.AUDIO,we,be,ct,Ge),this.bufferFragmentData(ne,j,V,R)}if(ee&&J!==null&&J!==void 0&&(m=J.samples)!==null&&m!==void 0&&m.length){var qe={id:o,frag:j,details:ee,samples:J.samples};S.trigger(M.Events.FRAG_PARSING_METADATA,qe)}if(ee&&X){var Ke={id:o,frag:j,details:ee,samples:X.samples};S.trigger(M.Events.FRAG_PARSING_USERDATA,Ke)}}},y._bufferInitSegment=function(u,m,o,S){var U=this;if(this.state===I.State.PARSING){this.audioOnly=!!m.audio&&!m.video,this.altAudio&&!this.audioOnly&&delete m.audio;var R=m.audio,G=m.video,j=m.audiovideo;if(R){var V=u.audioCodec,z=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(V&&(V.indexOf("mp4a.40.5")!==-1?V="mp4a.40.2":V="mp4a.40.5"),R.metadata.channelCount!==1&&z.indexOf("firefox")===-1&&(V="mp4a.40.5")),z.indexOf("android")!==-1&&R.container!=="audio/mpeg"&&(V="mp4a.40.2",this.log("Android: force audio codec to "+V)),u.audioCodec&&u.audioCodec!==V&&this.log('Swapping manifest audio codec "'+u.audioCodec+'" for "'+V+'"'),R.levelCodec=V,R.id="main",this.log("Init audio buffer, container:"+R.container+", codecs[selected/level/parsed]=["+(V||"")+"/"+(u.audioCodec||"")+"/"+R.codec+"]")}G&&(G.levelCodec=u.videoCodec,G.id="main",this.log("Init video buffer, container:"+G.container+", codecs[level/parsed]=["+(u.videoCodec||"")+"/"+G.codec+"]")),j&&this.log("Init audiovideo buffer, container:"+j.container+", codecs[level/parsed]=["+(u.attrs.CODECS||"")+"/"+j.codec+"]"),this.hls.trigger(M.Events.BUFFER_CODECS,m),Object.keys(m).forEach(function($){var X=m[$],J=X.initSegment;J!=null&&J.byteLength&&U.hls.trigger(M.Events.BUFFER_APPENDING,{type:$,data:J,frag:o,part:null,chunkMeta:S,parent:o.type})}),this.tick()}},y.getMainFwdBufferInfo=function(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,k.PlaylistLevelType.MAIN)},y.backtrack=function(u){this.couldBacktrack=!0,this.backtrackFragment=u,this.resetTransmuxer(),this.flushBufferGap(u),this.fragmentTracker.removeFragment(u),this.fragPrevious=null,this.nextLoadPosition=u.start,this.state=I.State.IDLE},y.checkFragmentChanged=function(){var u=this.media,m=null;if(u&&u.readyState>1&&u.seeking===!1){var o=u.currentTime;if(H.BufferHelper.isBuffered(u,o)?m=this.getAppendedFrag(o):H.BufferHelper.isBuffered(u,o+.1)&&(m=this.getAppendedFrag(o+.1)),m){this.backtrackFragment=null;var S=this.fragPlaying,U=m.level;(!S||m.sn!==S.sn||S.level!==U||m.urlId!==S.urlId)&&(this.fragPlaying=m,this.hls.trigger(M.Events.FRAG_CHANGED,{frag:m}),(!S||S.level!==U)&&this.hls.trigger(M.Events.LEVEL_SWITCHED,{level:U}))}}},d(b,[{key:"nextLevel",get:function(){var u=this.nextBufferedFrag;return u?u.level:-1}},{key:"currentFrag",get:function(){var u=this.media;return u?this.fragPlaying||this.getAppendedFrag(u.currentTime):null}},{key:"currentProgramDateTime",get:function(){var u=this.media;if(u){var m=u.currentTime,o=this.currentFrag;if(o&&(0,F.isFiniteNumber)(m)&&(0,F.isFiniteNumber)(o.programDateTime)){var S=o.programDateTime+(m-o.start)*1e3;return new Date(S)}}return null}},{key:"currentLevel",get:function(){var u=this.currentFrag;return u?u.level:-1}},{key:"nextBufferedFrag",get:function(){var u=this.currentFrag;return u?this.followingBufferedFrag(u):null}},{key:"forceStartLoad",get:function(){return this._forceStartLoad}}]),b}(I.default)},"./src/controller/subtitle-stream-controller.ts":(O,w,f)=>{f.r(w),f.d(w,{SubtitleStreamController:()=>g});var F=f("./src/events.ts"),I=f("./src/utils/buffer-helper.ts"),K=f("./src/controller/fragment-finders.ts"),M=f("./src/utils/discontinuities.ts"),H=f("./src/controller/level-helper.ts"),B=f("./src/controller/fragment-tracker.ts"),k=f("./src/controller/base-stream-controller.ts"),N=f("./src/types/loader.ts"),L=f("./src/types/level.ts");function T(D,p){for(var x=0;x<p.length;x++){var b=p[x];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(D,C(b.key),b)}}function l(D,p,x){return p&&T(D.prototype,p),x&&T(D,x),Object.defineProperty(D,"prototype",{writable:!1}),D}function C(D){var p=A(D,"string");return typeof p=="symbol"?p:String(p)}function A(D,p){if(typeof D!="object"||D===null)return D;var x=D[Symbol.toPrimitive];if(x!==void 0){var b=x.call(D,p||"default");if(typeof b!="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return(p==="string"?String:Number)(D)}function d(D,p){D.prototype=Object.create(p.prototype),D.prototype.constructor=D,v(D,p)}function v(D,p){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(b,y){return b.__proto__=y,b},v(D,p)}var h=500,g=function(D){d(p,D);function p(b,y,_){var u;return u=D.call(this,b,y,_,"[subtitle-stream-controller]")||this,u.levels=[],u.currentTrackId=-1,u.tracksBuffered=[],u.mainDetails=null,u._registerListeners(),u}var x=p.prototype;return x.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},x._registerListeners=function(){var y=this.hls;y.on(F.Events.MEDIA_ATTACHED,this.onMediaAttached,this),y.on(F.Events.MEDIA_DETACHING,this.onMediaDetaching,this),y.on(F.Events.MANIFEST_LOADING,this.onManifestLoading,this),y.on(F.Events.LEVEL_LOADED,this.onLevelLoaded,this),y.on(F.Events.ERROR,this.onError,this),y.on(F.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),y.on(F.Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),y.on(F.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),y.on(F.Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),y.on(F.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),y.on(F.Events.FRAG_BUFFERED,this.onFragBuffered,this)},x._unregisterListeners=function(){var y=this.hls;y.off(F.Events.MEDIA_ATTACHED,this.onMediaAttached,this),y.off(F.Events.MEDIA_DETACHING,this.onMediaDetaching,this),y.off(F.Events.MANIFEST_LOADING,this.onManifestLoading,this),y.off(F.Events.LEVEL_LOADED,this.onLevelLoaded,this),y.off(F.Events.ERROR,this.onError,this),y.off(F.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),y.off(F.Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),y.off(F.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),y.off(F.Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),y.off(F.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),y.off(F.Events.FRAG_BUFFERED,this.onFragBuffered,this)},x.startLoad=function(y){this.stopLoad(),this.state=k.State.IDLE,this.setInterval(h),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=y,this.tick()},x.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()},x.onLevelLoaded=function(y,_){this.mainDetails=_.details},x.onSubtitleFragProcessed=function(y,_){var u=_.frag,m=_.success;if(this.fragPrevious=u,this.state=k.State.IDLE,!!m){var o=this.tracksBuffered[this.currentTrackId];if(o){for(var S,U=u.start,R=0;R<o.length;R++)if(U>=o[R].start&&U<=o[R].end){S=o[R];break}var G=u.start+u.duration;S?S.end=G:(S={start:U,end:G},o.push(S)),this.fragmentTracker.fragBuffered(u)}}},x.onBufferFlushing=function(y,_){var u=_.startOffset,m=_.endOffset;if(u===0&&m!==Number.POSITIVE_INFINITY){var o=this.currentTrackId,S=this.levels;if(!S.length||!S[o]||!S[o].details)return;var U=S[o].details,R=U.targetduration,G=m-R;if(G<=0)return;_.endOffsetSubtitles=Math.max(0,G),this.tracksBuffered.forEach(function(j){for(var V=0;V<j.length;){if(j[V].end<=G){j.shift();continue}else if(j[V].start<G)j[V].start=G;else break;V++}}),this.fragmentTracker.removeFragmentsInRange(u,G,N.PlaylistLevelType.SUBTITLE)}},x.onFragBuffered=function(y,_){if(!this.loadedmetadata&&_.frag.type===N.PlaylistLevelType.MAIN){var u;(u=this.media)!==null&&u!==void 0&&u.buffered.length&&(this.loadedmetadata=!0)}},x.onError=function(y,_){var u=_.frag;!u||u.type!==N.PlaylistLevelType.SUBTITLE||(this.fragCurrent&&this.fragCurrent.abortRequests(),this.state=k.State.IDLE)},x.onSubtitleTracksUpdated=function(y,_){var u=this,m=_.subtitleTracks;this.tracksBuffered=[],this.levels=m.map(function(o){return new L.Level(o)}),this.fragmentTracker.removeAllFragments(),this.fragPrevious=null,this.levels.forEach(function(o){u.tracksBuffered[o.id]=[]}),this.mediaBuffer=null},x.onSubtitleTrackSwitch=function(y,_){if(this.currentTrackId=_.id,!this.levels.length||this.currentTrackId===-1){this.clearInterval();return}var u=this.levels[this.currentTrackId];u!=null&&u.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,u&&this.setInterval(h)},x.onSubtitleTrackLoaded=function(y,_){var u,m=_.details,o=_.id,S=this.currentTrackId,U=this.levels;if(U.length){var R=U[S];if(!(o>=U.length||o!==S||!R)){this.mediaBuffer=this.mediaBufferTimeRanges;var G=0;if(m.live||(u=R.details)!==null&&u!==void 0&&u.live){var j=this.mainDetails;if(m.deltaUpdateFailed||!j)return;var V=j.fragments[0];R.details?(G=this.alignPlaylists(m,R.details),G===0&&V&&(G=V.start,(0,H.addSliding)(m,G))):m.hasProgramDateTime&&j.hasProgramDateTime?((0,M.alignMediaPlaylistByPDT)(m,j),G=m.fragments[0].start):V&&(G=V.start,(0,H.addSliding)(m,G))}if(R.details=m,this.levelLastLoaded=o,!this.startFragRequested&&(this.mainDetails||!m.live)&&this.setStartPosition(R.details,G),this.tick(),m.live&&!this.fragCurrent&&this.media&&this.state===k.State.IDLE){var z=(0,K.findFragmentByPTS)(null,m.fragments,this.media.currentTime,0);z||(this.warn("Subtitle playlist not aligned with playback"),R.details=void 0)}}}},x._handleFragmentLoadComplete=function(y){var _=this,u=y.frag,m=y.payload,o=u.decryptdata,S=this.hls;if(!this.fragContextChanged(u)&&m&&m.byteLength>0&&o&&o.key&&o.iv&&o.method==="AES-128"){var U=performance.now();this.decrypter.decrypt(new Uint8Array(m),o.key.buffer,o.iv.buffer).then(function(R){var G=performance.now();S.trigger(F.Events.FRAG_DECRYPTED,{frag:u,payload:R,stats:{tstart:U,tdecrypt:G}})}).catch(function(R){_.warn(R.name+": "+R.message),_.state=k.State.IDLE})}},x.doTick=function(){if(!this.media){this.state=k.State.IDLE;return}if(this.state===k.State.IDLE){var y=this.currentTrackId,_=this.levels;if(!_.length||!_[y]||!_[y].details)return;var u=_[y].details,m=u.targetduration,o=this.config,S=this.getLoadPosition(),U=I.BufferHelper.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],S-m,o.maxBufferHole),R=U.end,G=U.len,j=this.getFwdBufferInfo(this.media,N.PlaylistLevelType.MAIN),V=this.getMaxBufferLength(j==null?void 0:j.len)+m;if(G>V)return;console.assert(u,"Subtitle track details are defined on idle subtitle stream controller tick");var z=u.fragments,$=z.length,X=u.edge,J=null,q=this.fragPrevious;if(R<X){var ee=o.maxFragLookUpTolerance;J=(0,K.findFragmentByPTS)(q,z,Math.max(z[0].start,R),ee),!J&&q&&q.start<z[0].start&&(J=z[0])}else J=z[$-1];if(!J)return;J=this.mapToInitFragWhenRequired(J),this.fragmentTracker.getState(J)===B.FragmentState.NOT_LOADED&&this.loadFragment(J,u,R)}},x.getMaxBufferLength=function(y){var _=D.prototype.getMaxBufferLength.call(this);return y?Math.max(_,y):_},x.loadFragment=function(y,_,u){this.fragCurrent=y,y.sn==="initSegment"?this._loadInitSegment(y,_):(this.startFragRequested=!0,D.prototype.loadFragment.call(this,y,_,u))},l(p,[{key:"mediaBufferTimeRanges",get:function(){return new P(this.tracksBuffered[this.currentTrackId]||[])}}]),p}(k.default),P=function(p){this.buffered=void 0;var x=function(y,_,u){if(_=_>>>0,_>u-1)throw new DOMException("Failed to execute '"+y+"' on 'TimeRanges': The index provided ("+_+") is greater than the maximum bound ("+u+")");return p[_][y]};this.buffered={get length(){return p.length},end:function(y){return x("end",y,p.length)},start:function(y){return x("start",y,p.length)}}}},"./src/controller/subtitle-track-controller.ts":(O,w,f)=>{f.r(w),f.d(w,{default:()=>A});var F=f("./src/events.ts"),I=f("./src/utils/texttrack-utils.ts"),K=f("./src/controller/base-playlist-controller.ts"),M=f("./src/types/loader.ts");function H(d,v){for(var h=0;h<v.length;h++){var g=v[h];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(d,k(g.key),g)}}function B(d,v,h){return v&&H(d.prototype,v),h&&H(d,h),Object.defineProperty(d,"prototype",{writable:!1}),d}function k(d){var v=N(d,"string");return typeof v=="symbol"?v:String(v)}function N(d,v){if(typeof d!="object"||d===null)return d;var h=d[Symbol.toPrimitive];if(h!==void 0){var g=h.call(d,v||"default");if(typeof g!="object")return g;throw new TypeError("@@toPrimitive must return a primitive value.")}return(v==="string"?String:Number)(d)}function L(d,v){d.prototype=Object.create(v.prototype),d.prototype.constructor=d,T(d,v)}function T(d,v){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,P){return g.__proto__=P,g},T(d,v)}var l=function(d){L(v,d);function v(g){var P;return P=d.call(this,g,"[subtitle-track-controller]")||this,P.media=null,P.tracks=[],P.groupId=null,P.tracksInGroup=[],P.trackId=-1,P.selectDefaultTrack=!0,P.queuedDefaultTrack=-1,P.trackChangeListener=function(){return P.onTextTracksChanged()},P.asyncPollTrackChange=function(){return P.pollTrackChange(0)},P.useTextTrackPolling=!1,P.subtitlePollingInterval=-1,P._subtitleDisplay=!0,P.registerListeners(),P}var h=v.prototype;return h.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.trackChangeListener=this.asyncPollTrackChange=null,d.prototype.destroy.call(this)},h.registerListeners=function(){var P=this.hls;P.on(F.Events.MEDIA_ATTACHED,this.onMediaAttached,this),P.on(F.Events.MEDIA_DETACHING,this.onMediaDetaching,this),P.on(F.Events.MANIFEST_LOADING,this.onManifestLoading,this),P.on(F.Events.MANIFEST_PARSED,this.onManifestParsed,this),P.on(F.Events.LEVEL_LOADING,this.onLevelLoading,this),P.on(F.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),P.on(F.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),P.on(F.Events.ERROR,this.onError,this)},h.unregisterListeners=function(){var P=this.hls;P.off(F.Events.MEDIA_ATTACHED,this.onMediaAttached,this),P.off(F.Events.MEDIA_DETACHING,this.onMediaDetaching,this),P.off(F.Events.MANIFEST_LOADING,this.onManifestLoading,this),P.off(F.Events.MANIFEST_PARSED,this.onManifestParsed,this),P.off(F.Events.LEVEL_LOADING,this.onLevelLoading,this),P.off(F.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),P.off(F.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),P.off(F.Events.ERROR,this.onError,this)},h.onMediaAttached=function(P,D){this.media=D.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))},h.pollTrackChange=function(P){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.trackChangeListener,P)},h.onMediaDetaching=function(){if(this.media){self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId);var P=C(this.media.textTracks);P.forEach(function(D){(0,I.clearCurrentCues)(D)}),this.subtitleTrack=-1,this.media=null}},h.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0},h.onManifestParsed=function(P,D){this.tracks=D.subtitleTracks},h.onSubtitleTrackLoaded=function(P,D){var p=D.id,x=D.details,b=this.trackId,y=this.tracksInGroup[b];if(!y){this.warn("Invalid subtitle track id "+p);return}var _=y.details;y.details=D.details,this.log("subtitle track "+p+" loaded ["+x.startSN+"-"+x.endSN+"]"),p===this.trackId&&(this.retryCount=0,this.playlistLoaded(p,D,_))},h.onLevelLoading=function(P,D){this.switchLevel(D.level)},h.onLevelSwitching=function(P,D){this.switchLevel(D.level)},h.switchLevel=function(P){var D=this.hls.levels[P];if(D!=null&&D.textGroupIds){var p=D.textGroupIds[D.urlId];if(this.groupId!==p){var x=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0,b=this.tracks.filter(function(u){return!p||u.groupId===p});this.tracksInGroup=b;var y=this.findTrackId(x==null?void 0:x.name)||this.findTrackId();this.groupId=p;var _={subtitleTracks:b};this.log("Updating subtitle tracks, "+b.length+' track(s) found in "'+p+'" group-id'),this.hls.trigger(F.Events.SUBTITLE_TRACKS_UPDATED,_),y!==-1&&this.setSubtitleTrack(y,x)}}},h.findTrackId=function(P){for(var D=this.tracksInGroup,p=0;p<D.length;p++){var x=D[p];if((!this.selectDefaultTrack||x.default)&&(!P||P===x.name))return x.id}return-1},h.onError=function(P,D){d.prototype.onError.call(this,P,D),!(D.fatal||!D.context)&&D.context.type===M.PlaylistContextType.SUBTITLE_TRACK&&D.context.id===this.trackId&&D.context.groupId===this.groupId&&this.retryLoadingOrFail(D)},h.loadPlaylist=function(P){d.prototype.loadPlaylist.call(this);var D=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(D)){var p=D.id,x=D.groupId,b=D.url;if(P)try{b=P.addDirectives(b)}catch(y){this.warn("Could not construct new URL with HLS Delivery Directives: "+y)}this.log("Loading subtitle playlist for id "+p),this.hls.trigger(F.Events.SUBTITLE_TRACK_LOADING,{url:b,id:p,groupId:x,deliveryDirectives:P||null})}},h.toggleTrackModes=function(P){var D=this,p=this.media,x=this.trackId;if(p){var b=C(p.textTracks),y=b.filter(function(m){return m.groupId===D.groupId});if(P===-1)[].slice.call(b).forEach(function(m){m.mode="disabled"});else{var _=y[x];_&&(_.mode="disabled")}var u=y[P];u&&(u.mode=this.subtitleDisplay?"showing":"hidden")}},h.setSubtitleTrack=function(P,D){var p,x=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=P;return}if(this.trackId!==P&&this.toggleTrackModes(P),!(this.trackId===P&&(P===-1||(p=x[P])!==null&&p!==void 0&&p.details)||P<-1||P>=x.length)){this.clearTimer();var b=x[P];if(this.log("Switching to subtitle track "+P),this.trackId=P,b){var y=b.id,_=b.groupId,u=_===void 0?"":_,m=b.name,o=b.type,S=b.url;this.hls.trigger(F.Events.SUBTITLE_TRACK_SWITCH,{id:y,groupId:u,name:m,type:o,url:S});var U=this.switchParams(b.url,D==null?void 0:D.details);this.loadPlaylist(U)}else this.hls.trigger(F.Events.SUBTITLE_TRACK_SWITCH,{id:P})}},h.onTextTracksChanged=function(){if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!(!this.media||!this.hls.config.renderTextTracksNatively)){for(var P=-1,D=C(this.media.textTracks),p=0;p<D.length;p++)if(D[p].mode==="hidden")P=p;else if(D[p].mode==="showing"){P=p;break}this.subtitleTrack!==P&&(this.subtitleTrack=P)}},B(v,[{key:"subtitleDisplay",get:function(){return this._subtitleDisplay},set:function(P){this._subtitleDisplay=P,this.trackId>-1&&this.toggleTrackModes(this.trackId)}},{key:"subtitleTracks",get:function(){return this.tracksInGroup}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(P){this.selectDefaultTrack=!1;var D=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;this.setSubtitleTrack(P,D)}}]),v}(K.default);function C(d){for(var v=[],h=0;h<d.length;h++){var g=d[h];g.kind==="subtitles"&&g.label&&v.push(d[h])}return v}const A=l},"./src/controller/timeline-controller.ts":(O,w,f)=>{f.r(w),f.d(w,{TimelineController:()=>l});var F=f("./src/polyfills/number.ts"),I=f("./src/events.ts"),K=f("./src/utils/cea-608-parser.ts"),M=f("./src/utils/output-filter.ts"),H=f("./src/utils/webvtt-parser.ts"),B=f("./src/utils/texttrack-utils.ts"),k=f("./src/utils/imsc1-ttml-parser.ts"),N=f("./src/utils/mp4-tools.ts"),L=f("./src/types/loader.ts"),T=f("./src/utils/logger.ts"),l=function(){function v(g){if(this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.timescale=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=d(),this.captionsProperties=void 0,this.hls=g,this.config=g.config,this.Cues=g.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},this.config.enableCEA708Captions){var P=new M.default(this,"textTrack1"),D=new M.default(this,"textTrack2"),p=new M.default(this,"textTrack3"),x=new M.default(this,"textTrack4");this.cea608Parser1=new K.default(1,P,D),this.cea608Parser2=new K.default(3,p,x)}g.on(I.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),g.on(I.Events.MEDIA_DETACHING,this.onMediaDetaching,this),g.on(I.Events.MANIFEST_LOADING,this.onManifestLoading,this),g.on(I.Events.MANIFEST_LOADED,this.onManifestLoaded,this),g.on(I.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),g.on(I.Events.FRAG_LOADING,this.onFragLoading,this),g.on(I.Events.FRAG_LOADED,this.onFragLoaded,this),g.on(I.Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),g.on(I.Events.FRAG_DECRYPTED,this.onFragDecrypted,this),g.on(I.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),g.on(I.Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),g.on(I.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)}var h=v.prototype;return h.destroy=function(){var P=this.hls;P.off(I.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),P.off(I.Events.MEDIA_DETACHING,this.onMediaDetaching,this),P.off(I.Events.MANIFEST_LOADING,this.onManifestLoading,this),P.off(I.Events.MANIFEST_LOADED,this.onManifestLoaded,this),P.off(I.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),P.off(I.Events.FRAG_LOADING,this.onFragLoading,this),P.off(I.Events.FRAG_LOADED,this.onFragLoaded,this),P.off(I.Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),P.off(I.Events.FRAG_DECRYPTED,this.onFragDecrypted,this),P.off(I.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),P.off(I.Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),P.off(I.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.cea608Parser1=this.cea608Parser2=null},h.addCues=function(P,D,p,x,b){for(var y=!1,_=b.length;_--;){var u=b[_],m=A(u[0],u[1],D,p);if(m>=0&&(u[0]=Math.min(u[0],D),u[1]=Math.max(u[1],p),y=!0,m/(p-D)>.5))return}if(y||b.push([D,p]),this.config.renderTextTracksNatively){var o=this.captionsTracks[P];this.Cues.newCue(o,D,p,x)}else{var S=this.Cues.newCue(null,D,p,x);this.hls.trigger(I.Events.CUES_PARSED,{type:"captions",cues:S,track:P})}},h.onInitPtsFound=function(P,D){var p=this,x=D.frag,b=D.id,y=D.initPTS,_=D.timescale,u=this.unparsedVttFrags;b==="main"&&(this.initPTS[x.cc]=y,this.timescale[x.cc]=_),u.length&&(this.unparsedVttFrags=[],u.forEach(function(m){p.onFragLoaded(I.Events.FRAG_LOADED,m)}))},h.getExistingTrack=function(P){var D=this.media;if(D)for(var p=0;p<D.textTracks.length;p++){var x=D.textTracks[p];if(x[P])return x}return null},h.createCaptionsTrack=function(P){this.config.renderTextTracksNatively?this.createNativeTrack(P):this.createNonNativeTrack(P)},h.createNativeTrack=function(P){if(!this.captionsTracks[P]){var D=this.captionsProperties,p=this.captionsTracks,x=this.media,b=D[P],y=b.label,_=b.languageCode,u=this.getExistingTrack(P);if(u)p[P]=u,(0,B.clearCurrentCues)(p[P]),(0,B.sendAddTrackEvent)(p[P],x);else{var m=this.createTextTrack("captions",y,_);m&&(m[P]=!0,p[P]=m)}}},h.createNonNativeTrack=function(P){if(!this.nonNativeCaptionsTracks[P]){var D=this.captionsProperties[P];if(D){var p=D.label,x={_id:P,label:p,kind:"captions",default:D.media?!!D.media.default:!1,closedCaptions:D.media};this.nonNativeCaptionsTracks[P]=x,this.hls.trigger(I.Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[x]})}}},h.createTextTrack=function(P,D,p){var x=this.media;if(x)return x.addTextTrack(P,D,p)},h.onMediaAttaching=function(P,D){this.media=D.media,this._cleanTracks()},h.onMediaDetaching=function(){var P=this.captionsTracks;Object.keys(P).forEach(function(D){(0,B.clearCurrentCues)(P[D]),delete P[D]}),this.nonNativeCaptionsTracks={}},h.onManifestLoading=function(){this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=d(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.timescale=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())},h._cleanTracks=function(){var P=this.media;if(P){var D=P.textTracks;if(D)for(var p=0;p<D.length;p++)(0,B.clearCurrentCues)(D[p])}},h.onSubtitleTracksUpdated=function(P,D){var p=this;this.textTracks=[];var x=D.subtitleTracks||[],b=x.some(function(m){return m.textCodec===k.IMSC1_CODEC});if(this.config.enableWebVTT||b&&this.config.enableIMSC1){var y=this.tracks&&x&&this.tracks.length===x.length;if(this.tracks=x||[],this.config.renderTextTracksNatively){var _=this.media?this.media.textTracks:[];this.tracks.forEach(function(m,o){var S;if(o<_.length){for(var U=null,R=0;R<_.length;R++)if(C(_[R],m)){U=_[R];break}U&&(S=U)}if(S)(0,B.clearCurrentCues)(S);else{var G=p._captionsOrSubtitlesFromCharacteristics(m);S=p.createTextTrack(G,m.name,m.lang),S&&(S.mode="disabled")}S&&(S.groupId=m.groupId,p.textTracks.push(S))})}else if(!y&&this.tracks&&this.tracks.length){var u=this.tracks.map(function(m){return{label:m.name,kind:m.type.toLowerCase(),default:m.default,subtitleTrack:m}});this.hls.trigger(I.Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:u})}}},h._captionsOrSubtitlesFromCharacteristics=function(P){var D;if((D=P.attrs)!==null&&D!==void 0&&D.CHARACTERISTICS){var p=/transcribes-spoken-dialog/gi.test(P.attrs.CHARACTERISTICS),x=/describes-music-and-sound/gi.test(P.attrs.CHARACTERISTICS);if(p&&x)return"captions"}return"subtitles"},h.onManifestLoaded=function(P,D){var p=this;this.config.enableCEA708Captions&&D.captions&&D.captions.forEach(function(x){var b=/(?:CC|SERVICE)([1-4])/.exec(x.instreamId);if(b){var y="textTrack"+b[1],_=p.captionsProperties[y];_&&(_.label=x.name,x.lang&&(_.languageCode=x.lang),_.media=x)}})},h.closedCaptionsForLevel=function(P){var D=this.hls.levels[P.level];return D==null?void 0:D.attrs["CLOSED-CAPTIONS"]},h.onFragLoading=function(P,D){var p=this.cea608Parser1,x=this.cea608Parser2,b=this.lastSn,y=this.lastPartIndex;if(!(!this.enabled||!(p&&x))&&D.frag.type===L.PlaylistLevelType.MAIN){var _,u,m=D.frag.sn,o=(_=D==null||(u=D.part)===null||u===void 0?void 0:u.index)!=null?_:-1;m===b+1||m===b&&o===y+1||(p.reset(),x.reset()),this.lastSn=m,this.lastPartIndex=o}},h.onFragLoaded=function(P,D){var p=D.frag,x=D.payload,b=this.initPTS,y=this.unparsedVttFrags;if(p.type===L.PlaylistLevelType.SUBTITLE)if(x.byteLength){if(!(0,F.isFiniteNumber)(b[p.cc])){y.push(D),b.length&&this.hls.trigger(I.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:p,error:new Error("Missing initial subtitle PTS")});return}var _=p.decryptdata,u="stats"in D;if(_==null||!_.encrypted||u){var m=this.tracks[p.level],o=this.vttCCs;o[p.cc]||(o[p.cc]={start:p.start,prevCC:this.prevCC,new:!0},this.prevCC=p.cc),m&&m.textCodec===k.IMSC1_CODEC?this._parseIMSC1(p,x):this._parseVTTs(p,x,o)}}else this.hls.trigger(I.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:p,error:new Error("Empty subtitle payload")})},h._parseIMSC1=function(P,D){var p=this,x=this.hls;(0,k.parseIMSC1)(D,this.initPTS[P.cc],this.timescale[P.cc],function(b){p._appendCues(b,P.level),x.trigger(I.Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:P})},function(b){T.logger.log("Failed to parse IMSC1: "+b),x.trigger(I.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:P,error:b})})},h._parseVTTs=function(P,D,p){var x,b=this,y=this.hls,_=(x=P.initSegment)!==null&&x!==void 0&&x.data?(0,N.appendUint8Array)(P.initSegment.data,new Uint8Array(D)):D;(0,H.parseWebVTT)(_,this.initPTS[P.cc],this.timescale[P.cc],p,P.cc,P.start,function(u){b._appendCues(u,P.level),y.trigger(I.Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:P})},function(u){b._fallbackToIMSC1(P,D),T.logger.log("Failed to parse VTT cue: "+u),y.trigger(I.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:P,error:u})})},h._fallbackToIMSC1=function(P,D){var p=this,x=this.tracks[P.level];x.textCodec||(0,k.parseIMSC1)(D,this.initPTS[P.cc],this.timescale[P.cc],function(){x.textCodec=k.IMSC1_CODEC,p._parseIMSC1(P,D)},function(){x.textCodec="wvtt"})},h._appendCues=function(P,D){var p=this.hls;if(this.config.renderTextTracksNatively){var x=this.textTracks[D];if(!x||x.mode==="disabled")return;P.forEach(function(_){return(0,B.addCueToTrack)(x,_)})}else{var b=this.tracks[D];if(!b)return;var y=b.default?"default":"subtitles"+D;p.trigger(I.Events.CUES_PARSED,{type:"subtitles",cues:P,track:y})}},h.onFragDecrypted=function(P,D){var p=D.frag;if(p.type===L.PlaylistLevelType.SUBTITLE){if(!(0,F.isFiniteNumber)(this.initPTS[p.cc])){this.unparsedVttFrags.push(D);return}this.onFragLoaded(I.Events.FRAG_LOADED,D)}},h.onSubtitleTracksCleared=function(){this.tracks=[],this.captionsTracks={}},h.onFragParsingUserdata=function(P,D){var p=this.cea608Parser1,x=this.cea608Parser2;if(!(!this.enabled||!(p&&x))){var b=D.frag,y=D.samples;if(!(b.type===L.PlaylistLevelType.MAIN&&this.closedCaptionsForLevel(b)==="NONE"))for(var _=0;_<y.length;_++){var u=y[_].bytes;if(u){var m=this.extractCea608Data(u);p.addData(y[_].pts,m[0]),x.addData(y[_].pts,m[1])}}}},h.onBufferFlushing=function(P,D){var p=D.startOffset,x=D.endOffset,b=D.endOffsetSubtitles,y=D.type,_=this.media;if(!(!_||_.currentTime<x)){if(!y||y==="video"){var u=this.captionsTracks;Object.keys(u).forEach(function(o){return(0,B.removeCuesInRange)(u[o],p,x)})}if(this.config.renderTextTracksNatively&&p===0&&b!==void 0){var m=this.textTracks;Object.keys(m).forEach(function(o){return(0,B.removeCuesInRange)(m[o],p,b)})}}},h.extractCea608Data=function(P){for(var D=[[],[]],p=P[0]&31,x=2,b=0;b<p;b++){var y=P[x++],_=127&P[x++],u=127&P[x++];if(!(_===0&&u===0)){var m=(4&y)!==0;if(m){var o=3&y;(o===0||o===1)&&(D[o].push(_),D[o].push(u))}}}return D},v}();function C(v,h){return v&&v.label===h.name&&!(v.textTrack1||v.textTrack2)}function A(v,h,g,P){return Math.min(h,P)-Math.max(v,g)}function d(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}},"./src/crypt/aes-crypto.ts":(O,w,f)=>{f.r(w),f.d(w,{default:()=>F});var F=function(){function I(M,H){this.subtle=void 0,this.aesIV=void 0,this.subtle=M,this.aesIV=H}var K=I.prototype;return K.decrypt=function(H,B){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},B,H)},I}()},"./src/crypt/aes-decryptor.ts":(O,w,f)=>{f.r(w),f.d(w,{default:()=>K,removePadding:()=>I});var F=f("./src/utils/typed-array.ts");function I(M){var H=M.byteLength,B=H&&new DataView(M.buffer).getUint8(H-1);return B?(0,F.sliceUint8)(M,0,H-B):M}var K=function(){function M(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}var H=M.prototype;return H.uint8ArrayToUint32Array_=function(k){for(var N=new DataView(k),L=new Uint32Array(4),T=0;T<4;T++)L[T]=N.getUint32(T*4);return L},H.initTable=function(){var k=this.sBox,N=this.invSBox,L=this.subMix,T=L[0],l=L[1],C=L[2],A=L[3],d=this.invSubMix,v=d[0],h=d[1],g=d[2],P=d[3],D=new Uint32Array(256),p=0,x=0,b=0;for(b=0;b<256;b++)b<128?D[b]=b<<1:D[b]=b<<1^283;for(b=0;b<256;b++){var y=x^x<<1^x<<2^x<<3^x<<4;y=y>>>8^y&255^99,k[p]=y,N[y]=p;var _=D[p],u=D[_],m=D[u],o=D[y]*257^y*16843008;T[p]=o<<24|o>>>8,l[p]=o<<16|o>>>16,C[p]=o<<8|o>>>24,A[p]=o,o=m*16843009^u*65537^_*257^p*16843008,v[y]=o<<24|o>>>8,h[y]=o<<16|o>>>16,g[y]=o<<8|o>>>24,P[y]=o,p?(p=_^D[D[D[m^_]]],x^=D[D[x]]):p=x=1}},H.expandKey=function(k){for(var N=this.uint8ArrayToUint32Array_(k),L=!0,T=0;T<N.length&&L;)L=N[T]===this.key[T],T++;if(!L){this.key=N;var l=this.keySize=N.length;if(l!==4&&l!==6&&l!==8)throw new Error("Invalid aes key size="+l);var C=this.ksRows=(l+6+1)*4,A,d,v=this.keySchedule=new Uint32Array(C),h=this.invKeySchedule=new Uint32Array(C),g=this.sBox,P=this.rcon,D=this.invSubMix,p=D[0],x=D[1],b=D[2],y=D[3],_,u;for(A=0;A<C;A++){if(A<l){_=v[A]=N[A];continue}u=_,A%l===0?(u=u<<8|u>>>24,u=g[u>>>24]<<24|g[u>>>16&255]<<16|g[u>>>8&255]<<8|g[u&255],u^=P[A/l|0]<<24):l>6&&A%l===4&&(u=g[u>>>24]<<24|g[u>>>16&255]<<16|g[u>>>8&255]<<8|g[u&255]),v[A]=_=(v[A-l]^u)>>>0}for(d=0;d<C;d++)A=C-d,d&3?u=v[A]:u=v[A-4],d<4||A<=4?h[d]=u:h[d]=p[g[u>>>24]]^x[g[u>>>16&255]]^b[g[u>>>8&255]]^y[g[u&255]],h[d]=h[d]>>>0}},H.networkToHostOrderSwap=function(k){return k<<24|(k&65280)<<8|(k&16711680)>>8|k>>>24},H.decrypt=function(k,N,L){for(var T=this.keySize+6,l=this.invKeySchedule,C=this.invSBox,A=this.invSubMix,d=A[0],v=A[1],h=A[2],g=A[3],P=this.uint8ArrayToUint32Array_(L),D=P[0],p=P[1],x=P[2],b=P[3],y=new Int32Array(k),_=new Int32Array(y.length),u,m,o,S,U,R,G,j,V,z,$,X,J,q,ee=this.networkToHostOrderSwap;N<y.length;){for(V=ee(y[N]),z=ee(y[N+1]),$=ee(y[N+2]),X=ee(y[N+3]),U=V^l[0],R=X^l[1],G=$^l[2],j=z^l[3],J=4,q=1;q<T;q++)u=d[U>>>24]^v[R>>16&255]^h[G>>8&255]^g[j&255]^l[J],m=d[R>>>24]^v[G>>16&255]^h[j>>8&255]^g[U&255]^l[J+1],o=d[G>>>24]^v[j>>16&255]^h[U>>8&255]^g[R&255]^l[J+2],S=d[j>>>24]^v[U>>16&255]^h[R>>8&255]^g[G&255]^l[J+3],U=u,R=m,G=o,j=S,J=J+4;u=C[U>>>24]<<24^C[R>>16&255]<<16^C[G>>8&255]<<8^C[j&255]^l[J],m=C[R>>>24]<<24^C[G>>16&255]<<16^C[j>>8&255]<<8^C[U&255]^l[J+1],o=C[G>>>24]<<24^C[j>>16&255]<<16^C[U>>8&255]<<8^C[R&255]^l[J+2],S=C[j>>>24]<<24^C[U>>16&255]<<16^C[R>>8&255]<<8^C[G&255]^l[J+3],_[N]=ee(u^D),_[N+1]=ee(S^p),_[N+2]=ee(o^x),_[N+3]=ee(m^b),D=V,p=z,x=$,b=X,N=N+4}return _.buffer},M}()},"./src/crypt/decrypter.ts":(O,w,f)=>{f.r(w),f.d(w,{default:()=>N});var F=f("./src/crypt/aes-crypto.ts"),I=f("./src/crypt/fast-aes-key.ts"),K=f("./src/crypt/aes-decryptor.ts"),M=f("./src/utils/logger.ts"),H=f("./src/utils/mp4-tools.ts"),B=f("./src/utils/typed-array.ts"),k=16,N=function(){function L(l,C){var A=C===void 0?{}:C,d=A.removePKCS7Padding,v=d===void 0?!0:d;if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=l.enableSoftwareAES,this.removePKCS7Padding=v,v)try{var h=self.crypto;h&&(this.subtle=h.subtle||h.webkitSubtle)}catch{}this.subtle===null&&(this.useSoftware=!0)}var T=L.prototype;return T.destroy=function(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null},T.isSync=function(){return this.useSoftware},T.flush=function(){var C=this.currentResult,A=this.remainderData;if(!C||A)return this.reset(),null;var d=new Uint8Array(C);return this.reset(),this.removePKCS7Padding?(0,K.removePadding)(d):d},T.reset=function(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)},T.decrypt=function(C,A,d){var v=this;return this.useSoftware?new Promise(function(h,g){v.softwareDecrypt(new Uint8Array(C),A,d);var P=v.flush();P?h(P.buffer):g(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(C),A,d)},T.softwareDecrypt=function(C,A,d){var v=this.currentIV,h=this.currentResult,g=this.remainderData;this.logOnce("JS AES decrypt"),g&&(C=(0,H.appendUint8Array)(g,C),this.remainderData=null);var P=this.getValidChunk(C);if(!P.length)return null;v&&(d=v);var D=this.softwareDecrypter;D||(D=this.softwareDecrypter=new K.default),D.expandKey(A);var p=h;return this.currentResult=D.decrypt(P.buffer,0,d),this.currentIV=(0,B.sliceUint8)(P,-16).buffer,p||null},T.webCryptoDecrypt=function(C,A,d){var v=this,h=this.subtle;return(this.key!==A||!this.fastAesKey)&&(this.key=A,this.fastAesKey=new I.default(h,A)),this.fastAesKey.expandKey().then(function(g){if(!h)return Promise.reject(new Error("web crypto not initialized"));v.logOnce("WebCrypto AES decrypt");var P=new F.default(h,new Uint8Array(d));return P.decrypt(C.buffer,g)}).catch(function(g){return M.logger.warn("[decrypter]: WebCrypto Error, disable WebCrypto API, "+g.name+": "+g.message),v.onWebCryptoError(C,A,d)})},T.onWebCryptoError=function(C,A,d){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(C,A,d);var v=this.flush();if(v)return v.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")},T.getValidChunk=function(C){var A=C,d=C.length-C.length%k;return d!==C.length&&(A=(0,B.sliceUint8)(C,0,d),this.remainderData=(0,B.sliceUint8)(C,d)),A},T.logOnce=function(C){this.logEnabled&&(M.logger.log("[decrypter]: "+C),this.logEnabled=!1)},L}()},"./src/crypt/fast-aes-key.ts":(O,w,f)=>{f.r(w),f.d(w,{default:()=>F});var F=function(){function I(M,H){this.subtle=void 0,this.key=void 0,this.subtle=M,this.key=H}var K=I.prototype;return K.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},I}()},"./src/demux/aacdemuxer.ts":(O,w,f)=>{f.r(w),f.d(w,{default:()=>N});var F=f("./src/demux/base-audio-demuxer.ts"),I=f("./src/demux/adts.ts"),K=f("./src/utils/logger.ts"),M=f("./src/demux/id3.ts");function H(L,T){L.prototype=Object.create(T.prototype),L.prototype.constructor=L,B(L,T)}function B(L,T){return B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(C,A){return C.__proto__=A,C},B(L,T)}var k=function(L){H(T,L);function T(C,A){var d;return d=L.call(this)||this,d.observer=void 0,d.config=void 0,d.observer=C,d.config=A,d}var l=T.prototype;return l.resetInitSegment=function(A,d,v,h){L.prototype.resetInitSegment.call(this,A,d,v,h),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:d,duration:h,inputTimeScale:9e4,dropped:0}},T.probe=function(A){if(!A)return!1;for(var d=M.getID3Data(A,0)||[],v=d.length,h=A.length;v<h;v++)if(I.probe(A,v))return K.logger.log("ADTS sync word found !"),!0;return!1},l.canParse=function(A,d){return I.canParse(A,d)},l.appendFrame=function(A,d,v){I.initTrackConfig(A,this.observer,d,v,A.manifestCodec);var h=I.appendFrame(A,d,v,this.basePTS,this.frameIndex);if(h&&h.missing===0)return h},T}(F.default);const N=k},"./src/demux/adts.ts":(O,w,f)=>{f.r(w),f.d(w,{appendFrame:()=>v,canGetFrameLength:()=>N,canParse:()=>T,getAudioConfig:()=>M,getFrameDuration:()=>A,getFullFrameLength:()=>k,getHeaderLength:()=>B,initTrackConfig:()=>C,isHeader:()=>L,isHeaderPattern:()=>H,parseFrameHeader:()=>d,probe:()=>l});var F=f("./src/utils/logger.ts"),I=f("./src/errors.ts"),K=f("./src/events.ts");function M(h,g,P,D){var p,x,b,y,_=navigator.userAgent.toLowerCase(),u=D,m=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];p=((g[P+2]&192)>>>6)+1;var o=(g[P+2]&60)>>>2;if(o>m.length-1){h.trigger(K.Events.ERROR,{type:I.ErrorTypes.MEDIA_ERROR,details:I.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+o});return}return b=(g[P+2]&1)<<2,b|=(g[P+3]&192)>>>6,F.logger.log("manifest codec:"+D+", ADTS type:"+p+", samplingIndex:"+o),/firefox/i.test(_)?o>=6?(p=5,y=new Array(4),x=o-3):(p=2,y=new Array(2),x=o):_.indexOf("android")!==-1?(p=2,y=new Array(2),x=o):(p=5,y=new Array(4),D&&(D.indexOf("mp4a.40.29")!==-1||D.indexOf("mp4a.40.5")!==-1)||!D&&o>=6?x=o-3:((D&&D.indexOf("mp4a.40.2")!==-1&&(o>=6&&b===1||/vivaldi/i.test(_))||!D&&b===1)&&(p=2,y=new Array(2)),x=o)),y[0]=p<<3,y[0]|=(o&14)>>1,y[1]|=(o&1)<<7,y[1]|=b<<3,p===5&&(y[1]|=(x&14)>>1,y[2]=(x&1)<<7,y[2]|=8,y[3]=0),{config:y,samplerate:m[o],channelCount:b,codec:"mp4a.40."+p,manifestCodec:u}}function H(h,g){return h[g]===255&&(h[g+1]&246)===240}function B(h,g){return h[g+1]&1?7:9}function k(h,g){return(h[g+3]&3)<<11|h[g+4]<<3|(h[g+5]&224)>>>5}function N(h,g){return g+5<h.length}function L(h,g){return g+1<h.length&&H(h,g)}function T(h,g){return N(h,g)&&H(h,g)&&k(h,g)<=h.length-g}function l(h,g){if(L(h,g)){var P=B(h,g);if(g+P>=h.length)return!1;var D=k(h,g);if(D<=P)return!1;var p=g+D;return p===h.length||L(h,p)}return!1}function C(h,g,P,D,p){if(!h.samplerate){var x=M(g,P,D,p);if(!x)return;h.config=x.config,h.samplerate=x.samplerate,h.channelCount=x.channelCount,h.codec=x.codec,h.manifestCodec=x.manifestCodec,F.logger.log("parsed codec:"+h.codec+", rate:"+x.samplerate+", channels:"+x.channelCount)}}function A(h){return 9216e4/h}function d(h,g){var P=B(h,g);if(g+P<=h.length){var D=k(h,g)-P;if(D>0)return{headerLength:P,frameLength:D}}}function v(h,g,P,D,p){var x=A(h.samplerate),b=D+p*x,y=d(g,P),_;if(y){var u=y.frameLength,m=y.headerLength,o=m+u,S=Math.max(0,P+o-g.length);S?(_=new Uint8Array(o-m),_.set(g.subarray(P+m,g.length),0)):_=g.subarray(P+m,P+o);var U={unit:_,pts:b};return S||h.samples.push(U),{sample:U,length:o,missing:S}}var R=g.length-P;_=new Uint8Array(R),_.set(g.subarray(P,g.length),0);var G={unit:_,pts:b};return{sample:G,length:R,missing:-1}}},"./src/demux/base-audio-demuxer.ts":(O,w,f)=>{f.r(w),f.d(w,{default:()=>L,initPTSFn:()=>N});var F=f("./src/polyfills/number.ts"),I=f("./src/demux/id3.ts"),K=f("./src/types/demuxer.ts"),M=f("./src/demux/dummy-demuxed-track.ts"),H=f("./src/utils/mp4-tools.ts"),B=f("./src/utils/typed-array.ts"),k=function(){function T(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}var l=T.prototype;return l.resetInitSegment=function(A,d,v,h){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}},l.resetTimeStamp=function(A){this.initPTS=A,this.resetContiguity()},l.resetContiguity=function(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0},l.canParse=function(A,d){return!1},l.appendFrame=function(A,d,v){},l.demux=function(A,d){this.cachedData&&(A=(0,H.appendUint8Array)(this.cachedData,A),this.cachedData=null);var v=I.getID3Data(A,0),h=v?v.length:0,g,P=this._audioTrack,D=this._id3Track,p=v?I.getTimeStamp(v):void 0,x=A.length;for((this.basePTS===null||this.frameIndex===0&&(0,F.isFiniteNumber)(p))&&(this.basePTS=N(p,d,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),v&&v.length>0&&D.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:v,type:K.MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY});h<x;){if(this.canParse(A,h)){var b=this.appendFrame(P,A,h);b?(this.frameIndex++,this.lastPTS=b.sample.pts,h+=b.length,g=h):h=x}else I.canParse(A,h)?(v=I.getID3Data(A,h),D.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:v,type:K.MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY}),h+=v.length,g=h):h++;if(h===x&&g!==x){var y=(0,B.sliceUint8)(A,g);this.cachedData?this.cachedData=(0,H.appendUint8Array)(this.cachedData,y):this.cachedData=y}}return{audioTrack:P,videoTrack:(0,M.dummyTrack)(),id3Track:D,textTrack:(0,M.dummyTrack)()}},l.demuxSampleAes=function(A,d,v){return Promise.reject(new Error("["+this+"] This demuxer does not support Sample-AES decryption"))},l.flush=function(A){var d=this.cachedData;return d&&(this.cachedData=null,this.demux(d,0)),{audioTrack:this._audioTrack,videoTrack:(0,M.dummyTrack)(),id3Track:this._id3Track,textTrack:(0,M.dummyTrack)()}},l.destroy=function(){},T}(),N=function(l,C,A){return(0,F.isFiniteNumber)(l)?l*90:C*9e4+(A||0)};const L=k},"./src/demux/chunk-cache.ts":(O,w,f)=>{f.r(w),f.d(w,{default:()=>F});var F=function(){function K(){this.chunks=[],this.dataLength=0}var M=K.prototype;return M.push=function(B){this.chunks.push(B),this.dataLength+=B.length},M.flush=function(){var B=this.chunks,k=this.dataLength,N;if(B.length)B.length===1?N=B[0]:N=I(B,k);else return new Uint8Array(0);return this.reset(),N},M.reset=function(){this.chunks.length=0,this.dataLength=0},K}();function I(K,M){for(var H=new Uint8Array(M),B=0,k=0;k<K.length;k++){var N=K[k];H.set(N,B),B+=N.length}return H}},"./src/demux/dummy-demuxed-track.ts":(O,w,f)=>{f.r(w),f.d(w,{dummyTrack:()=>F});function F(I,K){return I===void 0&&(I=""),K===void 0&&(K=9e4),{type:I,id:-1,pid:-1,inputTimeScale:K,sequenceNumber:-1,samples:[],dropped:0}}},"./src/demux/exp-golomb.ts":(O,w,f)=>{f.r(w),f.d(w,{default:()=>K});var F=f("./src/utils/logger.ts"),I=function(){function M(B){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=B,this.bytesAvailable=B.byteLength,this.word=0,this.bitsAvailable=0}var H=M.prototype;return H.loadWord=function(){var k=this.data,N=this.bytesAvailable,L=k.byteLength-N,T=new Uint8Array(4),l=Math.min(4,N);if(l===0)throw new Error("no bytes available");T.set(k.subarray(L,L+l)),this.word=new DataView(T.buffer).getUint32(0),this.bitsAvailable=l*8,this.bytesAvailable-=l},H.skipBits=function(k){var N;k=Math.min(k,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>k?(this.word<<=k,this.bitsAvailable-=k):(k-=this.bitsAvailable,N=k>>3,k-=N<<3,this.bytesAvailable-=N,this.loadWord(),this.word<<=k,this.bitsAvailable-=k)},H.readBits=function(k){var N=Math.min(this.bitsAvailable,k),L=this.word>>>32-N;if(k>32&&F.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=N,this.bitsAvailable>0)this.word<<=N;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return N=k-N,N>0&&this.bitsAvailable?L<<N|this.readBits(N):L},H.skipLZ=function(){var k;for(k=0;k<this.bitsAvailable;++k)if(this.word&2147483648>>>k)return this.word<<=k,this.bitsAvailable-=k,k;return this.loadWord(),k+this.skipLZ()},H.skipUEG=function(){this.skipBits(1+this.skipLZ())},H.skipEG=function(){this.skipBits(1+this.skipLZ())},H.readUEG=function(){var k=this.skipLZ();return this.readBits(k+1)-1},H.readEG=function(){var k=this.readUEG();return 1&k?1+k>>>1:-1*(k>>>1)},H.readBoolean=function(){return this.readBits(1)===1},H.readUByte=function(){return this.readBits(8)},H.readUShort=function(){return this.readBits(16)},H.readUInt=function(){return this.readBits(32)},H.skipScalingList=function(k){for(var N=8,L=8,T,l=0;l<k;l++)L!==0&&(T=this.readEG(),L=(N+T+256)%256),N=L===0?N:L},H.readSPS=function(){var k=0,N=0,L=0,T=0,l,C,A,d=this.readUByte.bind(this),v=this.readBits.bind(this),h=this.readUEG.bind(this),g=this.readBoolean.bind(this),P=this.skipBits.bind(this),D=this.skipEG.bind(this),p=this.skipUEG.bind(this),x=this.skipScalingList.bind(this);d();var b=d();if(v(5),P(3),d(),p(),b===100||b===110||b===122||b===244||b===44||b===83||b===86||b===118||b===128){var y=h();if(y===3&&P(1),p(),p(),P(1),g())for(C=y!==3?8:12,A=0;A<C;A++)g()&&(A<6?x(16):x(64))}p();var _=h();if(_===0)h();else if(_===1)for(P(1),D(),D(),l=h(),A=0;A<l;A++)D();p(),P(1);var u=h(),m=h(),o=v(1);o===0&&P(1),P(1),g()&&(k=h(),N=h(),L=h(),T=h());var S=[1,1];if(g()&&g()){var U=d();switch(U){case 1:S=[1,1];break;case 2:S=[12,11];break;case 3:S=[10,11];break;case 4:S=[16,11];break;case 5:S=[40,33];break;case 6:S=[24,11];break;case 7:S=[20,11];break;case 8:S=[32,11];break;case 9:S=[80,33];break;case 10:S=[18,11];break;case 11:S=[15,11];break;case 12:S=[64,33];break;case 13:S=[160,99];break;case 14:S=[4,3];break;case 15:S=[3,2];break;case 16:S=[2,1];break;case 255:{S=[d()<<8|d(),d()<<8|d()];break}}}return{width:Math.ceil((u+1)*16-k*2-N*2),height:(2-o)*(m+1)*16-(o?2:4)*(L+T),pixelRatio:S}},H.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},M}();const K=I},"./src/demux/id3.ts":(O,w,f)=>{f.r(w),f.d(w,{canParse:()=>H,decodeFrame:()=>T,getID3Data:()=>K,getID3Frames:()=>L,getTimeStamp:()=>B,isFooter:()=>I,isHeader:()=>F,isTimeStampFrame:()=>k,testables:()=>h,utf8ArrayToStr:()=>v});var F=function(p,x){return x+10<=p.length&&p[x]===73&&p[x+1]===68&&p[x+2]===51&&p[x+3]<255&&p[x+4]<255&&p[x+6]<128&&p[x+7]<128&&p[x+8]<128&&p[x+9]<128},I=function(p,x){return x+10<=p.length&&p[x]===51&&p[x+1]===68&&p[x+2]===73&&p[x+3]<255&&p[x+4]<255&&p[x+6]<128&&p[x+7]<128&&p[x+8]<128&&p[x+9]<128},K=function(p,x){for(var b=x,y=0;F(p,x);){y+=10;var _=M(p,x+6);y+=_,I(p,x+10)&&(y+=10),x+=y}if(y>0)return p.subarray(b,b+y)},M=function(p,x){var b=0;return b=(p[x]&127)<<21,b|=(p[x+1]&127)<<14,b|=(p[x+2]&127)<<7,b|=p[x+3]&127,b},H=function(p,x){return F(p,x)&&M(p,x+6)+10<=p.length-x},B=function(p){for(var x=L(p),b=0;b<x.length;b++){var y=x[b];if(k(y))return d(y)}},k=function(p){return p&&p.key==="PRIV"&&p.info==="com.apple.streaming.transportStreamTimestamp"},N=function(p){var x=String.fromCharCode(p[0],p[1],p[2],p[3]),b=M(p,4),y=10;return{type:x,size:b,data:p.subarray(y,y+b)}},L=function(p){for(var x=0,b=[];F(p,x);){var y=M(p,x+6);x+=10;for(var _=x+y;x+8<_;){var u=N(p.subarray(x)),m=T(u);m&&b.push(m),x+=u.size+10}I(p,x)&&(x+=10)}return b},T=function(p){return p.type==="PRIV"?l(p):p.type[0]==="W"?A(p):C(p)},l=function(p){if(!(p.size<2)){var x=v(p.data,!0),b=new Uint8Array(p.data.subarray(x.length+1));return{key:p.type,info:x,data:b.buffer}}},C=function(p){if(!(p.size<2)){if(p.type==="TXXX"){var x=1,b=v(p.data.subarray(x),!0);x+=b.length+1;var y=v(p.data.subarray(x));return{key:p.type,info:b,data:y}}var _=v(p.data.subarray(1));return{key:p.type,data:_}}},A=function(p){if(p.type==="WXXX"){if(p.size<2)return;var x=1,b=v(p.data.subarray(x),!0);x+=b.length+1;var y=v(p.data.subarray(x));return{key:p.type,info:b,data:y}}var _=v(p.data);return{key:p.type,data:_}},d=function(p){if(p.data.byteLength===8){var x=new Uint8Array(p.data),b=x[3]&1,y=(x[4]<<23)+(x[5]<<15)+(x[6]<<7)+x[7];return y/=45,b&&(y+=4772185884e-2),Math.round(y)}},v=function(p,x){x===void 0&&(x=!1);var b=P();if(b){var y=b.decode(p);if(x){var _=y.indexOf("\0");return _!==-1?y.substring(0,_):y}return y.replace(/\0/g,"")}for(var u=p.length,m,o,S,U="",R=0;R<u;){if(m=p[R++],m===0&&x)return U;if(m===0||m===3)continue;switch(m>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:U+=String.fromCharCode(m);break;case 12:case 13:o=p[R++],U+=String.fromCharCode((m&31)<<6|o&63);break;case 14:o=p[R++],S=p[R++],U+=String.fromCharCode((m&15)<<12|(o&63)<<6|(S&63)<<0);break}}return U},h={decodeTextFrame:C},g;function P(){return!g&&typeof self.TextDecoder<"u"&&(g=new self.TextDecoder("utf-8")),g}},"./src/demux/mp3demuxer.ts":(O,w,f)=>{f.r(w),f.d(w,{default:()=>N});var F=f("./src/demux/base-audio-demuxer.ts"),I=f("./src/demux/id3.ts"),K=f("./src/utils/logger.ts"),M=f("./src/demux/mpegaudio.ts");function H(L,T){L.prototype=Object.create(T.prototype),L.prototype.constructor=L,B(L,T)}function B(L,T){return B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(C,A){return C.__proto__=A,C},B(L,T)}var k=function(L){H(T,L);function T(){return L.apply(this,arguments)||this}var l=T.prototype;return l.resetInitSegment=function(A,d,v,h){L.prototype.resetInitSegment.call(this,A,d,v,h),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:d,duration:h,inputTimeScale:9e4,dropped:0}},T.probe=function(A){if(!A)return!1;for(var d=I.getID3Data(A,0)||[],v=d.length,h=A.length;v<h;v++)if(M.probe(A,v))return K.logger.log("MPEG Audio sync word found !"),!0;return!1},l.canParse=function(A,d){return M.canParse(A,d)},l.appendFrame=function(A,d,v){if(this.basePTS!==null)return M.appendFrame(A,d,v,this.basePTS,this.frameIndex)},T}(F.default);const N=k},"./src/demux/mp4demuxer.ts":(O,w,f)=>{f.r(w),f.d(w,{default:()=>k});var F=f("./src/polyfills/number.ts"),I=f("./src/types/demuxer.ts"),K=f("./src/utils/mp4-tools.ts"),M=f("./src/demux/dummy-demuxed-track.ts"),H=/\/emsg[-/]ID3/i,B=function(){function N(T,l){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=l}var L=N.prototype;return L.resetTimeStamp=function(){},L.resetInitSegment=function(l,C,A,d){var v=this.videoTrack=(0,M.dummyTrack)("video",1),h=this.audioTrack=(0,M.dummyTrack)("audio",1),g=this.txtTrack=(0,M.dummyTrack)("text",1);if(this.id3Track=(0,M.dummyTrack)("id3",1),this.timeOffset=0,!(!l||!l.byteLength)){var P=(0,K.parseInitSegment)(l);if(P.video){var D=P.video,p=D.id,x=D.timescale,b=D.codec;v.id=p,v.timescale=g.timescale=x,v.codec=b}if(P.audio){var y=P.audio,_=y.id,u=y.timescale,m=y.codec;h.id=_,h.timescale=u,h.codec=m}g.id=K.RemuxerTrackIdConfig.text,v.sampleDuration=0,v.duration=h.duration=d}},L.resetContiguity=function(){},N.probe=function(l){return l=l.length>16384?l.subarray(0,16384):l,(0,K.findBox)(l,["moof"]).length>0},L.demux=function(l,C){this.timeOffset=C;var A=l,d=this.videoTrack,v=this.txtTrack;if(this.config.progressive){this.remainderData&&(A=(0,K.appendUint8Array)(this.remainderData,l));var h=(0,K.segmentValidRange)(A);this.remainderData=h.remainder,d.samples=h.valid||new Uint8Array}else d.samples=A;var g=this.extractID3Track(d,C);return v.samples=(0,K.parseSamples)(C,d),{videoTrack:d,audioTrack:this.audioTrack,id3Track:g,textTrack:this.txtTrack}},L.flush=function(){var l=this.timeOffset,C=this.videoTrack,A=this.txtTrack;C.samples=this.remainderData||new Uint8Array,this.remainderData=null;var d=this.extractID3Track(C,this.timeOffset);return A.samples=(0,K.parseSamples)(l,C),{videoTrack:C,audioTrack:(0,M.dummyTrack)(),id3Track:d,textTrack:(0,M.dummyTrack)()}},L.extractID3Track=function(l,C){var A=this.id3Track;if(l.samples.length){var d=(0,K.findBox)(l.samples,["emsg"]);d&&d.forEach(function(v){var h=(0,K.parseEmsg)(v);if(H.test(h.schemeIdUri)){var g=(0,F.isFiniteNumber)(h.presentationTime)?h.presentationTime/h.timeScale:C+h.presentationTimeDelta/h.timeScale,P=h.eventDuration===4294967295?Number.POSITIVE_INFINITY:h.eventDuration/h.timeScale;P<=.001&&(P=Number.POSITIVE_INFINITY);var D=h.payload;A.samples.push({data:D,len:D.byteLength,dts:g,pts:g,type:I.MetadataSchema.emsg,duration:P})}})}return A},L.demuxSampleAes=function(l,C,A){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))},L.destroy=function(){},N}();const k=B},"./src/demux/mpegaudio.ts":(O,w,f)=>{f.r(w),f.d(w,{appendFrame:()=>B,canParse:()=>T,isHeader:()=>L,isHeaderPattern:()=>N,parseHeader:()=>k,probe:()=>l});var F=null,I=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],K=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],M=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],H=[0,1,1,4];function B(C,A,d,v,h){if(!(d+24>A.length)){var g=k(A,d);if(g&&d+g.frameLength<=A.length){var P=g.samplesPerFrame*9e4/g.sampleRate,D=v+h*P,p={unit:A.subarray(d,d+g.frameLength),pts:D,dts:D};return C.config=[],C.channelCount=g.channelCount,C.samplerate=g.sampleRate,C.samples.push(p),{sample:p,length:g.frameLength,missing:0}}}}function k(C,A){var d=C[A+1]>>3&3,v=C[A+1]>>1&3,h=C[A+2]>>4&15,g=C[A+2]>>2&3;if(d!==1&&h!==0&&h!==15&&g!==3){var P=C[A+2]>>1&1,D=C[A+3]>>6,p=d===3?3-v:v===3?3:4,x=I[p*14+h-1]*1e3,b=d===3?0:d===2?1:2,y=K[b*3+g],_=D===3?1:2,u=M[d][v],m=H[v],o=u*8*m,S=Math.floor(u*x/y+P)*m;if(F===null){var U=navigator.userAgent||"",R=U.match(/Chrome\/(\d+)/i);F=R?parseInt(R[1]):0}var G=!!F&&F<=87;return G&&v===2&&x>=224e3&&D===0&&(C[A+3]=C[A+3]|128),{sampleRate:y,channelCount:_,frameLength:S,samplesPerFrame:o}}}function N(C,A){return C[A]===255&&(C[A+1]&224)===224&&(C[A+1]&6)!==0}function L(C,A){return A+1<C.length&&N(C,A)}function T(C,A){var d=4;return N(C,A)&&d<=C.length-A}function l(C,A){if(A+1<C.length&&N(C,A)){var d=4,v=k(C,A),h=d;v!=null&&v.frameLength&&(h=v.frameLength);var g=A+h;return g===C.length||L(C,g)}return!1}},"./src/demux/sample-aes.ts":(O,w,f)=>{f.r(w),f.d(w,{default:()=>M});var F=f("./src/crypt/decrypter.ts"),I=f("./src/utils/mp4-tools.ts"),K=function(){function H(k,N,L){this.keyData=void 0,this.decrypter=void 0,this.keyData=L,this.decrypter=new F.default(N,{removePKCS7Padding:!1})}var B=H.prototype;return B.decryptBuffer=function(N){return this.decrypter.decrypt(N,this.keyData.key.buffer,this.keyData.iv.buffer)},B.decryptAacSample=function(N,L,T){var l=this,C=N[L].unit;if(!(C.length<=16)){var A=C.subarray(16,C.length-C.length%16),d=A.buffer.slice(A.byteOffset,A.byteOffset+A.length);this.decryptBuffer(d).then(function(v){var h=new Uint8Array(v);C.set(h,16),l.decrypter.isSync()||l.decryptAacSamples(N,L+1,T)})}},B.decryptAacSamples=function(N,L,T){for(;;L++){if(L>=N.length){T();return}if(!(N[L].unit.length<32)&&(this.decryptAacSample(N,L,T),!this.decrypter.isSync()))return}},B.getAvcEncryptedData=function(N){for(var L=Math.floor((N.length-48)/160)*16+16,T=new Int8Array(L),l=0,C=32;C<N.length-16;C+=160,l+=16)T.set(N.subarray(C,C+16),l);return T},B.getAvcDecryptedUnit=function(N,L){for(var T=new Uint8Array(L),l=0,C=32;C<N.length-16;C+=160,l+=16)N.set(T.subarray(l,l+16),C);return N},B.decryptAvcSample=function(N,L,T,l,C){var A=this,d=(0,I.discardEPB)(C.data),v=this.getAvcEncryptedData(d);this.decryptBuffer(v.buffer).then(function(h){C.data=A.getAvcDecryptedUnit(d,h),A.decrypter.isSync()||A.decryptAvcSamples(N,L,T+1,l)})},B.decryptAvcSamples=function(N,L,T,l){if(N instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;L++,T=0){if(L>=N.length){l();return}for(var C=N[L].units;!(T>=C.length);T++){var A=C[T];if(!(A.data.length<=48||A.type!==1&&A.type!==5)&&(this.decryptAvcSample(N,L,T,l,A),!this.decrypter.isSync()))return}}},H}();const M=K},"./src/demux/transmuxer-interface.ts":(O,w,f)=>{f.r(w),f.d(w,{default:()=>L});var F=f("./src/demux/webworkify-webpack.js"),I=f("./src/events.ts"),K=f("./src/demux/transmuxer.ts"),M=f("./src/utils/logger.ts"),H=f("./src/errors.ts"),B=f("./src/utils/mediasource-helper.ts"),k=f("./node_modules/eventemitter3/index.js"),N=(0,B.getMediaSource)()||{isTypeSupported:function(){return!1}},L=function(){function T(C,A,d,v){var h=this;this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.worker=void 0,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;var g=C.config;this.hls=C,this.id=A,this.useWorker=!!g.enableWorker,this.onTransmuxComplete=d,this.onFlush=v;var P=function(y,_){_=_||{},_.frag=h.frag,_.id=h.id,h.hls.trigger(y,_)};this.observer=new k.EventEmitter,this.observer.on(I.Events.FRAG_DECRYPTED,P),this.observer.on(I.Events.ERROR,P);var D={mp4:N.isTypeSupported("video/mp4"),mpeg:N.isTypeSupported("audio/mpeg"),mp3:N.isTypeSupported('audio/mp4; codecs="mp3"')},p=navigator.vendor;if(this.useWorker&&typeof Worker<"u"){M.logger.log("demuxing in webworker");var x;try{x=this.worker=(0,F.default)("./src/demux/transmuxer-worker.ts"),this.onwmsg=this.onWorkerMessage.bind(this),x.addEventListener("message",this.onwmsg),x.onerror=function(b){h.useWorker=!1,M.logger.warn("Exception in webworker, fallback to inline"),h.hls.trigger(I.Events.ERROR,{type:H.ErrorTypes.OTHER_ERROR,details:H.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:new Error(b.message+"  ("+b.filename+":"+b.lineno+")")})},x.postMessage({cmd:"init",typeSupported:D,vendor:p,id:A,config:JSON.stringify(g)})}catch(b){M.logger.warn("Error in worker:",b),M.logger.error("Error while initializing DemuxerWorker, fallback to inline"),x&&self.URL.revokeObjectURL(x.objectURL),this.transmuxer=new K.default(this.observer,D,g,p,A),this.worker=null}}else this.transmuxer=new K.default(this.observer,D,g,p,A)}var l=T.prototype;return l.destroy=function(){var A=this.worker;if(A)A.removeEventListener("message",this.onwmsg),A.terminate(),this.worker=null,this.onwmsg=void 0;else{var d=this.transmuxer;d&&(d.destroy(),this.transmuxer=null)}var v=this.observer;v&&v.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null},l.push=function(A,d,v,h,g,P,D,p,x,b){var y,_,u=this;x.transmuxing.start=self.performance.now();var m=this.transmuxer,o=this.worker,S=P?P.start:g.start,U=g.decryptdata,R=this.frag,G=!(R&&g.cc===R.cc),j=!(R&&x.level===R.level),V=R?x.sn-R.sn:-1,z=this.part?x.part-this.part.index:-1,$=V===0&&x.id>1&&x.id===(R==null?void 0:R.stats.chunkCount),X=!j&&(V===1||V===0&&(z===1||$&&z<=0)),J=self.performance.now();(j||V||g.stats.parsing.start===0)&&(g.stats.parsing.start=J),P&&(z||!X)&&(P.stats.parsing.start=J);var q=!(R&&((y=g.initSegment)===null||y===void 0?void 0:y.url)===((_=R.initSegment)===null||_===void 0?void 0:_.url)),ee=new K.TransmuxState(G,X,p,j,S,q);if(!X||G||q){M.logger.log("[transmuxer-interface, "+g.type+"]: Starting new transmux session for sn: "+x.sn+" p: "+x.part+" level: "+x.level+" id: "+x.id+`
        discontinuity: `+G+`
        trackSwitch: `+j+`
        contiguous: `+X+`
        accurateTimeOffset: `+p+`
        timeOffset: `+S+`
        initSegmentChange: `+q);var ne=new K.TransmuxConfig(v,h,d,D,b);this.configureTransmuxer(ne)}if(this.frag=g,this.part=P,o)o.postMessage({cmd:"demux",data:A,decryptdata:U,chunkMeta:x,state:ee},A instanceof ArrayBuffer?[A]:[]);else if(m){var ae=m.push(A,U,x,ee);(0,K.isPromise)(ae)?(m.async=!0,ae.then(function(ue){u.handleTransmuxComplete(ue)}).catch(function(ue){u.transmuxerError(ue,x,"transmuxer-interface push error")})):(m.async=!1,this.handleTransmuxComplete(ae))}},l.flush=function(A){var d=this;A.transmuxing.start=self.performance.now();var v=this.transmuxer,h=this.worker;if(h)h.postMessage({cmd:"flush",chunkMeta:A});else if(v){var g=v.flush(A),P=(0,K.isPromise)(g);P||v.async?((0,K.isPromise)(g)||(g=Promise.resolve(g)),g.then(function(D){d.handleFlushResult(D,A)}).catch(function(D){d.transmuxerError(D,A,"transmuxer-interface flush error")})):this.handleFlushResult(g,A)}},l.transmuxerError=function(A,d,v){this.hls&&this.hls.trigger(I.Events.ERROR,{type:H.ErrorTypes.MEDIA_ERROR,details:H.ErrorDetails.FRAG_PARSING_ERROR,chunkMeta:d,fatal:!1,error:A,err:A,reason:v})},l.handleFlushResult=function(A,d){var v=this;A.forEach(function(h){v.handleTransmuxComplete(h)}),this.onFlush(d)},l.onWorkerMessage=function(A){var d=A.data,v=this.hls;switch(d.event){case"init":{self.URL.revokeObjectURL(this.worker.objectURL);break}case"transmuxComplete":{this.handleTransmuxComplete(d.data);break}case"flush":{this.onFlush(d.data);break}case"workerLog":M.logger[d.data.logType]&&M.logger[d.data.logType](d.data.message);break;default:{d.data=d.data||{},d.data.frag=this.frag,d.data.id=this.id,v.trigger(d.event,d.data);break}}},l.configureTransmuxer=function(A){var d=this.worker,v=this.transmuxer;d?d.postMessage({cmd:"configure",config:A}):v&&v.configure(A)},l.handleTransmuxComplete=function(A){A.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(A)},T}()},"./src/demux/transmuxer-worker.ts":(O,w,f)=>{f.r(w),f.d(w,{default:()=>B});var F=f("./src/demux/transmuxer.ts"),I=f("./src/events.ts"),K=f("./src/utils/logger.ts"),M=f("./node_modules/eventemitter3/index.js"),H=f("./src/errors.ts");function B(l){var C=new M.EventEmitter,A=function(h,g){l.postMessage({event:h,data:g})};C.on(I.Events.FRAG_DECRYPTED,A),C.on(I.Events.ERROR,A);var d=function(){var h=function(D){var p=function(b){A("workerLog",{logType:D,message:b})};K.logger[D]=p};for(var g in K.logger)h(g)};l.addEventListener("message",function(v){var h=v.data;switch(h.cmd){case"init":{var g=JSON.parse(h.config);l.transmuxer=new F.default(C,h.typeSupported,g,h.vendor,h.id),(0,K.enableLogs)(g.debug,h.id),d(),A("init",null);break}case"configure":{l.transmuxer.configure(h.config);break}case"demux":{var P=l.transmuxer.push(h.data,h.decryptdata,h.chunkMeta,h.state);(0,F.isPromise)(P)?(l.transmuxer.async=!0,P.then(function(b){k(l,b)}).catch(function(b){A(I.Events.ERROR,{type:H.ErrorTypes.MEDIA_ERROR,details:H.ErrorDetails.FRAG_PARSING_ERROR,chunkMeta:h.chunkMeta,fatal:!1,error:b,err:b,reason:"transmuxer-worker push error"})})):(l.transmuxer.async=!1,k(l,P));break}case"flush":{var D=h.chunkMeta,p=l.transmuxer.flush(D),x=(0,F.isPromise)(p);x||l.transmuxer.async?((0,F.isPromise)(p)||(p=Promise.resolve(p)),p.then(function(b){L(l,b,D)}).catch(function(b){A(I.Events.ERROR,{type:H.ErrorTypes.MEDIA_ERROR,details:H.ErrorDetails.FRAG_PARSING_ERROR,chunkMeta:h.chunkMeta,fatal:!1,error:b,err:b,reason:"transmuxer-worker flush error"})})):L(l,p,D);break}}})}function k(l,C){if(T(C.remuxResult))return!1;var A=[],d=C.remuxResult,v=d.audio,h=d.video;return v&&N(A,v),h&&N(A,h),l.postMessage({event:"transmuxComplete",data:C},A),!0}function N(l,C){C.data1&&l.push(C.data1.buffer),C.data2&&l.push(C.data2.buffer)}function L(l,C,A){var d=C.reduce(function(v,h){return k(l,h)||v},!1);d||l.postMessage({event:"transmuxComplete",data:C[0]}),l.postMessage({event:"flush",data:A})}function T(l){return!l.audio&&!l.video&&!l.text&&!l.id3&&!l.initSegment}},"./src/demux/transmuxer.ts":(O,w,f)=>{f.r(w),f.d(w,{TransmuxConfig:()=>g,TransmuxState:()=>P,default:()=>A,isPromise:()=>h});var F=f("./src/events.ts"),I=f("./src/errors.ts"),K=f("./src/crypt/decrypter.ts"),M=f("./src/demux/aacdemuxer.ts"),H=f("./src/demux/mp4demuxer.ts"),B=f("./src/demux/tsdemuxer.ts"),k=f("./src/demux/mp3demuxer.ts"),N=f("./src/remux/mp4-remuxer.ts"),L=f("./src/remux/passthrough-remuxer.ts"),T=f("./src/utils/logger.ts"),l;try{l=self.performance.now.bind(self.performance)}catch{T.logger.debug("Unable to use Performance API on this environment"),l=self.Date.now}var C=[{demux:H.default,remux:L.default},{demux:B.default,remux:N.default},{demux:M.default,remux:N.default},{demux:k.default,remux:N.default}],A=function(){function D(x,b,y,_,u){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=x,this.typeSupported=b,this.config=y,this.vendor=_,this.id=u}var p=D.prototype;return p.configure=function(b){this.transmuxConfig=b,this.decrypter&&this.decrypter.reset()},p.push=function(b,y,_,u){var m=this,o=_.transmuxing;o.executeStart=l();var S=new Uint8Array(b),U=this.currentTransmuxState,R=this.transmuxConfig;u&&(this.currentTransmuxState=u);var G=u||U,j=G.contiguous,V=G.discontinuity,z=G.trackSwitch,$=G.accurateTimeOffset,X=G.timeOffset,J=G.initSegmentChange,q=R.audioCodec,ee=R.videoCodec,ne=R.defaultInitPts,ae=R.duration,ue=R.initSegmentData,le=d(S,y);if(le&&le.method==="AES-128"){var fe=this.getDecrypter();if(fe.isSync()){var ye=fe.softwareDecrypt(S,le.key.buffer,le.iv.buffer),Le=_.part>-1;if(Le&&(ye=fe.flush()),!ye)return o.executeEnd=l(),v(_);S=new Uint8Array(ye)}else return this.decryptionPromise=fe.webCryptoDecrypt(S,le.key.buffer,le.iv.buffer).then(function(we){var be=m.push(we,null,_);return m.decryptionPromise=null,be}),this.decryptionPromise}var Ee=this.needsProbing(V,z);Ee&&this.configureTransmuxer(S),(V||z||J||Ee)&&this.resetInitSegment(ue,q,ee,ae,y),(V||J||Ee)&&this.resetInitialTimestamp(ne),j||this.resetContiguity();var ve=this.transmux(S,le,X,$,_),Ae=this.currentTransmuxState;return Ae.contiguous=!0,Ae.discontinuity=!1,Ae.trackSwitch=!1,o.executeEnd=l(),ve},p.flush=function(b){var y=this,_=b.transmuxing;_.executeStart=l();var u=this.decrypter,m=this.currentTransmuxState,o=this.decryptionPromise;if(o)return o.then(function(){return y.flush(b)});var S=[],U=m.timeOffset;if(u){var R=u.flush();R&&S.push(this.push(R,null,b))}var G=this.demuxer,j=this.remuxer;if(!G||!j)return this.observer.emit(F.Events.ERROR,F.Events.ERROR,{type:I.ErrorTypes.MEDIA_ERROR,details:I.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"}),_.executeEnd=l(),[v(b)];var V=G.flush(U);return h(V)?V.then(function(z){return y.flushRemux(S,z,b),S}):(this.flushRemux(S,V,b),S)},p.flushRemux=function(b,y,_){var u=y.audioTrack,m=y.videoTrack,o=y.id3Track,S=y.textTrack,U=this.currentTransmuxState,R=U.accurateTimeOffset,G=U.timeOffset;T.logger.log("[transmuxer.ts]: Flushed fragment "+_.sn+(_.part>-1?" p: "+_.part:"")+" of level "+_.level);var j=this.remuxer.remux(u,m,o,S,G,R,!0,this.id);b.push({remuxResult:j,chunkMeta:_}),_.transmuxing.executeEnd=l()},p.resetInitialTimestamp=function(b){var y=this.demuxer,_=this.remuxer;!y||!_||(y.resetTimeStamp(b),_.resetTimeStamp(b))},p.resetContiguity=function(){var b=this.demuxer,y=this.remuxer;!b||!y||(b.resetContiguity(),y.resetNextTimestamp())},p.resetInitSegment=function(b,y,_,u,m){var o=this.demuxer,S=this.remuxer;!o||!S||(o.resetInitSegment(b,y,_,u),S.resetInitSegment(b,y,_,m))},p.destroy=function(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)},p.transmux=function(b,y,_,u,m){var o;return y&&y.method==="SAMPLE-AES"?o=this.transmuxSampleAes(b,y,_,u,m):o=this.transmuxUnencrypted(b,_,u,m),o},p.transmuxUnencrypted=function(b,y,_,u){var m=this.demuxer.demux(b,y,!1,!this.config.progressive),o=m.audioTrack,S=m.videoTrack,U=m.id3Track,R=m.textTrack,G=this.remuxer.remux(o,S,U,R,y,_,!1,this.id);return{remuxResult:G,chunkMeta:u}},p.transmuxSampleAes=function(b,y,_,u,m){var o=this;return this.demuxer.demuxSampleAes(b,y,_).then(function(S){var U=o.remuxer.remux(S.audioTrack,S.videoTrack,S.id3Track,S.textTrack,_,u,!1,o.id);return{remuxResult:U,chunkMeta:m}})},p.configureTransmuxer=function(b){for(var y=this.config,_=this.observer,u=this.typeSupported,m=this.vendor,o,S=0,U=C.length;S<U;S++)if(C[S].demux.probe(b)){o=C[S];break}o||(T.logger.warn("Failed to find demuxer by probing frag, treating as mp4 passthrough"),o={demux:H.default,remux:L.default});var R=this.demuxer,G=this.remuxer,j=o.remux,V=o.demux;(!G||!(G instanceof j))&&(this.remuxer=new j(_,y,u,m)),(!R||!(R instanceof V))&&(this.demuxer=new V(_,y,u),this.probe=V.probe)},p.needsProbing=function(b,y){return!this.demuxer||!this.remuxer||b||y},p.getDecrypter=function(){var b=this.decrypter;return b||(b=this.decrypter=new K.default(this.config)),b},D}();function d(D,p){var x=null;return D.byteLength>0&&p!=null&&p.key!=null&&p.iv!==null&&p.method!=null&&(x=p),x}var v=function(p){return{remuxResult:{},chunkMeta:p}};function h(D){return"then"in D&&D.then instanceof Function}var g=function(p,x,b,y,_){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=p,this.videoCodec=x,this.initSegmentData=b,this.duration=y,this.defaultInitPts=_},P=function(p,x,b,y,_,u){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=p,this.contiguous=x,this.accurateTimeOffset=b,this.trackSwitch=y,this.timeOffset=_,this.initSegmentChange=u}},"./src/demux/tsdemuxer.ts":(O,w,f)=>{f.r(w),f.d(w,{default:()=>D});var F=f("./src/demux/adts.ts"),I=f("./src/demux/mpegaudio.ts"),K=f("./src/demux/exp-golomb.ts"),M=f("./src/demux/sample-aes.ts"),H=f("./src/events.ts"),B=f("./src/utils/mp4-tools.ts"),k=f("./src/utils/logger.ts"),N=f("./src/errors.ts"),L=f("./src/types/demuxer.ts");function T(){return T=Object.assign?Object.assign.bind():function(p){for(var x=1;x<arguments.length;x++){var b=arguments[x];for(var y in b)Object.prototype.hasOwnProperty.call(b,y)&&(p[y]=b[y])}return p},T.apply(this,arguments)}var l=188,C=function(){function p(b,y,_){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._avcTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.observer=b,this.config=y,this.typeSupported=_}p.probe=function(y){var _=p.syncOffset(y);return _>0&&k.logger.warn("MPEG2-TS detected but first sync word found @ offset "+_),_!==-1},p.syncOffset=function(y){for(var _=y.length,u=Math.min(l*5,y.length-l)+1,m=0;m<u;){for(var o=!1,S=m;S<_&&y[S]===71;S+=l)if(!o&&d(y,S)===0&&(o=!0),o&&S+l>u)return m;m++}return-1},p.createTrack=function(y,_){return{container:y==="video"||y==="audio"?"video/mp2t":void 0,type:y,id:B.RemuxerTrackIdConfig[y],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:y==="audio"?_:void 0}};var x=p.prototype;return x.resetInitSegment=function(y,_,u,m){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=p.createTrack("video"),this._audioTrack=p.createTrack("audio",m),this._id3Track=p.createTrack("id3"),this._txtTrack=p.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.audioCodec=_,this.videoCodec=u,this._duration=m},x.resetTimeStamp=function(){},x.resetContiguity=function(){var y=this._audioTrack,_=this._avcTrack,u=this._id3Track;y&&(y.pesData=null),_&&(_.pesData=null),u&&(u.pesData=null),this.aacOverFlow=null,this.avcSample=null,this.remainderData=null},x.demux=function(y,_,u,m){u===void 0&&(u=!1),m===void 0&&(m=!1),u||(this.sampleAes=null);var o,S=this._avcTrack,U=this._audioTrack,R=this._id3Track,G=this._txtTrack,j=S.pid,V=S.pesData,z=U.pid,$=R.pid,X=U.pesData,J=R.pesData,q=null,ee=this.pmtParsed,ne=this._pmtId,ae=y.length;if(this.remainderData&&(y=(0,B.appendUint8Array)(this.remainderData,y),ae=y.length,this.remainderData=null),ae<l&&!m)return this.remainderData=y,{audioTrack:U,videoTrack:S,id3Track:R,textTrack:G};var ue=Math.max(0,p.syncOffset(y));ae-=(ae-ue)%l,ae<y.byteLength&&!m&&(this.remainderData=new Uint8Array(y.buffer,ae,y.buffer.byteLength-ae));for(var le=0,fe=ue;fe<ae;fe+=l)if(y[fe]===71){var ye=!!(y[fe+1]&64),Le=d(y,fe),Ee=(y[fe+3]&48)>>4,ve=void 0;if(Ee>1){if(ve=fe+5+y[fe+4],ve===fe+l)continue}else ve=fe+4;switch(Le){case j:ye&&(V&&(o=g(V))&&this.parseAVCPES(S,G,o,!1),V={data:[],size:0}),V&&(V.data.push(y.subarray(ve,fe+l)),V.size+=fe+l-ve);break;case z:if(ye){if(X&&(o=g(X)))switch(U.segmentCodec){case"aac":this.parseAACPES(U,o);break;case"mp3":this.parseMPEGPES(U,o);break}X={data:[],size:0}}X&&(X.data.push(y.subarray(ve,fe+l)),X.size+=fe+l-ve);break;case $:ye&&(J&&(o=g(J))&&this.parseID3PES(R,o),J={data:[],size:0}),J&&(J.data.push(y.subarray(ve,fe+l)),J.size+=fe+l-ve);break;case 0:ye&&(ve+=y[ve]+1),ne=this._pmtId=v(y,ve);break;case ne:{ye&&(ve+=y[ve]+1);var Ae=h(y,ve,this.typeSupported,u);j=Ae.avc,j>0&&(S.pid=j),z=Ae.audio,z>0&&(U.pid=z,U.segmentCodec=Ae.segmentCodec),$=Ae.id3,$>0&&(R.pid=$),q!==null&&!ee&&(k.logger.warn("MPEG-TS PMT found at "+fe+" after unknown PID '"+q+"'. Backtracking to sync byte @"+ue+" to parse all TS packets."),q=null,fe=ue-188),ee=this.pmtParsed=!0;break}case 17:case 8191:break;default:q=Le;break}}else le++;le>0&&this.observer.emit(H.Events.ERROR,H.Events.ERROR,{type:N.ErrorTypes.MEDIA_ERROR,details:N.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"Found "+le+" TS packet/s that do not start with 0x47"}),S.pesData=V,U.pesData=X,R.pesData=J;var we={audioTrack:U,videoTrack:S,id3Track:R,textTrack:G};return m&&this.extractRemainingSamples(we),we},x.flush=function(){var y=this.remainderData;this.remainderData=null;var _;return y?_=this.demux(y,-1,!1,!0):_={videoTrack:this._avcTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(_),this.sampleAes?this.decrypt(_,this.sampleAes):_},x.extractRemainingSamples=function(y){var _=y.audioTrack,u=y.videoTrack,m=y.id3Track,o=y.textTrack,S=u.pesData,U=_.pesData,R=m.pesData,G;if(S&&(G=g(S))?(this.parseAVCPES(u,o,G,!0),u.pesData=null):u.pesData=S,U&&(G=g(U))){switch(_.segmentCodec){case"aac":this.parseAACPES(_,G);break;case"mp3":this.parseMPEGPES(_,G);break}_.pesData=null}else U!=null&&U.size&&k.logger.log("last AAC PES packet truncated,might overlap between fragments"),_.pesData=U;R&&(G=g(R))?(this.parseID3PES(m,G),m.pesData=null):m.pesData=R},x.demuxSampleAes=function(y,_,u){var m=this.demux(y,u,!0,!this.config.progressive),o=this.sampleAes=new M.default(this.observer,this.config,_);return this.decrypt(m,o)},x.decrypt=function(y,_){return new Promise(function(u){var m=y.audioTrack,o=y.videoTrack;m.samples&&m.segmentCodec==="aac"?_.decryptAacSamples(m.samples,0,function(){o.samples?_.decryptAvcSamples(o.samples,0,0,function(){u(y)}):u(y)}):o.samples&&_.decryptAvcSamples(o.samples,0,0,function(){u(y)})})},x.destroy=function(){this._duration=0},x.parseAVCPES=function(y,_,u,m){var o=this,S=this.parseAVCNALu(y,u.data),U=this.avcSample,R,G=!1;u.data=null,U&&S.length&&!y.audFound&&(P(U,y),U=this.avcSample=A(!1,u.pts,u.dts,"")),S.forEach(function(j){switch(j.type){case 1:{R=!0,U||(U=o.avcSample=A(!0,u.pts,u.dts,"")),U.frame=!0;var V=j.data;if(G&&V.length>4){var z=new K.default(V).readSliceType();(z===2||z===4||z===7||z===9)&&(U.key=!0)}break}case 5:R=!0,U||(U=o.avcSample=A(!0,u.pts,u.dts,"")),U.key=!0,U.frame=!0;break;case 6:{R=!0,(0,B.parseSEIMessageFromNALu)(j.data,1,u.pts,_.samples);break}case 7:if(R=!0,G=!0,!y.sps){var $=new K.default(j.data),X=$.readSPS();y.width=X.width,y.height=X.height,y.pixelRatio=X.pixelRatio,y.sps=[j.data],y.duration=o._duration;for(var J=j.data.subarray(1,4),q="avc1.",ee=0;ee<3;ee++){var ne=J[ee].toString(16);ne.length<2&&(ne="0"+ne),q+=ne}y.codec=q}break;case 8:R=!0,y.pps||(y.pps=[j.data]);break;case 9:R=!1,y.audFound=!0,U&&P(U,y),U=o.avcSample=A(!1,u.pts,u.dts,"");break;case 12:R=!0;break;default:R=!1,U&&(U.debug+="unknown NAL "+j.type+" ");break}if(U&&R){var ae=U.units;ae.push(j)}}),m&&U&&(P(U,y),this.avcSample=null)},x.getLastNalUnit=function(y){var _,u=this.avcSample,m;if((!u||u.units.length===0)&&(u=y[y.length-1]),(_=u)!==null&&_!==void 0&&_.units){var o=u.units;m=o[o.length-1]}return m},x.parseAVCNALu=function(y,_){var u=_.byteLength,m=y.naluState||0,o=m,S=[],U=0,R,G,j,V=-1,z=0;for(m===-1&&(V=0,z=_[0]&31,m=0,U=1);U<u;){if(R=_[U++],!m){m=R?0:1;continue}if(m===1){m=R?0:2;continue}if(!R)m=3;else if(R===1){if(V>=0){var $={data:_.subarray(V,U-m-1),type:z};S.push($)}else{var X=this.getLastNalUnit(y.samples);if(X&&(o&&U<=4-o&&X.state&&(X.data=X.data.subarray(0,X.data.byteLength-o)),G=U-m-1,G>0)){var J=new Uint8Array(X.data.byteLength+G);J.set(X.data,0),J.set(_.subarray(0,G),X.data.byteLength),X.data=J,X.state=0}}U<u?(j=_[U]&31,V=U,z=j,m=0):m=-1}else m=0}if(V>=0&&m>=0){var q={data:_.subarray(V,u),type:z,state:m};S.push(q)}if(S.length===0){var ee=this.getLastNalUnit(y.samples);if(ee){var ne=new Uint8Array(ee.data.byteLength+_.byteLength);ne.set(ee.data,0),ne.set(_,ee.data.byteLength),ee.data=ne}}return y.naluState=m,S},x.parseAACPES=function(y,_){var u=0,m=this.aacOverFlow,o=_.data;if(m){this.aacOverFlow=null;var S=m.missing,U=m.sample.unit.byteLength;if(S===-1){var R=new Uint8Array(U+o.byteLength);R.set(m.sample.unit,0),R.set(o,U),o=R}else{var G=U-S;m.sample.unit.set(o.subarray(0,S),G),y.samples.push(m.sample),u=m.missing}}var j,V;for(j=u,V=o.length;j<V-1&&!F.isHeader(o,j);j++);if(j!==u){var z,$;if(j<V-1?(z="AAC PES did not start with ADTS header,offset:"+j,$=!1):(z="no ADTS header found in AAC PES",$=!0),k.logger.warn("parsing error:"+z),this.observer.emit(H.Events.ERROR,H.Events.ERROR,{type:N.ErrorTypes.MEDIA_ERROR,details:N.ErrorDetails.FRAG_PARSING_ERROR,fatal:$,reason:z}),$)return}F.initTrackConfig(y,this.observer,o,j,this.audioCodec);var X;if(_.pts!==void 0)X=_.pts;else if(m){var J=F.getFrameDuration(y.samplerate);X=m.sample.pts+J}else{k.logger.warn("[tsdemuxer]: AAC PES unknown PTS");return}for(var q=0,ee;j<V;)if(ee=F.appendFrame(y,o,j,X,q),j+=ee.length,ee.missing){this.aacOverFlow=ee;break}else for(q++;j<V-1&&!F.isHeader(o,j);j++);},x.parseMPEGPES=function(y,_){var u=_.data,m=u.length,o=0,S=0,U=_.pts;if(U===void 0){k.logger.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;S<m;)if(I.isHeader(u,S)){var R=I.appendFrame(y,u,S,U,o);if(R)S+=R.length,o++;else break}else S++},x.parseID3PES=function(y,_){if(_.pts===void 0){k.logger.warn("[tsdemuxer]: ID3 PES unknown PTS");return}var u=T({},_,{type:this._avcTrack?L.MetadataSchema.emsg:L.MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY});y.samples.push(u)},p}();function A(p,x,b,y){return{key:p,frame:!1,pts:x,dts:b,units:[],debug:y,length:0}}function d(p,x){return((p[x+1]&31)<<8)+p[x+2]}function v(p,x){return(p[x+10]&31)<<8|p[x+11]}function h(p,x,b,y){var _={audio:-1,avc:-1,id3:-1,segmentCodec:"aac"},u=(p[x+1]&15)<<8|p[x+2],m=x+3+u-4,o=(p[x+10]&15)<<8|p[x+11];for(x+=12+o;x<m;){var S=d(p,x);switch(p[x]){case 207:if(!y){k.logger.log("ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:_.audio===-1&&(_.audio=S);break;case 21:_.id3===-1&&(_.id3=S);break;case 219:if(!y){k.logger.log("H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:_.avc===-1&&(_.avc=S);break;case 3:case 4:b.mpeg!==!0&&b.mp3!==!0?k.logger.log("MPEG audio found, not supported in this browser"):_.audio===-1&&(_.audio=S,_.segmentCodec="mp3");break;case 36:k.logger.warn("Unsupported HEVC stream type found");break}x+=((p[x+3]&15)<<8|p[x+4])+5}return _}function g(p){var x=0,b,y,_,u,m,o=p.data;if(!p||p.size===0)return null;for(;o[0].length<19&&o.length>1;){var S=new Uint8Array(o[0].length+o[1].length);S.set(o[0]),S.set(o[1],o[0].length),o[0]=S,o.splice(1,1)}b=o[0];var U=(b[0]<<16)+(b[1]<<8)+b[2];if(U===1){if(y=(b[4]<<8)+b[5],y&&y>p.size-6)return null;var R=b[7];R&192&&(u=(b[9]&14)*536870912+(b[10]&255)*4194304+(b[11]&254)*16384+(b[12]&255)*128+(b[13]&254)/2,R&64?(m=(b[14]&14)*536870912+(b[15]&255)*4194304+(b[16]&254)*16384+(b[17]&255)*128+(b[18]&254)/2,u-m>54e5&&(k.logger.warn(Math.round((u-m)/9e4)+"s delta between PTS and DTS, align them"),u=m)):m=u),_=b[8];var G=_+9;if(p.size<=G)return null;p.size-=G;for(var j=new Uint8Array(p.size),V=0,z=o.length;V<z;V++){b=o[V];var $=b.byteLength;if(G)if(G>$){G-=$;continue}else b=b.subarray(G),$-=G,G=0;j.set(b,x),x+=$}return y&&(y-=_+3),{data:j,pts:u,dts:m,len:y}}return null}function P(p,x){if(p.units.length&&p.frame){if(p.pts===void 0){var b=x.samples,y=b.length;if(y){var _=b[y-1];p.pts=_.pts,p.dts=_.dts}else{x.dropped++;return}}x.samples.push(p)}p.debug.length&&k.logger.log(p.pts+"/"+p.dts+":"+p.debug)}const D=C},"./src/demux/webworkify-webpack.js":(O,w,f)=>{f.r(w),f.d(w,{default:()=>l});var F=function(){var A=ENTRY_MODULE,d={},v=function g(P){var D=d[P];if(D!==void 0)return D.exports;var p=d[P]={exports:{}};return A[P].call(p.exports,p,p.exports,g),p.exports};v.m=A,function(){v.n=function(g){var P=g&&g.__esModule?function(){return g.default}:function(){return g};return v.d(P,{a:P}),P}}(),function(){v.d=function(g,P){for(var D in P)v.o(P,D)&&!v.o(g,D)&&Object.defineProperty(g,D,{enumerable:!0,get:P[D]})}}(),function(){v.o=function(g,P){return Object.prototype.hasOwnProperty.call(g,P)}}(),function(){v.r=function(g){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(g,"__esModule",{value:!0})}}();var h=v(ENTRY_MODULE);return h.default||h},I=F.toString().split("ENTRY_MODULE"),K="[\\.|\\-|\\+|\\w|/|@]+",M="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+K+").*?\\)";function H(C){return(C+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function B(C){return!isNaN(1*C)}function k(C,A,d){var v={};v[d]=[];var h=A.toString().replace(/^"[^"]+"/,"function"),g=h.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/)||h.match(/^\(\w+,\s*\w+,\s*(\w+)\)\s?\=\s?\>/);if(!g)return v;for(var P=g[1],D=new RegExp("(\\\\n|\\W)"+H(P)+M,"g"),p;p=D.exec(h);)p[3]!=="dll-reference"&&v[d].push(p[3]);for(D=new RegExp("\\("+H(P)+'\\("(dll-reference\\s('+K+'))"\\)\\)'+M,"g");p=D.exec(h);)C[p[2]]||(v[d].push(p[1]),C[p[2]]=f(p[1]).m),v[p[2]]=v[p[2]]||[],v[p[2]].push(p[4]);for(var x=Object.keys(v),b=0;b<x.length;b++)for(var y=0;y<v[x[b]].length;y++)B(v[x[b]][y])&&(v[x[b]][y]=1*v[x[b]][y]);return v}function N(C){var A=Object.keys(C);return A.reduce(function(d,v){return d||C[v].length>0},!1)}function L(C,A){for(var d={main:[A]},v={main:[]},h={main:{}};N(d);)for(var g=Object.keys(d),P=0;P<g.length;P++){var D=g[P],p=d[D],x=p.pop();if(h[D]=h[D]||{},!(h[D][x]||!C[D][x])){h[D][x]=!0,v[D]=v[D]||[],v[D].push(x);for(var b=k(C,C[D][x],D),y=Object.keys(b),_=0;_<y.length;_++)d[y[_]]=d[y[_]]||[],d[y[_]]=d[y[_]].concat(b[y[_]])}}return v}function T(C,A,d,v){var h=C[v].map(function(g){return'"'+g+'": '+A[v][g].toString().replace(/^"[^"]+"/,"function")}).join(",");return I[0]+"{"+h+"}"+I[1]+'"'+d+'"'+I[2]}function l(C,A){A=A||{};var d={main:f.m},v=A.all?{main:Object.keys(d.main)}:L(d,C),h="";Object.keys(v).filter(function(x){return x!=="main"}).forEach(function(x){for(var b=0;v[x][b];)b++;v[x].push(b),d[x][b]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",h=h+("var "+x+" = ("+T(v,d,b,modules)+`)();
`)}),h=h+("new (("+T(v,d,C,"main")+")())(self);");var g=new window.Blob([h],{type:"text/javascript"}),P=window.URL||window.webkitURL||window.mozURL||window.msURL,D=P.createObjectURL(g),p=new window.Worker(D);return p.objectURL=D,p}},"./src/errors.ts":(O,w,f)=>{f.r(w),f.d(w,{ErrorDetails:()=>I,ErrorTypes:()=>F});var F;(function(K){K.NETWORK_ERROR="networkError",K.MEDIA_ERROR="mediaError",K.KEY_SYSTEM_ERROR="keySystemError",K.MUX_ERROR="muxError",K.OTHER_ERROR="otherError"})(F||(F={}));var I;(function(K){K.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",K.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",K.KEY_SYSTEM_NO_SESSION="keySystemNoSession",K.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",K.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",K.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",K.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",K.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",K.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",K.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",K.MANIFEST_LOAD_ERROR="manifestLoadError",K.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",K.MANIFEST_PARSING_ERROR="manifestParsingError",K.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",K.LEVEL_EMPTY_ERROR="levelEmptyError",K.LEVEL_LOAD_ERROR="levelLoadError",K.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",K.LEVEL_SWITCH_ERROR="levelSwitchError",K.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",K.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",K.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",K.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",K.FRAG_LOAD_ERROR="fragLoadError",K.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",K.FRAG_DECRYPT_ERROR="fragDecryptError",K.FRAG_PARSING_ERROR="fragParsingError",K.REMUX_ALLOC_ERROR="remuxAllocError",K.KEY_LOAD_ERROR="keyLoadError",K.KEY_LOAD_TIMEOUT="keyLoadTimeOut",K.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",K.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",K.BUFFER_APPEND_ERROR="bufferAppendError",K.BUFFER_APPENDING_ERROR="bufferAppendingError",K.BUFFER_STALLED_ERROR="bufferStalledError",K.BUFFER_FULL_ERROR="bufferFullError",K.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",K.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",K.INTERNAL_EXCEPTION="internalException",K.INTERNAL_ABORTED="aborted",K.UNKNOWN="unknown"})(I||(I={}))},"./src/events.ts":(O,w,f)=>{f.r(w),f.d(w,{Events:()=>F});var F;(function(I){I.MEDIA_ATTACHING="hlsMediaAttaching",I.MEDIA_ATTACHED="hlsMediaAttached",I.MEDIA_DETACHING="hlsMediaDetaching",I.MEDIA_DETACHED="hlsMediaDetached",I.BUFFER_RESET="hlsBufferReset",I.BUFFER_CODECS="hlsBufferCodecs",I.BUFFER_CREATED="hlsBufferCreated",I.BUFFER_APPENDING="hlsBufferAppending",I.BUFFER_APPENDED="hlsBufferAppended",I.BUFFER_EOS="hlsBufferEos",I.BUFFER_FLUSHING="hlsBufferFlushing",I.BUFFER_FLUSHED="hlsBufferFlushed",I.MANIFEST_LOADING="hlsManifestLoading",I.MANIFEST_LOADED="hlsManifestLoaded",I.MANIFEST_PARSED="hlsManifestParsed",I.LEVEL_SWITCHING="hlsLevelSwitching",I.LEVEL_SWITCHED="hlsLevelSwitched",I.LEVEL_LOADING="hlsLevelLoading",I.LEVEL_LOADED="hlsLevelLoaded",I.LEVEL_UPDATED="hlsLevelUpdated",I.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",I.LEVELS_UPDATED="hlsLevelsUpdated",I.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",I.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",I.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",I.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",I.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",I.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",I.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",I.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",I.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",I.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",I.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",I.CUES_PARSED="hlsCuesParsed",I.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",I.INIT_PTS_FOUND="hlsInitPtsFound",I.FRAG_LOADING="hlsFragLoading",I.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",I.FRAG_LOADED="hlsFragLoaded",I.FRAG_DECRYPTED="hlsFragDecrypted",I.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",I.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",I.FRAG_PARSING_METADATA="hlsFragParsingMetadata",I.FRAG_PARSED="hlsFragParsed",I.FRAG_BUFFERED="hlsFragBuffered",I.FRAG_CHANGED="hlsFragChanged",I.FPS_DROP="hlsFpsDrop",I.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",I.ERROR="hlsError",I.DESTROYING="hlsDestroying",I.KEY_LOADING="hlsKeyLoading",I.KEY_LOADED="hlsKeyLoaded",I.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",I.BACK_BUFFER_REACHED="hlsBackBufferReached"})(F||(F={}))},"./src/hls.ts":(O,w,f)=>{f.r(w),f.d(w,{default:()=>p});var F=f("./node_modules/url-toolkit/src/url-toolkit.js"),I=f("./src/loader/playlist-loader.ts"),K=f("./src/controller/id3-track-controller.ts"),M=f("./src/controller/latency-controller.ts"),H=f("./src/controller/level-controller.ts"),B=f("./src/controller/fragment-tracker.ts"),k=f("./src/loader/key-loader.ts"),N=f("./src/controller/stream-controller.ts"),L=f("./src/is-supported.ts"),T=f("./src/utils/logger.ts"),l=f("./src/config.ts"),C=f("./node_modules/eventemitter3/index.js"),A=f("./src/events.ts"),d=f("./src/errors.ts"),v=f("./src/types/level.ts");function h(x,b){for(var y=0;y<b.length;y++){var _=b[y];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(x,P(_.key),_)}}function g(x,b,y){return b&&h(x.prototype,b),y&&h(x,y),Object.defineProperty(x,"prototype",{writable:!1}),x}function P(x){var b=D(x,"string");return typeof b=="symbol"?b:String(b)}function D(x,b){if(typeof x!="object"||x===null)return x;var y=x[Symbol.toPrimitive];if(y!==void 0){var _=y.call(x,b||"default");if(typeof _!="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(x)}var p=function(){x.isSupported=function(){return(0,L.isSupported)()};function x(y){y===void 0&&(y={}),this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new C.EventEmitter,this._autoLevelCapping=void 0,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null;var _=this.config=(0,l.mergeConfig)(x.DefaultConfig,y);this.userConfig=y,(0,T.enableLogs)(_.debug,"Hls instance"),this._autoLevelCapping=-1,_.progressive&&(0,l.enableStreamingMode)(_);var u=_.abrController,m=_.bufferController,o=_.capLevelController,S=_.fpsController,U=this.abrController=new u(this),R=this.bufferController=new m(this),G=this.capLevelController=new o(this),j=new S(this),V=new I.default(this),z=new K.default(this),$=this.levelController=new H.default(this),X=new B.FragmentTracker(this),J=new k.default(this.config),q=this.streamController=new N.default(this,X,J);G.setStreamController(q),j.setStreamController(q);var ee=[V,$,q];this.networkControllers=ee;var ne=[U,R,G,j,z,X];this.audioTrackController=this.createController(_.audioTrackController,ee);var ae=_.audioStreamController;ae&&ee.push(new ae(this,X,J)),this.subtitleTrackController=this.createController(_.subtitleTrackController,ee);var ue=_.subtitleStreamController;ue&&ee.push(new ue(this,X,J)),this.createController(_.timelineController,ne),J.emeController=this.emeController=this.createController(_.emeController,ne),this.cmcdController=this.createController(_.cmcdController,ne),this.latencyController=this.createController(M.default,ne),this.coreComponents=ne}var b=x.prototype;return b.createController=function(_,u){if(_){var m=new _(this);return u&&u.push(m),m}return null},b.on=function(_,u,m){m===void 0&&(m=this),this._emitter.on(_,u,m)},b.once=function(_,u,m){m===void 0&&(m=this),this._emitter.once(_,u,m)},b.removeAllListeners=function(_){this._emitter.removeAllListeners(_)},b.off=function(_,u,m,o){m===void 0&&(m=this),this._emitter.off(_,u,m,o)},b.listeners=function(_){return this._emitter.listeners(_)},b.emit=function(_,u,m){return this._emitter.emit(_,u,m)},b.trigger=function(_,u){if(this.config.debug)return this.emit(_,_,u);try{return this.emit(_,_,u)}catch(m){T.logger.error("An internal error happened while handling event "+_+'. Error message: "'+m.message+'". Here is a stacktrace:',m),this.trigger(A.Events.ERROR,{type:d.ErrorTypes.OTHER_ERROR,details:d.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:_,error:m})}return!1},b.listenerCount=function(_){return this._emitter.listenerCount(_)},b.destroy=function(){T.logger.log("destroy"),this.trigger(A.Events.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach(function(_){return _.destroy()}),this.networkControllers.length=0,this.coreComponents.forEach(function(_){return _.destroy()}),this.coreComponents.length=0},b.attachMedia=function(_){T.logger.log("attachMedia"),this._media=_,this.trigger(A.Events.MEDIA_ATTACHING,{media:_})},b.detachMedia=function(){T.logger.log("detachMedia"),this.trigger(A.Events.MEDIA_DETACHING,void 0),this._media=null},b.loadSource=function(_){this.stopLoad();var u=this.media,m=this.url,o=this.url=F.buildAbsoluteURL(self.location.href,_,{alwaysNormalize:!0});T.logger.log("loadSource:"+o),u&&m&&m!==o&&this.bufferController.hasSourceTypes()&&(this.detachMedia(),this.attachMedia(u)),this.trigger(A.Events.MANIFEST_LOADING,{url:_})},b.startLoad=function(_){_===void 0&&(_=-1),T.logger.log("startLoad("+_+")"),this.networkControllers.forEach(function(u){u.startLoad(_)})},b.stopLoad=function(){T.logger.log("stopLoad"),this.networkControllers.forEach(function(_){_.stopLoad()})},b.swapAudioCodec=function(){T.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},b.recoverMediaError=function(){T.logger.log("recoverMediaError");var _=this._media;this.detachMedia(),_&&this.attachMedia(_)},b.removeLevel=function(_,u){u===void 0&&(u=0),this.levelController.removeLevel(_,u)},g(x,[{key:"levels",get:function(){var _=this.levelController.levels;return _||[]}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(_){T.logger.log("set currentLevel:"+_),this.loadLevel=_,this.abrController.clearTimer(),this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(_){T.logger.log("set nextLevel:"+_),this.levelController.manualLevel=_,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(_){T.logger.log("set loadLevel:"+_),this.levelController.manualLevel=_}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(_){this.levelController.nextLoadLevel=_}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(_){T.logger.log("set firstLevel:"+_),this.levelController.firstLevel=_}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(_){T.logger.log("set startLevel:"+_),_!==-1&&(_=Math.max(_,this.minAutoLevel)),this.levelController.startLevel=_}},{key:"capLevelToPlayerSize",get:function(){return this.config.capLevelToPlayerSize},set:function(_){var u=!!_;u!==this.config.capLevelToPlayerSize&&(u?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=u)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(_){this._autoLevelCapping!==_&&(T.logger.log("set autoLevelCapping:"+_),this._autoLevelCapping=_)}},{key:"bandwidthEstimate",get:function(){var _=this.abrController.bwEstimator;return _?_.getEstimate():NaN}},{key:"maxHdcpLevel",get:function(){return this._maxHdcpLevel},set:function(_){v.HdcpLevels.indexOf(_)>-1&&(this._maxHdcpLevel=_)}},{key:"autoLevelEnabled",get:function(){return this.levelController.manualLevel===-1}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){var _=this.levels,u=this.config.minAutoBitrate;if(!_)return 0;for(var m=_.length,o=0;o<m;o++)if(_[o].maxBitrate>=u)return o;return 0}},{key:"maxAutoLevel",get:function(){var _=this.levels,u=this.autoLevelCapping,m=this.maxHdcpLevel,o;if(u===-1&&_&&_.length?o=_.length-1:o=u,m)for(var S=o;S--;){var U=_[S].attrs["HDCP-LEVEL"];if(U&&U<=m)return S}return o}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(_){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,_)}},{key:"playingDate",get:function(){return this.streamController.currentProgramDateTime}},{key:"mainForwardBufferInfo",get:function(){return this.streamController.getMainFwdBufferInfo()}},{key:"audioTracks",get:function(){var _=this.audioTrackController;return _?_.audioTracks:[]}},{key:"audioTrack",get:function(){var _=this.audioTrackController;return _?_.audioTrack:-1},set:function(_){var u=this.audioTrackController;u&&(u.audioTrack=_)}},{key:"subtitleTracks",get:function(){var _=this.subtitleTrackController;return _?_.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var _=this.subtitleTrackController;return _?_.subtitleTrack:-1},set:function(_){var u=this.subtitleTrackController;u&&(u.subtitleTrack=_)}},{key:"media",get:function(){return this._media}},{key:"subtitleDisplay",get:function(){var _=this.subtitleTrackController;return _?_.subtitleDisplay:!1},set:function(_){var u=this.subtitleTrackController;u&&(u.subtitleDisplay=_)}},{key:"lowLatencyMode",get:function(){return this.config.lowLatencyMode},set:function(_){this.config.lowLatencyMode=_}},{key:"liveSyncPosition",get:function(){return this.latencyController.liveSyncPosition}},{key:"latency",get:function(){return this.latencyController.latency}},{key:"maxLatency",get:function(){return this.latencyController.maxLatency}},{key:"targetLatency",get:function(){return this.latencyController.targetLatency}},{key:"drift",get:function(){return this.latencyController.drift}},{key:"forceStartLoad",get:function(){return this.streamController.forceStartLoad}}],[{key:"version",get:function(){return"1.3.4"}},{key:"Events",get:function(){return A.Events}},{key:"ErrorTypes",get:function(){return d.ErrorTypes}},{key:"ErrorDetails",get:function(){return d.ErrorDetails}},{key:"DefaultConfig",get:function(){return x.defaultConfig?x.defaultConfig:l.hlsDefaultConfig},set:function(_){x.defaultConfig=_}}]),x}();p.defaultConfig=void 0},"./src/is-supported.ts":(O,w,f)=>{f.r(w),f.d(w,{changeTypeSupported:()=>M,isSupported:()=>K});var F=f("./src/utils/mediasource-helper.ts");function I(){return self.SourceBuffer||self.WebKitSourceBuffer}function K(){var H=(0,F.getMediaSource)();if(!H)return!1;var B=I(),k=H&&typeof H.isTypeSupported=="function"&&H.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),N=!B||B.prototype&&typeof B.prototype.appendBuffer=="function"&&typeof B.prototype.remove=="function";return!!k&&!!N}function M(){var H,B=I();return typeof(B==null||(H=B.prototype)===null||H===void 0?void 0:H.changeType)=="function"}},"./src/loader/date-range.ts":(O,w,f)=>{f.r(w),f.d(w,{DateRange:()=>T,DateRangeAttribute:()=>L});var F=f("./src/polyfills/number.ts"),I=f("./src/utils/attr-list.ts"),K=f("./src/utils/logger.ts");function M(){return M=Object.assign?Object.assign.bind():function(l){for(var C=1;C<arguments.length;C++){var A=arguments[C];for(var d in A)Object.prototype.hasOwnProperty.call(A,d)&&(l[d]=A[d])}return l},M.apply(this,arguments)}function H(l,C){for(var A=0;A<C.length;A++){var d=C[A];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(l,k(d.key),d)}}function B(l,C,A){return C&&H(l.prototype,C),A&&H(l,A),Object.defineProperty(l,"prototype",{writable:!1}),l}function k(l){var C=N(l,"string");return typeof C=="symbol"?C:String(C)}function N(l,C){if(typeof l!="object"||l===null)return l;var A=l[Symbol.toPrimitive];if(A!==void 0){var d=A.call(l,C||"default");if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(C==="string"?String:Number)(l)}var L;(function(l){l.ID="ID",l.CLASS="CLASS",l.START_DATE="START-DATE",l.DURATION="DURATION",l.END_DATE="END-DATE",l.END_ON_NEXT="END-ON-NEXT",l.PLANNED_DURATION="PLANNED-DURATION",l.SCTE35_OUT="SCTE35-OUT",l.SCTE35_IN="SCTE35-IN"})(L||(L={}));var T=function(){function l(C,A){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,A){var d=A.attr;for(var v in d)if(Object.prototype.hasOwnProperty.call(C,v)&&C[v]!==d[v]){K.logger.warn('DATERANGE tag attribute: "'+v+'" does not match for tags with ID: "'+C.ID+'"'),this._badValueForSameId=v;break}C=M(new I.AttrList({}),d,C)}if(this.attr=C,this._startDate=new Date(C[L.START_DATE]),L.END_DATE in this.attr){var h=new Date(this.attr[L.END_DATE]);(0,F.isFiniteNumber)(h.getTime())&&(this._endDate=h)}}return B(l,[{key:"id",get:function(){return this.attr.ID}},{key:"class",get:function(){return this.attr.CLASS}},{key:"startDate",get:function(){return this._startDate}},{key:"endDate",get:function(){if(this._endDate)return this._endDate;var A=this.duration;return A!==null?new Date(this._startDate.getTime()+A*1e3):null}},{key:"duration",get:function(){if(L.DURATION in this.attr){var A=this.attr.decimalFloatingPoint(L.DURATION);if((0,F.isFiniteNumber)(A))return A}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}},{key:"plannedDuration",get:function(){return L.PLANNED_DURATION in this.attr?this.attr.decimalFloatingPoint(L.PLANNED_DURATION):null}},{key:"endOnNext",get:function(){return this.attr.bool(L.END_ON_NEXT)}},{key:"isValid",get:function(){return!!this.id&&!this._badValueForSameId&&(0,F.isFiniteNumber)(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)}}]),l}()},"./src/loader/fragment-loader.ts":(O,w,f)=>{f.r(w),f.d(w,{LoadError:()=>A,default:()=>l});var F=f("./src/polyfills/number.ts"),I=f("./src/errors.ts");function K(d,v){d.prototype=Object.create(v.prototype),d.prototype.constructor=d,N(d,v)}function M(d){var v=typeof Map=="function"?new Map:void 0;return M=function(g){if(g===null||!k(g))return g;if(typeof g!="function")throw new TypeError("Super expression must either be null or a function");if(typeof v<"u"){if(v.has(g))return v.get(g);v.set(g,P)}function P(){return H(g,arguments,L(this).constructor)}return P.prototype=Object.create(g.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),N(P,g)},M(d)}function H(d,v,h){return B()?H=Reflect.construct.bind():H=function(P,D,p){var x=[null];x.push.apply(x,D);var b=Function.bind.apply(P,x),y=new b;return p&&N(y,p.prototype),y},H.apply(null,arguments)}function B(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function k(d){return Function.toString.call(d).indexOf("[native code]")!==-1}function N(d,v){return N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,P){return g.__proto__=P,g},N(d,v)}function L(d){return L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(h){return h.__proto__||Object.getPrototypeOf(h)},L(d)}var T=Math.pow(2,17),l=function(){function d(h){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=h}var v=d.prototype;return v.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},v.abort=function(){this.loader&&this.loader.abort()},v.load=function(g,P){var D=this,p=g.url;if(!p)return Promise.reject(new A({type:I.ErrorTypes.NETWORK_ERROR,details:I.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:g,networkDetails:null},"Fragment does not have a "+(p?"part list":"url")));this.abort();var x=this.config,b=x.fLoader,y=x.loader;return new Promise(function(_,u){D.loader&&D.loader.destroy();var m=D.loader=g.loader=b?new b(x):new y(x),o=C(g),S={timeout:x.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:x.fragLoadingMaxRetryTimeout,highWaterMark:g.sn==="initSegment"?1/0:T};g.stats=m.stats,m.load(o,S,{onSuccess:function(R,G,j,V){D.resetLoader(g,m);var z=R.data;j.resetIV&&g.decryptdata&&(g.decryptdata.iv=new Uint8Array(z.slice(0,16)),z=z.slice(16)),_({frag:g,part:null,payload:z,networkDetails:V})},onError:function(R,G,j){D.resetLoader(g,m),u(new A({type:I.ErrorTypes.NETWORK_ERROR,details:I.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:g,response:R,networkDetails:j}))},onAbort:function(R,G,j){D.resetLoader(g,m),u(new A({type:I.ErrorTypes.NETWORK_ERROR,details:I.ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:g,networkDetails:j}))},onTimeout:function(R,G,j){D.resetLoader(g,m),u(new A({type:I.ErrorTypes.NETWORK_ERROR,details:I.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:g,networkDetails:j}))},onProgress:function(R,G,j,V){P&&P({frag:g,part:null,payload:j,networkDetails:V})}})})},v.loadPart=function(g,P,D){var p=this;this.abort();var x=this.config,b=x.fLoader,y=x.loader;return new Promise(function(_,u){p.loader&&p.loader.destroy();var m=p.loader=g.loader=b?new b(x):new y(x),o=C(g,P),S={timeout:x.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:x.fragLoadingMaxRetryTimeout,highWaterMark:T};P.stats=m.stats,m.load(o,S,{onSuccess:function(R,G,j,V){p.resetLoader(g,m),p.updateStatsFromPart(g,P);var z={frag:g,part:P,payload:R.data,networkDetails:V};D(z),_(z)},onError:function(R,G,j){p.resetLoader(g,m),u(new A({type:I.ErrorTypes.NETWORK_ERROR,details:I.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:g,part:P,response:R,networkDetails:j}))},onAbort:function(R,G,j){g.stats.aborted=P.stats.aborted,p.resetLoader(g,m),u(new A({type:I.ErrorTypes.NETWORK_ERROR,details:I.ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:g,part:P,networkDetails:j}))},onTimeout:function(R,G,j){p.resetLoader(g,m),u(new A({type:I.ErrorTypes.NETWORK_ERROR,details:I.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:g,part:P,networkDetails:j}))}})})},v.updateStatsFromPart=function(g,P){var D=g.stats,p=P.stats,x=p.total;if(D.loaded+=p.loaded,x){var b=Math.round(g.duration/P.duration),y=Math.min(Math.round(D.loaded/x),b),_=b-y,u=_*Math.round(D.loaded/y);D.total=D.loaded+u}else D.total=Math.max(D.loaded,D.total);var m=D.loading,o=p.loading;m.start?m.first+=o.first-o.start:(m.start=o.start,m.first=o.first),m.end=o.end},v.resetLoader=function(g,P){g.loader=null,this.loader===P&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),P.destroy()},d}();function C(d,v){v===void 0&&(v=null);var h=v||d,g={frag:d,part:v,responseType:"arraybuffer",url:h.url,headers:{},rangeStart:0,rangeEnd:0},P=h.byteRangeStartOffset,D=h.byteRangeEndOffset;if((0,F.isFiniteNumber)(P)&&(0,F.isFiniteNumber)(D)){var p,x=P,b=D;if(d.sn==="initSegment"&&((p=d.decryptdata)===null||p===void 0?void 0:p.method)==="AES-128"){var y=D-P;y%16&&(b=D+(16-y%16)),P!==0&&(g.resetIV=!0,x=P-16)}g.rangeStart=x,g.rangeEnd=b}return g}var A=function(d){K(v,d);function v(h){for(var g,P=arguments.length,D=new Array(P>1?P-1:0),p=1;p<P;p++)D[p-1]=arguments[p];return g=d.call.apply(d,[this].concat(D))||this,g.data=void 0,g.data=h,g}return v}(M(Error))},"./src/loader/fragment.ts":(O,w,f)=>{f.r(w),f.d(w,{BaseSegment:()=>l,ElementaryStreamTypes:()=>T,Fragment:()=>C,Part:()=>A});var F=f("./src/polyfills/number.ts"),I=f("./node_modules/url-toolkit/src/url-toolkit.js"),K=f("./src/loader/load-stats.ts");function M(d,v){d.prototype=Object.create(v.prototype),d.prototype.constructor=d,H(d,v)}function H(d,v){return H=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,P){return g.__proto__=P,g},H(d,v)}function B(d,v){for(var h=0;h<v.length;h++){var g=v[h];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(d,N(g.key),g)}}function k(d,v,h){return v&&B(d.prototype,v),h&&B(d,h),Object.defineProperty(d,"prototype",{writable:!1}),d}function N(d){var v=L(d,"string");return typeof v=="symbol"?v:String(v)}function L(d,v){if(typeof d!="object"||d===null)return d;var h=d[Symbol.toPrimitive];if(h!==void 0){var g=h.call(d,v||"default");if(typeof g!="object")return g;throw new TypeError("@@toPrimitive must return a primitive value.")}return(v==="string"?String:Number)(d)}var T;(function(d){d.AUDIO="audio",d.VIDEO="video",d.AUDIOVIDEO="audiovideo"})(T||(T={}));var l=function(){function d(h){var g;this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams=(g={},g[T.AUDIO]=null,g[T.VIDEO]=null,g[T.AUDIOVIDEO]=null,g),this.baseurl=h}var v=d.prototype;return v.setByteRange=function(g,P){var D=g.split("@",2),p=[];D.length===1?p[0]=P?P.byteRangeEndOffset:0:p[0]=parseInt(D[1]),p[1]=parseInt(D[0])+p[0],this._byteRange=p},k(d,[{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"url",get:function(){return!this._url&&this.baseurl&&this.relurl&&(this._url=(0,I.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""},set:function(g){this._url=g}}]),d}(),C=function(d){M(v,d);function v(g,P){var D;return D=d.call(this,P)||this,D._decryptdata=null,D.rawProgramDateTime=null,D.programDateTime=null,D.tagList=[],D.duration=0,D.sn=0,D.levelkeys=void 0,D.type=void 0,D.loader=null,D.keyLoader=null,D.level=-1,D.cc=0,D.startPTS=void 0,D.endPTS=void 0,D.appendedPTS=void 0,D.startDTS=void 0,D.endDTS=void 0,D.start=0,D.deltaPTS=void 0,D.maxStartPTS=void 0,D.minEndPTS=void 0,D.stats=new K.LoadStats,D.urlId=0,D.data=void 0,D.bitrateTest=!1,D.title=null,D.initSegment=null,D.endList=void 0,D.type=g,D}var h=v.prototype;return h.setKeyFormat=function(P){if(this.levelkeys){var D=this.levelkeys[P];D&&!this._decryptdata&&(this._decryptdata=D.getDecryptData(this.sn))}},h.abortRequests=function(){var P,D;(P=this.loader)===null||P===void 0||P.abort(),(D=this.keyLoader)===null||D===void 0||D.abort()},h.setElementaryStreamInfo=function(P,D,p,x,b,y){y===void 0&&(y=!1);var _=this.elementaryStreams,u=_[P];if(!u){_[P]={startPTS:D,endPTS:p,startDTS:x,endDTS:b,partial:y};return}u.startPTS=Math.min(u.startPTS,D),u.endPTS=Math.max(u.endPTS,p),u.startDTS=Math.min(u.startDTS,x),u.endDTS=Math.max(u.endDTS,b)},h.clearElementaryStreamInfo=function(){var P=this.elementaryStreams;P[T.AUDIO]=null,P[T.VIDEO]=null,P[T.AUDIOVIDEO]=null},k(v,[{key:"decryptdata",get:function(){var P=this.levelkeys;if(!P&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){var D=this.levelkeys.identity;if(D)this._decryptdata=D.getDecryptData(this.sn);else{var p=Object.keys(this.levelkeys);if(p.length===1)return this._decryptdata=this.levelkeys[p[0]].getDecryptData(this.sn)}}return this._decryptdata}},{key:"end",get:function(){return this.start+this.duration}},{key:"endProgramDateTime",get:function(){if(this.programDateTime===null||!(0,F.isFiniteNumber)(this.programDateTime))return null;var P=(0,F.isFiniteNumber)(this.duration)?this.duration:0;return this.programDateTime+P*1e3}},{key:"encrypted",get:function(){var P;if((P=this._decryptdata)!==null&&P!==void 0&&P.encrypted)return!0;if(this.levelkeys){var D=Object.keys(this.levelkeys),p=D.length;if(p>1||p===1&&this.levelkeys[D[0]].encrypted)return!0}return!1}}]),v}(l),A=function(d){M(v,d);function v(h,g,P,D,p){var x;x=d.call(this,P)||this,x.fragOffset=0,x.duration=0,x.gap=!1,x.independent=!1,x.relurl=void 0,x.fragment=void 0,x.index=void 0,x.stats=new K.LoadStats,x.duration=h.decimalFloatingPoint("DURATION"),x.gap=h.bool("GAP"),x.independent=h.bool("INDEPENDENT"),x.relurl=h.enumeratedString("URI"),x.fragment=g,x.index=D;var b=h.enumeratedString("BYTERANGE");return b&&x.setByteRange(b,p),p&&(x.fragOffset=p.fragOffset+p.duration),x}return k(v,[{key:"start",get:function(){return this.fragment.start+this.fragOffset}},{key:"end",get:function(){return this.start+this.duration}},{key:"loaded",get:function(){var g=this.elementaryStreams;return!!(g.audio||g.video||g.audiovideo)}}]),v}(l)},"./src/loader/key-loader.ts":(O,w,f)=>{f.r(w),f.d(w,{default:()=>K});var F=f("./src/errors.ts"),I=f("./src/loader/fragment-loader.ts"),K=function(){function M(B){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=B}var H=M.prototype;return H.abort=function(){for(var k in this.keyUriToKeyInfo){var N=this.keyUriToKeyInfo[k].loader;N&&N.abort()}},H.detach=function(){for(var k in this.keyUriToKeyInfo){var N=this.keyUriToKeyInfo[k];(N.mediaKeySessionContext||N.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[k]}},H.destroy=function(){this.detach();for(var k in this.keyUriToKeyInfo){var N=this.keyUriToKeyInfo[k].loader;N&&N.destroy()}this.keyUriToKeyInfo={}},H.createKeyLoadError=function(k,N,L,T){return N===void 0&&(N=F.ErrorDetails.KEY_LOAD_ERROR),new I.LoadError({type:F.ErrorTypes.NETWORK_ERROR,details:N,fatal:!1,frag:k,networkDetails:L})},H.loadClear=function(k,N){var L=this;if(this.emeController&&this.config.emeEnabled)for(var T=k.sn,l=k.cc,C=function(h){var g=N[h];if(l<=g.cc&&(T==="initSegment"||T<g.sn))return L.emeController.selectKeySystemFormat(g).then(function(P){g.setKeyFormat(P)}),"break"},A=0;A<N.length;A++){var d=C(A);if(d==="break")break}},H.load=function(k){var N=this;return!k.decryptdata&&k.encrypted&&this.emeController?this.emeController.selectKeySystemFormat(k).then(function(L){return N.loadInternal(k,L)}):this.loadInternal(k)},H.loadInternal=function(k,N){var L,T;N&&k.setKeyFormat(N);var l=k.decryptdata;if(!l){var C=N?"Expected frag.decryptdata to be defined after setting format "+N:"Missing decryption data on fragment in onKeyLoading";return Promise.reject(this.createKeyLoadError(k,F.ErrorDetails.KEY_LOAD_ERROR,null,C))}var A=l.uri;if(!A)return Promise.reject(this.createKeyLoadError(k,F.ErrorDetails.KEY_LOAD_ERROR,null,'Invalid key URI: "'+A+'"'));var d=this.keyUriToKeyInfo[A];if((L=d)!==null&&L!==void 0&&L.decryptdata.key)return l.key=d.decryptdata.key,Promise.resolve({frag:k,keyInfo:d});if((T=d)!==null&&T!==void 0&&T.keyLoadPromise){var v;switch((v=d.mediaKeySessionContext)===null||v===void 0?void 0:v.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return d.keyLoadPromise.then(function(h){return l.key=h.keyInfo.decryptdata.key,{frag:k,keyInfo:d}})}}switch(d=this.keyUriToKeyInfo[A]={decryptdata:l,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},l.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return l.keyFormat==="identity"?this.loadKeyHTTP(d,k):this.loadKeyEME(d,k);case"AES-128":return this.loadKeyHTTP(d,k);default:return Promise.reject(this.createKeyLoadError(k,F.ErrorDetails.KEY_LOAD_ERROR,null,'Key supplied with unsupported METHOD: "'+l.method+'"'))}},H.loadKeyEME=function(k,N){var L={frag:N,keyInfo:k};if(this.emeController&&this.config.emeEnabled){var T=this.emeController.loadKey(L);if(T)return(k.keyLoadPromise=T.then(function(l){return k.mediaKeySessionContext=l,L})).catch(function(l){throw k.keyLoadPromise=null,l})}return Promise.resolve(L)},H.loadKeyHTTP=function(k,N){var L=this,T=this.config,l=T.loader,C=new l(T);return N.keyLoader=k.loader=C,k.keyLoadPromise=new Promise(function(A,d){var v={keyInfo:k,frag:N,responseType:"arraybuffer",url:k.decryptdata.uri},h={timeout:T.fragLoadingTimeOut,maxRetry:0,retryDelay:T.fragLoadingRetryDelay,maxRetryDelay:T.fragLoadingMaxRetryTimeout,highWaterMark:0},g={onSuccess:function(D,p,x,b){var y=x.frag,_=x.keyInfo,u=x.url;if(!y.decryptdata||_!==L.keyUriToKeyInfo[u])return d(L.createKeyLoadError(y,F.ErrorDetails.KEY_LOAD_ERROR,b,"after key load, decryptdata unset or changed"));_.decryptdata.key=y.decryptdata.key=new Uint8Array(D.data),y.keyLoader=null,_.loader=null,A({frag:y,keyInfo:_})},onError:function(D,p,x){L.resetLoader(p),d(L.createKeyLoadError(N,F.ErrorDetails.KEY_LOAD_ERROR,x))},onTimeout:function(D,p,x){L.resetLoader(p),d(L.createKeyLoadError(N,F.ErrorDetails.KEY_LOAD_TIMEOUT,x))},onAbort:function(D,p,x){L.resetLoader(p),d(L.createKeyLoadError(N,F.ErrorDetails.INTERNAL_ABORTED,x))}};C.load(v,h,g)})},H.resetLoader=function(k){var N=k.frag,L=k.keyInfo,T=k.url,l=L.loader;N.keyLoader===l&&(N.keyLoader=null,L.loader=null),delete this.keyUriToKeyInfo[T],l&&l.destroy()},M}()},"./src/loader/level-details.ts":(O,w,f)=>{f.r(w),f.d(w,{LevelDetails:()=>k});var F=f("./src/polyfills/number.ts");function I(N,L){for(var T=0;T<L.length;T++){var l=L[T];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(N,M(l.key),l)}}function K(N,L,T){return L&&I(N.prototype,L),T&&I(N,T),Object.defineProperty(N,"prototype",{writable:!1}),N}function M(N){var L=H(N,"string");return typeof L=="symbol"?L:String(L)}function H(N,L){if(typeof N!="object"||N===null)return N;var T=N[Symbol.toPrimitive];if(T!==void 0){var l=T.call(N,L||"default");if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(L==="string"?String:Number)(N)}var B=10,k=function(){function N(T){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=T}var L=N.prototype;return L.reloaded=function(l){if(!l){this.advanced=!0,this.updated=!0;return}var C=this.lastPartSn-l.lastPartSn,A=this.lastPartIndex-l.lastPartIndex;this.updated=this.endSN!==l.endSN||!!A||!!C,this.advanced=this.endSN>l.endSN||C>0||C===0&&A>0,this.updated||this.advanced?this.misses=Math.floor(l.misses*.6):this.misses=l.misses+1,this.availabilityDelay=l.availabilityDelay},K(N,[{key:"hasProgramDateTime",get:function(){return this.fragments.length?(0,F.isFiniteNumber)(this.fragments[this.fragments.length-1].programDateTime):!1}},{key:"levelTargetDuration",get:function(){return this.averagetargetduration||this.targetduration||B}},{key:"drift",get:function(){var l=this.driftEndTime-this.driftStartTime;if(l>0){var C=this.driftEnd-this.driftStart;return C*1e3/l}return 1}},{key:"edge",get:function(){return this.partEnd||this.fragmentEnd}},{key:"partEnd",get:function(){var l;return(l=this.partList)!==null&&l!==void 0&&l.length?this.partList[this.partList.length-1].end:this.fragmentEnd}},{key:"fragmentEnd",get:function(){var l;return(l=this.fragments)!==null&&l!==void 0&&l.length?this.fragments[this.fragments.length-1].end:0}},{key:"age",get:function(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}},{key:"lastPartIndex",get:function(){var l;return(l=this.partList)!==null&&l!==void 0&&l.length?this.partList[this.partList.length-1].index:-1}},{key:"lastPartSn",get:function(){var l;return(l=this.partList)!==null&&l!==void 0&&l.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}]),N}()},"./src/loader/level-key.ts":(O,w,f)=>{f.r(w),f.d(w,{LevelKey:()=>k});var F=f("./src/utils/keysystem-util.ts"),I=f("./src/utils/mediakeys-helper.ts"),K=f("./src/utils/mp4-tools.ts"),M=f("./src/utils/logger.ts"),H=f("./src/utils/numeric-encoding-utils.ts"),B={},k=function(){L.clearKeyUriToKeyIdMap=function(){B={}};function L(l,C,A,d,v){d===void 0&&(d=[1]),v===void 0&&(v=null),this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=l,this.uri=C,this.keyFormat=A,this.keyFormatVersions=d,this.iv=v,this.encrypted=l?l!=="NONE":!1,this.isCommonEncryption=this.encrypted&&l!=="AES-128"}var T=L.prototype;return T.isSupported=function(){if(this.method){if(this.method==="AES-128"||this.method==="NONE")return!0;switch(this.keyFormat){case"identity":return this.method==="SAMPLE-AES";case I.KeySystemFormats.FAIRPLAY:case I.KeySystemFormats.WIDEVINE:case I.KeySystemFormats.PLAYREADY:case I.KeySystemFormats.CLEARKEY:return["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1},T.getDecryptData=function(C){if(!this.encrypted||!this.uri)return null;if(this.method==="AES-128"&&this.uri&&!this.iv){typeof C!="number"&&(this.method==="AES-128"&&!this.iv&&M.logger.warn('missing IV for initialization segment with method="'+this.method+'" - compliance issue'),C=0);var A=N(C),d=new L(this.method,this.uri,"identity",this.keyFormatVersions,A);return d}var v=(0,F.convertDataUriToArrayBytes)(this.uri);if(v)switch(this.keyFormat){case I.KeySystemFormats.WIDEVINE:this.pssh=v,v.length>=22&&(this.keyId=v.subarray(v.length-22,v.length-6));break;case I.KeySystemFormats.PLAYREADY:{var h=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=(0,K.mp4pssh)(h,null,v);var g=new Uint16Array(v.buffer,v.byteOffset,v.byteLength/2),P=String.fromCharCode.apply(null,Array.from(g)),D=P.substring(P.indexOf("<"),P.length),p=new DOMParser,x=p.parseFromString(D,"text/xml"),b=x.getElementsByTagName("KID")[0];if(b){var y=b.childNodes[0]?b.childNodes[0].nodeValue:b.getAttribute("VALUE");if(y){var _=(0,H.base64Decode)(y).subarray(0,16);(0,F.changeEndianness)(_),this.keyId=_}}break}default:{var u=v.subarray(0,16);if(u.length!==16){var m=new Uint8Array(16);m.set(u,16-u.length),u=m}this.keyId=u;break}}if(!this.keyId||this.keyId.byteLength!==16){var o=B[this.uri];if(!o){var S=Object.keys(B).length%Number.MAX_SAFE_INTEGER;o=new Uint8Array(16);var U=new DataView(o.buffer,12,4);U.setUint32(0,S),B[this.uri]=o}this.keyId=o}return this},L}();function N(L){for(var T=new Uint8Array(16),l=12;l<16;l++)T[l]=L>>8*(15-l)&255;return T}},"./src/loader/load-stats.ts":(O,w,f)=>{f.r(w),f.d(w,{LoadStats:()=>F});var F=function(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}},"./src/loader/m3u8-parser.ts":(O,w,f)=>{f.r(w),f.d(w,{default:()=>v});var F=f("./src/polyfills/number.ts"),I=f("./node_modules/url-toolkit/src/url-toolkit.js"),K=f("./src/loader/date-range.ts"),M=f("./src/loader/fragment.ts"),H=f("./src/loader/level-details.ts"),B=f("./src/loader/level-key.ts"),k=f("./src/utils/attr-list.ts"),N=f("./src/utils/logger.ts"),L=f("./src/utils/codecs.ts");function T(){return T=Object.assign?Object.assign.bind():function(y){for(var _=1;_<arguments.length;_++){var u=arguments[_];for(var m in u)Object.prototype.hasOwnProperty.call(u,m)&&(y[m]=u[m])}return y},T.apply(this,arguments)}var l=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-SESSION-DATA:([^\r\n]*)[\r\n]+|#EXT-X-SESSION-KEY:([^\n\r]*)[\r\n]+/g,C=/#EXT-X-MEDIA:(.*)/g,A=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),d=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|")),v=function(){function y(){}return y.findGroup=function(u,m){for(var o=0;o<u.length;o++){var S=u[o];if(S.id===m)return S}},y.convertAVC1ToAVCOTI=function(u){var m=u.split(".");if(m.length>2){var o=m.shift()+".";return o+=parseInt(m.shift()).toString(16),o+=("000"+parseInt(m.shift()).toString(16)).slice(-4),o}return u},y.resolve=function(u,m){return(0,I.buildAbsoluteURL)(m,u,{alwaysNormalize:!0})},y.parseMasterPlaylist=function(u,m){var o=[],S=[],U={},R=[],G=!1;l.lastIndex=0;for(var j;(j=l.exec(u))!=null;)if(j[1]){var V,z=new k.AttrList(j[1]),$={attrs:z,bitrate:z.decimalInteger("AVERAGE-BANDWIDTH")||z.decimalInteger("BANDWIDTH"),name:z.NAME,url:y.resolve(j[2],m)},X=z.decimalResolution("RESOLUTION");X&&($.width=X.width,$.height=X.height),g((z.CODECS||"").split(/[ ,]+/).filter(function(ae){return ae}),$),$.videoCodec&&$.videoCodec.indexOf("avc1")!==-1&&($.videoCodec=y.convertAVC1ToAVCOTI($.videoCodec)),(V=$.unknownCodecs)!==null&&V!==void 0&&V.length||S.push($),o.push($)}else if(j[3]){var J=new k.AttrList(j[3]);J["DATA-ID"]&&(G=!0,U[J["DATA-ID"]]=J)}else if(j[4]){var q=j[4],ee=h(q,m);ee.encrypted&&ee.isSupported()?R.push(ee):N.logger.warn('[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "'+q+'"')}var ne=S.length>0&&S.length<o.length;return{levels:ne?S:o,sessionData:G?U:null,sessionKeys:R.length?R:null}},y.parseMasterPlaylistMedia=function(u,m,o,S){S===void 0&&(S=[]);var U,R=[],G=0;for(C.lastIndex=0;(U=C.exec(u))!==null;){var j=new k.AttrList(U[1]);if(j.TYPE===o){var V={attrs:j,bitrate:0,id:G++,groupId:j["GROUP-ID"],instreamId:j["INSTREAM-ID"],name:j.NAME||j.LANGUAGE||"",type:o,default:j.bool("DEFAULT"),autoselect:j.bool("AUTOSELECT"),forced:j.bool("FORCED"),lang:j.LANGUAGE,url:j.URI?y.resolve(j.URI,m):""};if(S.length){var z=y.findGroup(S,V.groupId)||S[0];P(V,z,"audioCodec"),P(V,z,"textCodec")}R.push(V)}}return R},y.parseLevelPlaylist=function(u,m,o,S,U){var R=new H.LevelDetails(m),G=R.fragments,j=null,V=0,z=0,$=0,X=0,J=null,q=new M.Fragment(S,m),ee,ne,ae,ue=-1,le=!1;for(A.lastIndex=0,R.m3u8=u;(ee=A.exec(u))!==null;){le&&(le=!1,q=new M.Fragment(S,m),q.start=$,q.sn=V,q.cc=X,q.level=o,j&&(q.initSegment=j,q.rawProgramDateTime=j.rawProgramDateTime,j.rawProgramDateTime=null));var fe=ee[1];if(fe){q.duration=parseFloat(fe);var ye=(" "+ee[2]).slice(1);q.title=ye||null,q.tagList.push(ye?["INF",fe,ye]:["INF",fe])}else if(ee[3])(0,F.isFiniteNumber)(q.duration)&&(q.start=$,ae&&b(q,ae,R),q.sn=V,q.level=o,q.cc=X,q.urlId=U,G.push(q),q.relurl=(" "+ee[3]).slice(1),p(q,J),J=q,$+=q.duration,V++,z=0,le=!0);else if(ee[4]){var Le=(" "+ee[4]).slice(1);J?q.setByteRange(Le,J):q.setByteRange(Le)}else if(ee[5])q.rawProgramDateTime=(" "+ee[5]).slice(1),q.tagList.push(["PROGRAM-DATE-TIME",q.rawProgramDateTime]),ue===-1&&(ue=G.length);else{if(ee=ee[0].match(d),!ee){N.logger.warn("No matches on slow regex match for level playlist!");continue}for(ne=1;ne<ee.length&&!(typeof ee[ne]<"u");ne++);var Ee=(" "+ee[ne]).slice(1),ve=(" "+ee[ne+1]).slice(1),Ae=ee[ne+2]?(" "+ee[ne+2]).slice(1):"";switch(Ee){case"PLAYLIST-TYPE":R.type=ve.toUpperCase();break;case"MEDIA-SEQUENCE":V=R.startSN=parseInt(ve);break;case"SKIP":{var we=new k.AttrList(ve),be=we.decimalInteger("SKIPPED-SEGMENTS");if((0,F.isFiniteNumber)(be)){R.skippedSegments=be;for(var ct=be;ct--;)G.unshift(null);V+=be}var Ge=we.enumeratedString("RECENTLY-REMOVED-DATERANGES");Ge&&(R.recentlyRemovedDateranges=Ge.split("	"));break}case"TARGETDURATION":R.targetduration=parseFloat(ve);break;case"VERSION":R.version=parseInt(ve);break;case"EXTM3U":break;case"ENDLIST":R.live=!1;break;case"#":(ve||Ae)&&q.tagList.push(Ae?[ve,Ae]:[ve]);break;case"DISCONTINUITY":X++,q.tagList.push(["DIS"]);break;case"GAP":q.tagList.push([Ee]);break;case"BITRATE":q.tagList.push([Ee,ve]);break;case"DATERANGE":{var qe=new k.AttrList(ve),Ke=new K.DateRange(qe,R.dateRanges[qe.ID]);Ke.isValid||R.skippedSegments?R.dateRanges[Ke.id]=Ke:N.logger.warn('Ignoring invalid DATERANGE tag: "'+ve+'"'),q.tagList.push(["EXT-X-DATERANGE",ve]);break}case"DISCONTINUITY-SEQUENCE":X=parseInt(ve);break;case"KEY":{var He=h(ve,m);if(He.isSupported()){if(He.method==="NONE"){ae=void 0;break}ae||(ae={}),ae[He.keyFormat]&&(ae=T({},ae)),ae[He.keyFormat]=He}else N.logger.warn('[Keys] Ignoring invalid EXT-X-KEY tag: "'+ve+'"');break}case"START":{var ze=new k.AttrList(ve),nt=ze.decimalFloatingPoint("TIME-OFFSET");(0,F.isFiniteNumber)(nt)&&(R.startTimeOffset=nt);break}case"MAP":{var Et=new k.AttrList(ve);if(q.duration){var ot=new M.Fragment(S,m);x(ot,Et,o,ae),j=ot,q.initSegment=j,j.rawProgramDateTime&&!q.rawProgramDateTime&&(q.rawProgramDateTime=j.rawProgramDateTime)}else x(q,Et,o,ae),j=q,le=!0;break}case"SERVER-CONTROL":{var _t=new k.AttrList(ve);R.canBlockReload=_t.bool("CAN-BLOCK-RELOAD"),R.canSkipUntil=_t.optionalFloat("CAN-SKIP-UNTIL",0),R.canSkipDateRanges=R.canSkipUntil>0&&_t.bool("CAN-SKIP-DATERANGES"),R.partHoldBack=_t.optionalFloat("PART-HOLD-BACK",0),R.holdBack=_t.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{var ir=new k.AttrList(ve);R.partTarget=ir.decimalFloatingPoint("PART-TARGET");break}case"PART":{var Dt=R.partList;Dt||(Dt=R.partList=[]);var pr=z>0?Dt[Dt.length-1]:void 0,Xt=z++,ar=new M.Part(new k.AttrList(ve),q,m,Xt,pr);Dt.push(ar),q.duration+=ar.duration;break}case"PRELOAD-HINT":{var sr=new k.AttrList(ve);R.preloadHint=sr;break}case"RENDITION-REPORT":{var wt=new k.AttrList(ve);R.renditionReports=R.renditionReports||[],R.renditionReports.push(wt);break}default:N.logger.warn("line parsed but not handled: "+ee);break}}}J&&!J.relurl?(G.pop(),$-=J.duration,R.partList&&(R.fragmentHint=J)):R.partList&&(p(q,J),q.cc=X,R.fragmentHint=q,ae&&b(q,ae,R));var Lt=G.length,Qt=G[0],mr=G[Lt-1];if($+=R.skippedSegments*R.targetduration,$>0&&Lt&&mr){R.averagetargetduration=$/Lt;var pt=mr.sn;R.endSN=pt!=="initSegment"?pt:0,R.live||(mr.endList=!0),Qt&&(R.startCC=Qt.cc)}else R.endSN=0,R.startCC=0;return R.fragmentHint&&($+=R.fragmentHint.duration),R.totalduration=$,R.endCC=X,ue>0&&D(G,ue),R},y}();function h(y,_){var u,m,o=new k.AttrList(y),S=(u=o.enumeratedString("METHOD"))!=null?u:"",U=o.URI,R=o.hexadecimalInteger("IV"),G=o.enumeratedString("KEYFORMATVERSIONS"),j=(m=o.enumeratedString("KEYFORMAT"))!=null?m:"identity";U&&o.IV&&!R&&N.logger.error("Invalid IV: "+o.IV);var V=U?v.resolve(U,_):"",z=(G||"1").split("/").map(Number).filter(Number.isFinite);return new B.LevelKey(S,V,j,z,R)}function g(y,_){["video","audio","text"].forEach(function(u){var m=y.filter(function(S){return(0,L.isCodecType)(S,u)});if(m.length){var o=m.filter(function(S){return S.lastIndexOf("avc1",0)===0||S.lastIndexOf("mp4a",0)===0});_[u+"Codec"]=o.length>0?o[0]:m[0],y=y.filter(function(S){return m.indexOf(S)===-1})}}),_.unknownCodecs=y}function P(y,_,u){var m=_[u];m&&(y[u]=m)}function D(y,_){for(var u=y[_],m=_;m--;){var o=y[m];if(!o)return;o.programDateTime=u.programDateTime-o.duration*1e3,u=o}}function p(y,_){y.rawProgramDateTime?y.programDateTime=Date.parse(y.rawProgramDateTime):_!=null&&_.programDateTime&&(y.programDateTime=_.endProgramDateTime),(0,F.isFiniteNumber)(y.programDateTime)||(y.programDateTime=null,y.rawProgramDateTime=null)}function x(y,_,u,m){y.relurl=_.URI,_.BYTERANGE&&y.setByteRange(_.BYTERANGE),y.level=u,y.sn="initSegment",m&&(y.levelkeys=m),y.initSegment=null}function b(y,_,u){y.levelkeys=_;var m=u.encryptedFragments;(!m.length||m[m.length-1].levelkeys!==_)&&Object.keys(_).some(function(o){return _[o].isCommonEncryption})&&m.push(y)}},"./src/loader/playlist-loader.ts":(O,w,f)=>{f.r(w),f.d(w,{default:()=>l});var F=f("./src/polyfills/number.ts"),I=f("./src/events.ts"),K=f("./src/errors.ts"),M=f("./src/utils/logger.ts"),H=f("./src/loader/m3u8-parser.ts"),B=f("./src/types/loader.ts"),k=f("./src/utils/attr-list.ts");function N(C){var A=C.type;switch(A){case B.PlaylistContextType.AUDIO_TRACK:return B.PlaylistLevelType.AUDIO;case B.PlaylistContextType.SUBTITLE_TRACK:return B.PlaylistLevelType.SUBTITLE;default:return B.PlaylistLevelType.MAIN}}function L(C,A){var d=C.url;return(d===void 0||d.indexOf("data:")===0)&&(d=A.url),d}var T=function(){function C(d){this.hls=void 0,this.loaders=Object.create(null),this.hls=d,this.registerListeners()}var A=C.prototype;return A.startLoad=function(v){},A.stopLoad=function(){this.destroyInternalLoaders()},A.registerListeners=function(){var v=this.hls;v.on(I.Events.MANIFEST_LOADING,this.onManifestLoading,this),v.on(I.Events.LEVEL_LOADING,this.onLevelLoading,this),v.on(I.Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),v.on(I.Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},A.unregisterListeners=function(){var v=this.hls;v.off(I.Events.MANIFEST_LOADING,this.onManifestLoading,this),v.off(I.Events.LEVEL_LOADING,this.onLevelLoading,this),v.off(I.Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),v.off(I.Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},A.createInternalLoader=function(v){var h=this.hls.config,g=h.pLoader,P=h.loader,D=g||P,p=new D(h);return v.loader=p,this.loaders[v.type]=p,p},A.getInternalLoader=function(v){return this.loaders[v.type]},A.resetInternalLoader=function(v){this.loaders[v]&&delete this.loaders[v]},A.destroyInternalLoaders=function(){for(var v in this.loaders){var h=this.loaders[v];h&&h.destroy(),this.resetInternalLoader(v)}},A.destroy=function(){this.unregisterListeners(),this.destroyInternalLoaders()},A.onManifestLoading=function(v,h){var g=h.url;this.load({id:null,groupId:null,level:0,responseType:"text",type:B.PlaylistContextType.MANIFEST,url:g,deliveryDirectives:null})},A.onLevelLoading=function(v,h){var g=h.id,P=h.level,D=h.url,p=h.deliveryDirectives;this.load({id:g,groupId:null,level:P,responseType:"text",type:B.PlaylistContextType.LEVEL,url:D,deliveryDirectives:p})},A.onAudioTrackLoading=function(v,h){var g=h.id,P=h.groupId,D=h.url,p=h.deliveryDirectives;this.load({id:g,groupId:P,level:null,responseType:"text",type:B.PlaylistContextType.AUDIO_TRACK,url:D,deliveryDirectives:p})},A.onSubtitleTrackLoading=function(v,h){var g=h.id,P=h.groupId,D=h.url,p=h.deliveryDirectives;this.load({id:g,groupId:P,level:null,responseType:"text",type:B.PlaylistContextType.SUBTITLE_TRACK,url:D,deliveryDirectives:p})},A.load=function(v){var h,g=this.hls.config,P=this.getInternalLoader(v);if(P){var D=P.context;if(D&&D.url===v.url){M.logger.trace("[playlist-loader]: playlist request ongoing");return}M.logger.log("[playlist-loader]: aborting previous loader for type: "+v.type),P.abort()}var p,x,b,y;switch(v.type){case B.PlaylistContextType.MANIFEST:p=g.manifestLoadingMaxRetry,x=g.manifestLoadingTimeOut,b=g.manifestLoadingRetryDelay,y=g.manifestLoadingMaxRetryTimeout;break;case B.PlaylistContextType.LEVEL:case B.PlaylistContextType.AUDIO_TRACK:case B.PlaylistContextType.SUBTITLE_TRACK:p=0,x=g.levelLoadingTimeOut;break;default:p=g.levelLoadingMaxRetry,x=g.levelLoadingTimeOut,b=g.levelLoadingRetryDelay,y=g.levelLoadingMaxRetryTimeout;break}if(P=this.createInternalLoader(v),(h=v.deliveryDirectives)!==null&&h!==void 0&&h.part){var _;if(v.type===B.PlaylistContextType.LEVEL&&v.level!==null?_=this.hls.levels[v.level].details:v.type===B.PlaylistContextType.AUDIO_TRACK&&v.id!==null?_=this.hls.audioTracks[v.id].details:v.type===B.PlaylistContextType.SUBTITLE_TRACK&&v.id!==null&&(_=this.hls.subtitleTracks[v.id].details),_){var u=_.partTarget,m=_.targetduration;u&&m&&(x=Math.min(Math.max(u*3,m*.8)*1e3,x))}}var o={timeout:x,maxRetry:p,retryDelay:b,maxRetryDelay:y,highWaterMark:0},S={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};P.load(v,o,S)},A.loadsuccess=function(v,h,g,P){P===void 0&&(P=null),this.resetInternalLoader(g.type);var D=v.data;if(D.indexOf("#EXTM3U")!==0){this.handleManifestParsingError(v,g,"no EXTM3U delimiter",P);return}h.parsing.start=performance.now(),D.indexOf("#EXTINF:")>0||D.indexOf("#EXT-X-TARGETDURATION:")>0?this.handleTrackOrLevelPlaylist(v,h,g,P):this.handleMasterPlaylist(v,h,g,P)},A.loaderror=function(v,h,g){g===void 0&&(g=null),this.handleNetworkError(h,g,!1,v)},A.loadtimeout=function(v,h,g){g===void 0&&(g=null),this.handleNetworkError(h,g,!0)},A.handleMasterPlaylist=function(v,h,g,P){var D=this.hls,p=v.data,x=L(v,g),b=H.default.parseMasterPlaylist(p,x),y=b.levels,_=b.sessionData,u=b.sessionKeys;if(!y.length){this.handleManifestParsingError(v,g,"no level found in manifest",P);return}var m=y.map(function(j){return{id:j.attrs.AUDIO,audioCodec:j.audioCodec}}),o=y.map(function(j){return{id:j.attrs.SUBTITLES,textCodec:j.textCodec}}),S=H.default.parseMasterPlaylistMedia(p,x,"AUDIO",m),U=H.default.parseMasterPlaylistMedia(p,x,"SUBTITLES",o),R=H.default.parseMasterPlaylistMedia(p,x,"CLOSED-CAPTIONS");if(S.length){var G=S.some(function(j){return!j.url});!G&&y[0].audioCodec&&!y[0].attrs.AUDIO&&(M.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),S.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new k.AttrList({}),bitrate:0,url:""}))}D.trigger(I.Events.MANIFEST_LOADED,{levels:y,audioTracks:S,subtitles:U,captions:R,url:x,stats:h,networkDetails:P,sessionData:_,sessionKeys:u})},A.handleTrackOrLevelPlaylist=function(v,h,g,P){var D=this.hls,p=g.id,x=g.level,b=g.type,y=L(v,g),_=(0,F.isFiniteNumber)(p)?p:0,u=(0,F.isFiniteNumber)(x)?x:_,m=N(g),o=H.default.parseLevelPlaylist(v.data,y,u,m,_);if(!o.fragments.length){D.trigger(I.Events.ERROR,{type:K.ErrorTypes.NETWORK_ERROR,details:K.ErrorDetails.LEVEL_EMPTY_ERROR,fatal:!1,url:y,reason:"no fragments found in level",level:typeof g.level=="number"?g.level:void 0});return}if(b===B.PlaylistContextType.MANIFEST){var S={attrs:new k.AttrList({}),bitrate:0,details:o,name:"",url:y};D.trigger(I.Events.MANIFEST_LOADED,{levels:[S],audioTracks:[],url:y,stats:h,networkDetails:P,sessionData:null,sessionKeys:null})}h.parsing.end=performance.now(),g.levelDetails=o,this.handlePlaylistLoaded(v,h,g,P)},A.handleManifestParsingError=function(v,h,g,P){this.hls.trigger(I.Events.ERROR,{type:K.ErrorTypes.NETWORK_ERROR,details:K.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:h.type===B.PlaylistContextType.MANIFEST,url:v.url,reason:g,response:v,context:h,networkDetails:P})},A.handleNetworkError=function(v,h,g,P){g===void 0&&(g=!1),M.logger.warn("[playlist-loader]: A network "+(g?"timeout":"error")+" occurred while loading "+v.type+" level: "+v.level+" id: "+v.id+' group-id: "'+v.groupId+'"');var D=K.ErrorDetails.UNKNOWN,p=!1,x=this.getInternalLoader(v);switch(v.type){case B.PlaylistContextType.MANIFEST:D=g?K.ErrorDetails.MANIFEST_LOAD_TIMEOUT:K.ErrorDetails.MANIFEST_LOAD_ERROR,p=!0;break;case B.PlaylistContextType.LEVEL:D=g?K.ErrorDetails.LEVEL_LOAD_TIMEOUT:K.ErrorDetails.LEVEL_LOAD_ERROR,p=!1;break;case B.PlaylistContextType.AUDIO_TRACK:D=g?K.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:K.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,p=!1;break;case B.PlaylistContextType.SUBTITLE_TRACK:D=g?K.ErrorDetails.SUBTITLE_TRACK_LOAD_TIMEOUT:K.ErrorDetails.SUBTITLE_LOAD_ERROR,p=!1;break}x&&this.resetInternalLoader(v.type);var b={type:K.ErrorTypes.NETWORK_ERROR,details:D,fatal:p,url:v.url,loader:x,context:v,networkDetails:h};P&&(b.response=P),this.hls.trigger(I.Events.ERROR,b)},A.handlePlaylistLoaded=function(v,h,g,P){var D=g.type,p=g.level,x=g.id,b=g.groupId,y=g.loader,_=g.levelDetails,u=g.deliveryDirectives;if(!(_!=null&&_.targetduration)){this.handleManifestParsingError(v,g,"invalid target duration",P);return}if(y)switch(_.live&&(y.getCacheAge&&(_.ageHeader=y.getCacheAge()||0),(!y.getCacheAge||isNaN(_.ageHeader))&&(_.ageHeader=0)),D){case B.PlaylistContextType.MANIFEST:case B.PlaylistContextType.LEVEL:this.hls.trigger(I.Events.LEVEL_LOADED,{details:_,level:p||0,id:x||0,stats:h,networkDetails:P,deliveryDirectives:u});break;case B.PlaylistContextType.AUDIO_TRACK:this.hls.trigger(I.Events.AUDIO_TRACK_LOADED,{details:_,id:x||0,groupId:b||"",stats:h,networkDetails:P,deliveryDirectives:u});break;case B.PlaylistContextType.SUBTITLE_TRACK:this.hls.trigger(I.Events.SUBTITLE_TRACK_LOADED,{details:_,id:x||0,groupId:b||"",stats:h,networkDetails:P,deliveryDirectives:u});break}},C}();const l=T},"./src/polyfills/number.ts":(O,w,f)=>{f.r(w),f.d(w,{MAX_SAFE_INTEGER:()=>I,isFiniteNumber:()=>F});var F=Number.isFinite||function(K){return typeof K=="number"&&isFinite(K)},I=Number.MAX_SAFE_INTEGER||9007199254740991},"./src/remux/aac-helper.ts":(O,w,f)=>{f.r(w),f.d(w,{default:()=>I});var F=function(){function K(){}return K.getSilentFrame=function(H,B){switch(H){case"mp4a.40.2":if(B===1)return new Uint8Array([0,200,0,128,35,128]);if(B===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(B===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(B===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(B===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(B===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(B===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(B===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(B===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}},K}();const I=F},"./src/remux/mp4-generator.ts":(O,w,f)=>{f.r(w),f.d(w,{default:()=>K});var F=Math.pow(2,32)-1,I=function(){function M(){}return M.init=function(){M.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var B;for(B in M.types)M.types.hasOwnProperty(B)&&(M.types[B]=[B.charCodeAt(0),B.charCodeAt(1),B.charCodeAt(2),B.charCodeAt(3)]);var k=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),N=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);M.HDLR_TYPES={video:k,audio:N};var L=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),T=new Uint8Array([0,0,0,0,0,0,0,0]);M.STTS=M.STSC=M.STCO=T,M.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),M.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),M.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),M.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var l=new Uint8Array([105,115,111,109]),C=new Uint8Array([97,118,99,49]),A=new Uint8Array([0,0,0,1]);M.FTYP=M.box(M.types.ftyp,l,A,l,C),M.DINF=M.box(M.types.dinf,M.box(M.types.dref,L))},M.box=function(B){for(var k=8,N=arguments.length,L=new Array(N>1?N-1:0),T=1;T<N;T++)L[T-1]=arguments[T];for(var l=L.length,C=l;l--;)k+=L[l].byteLength;var A=new Uint8Array(k);for(A[0]=k>>24&255,A[1]=k>>16&255,A[2]=k>>8&255,A[3]=k&255,A.set(B,4),l=0,k=8;l<C;l++)A.set(L[l],k),k+=L[l].byteLength;return A},M.hdlr=function(B){return M.box(M.types.hdlr,M.HDLR_TYPES[B])},M.mdat=function(B){return M.box(M.types.mdat,B)},M.mdhd=function(B,k){k*=B;var N=Math.floor(k/(F+1)),L=Math.floor(k%(F+1));return M.box(M.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,B>>24&255,B>>16&255,B>>8&255,B&255,N>>24,N>>16&255,N>>8&255,N&255,L>>24,L>>16&255,L>>8&255,L&255,85,196,0,0]))},M.mdia=function(B){return M.box(M.types.mdia,M.mdhd(B.timescale,B.duration),M.hdlr(B.type),M.minf(B))},M.mfhd=function(B){return M.box(M.types.mfhd,new Uint8Array([0,0,0,0,B>>24,B>>16&255,B>>8&255,B&255]))},M.minf=function(B){return B.type==="audio"?M.box(M.types.minf,M.box(M.types.smhd,M.SMHD),M.DINF,M.stbl(B)):M.box(M.types.minf,M.box(M.types.vmhd,M.VMHD),M.DINF,M.stbl(B))},M.moof=function(B,k,N){return M.box(M.types.moof,M.mfhd(B),M.traf(N,k))},M.moov=function(B){for(var k=B.length,N=[];k--;)N[k]=M.trak(B[k]);return M.box.apply(null,[M.types.moov,M.mvhd(B[0].timescale,B[0].duration)].concat(N).concat(M.mvex(B)))},M.mvex=function(B){for(var k=B.length,N=[];k--;)N[k]=M.trex(B[k]);return M.box.apply(null,[M.types.mvex].concat(N))},M.mvhd=function(B,k){k*=B;var N=Math.floor(k/(F+1)),L=Math.floor(k%(F+1)),T=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,B>>24&255,B>>16&255,B>>8&255,B&255,N>>24,N>>16&255,N>>8&255,N&255,L>>24,L>>16&255,L>>8&255,L&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return M.box(M.types.mvhd,T)},M.sdtp=function(B){var k=B.samples||[],N=new Uint8Array(4+k.length),L,T;for(L=0;L<k.length;L++)T=k[L].flags,N[L+4]=T.dependsOn<<4|T.isDependedOn<<2|T.hasRedundancy;return M.box(M.types.sdtp,N)},M.stbl=function(B){return M.box(M.types.stbl,M.stsd(B),M.box(M.types.stts,M.STTS),M.box(M.types.stsc,M.STSC),M.box(M.types.stsz,M.STSZ),M.box(M.types.stco,M.STCO))},M.avc1=function(B){var k=[],N=[],L,T,l;for(L=0;L<B.sps.length;L++)T=B.sps[L],l=T.byteLength,k.push(l>>>8&255),k.push(l&255),k=k.concat(Array.prototype.slice.call(T));for(L=0;L<B.pps.length;L++)T=B.pps[L],l=T.byteLength,N.push(l>>>8&255),N.push(l&255),N=N.concat(Array.prototype.slice.call(T));var C=M.box(M.types.avcC,new Uint8Array([1,k[3],k[4],k[5],255,224|B.sps.length].concat(k).concat([B.pps.length]).concat(N))),A=B.width,d=B.height,v=B.pixelRatio[0],h=B.pixelRatio[1];return M.box(M.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,A>>8&255,A&255,d>>8&255,d&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),C,M.box(M.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),M.box(M.types.pasp,new Uint8Array([v>>24,v>>16&255,v>>8&255,v&255,h>>24,h>>16&255,h>>8&255,h&255])))},M.esds=function(B){var k=B.config.length;return new Uint8Array([0,0,0,0,3,23+k,0,1,0,4,15+k,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([k]).concat(B.config).concat([6,1,2]))},M.mp4a=function(B){var k=B.samplerate;return M.box(M.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,B.channelCount,0,16,0,0,0,0,k>>8&255,k&255,0,0]),M.box(M.types.esds,M.esds(B)))},M.mp3=function(B){var k=B.samplerate;return M.box(M.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,B.channelCount,0,16,0,0,0,0,k>>8&255,k&255,0,0]))},M.stsd=function(B){return B.type==="audio"?B.segmentCodec==="mp3"&&B.codec==="mp3"?M.box(M.types.stsd,M.STSD,M.mp3(B)):M.box(M.types.stsd,M.STSD,M.mp4a(B)):M.box(M.types.stsd,M.STSD,M.avc1(B))},M.tkhd=function(B){var k=B.id,N=B.duration*B.timescale,L=B.width,T=B.height,l=Math.floor(N/(F+1)),C=Math.floor(N%(F+1));return M.box(M.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,k>>24&255,k>>16&255,k>>8&255,k&255,0,0,0,0,l>>24,l>>16&255,l>>8&255,l&255,C>>24,C>>16&255,C>>8&255,C&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,L>>8&255,L&255,0,0,T>>8&255,T&255,0,0]))},M.traf=function(B,k){var N=M.sdtp(B),L=B.id,T=Math.floor(k/(F+1)),l=Math.floor(k%(F+1));return M.box(M.types.traf,M.box(M.types.tfhd,new Uint8Array([0,0,0,0,L>>24,L>>16&255,L>>8&255,L&255])),M.box(M.types.tfdt,new Uint8Array([1,0,0,0,T>>24,T>>16&255,T>>8&255,T&255,l>>24,l>>16&255,l>>8&255,l&255])),M.trun(B,N.length+16+20+8+16+8+8),N)},M.trak=function(B){return B.duration=B.duration||4294967295,M.box(M.types.trak,M.tkhd(B),M.mdia(B))},M.trex=function(B){var k=B.id;return M.box(M.types.trex,new Uint8Array([0,0,0,0,k>>24,k>>16&255,k>>8&255,k&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},M.trun=function(B,k){var N=B.samples||[],L=N.length,T=12+16*L,l=new Uint8Array(T),C,A,d,v,h,g;for(k+=8+T,l.set([B.type==="video"?1:0,0,15,1,L>>>24&255,L>>>16&255,L>>>8&255,L&255,k>>>24&255,k>>>16&255,k>>>8&255,k&255],0),C=0;C<L;C++)A=N[C],d=A.duration,v=A.size,h=A.flags,g=A.cts,l.set([d>>>24&255,d>>>16&255,d>>>8&255,d&255,v>>>24&255,v>>>16&255,v>>>8&255,v&255,h.isLeading<<2|h.dependsOn,h.isDependedOn<<6|h.hasRedundancy<<4|h.paddingValue<<1|h.isNonSync,h.degradPrio&240<<8,h.degradPrio&15,g>>>24&255,g>>>16&255,g>>>8&255,g&255],12+16*C);return M.box(M.types.trun,l)},M.initSegment=function(B){M.types||M.init();var k=M.moov(B),N=new Uint8Array(M.FTYP.byteLength+k.byteLength);return N.set(M.FTYP),N.set(k,M.FTYP.byteLength),N},M}();I.types=void 0,I.HDLR_TYPES=void 0,I.STTS=void 0,I.STSC=void 0,I.STCO=void 0,I.STSZ=void 0,I.VMHD=void 0,I.SMHD=void 0,I.STSD=void 0,I.FTYP=void 0,I.DINF=void 0;const K=I},"./src/remux/mp4-remuxer.ts":(O,w,f)=>{f.r(w),f.d(w,{default:()=>v,flushTextTrackMetadataCueSamples:()=>P,flushTextTrackUserdataCueSamples:()=>D,normalizePts:()=>h});var F=f("./src/polyfills/number.ts"),I=f("./src/remux/aac-helper.ts"),K=f("./src/remux/mp4-generator.ts"),M=f("./src/events.ts"),H=f("./src/errors.ts"),B=f("./src/utils/logger.ts"),k=f("./src/types/loader.ts"),N=f("./src/utils/timescale-conversion.ts");function L(){return L=Object.assign?Object.assign.bind():function(b){for(var y=1;y<arguments.length;y++){var _=arguments[y];for(var u in _)Object.prototype.hasOwnProperty.call(_,u)&&(b[u]=_[u])}return b},L.apply(this,arguments)}var T=10*1e3,l=1024,C=1152,A=null,d=null,v=function(){function b(_,u,m,o){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=void 0,this._initDTS=void 0,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.observer=_,this.config=u,this.typeSupported=m,this.ISGenerated=!1,A===null){var S=navigator.userAgent||"",U=S.match(/Chrome\/(\d+)/i);A=U?parseInt(U[1]):0}if(d===null){var R=navigator.userAgent.match(/Safari\/(\d+)/i);d=R?parseInt(R[1]):0}}var y=b.prototype;return y.destroy=function(){},y.resetTimeStamp=function(u){B.logger.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=u},y.resetNextTimestamp=function(){B.logger.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1},y.resetInitSegment=function(){B.logger.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1},y.getVideoStartPts=function(u){var m=!1,o=u.reduce(function(S,U){var R=U.pts-S;return R<-4294967296?(m=!0,h(S,U.pts)):R>0?S:U.pts},u[0].pts);return m&&B.logger.debug("PTS rollover detected"),o},y.remux=function(u,m,o,S,U,R,G,j){var V,z,$,X,J,q,ee=U,ne=U,ae=u.pid>-1,ue=m.pid>-1,le=m.samples.length,fe=u.samples.length>0,ye=G&&le>0||le>1,Le=(!ae||fe)&&(!ue||ye)||this.ISGenerated||G;if(Le){this.ISGenerated||($=this.generateIS(u,m,U));var Ee=this.isVideoContiguous,ve=-1,Ae;if(ye&&(ve=g(m.samples),!Ee&&this.config.forceKeyFrameOnDiscontinuity))if(q=!0,ve>0){B.logger.warn("[mp4-remuxer]: Dropped "+ve+" out of "+le+" video samples due to a missing keyframe");var we=this.getVideoStartPts(m.samples);m.samples=m.samples.slice(ve),m.dropped+=ve,ne+=(m.samples[0].pts-we)/m.inputTimeScale,Ae=ne}else ve===-1&&(B.logger.warn("[mp4-remuxer]: No keyframe found out of "+le+" video samples"),q=!1);if(this.ISGenerated){if(fe&&ye){var be=this.getVideoStartPts(m.samples),ct=h(u.samples[0].pts,be)-be,Ge=ct/m.inputTimeScale;ee+=Math.max(0,Ge),ne+=Math.max(0,-Ge)}if(fe){if(u.samplerate||(B.logger.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),$=this.generateIS(u,m,U)),z=this.remuxAudio(u,ee,this.isAudioContiguous,R,ue||ye||j===k.PlaylistLevelType.AUDIO?ne:void 0),ye){var qe=z?z.endPTS-z.startPTS:0;m.inputTimeScale||(B.logger.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),$=this.generateIS(u,m,U)),V=this.remuxVideo(m,ne,Ee,qe)}}else ye&&(V=this.remuxVideo(m,ne,Ee,0));V&&(V.firstKeyFrame=ve,V.independent=ve!==-1,V.firstKeyFramePTS=Ae)}}return this.ISGenerated&&(o.samples.length&&(J=P(o,U,this._initPTS,this._initDTS)),S.samples.length&&(X=D(S,U,this._initPTS))),{audio:z,video:V,initSegment:$,independent:q,text:X,id3:J}},y.generateIS=function(u,m,o){var S=u.samples,U=m.samples,R=this.typeSupported,G={},j=!(0,F.isFiniteNumber)(this._initPTS),V="audio/mp4",z,$,X;if(j&&(z=$=1/0),u.config&&S.length){switch(u.timescale=u.samplerate,u.segmentCodec){case"mp3":R.mpeg?(V="audio/mpeg",u.codec=""):R.mp3&&(u.codec="mp3");break}G.audio={id:"audio",container:V,codec:u.codec,initSegment:u.segmentCodec==="mp3"&&R.mpeg?new Uint8Array(0):K.default.initSegment([u]),metadata:{channelCount:u.channelCount}},j&&(X=u.inputTimeScale,z=$=S[0].pts-Math.round(X*o))}if(m.sps&&m.pps&&U.length&&(m.timescale=m.inputTimeScale,G.video={id:"main",container:"video/mp4",codec:m.codec,initSegment:K.default.initSegment([m]),metadata:{width:m.width,height:m.height}},j)){X=m.inputTimeScale;var J=this.getVideoStartPts(U),q=Math.round(X*o);$=Math.min($,h(U[0].dts,J)-q),z=Math.min(z,J-q)}if(Object.keys(G).length)return this.ISGenerated=!0,j&&(this._initPTS=z,this._initDTS=$),{tracks:G,initPTS:z,timescale:X}},y.remuxVideo=function(u,m,o,S){var U=u.inputTimeScale,R=u.samples,G=[],j=R.length,V=this._initPTS,z=this.nextAvcDts,$=8,X=this.videoSampleDuration,J,q,ee=Number.POSITIVE_INFINITY,ne=Number.NEGATIVE_INFINITY,ae=!1;if(!o||z===null){var ue=m*U,le=R[0].pts-h(R[0].dts,R[0].pts);z=ue-le}for(var fe=0;fe<j;fe++){var ye=R[fe];ye.pts=h(ye.pts-V,z),ye.dts=h(ye.dts-V,z),ye.dts<R[fe>0?fe-1:fe].dts&&(ae=!0)}ae&&R.sort(function(qa,To){var vf=qa.dts-To.dts,gf=qa.pts-To.pts;return vf||gf}),J=R[0].dts,q=R[R.length-1].dts;var Le=q-J,Ee=Le?Math.round(Le/(j-1)):X||u.inputTimeScale/30;if(o){var ve=J-z,Ae=ve>Ee,we=ve<-1;if((Ae||we)&&(Ae?B.logger.warn("AVC: "+(0,N.toMsFromMpegTsClock)(ve,!0)+" ms ("+ve+"dts) hole between fragments detected, filling it"):B.logger.warn("AVC: "+(0,N.toMsFromMpegTsClock)(-ve,!0)+" ms ("+ve+"dts) overlapping between fragments detected"),!we||z>R[0].pts)){J=z;var be=R[0].pts-ve;R[0].dts=J,R[0].pts=be,B.logger.log("Video: First PTS/DTS adjusted: "+(0,N.toMsFromMpegTsClock)(be,!0)+"/"+(0,N.toMsFromMpegTsClock)(J,!0)+", delta: "+(0,N.toMsFromMpegTsClock)(ve,!0)+" ms")}}J=Math.max(0,J);for(var ct=0,Ge=0,qe=0;qe<j;qe++){for(var Ke=R[qe],He=Ke.units,ze=He.length,nt=0,Et=0;Et<ze;Et++)nt+=He[Et].data.length;Ge+=nt,ct+=ze,Ke.length=nt,Ke.dts=Math.max(Ke.dts,J),ee=Math.min(Ke.pts,ee),ne=Math.max(Ke.pts,ne)}q=R[j-1].dts;var ot=Ge+4*ct+8,_t;try{_t=new Uint8Array(ot)}catch{this.observer.emit(M.Events.ERROR,M.Events.ERROR,{type:H.ErrorTypes.MUX_ERROR,details:H.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:ot,reason:"fail allocating video mdat "+ot});return}var ir=new DataView(_t.buffer);ir.setUint32(0,ot),_t.set(K.default.types.mdat,4);for(var Dt=!1,pr=Number.POSITIVE_INFINITY,Xt=Number.POSITIVE_INFINITY,ar=Number.NEGATIVE_INFINITY,sr=Number.NEGATIVE_INFINITY,wt=0;wt<j;wt++){for(var Lt=R[wt],Qt=Lt.units,mr=0,pt=0,br=Qt.length;pt<br;pt++){var yr=Qt[pt],Pi=yr.data,_n=yr.data.byteLength;ir.setUint32($,_n),$+=4,_t.set(Pi,$),$+=_n,mr+=4+_n}var Wn=void 0;if(wt<j-1)X=R[wt+1].dts-Lt.dts,Wn=R[wt+1].pts-Lt.pts;else{var po=this.config,Gn=wt>0?Lt.dts-R[wt-1].dts:Ee;if(Wn=wt>0?Lt.pts-R[wt-1].pts:Ee,po.stretchShortVideoTrack&&this.nextAudioPts!==null){var lf=Math.floor(po.maxBufferHole*U),Di=(S?ee+S*U:this.nextAudioPts)-Lt.pts;Di>lf?(X=Di-Gn,X<0?X=Gn:Dt=!0,B.logger.log("[mp4-remuxer]: It is approximately "+Di/90+" ms to the next segment; using duration "+X/90+" ms for the last video frame.")):X=Gn}else X=Gn}var uf=Math.round(Lt.pts-Lt.dts);pr=Math.min(pr,X),ar=Math.max(ar,X),Xt=Math.min(Xt,Wn),sr=Math.max(sr,Wn),G.push(new p(Lt.key,X,mr,uf))}if(G.length){if(A){if(A<70){var mo=G[0].flags;mo.dependsOn=2,mo.isNonSync=0}}else if(d&&sr-Xt<ar-pr&&Ee/ar<.025&&G[0].cts===0){B.logger.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");for(var Ja=J,Er=0,yo=G.length;Er<yo;Er++){var Eo=Ja+G[Er].duration,ff=Ja+G[Er].cts;if(Er<yo-1){var cf=Eo+G[Er+1].cts;G[Er].duration=cf-ff}else G[Er].duration=Er?G[Er-1].duration:Ee;G[Er].cts=0,Ja=Eo}}}console.assert(X!==null,"mp4SampleDuration must be computed"),X=Dt||!X?Ee:X,this.nextAvcDts=z=q+X,this.videoSampleDuration=X,this.isVideoContiguous=!0;var _o=K.default.moof(u.sequenceNumber++,J,L({},u,{samples:G})),df="video",hf={data1:_o,data2:_t,startPTS:ee/U,endPTS:(ne+X)/U,startDTS:J/U,endDTS:z/U,type:df,hasAudio:!1,hasVideo:!0,nb:G.length,dropped:u.dropped};return u.samples=[],u.dropped=0,console.assert(_t.length,"MDAT length must not be zero"),hf},y.remuxAudio=function(u,m,o,S,U){var R=u.inputTimeScale,G=u.samplerate?u.samplerate:R,j=R/G,V=u.segmentCodec==="aac"?l:C,z=V*j,$=this._initPTS,X=u.segmentCodec==="mp3"&&this.typeSupported.mpeg,J=[],q=U!==void 0,ee=u.samples,ne=X?0:8,ae=this.nextAudioPts||-1,ue=m*R;if(this.isAudioContiguous=o=o||ee.length&&ae>0&&(S&&Math.abs(ue-ae)<9e3||Math.abs(h(ee[0].pts-$,ue)-ae)<20*z),ee.forEach(function(yr){yr.pts=h(yr.pts-$,ue)}),!o||ae<0){if(ee=ee.filter(function(yr){return yr.pts>=0}),!ee.length)return;U===0?ae=0:S&&!q?ae=Math.max(0,ue):ae=ee[0].pts}if(u.segmentCodec==="aac")for(var le=this.config.maxAudioFramesDrift,fe=0,ye=ae;fe<ee.length;fe++){var Le=ee[fe],Ee=Le.pts,ve=Ee-ye,Ae=Math.abs(1e3*ve/R);if(ve<=-le*z&&q)fe===0&&(B.logger.warn("Audio frame @ "+(Ee/R).toFixed(3)+"s overlaps nextAudioPts by "+Math.round(1e3*ve/R)+" ms."),this.nextAudioPts=ae=ye=Ee);else if(ve>=le*z&&Ae<T&&q){var we=Math.round(ve/z);ye=Ee-we*z,ye<0&&(we--,ye+=z),fe===0&&(this.nextAudioPts=ae=ye),B.logger.warn("[mp4-remuxer]: Injecting "+we+" audio frame @ "+(ye/R).toFixed(3)+"s due to "+Math.round(1e3*ve/R)+" ms gap.");for(var be=0;be<we;be++){var ct=Math.max(ye,0),Ge=I.default.getSilentFrame(u.manifestCodec||u.codec,u.channelCount);Ge||(B.logger.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),Ge=Le.unit.subarray()),ee.splice(fe,0,{unit:Ge,pts:ct}),ye+=z,fe++}}Le.pts=ye,ye+=z}for(var qe=null,Ke=null,He,ze=0,nt=ee.length;nt--;)ze+=ee[nt].unit.byteLength;for(var Et=0,ot=ee.length;Et<ot;Et++){var _t=ee[Et],ir=_t.unit,Dt=_t.pts;if(Ke!==null){var pr=J[Et-1];pr.duration=Math.round((Dt-Ke)/j)}else if(o&&u.segmentCodec==="aac"&&(Dt=ae),qe=Dt,ze>0){ze+=ne;try{He=new Uint8Array(ze)}catch{this.observer.emit(M.Events.ERROR,M.Events.ERROR,{type:H.ErrorTypes.MUX_ERROR,details:H.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:ze,reason:"fail allocating audio mdat "+ze});return}if(!X){var Xt=new DataView(He.buffer);Xt.setUint32(0,ze),He.set(K.default.types.mdat,4)}}else return;He.set(ir,ne);var ar=ir.byteLength;ne+=ar,J.push(new p(!0,V,ar,0)),Ke=Dt}var sr=J.length;if(sr){var wt=J[J.length-1];this.nextAudioPts=ae=Ke+j*wt.duration;var Lt=X?new Uint8Array(0):K.default.moof(u.sequenceNumber++,qe/j,L({},u,{samples:J}));u.samples=[];var Qt=qe/R,mr=ae/R,pt="audio",br={data1:Lt,data2:He,startPTS:Qt,endPTS:mr,startDTS:Qt,endDTS:mr,type:pt,hasAudio:!0,hasVideo:!1,nb:sr};return this.isAudioContiguous=!0,console.assert(He.length,"MDAT length must not be zero"),br}},y.remuxEmptyAudio=function(u,m,o,S){var U=u.inputTimeScale,R=u.samplerate?u.samplerate:U,G=U/R,j=this.nextAudioPts,V=(j!==null?j:S.startDTS*U)+this._initDTS,z=S.endDTS*U+this._initDTS,$=G*l,X=Math.ceil((z-V)/$),J=I.default.getSilentFrame(u.manifestCodec||u.codec,u.channelCount);if(B.logger.warn("[mp4-remuxer]: remux empty Audio"),!J){B.logger.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec");return}for(var q=[],ee=0;ee<X;ee++){var ne=V+ee*$;q.push({unit:J,pts:ne,dts:ne})}return u.samples=q,this.remuxAudio(u,m,o,!1)},b}();function h(b,y){var _;if(y===null)return b;for(y<b?_=-8589934592:_=8589934592;Math.abs(b-y)>4294967296;)b+=_;return b}function g(b){for(var y=0;y<b.length;y++)if(b[y].key)return y;return-1}function P(b,y,_,u){var m=b.samples.length;if(m){for(var o=b.inputTimeScale,S=0;S<m;S++){var U=b.samples[S];U.pts=h(U.pts-_,y*o)/o,U.dts=h(U.dts-u,y*o)/o}var R=b.samples;return b.samples=[],{samples:R}}}function D(b,y,_){var u=b.samples.length;if(u){for(var m=b.inputTimeScale,o=0;o<u;o++){var S=b.samples[o];S.pts=h(S.pts-_,y*m)/m}b.samples.sort(function(R,G){return R.pts-G.pts});var U=b.samples;return b.samples=[],{samples:U}}}var p=function(y,_,u,m){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=_,this.size=u,this.cts=m,this.flags=new x(y)},x=function(y){this.isLeading=0,this.isDependedOn=0,this.hasRedundancy=0,this.degradPrio=0,this.dependsOn=1,this.isNonSync=1,this.dependsOn=y?2:1,this.isNonSync=y?0:1}},"./src/remux/passthrough-remuxer.ts":(O,w,f)=>{f.r(w),f.d(w,{default:()=>N});var F=f("./src/polyfills/number.ts"),I=f("./src/remux/mp4-remuxer.ts"),K=f("./src/utils/mp4-tools.ts"),M=f("./src/loader/fragment.ts"),H=f("./src/utils/logger.ts"),B=function(){function L(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=void 0,this.initTracks=void 0,this.lastEndTime=null}var T=L.prototype;return T.destroy=function(){},T.resetTimeStamp=function(C){this.initPTS=C,this.lastEndTime=null},T.resetNextTimestamp=function(){this.lastEndTime=null},T.resetInitSegment=function(C,A,d,v){this.audioCodec=A,this.videoCodec=d,this.generateInitSegment((0,K.patchEncyptionData)(C,v)),this.emitInitSegment=!0},T.generateInitSegment=function(C){var A=this.audioCodec,d=this.videoCodec;if(!C||!C.byteLength){this.initTracks=void 0,this.initData=void 0;return}var v=this.initData=(0,K.parseInitSegment)(C);A||(A=k(v.audio,M.ElementaryStreamTypes.AUDIO)),d||(d=k(v.video,M.ElementaryStreamTypes.VIDEO));var h={};v.audio&&v.video?h.audiovideo={container:"video/mp4",codec:A+","+d,initSegment:C,id:"main"}:v.audio?h.audio={container:"audio/mp4",codec:A,initSegment:C,id:"audio"}:v.video?h.video={container:"video/mp4",codec:d,initSegment:C,id:"main"}:H.logger.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=h},T.remux=function(C,A,d,v,h){var g,P=this.initPTS,D=this.lastEndTime,p={audio:void 0,video:void 0,text:v,id3:d,initSegment:void 0};(0,F.isFiniteNumber)(D)||(D=this.lastEndTime=h||0);var x=A.samples;if(!x||!x.length)return p;var b={initPTS:void 0,timescale:1},y=this.initData;if((!y||!y.length)&&(this.generateInitSegment(x),y=this.initData),!y||!y.length)return H.logger.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),p;this.emitInitSegment&&(b.tracks=this.initTracks,this.emitInitSegment=!1);var _=(0,K.getStartDTS)(y,x);(0,F.isFiniteNumber)(P)||(this.initPTS=b.initPTS=P=_-h);var u=(0,K.getDuration)(x,y),m=C?_-P:D,o=m+u;(0,K.offsetStartDTS)(y,x,P),u>0?this.lastEndTime=o:(H.logger.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());var S=!!y.audio,U=!!y.video,R="";S&&(R+="audio"),U&&(R+="video");var G={data1:x,startPTS:m,startDTS:m,endPTS:o,endDTS:o,type:R,hasAudio:S,hasVideo:U,nb:1,dropped:0};p.audio=G.type==="audio"?G:void 0,p.video=G.type!=="audio"?G:void 0,p.initSegment=b;var j=(g=this.initPTS)!=null?g:0;return p.id3=(0,I.flushTextTrackMetadataCueSamples)(d,h,j,j),v.samples.length&&(p.text=(0,I.flushTextTrackUserdataCueSamples)(v,h,j)),p},L}();function k(L,T){var l=L==null?void 0:L.codec;return l&&l.length>4?l:l==="hvc1"||l==="hev1"?"hvc1.1.c.L120.90":l==="av01"?"av01.0.04M.08":l==="avc1"||T===M.ElementaryStreamTypes.VIDEO?"avc1.42e01e":"mp4a.40.5"}const N=B},"./src/task-loop.ts":(O,w,f)=>{f.r(w),f.d(w,{default:()=>F});var F=function(){function I(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}var K=I.prototype;return K.destroy=function(){this.onHandlerDestroying(),this.onHandlerDestroyed()},K.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},K.onHandlerDestroyed=function(){},K.hasInterval=function(){return!!this._tickInterval},K.hasNextTick=function(){return!!this._tickTimer},K.setInterval=function(H){return this._tickInterval?!1:(this._tickInterval=self.setInterval(this._boundTick,H),!0)},K.clearInterval=function(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1},K.clearNextTick=function(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1},K.tick=function(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)},K.tickImmediate=function(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)},K.doTick=function(){},I}()},"./src/types/cmcd.ts":(O,w,f)=>{f.r(w),f.d(w,{CMCDObjectType:()=>I,CMCDStreamType:()=>M,CMCDStreamingFormat:()=>K,CMCDVersion:()=>F});var F=1,I;(function(H){H.MANIFEST="m",H.AUDIO="a",H.VIDEO="v",H.MUXED="av",H.INIT="i",H.CAPTION="c",H.TIMED_TEXT="tt",H.KEY="k",H.OTHER="o"})(I||(I={}));var K;(function(H){H.DASH="d",H.HLS="h",H.SMOOTH="s",H.OTHER="o"})(K||(K={}));var M;(function(H){H.VOD="v",H.LIVE="l"})(M||(M={}))},"./src/types/demuxer.ts":(O,w,f)=>{f.r(w),f.d(w,{MetadataSchema:()=>F});var F;(function(I){I.audioId3="org.id3",I.dateRange="com.apple.quicktime.HLS",I.emsg="https://aomedia.org/emsg/ID3"})(F||(F={}))},"./src/types/level.ts":(O,w,f)=>{f.r(w),f.d(w,{HdcpLevels:()=>H,HlsSkip:()=>B,HlsUrlParameters:()=>N,Level:()=>L,getSkipValue:()=>k});function F(T,l){for(var C=0;C<l.length;C++){var A=l[C];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(T,K(A.key),A)}}function I(T,l,C){return l&&F(T.prototype,l),C&&F(T,C),Object.defineProperty(T,"prototype",{writable:!1}),T}function K(T){var l=M(T,"string");return typeof l=="symbol"?l:String(l)}function M(T,l){if(typeof T!="object"||T===null)return T;var C=T[Symbol.toPrimitive];if(C!==void 0){var A=C.call(T,l||"default");if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return(l==="string"?String:Number)(T)}var H=["NONE","TYPE-0","TYPE-1","TYPE-2",null],B;(function(T){T.No="",T.Yes="YES",T.v2="v2"})(B||(B={}));function k(T,l){var C=T.canSkipUntil,A=T.canSkipDateRanges,d=T.endSN,v=l!==void 0?l-d:0;return C&&v<C?A?B.v2:B.Yes:B.No}var N=function(){function T(C,A,d){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=C,this.part=A,this.skip=d}var l=T.prototype;return l.addDirectives=function(A){var d=new self.URL(A);return this.msn!==void 0&&d.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&d.searchParams.set("_HLS_part",this.part.toString()),this.skip&&d.searchParams.set("_HLS_skip",this.skip),d.href},T}(),L=function(){function T(l){this.attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.unknownCodecs=void 0,this.audioGroupIds=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.textGroupIds=void 0,this.url=void 0,this._urlId=0,this.url=[l.url],this.attrs=l.attrs,this.bitrate=l.bitrate,l.details&&(this.details=l.details),this.id=l.id||0,this.name=l.name,this.width=l.width||0,this.height=l.height||0,this.audioCodec=l.audioCodec,this.videoCodec=l.videoCodec,this.unknownCodecs=l.unknownCodecs,this.codecSet=[l.videoCodec,l.audioCodec].filter(function(C){return C}).join(",").replace(/\.[^.,]+/g,"")}return I(T,[{key:"maxBitrate",get:function(){return Math.max(this.realBitrate,this.bitrate)}},{key:"uri",get:function(){return this.url[this._urlId]||""}},{key:"urlId",get:function(){return this._urlId},set:function(C){var A=C%this.url.length;this._urlId!==A&&(this.details=void 0,this._urlId=A)}}]),T}()},"./src/types/loader.ts":(O,w,f)=>{f.r(w),f.d(w,{PlaylistContextType:()=>F,PlaylistLevelType:()=>I});var F;(function(K){K.MANIFEST="manifest",K.LEVEL="level",K.AUDIO_TRACK="audioTrack",K.SUBTITLE_TRACK="subtitleTrack"})(F||(F={}));var I;(function(K){K.MAIN="main",K.AUDIO="audio",K.SUBTITLE="subtitle"})(I||(I={}))},"./src/types/transmuxer.ts":(O,w,f)=>{f.r(w),f.d(w,{ChunkMetadata:()=>F});var F=function(M,H,B,k,N,L){k===void 0&&(k=0),N===void 0&&(N=-1),L===void 0&&(L=!1),this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=I(),this.buffering={audio:I(),video:I(),audiovideo:I()},this.level=M,this.sn=H,this.id=B,this.size=k,this.part=N,this.partial=L};function I(){return{start:0,executeStart:0,executeEnd:0,end:0}}},"./src/utils/attr-list.ts":(O,w,f)=>{f.r(w),f.d(w,{AttrList:()=>K});var F=/^(\d+)x(\d+)$/,I=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,K=function(){function M(B){typeof B=="string"&&(B=M.parseAttrList(B));for(var k in B)B.hasOwnProperty(k)&&(this[k]=B[k])}var H=M.prototype;return H.decimalInteger=function(k){var N=parseInt(this[k],10);return N>Number.MAX_SAFE_INTEGER?1/0:N},H.hexadecimalInteger=function(k){if(this[k]){var N=(this[k]||"0x").slice(2);N=(N.length&1?"0":"")+N;for(var L=new Uint8Array(N.length/2),T=0;T<N.length/2;T++)L[T]=parseInt(N.slice(T*2,T*2+2),16);return L}else return null},H.hexadecimalIntegerAsNumber=function(k){var N=parseInt(this[k],16);return N>Number.MAX_SAFE_INTEGER?1/0:N},H.decimalFloatingPoint=function(k){return parseFloat(this[k])},H.optionalFloat=function(k,N){var L=this[k];return L?parseFloat(L):N},H.enumeratedString=function(k){return this[k]},H.bool=function(k){return this[k]==="YES"},H.decimalResolution=function(k){var N=F.exec(this[k]);if(N!==null)return{width:parseInt(N[1],10),height:parseInt(N[2],10)}},M.parseAttrList=function(k){var N,L={},T='"';for(I.lastIndex=0;(N=I.exec(k))!==null;){var l=N[2];l.indexOf(T)===0&&l.lastIndexOf(T)===l.length-1&&(l=l.slice(1,-1)),L[N[1]]=l}return L},M}()},"./src/utils/binary-search.ts":(O,w,f)=>{f.r(w),f.d(w,{default:()=>I});var F={search:function(M,H){for(var B=0,k=M.length-1,N=null,L=null;B<=k;){N=(B+k)/2|0,L=M[N];var T=H(L);if(T>0)B=N+1;else if(T<0)k=N-1;else return L}return null}};const I=F},"./src/utils/buffer-helper.ts":(O,w,f)=>{f.r(w),f.d(w,{BufferHelper:()=>K});var F=f("./src/utils/logger.ts"),I={length:0,start:function(){return 0},end:function(){return 0}},K=function(){function M(){}return M.isBuffered=function(B,k){try{if(B){for(var N=M.getBuffered(B),L=0;L<N.length;L++)if(k>=N.start(L)&&k<=N.end(L))return!0}}catch{}return!1},M.bufferInfo=function(B,k,N){try{if(B){var L=M.getBuffered(B),T=[],l;for(l=0;l<L.length;l++)T.push({start:L.start(l),end:L.end(l)});return this.bufferedInfo(T,k,N)}}catch{}return{len:0,start:k,end:k,nextStart:void 0}},M.bufferedInfo=function(B,k,N){k=Math.max(0,k),B.sort(function(p,x){var b=p.start-x.start;return b||x.end-p.end});var L=[];if(N)for(var T=0;T<B.length;T++){var l=L.length;if(l){var C=L[l-1].end;B[T].start-C<N?B[T].end>C&&(L[l-1].end=B[T].end):L.push(B[T])}else L.push(B[T])}else L=B;for(var A=0,d,v=k,h=k,g=0;g<L.length;g++){var P=L[g].start,D=L[g].end;if(k+N>=P&&k<D)v=P,h=D,A=h-k;else if(k+N<P){d=P;break}}return{len:A,start:v||0,end:h||0,nextStart:d}},M.getBuffered=function(B){try{return B.buffered}catch(k){return F.logger.log("failed to get media.buffered",k),I}},M}()},"./src/utils/cea-608-parser.ts":(O,w,f)=>{f.r(w),f.d(w,{CaptionScreen:()=>g,Row:()=>h,default:()=>y});var F=f("./src/utils/logger.ts"),I={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},K=function(u){var m=u;return I.hasOwnProperty(u)&&(m=I[u]),String.fromCharCode(m)},M=15,H=100,B={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},k={17:2,18:4,21:6,22:8,23:10,19:13,20:15},N={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},L={25:2,26:4,29:6,30:8,31:10,27:13,28:15},T=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],l;(function(_){_[_.ERROR=0]="ERROR",_[_.TEXT=1]="TEXT",_[_.WARNING=2]="WARNING",_[_.INFO=2]="INFO",_[_.DEBUG=3]="DEBUG",_[_.DATA=3]="DATA"})(l||(l={}));var C=function(){function _(){this.time=null,this.verboseLevel=l.ERROR}var u=_.prototype;return u.log=function(o,S){if(this.verboseLevel>=o){var U=typeof S=="function"?S():S;F.logger.log(this.time+" ["+o+"] "+U)}},_}(),A=function(u){for(var m=[],o=0;o<u.length;o++)m.push(u[o].toString(16));return m},d=function(){function _(m,o,S,U,R){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=m||"white",this.underline=o||!1,this.italics=S||!1,this.background=U||"black",this.flash=R||!1}var u=_.prototype;return u.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},u.setStyles=function(o){for(var S=["foreground","underline","italics","background","flash"],U=0;U<S.length;U++){var R=S[U];o.hasOwnProperty(R)&&(this[R]=o[R])}},u.isDefault=function(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash},u.equals=function(o){return this.foreground===o.foreground&&this.underline===o.underline&&this.italics===o.italics&&this.background===o.background&&this.flash===o.flash},u.copy=function(o){this.foreground=o.foreground,this.underline=o.underline,this.italics=o.italics,this.background=o.background,this.flash=o.flash},u.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},_}(),v=function(){function _(m,o,S,U,R,G){this.uchar=void 0,this.penState=void 0,this.uchar=m||" ",this.penState=new d(o,S,U,R,G)}var u=_.prototype;return u.reset=function(){this.uchar=" ",this.penState.reset()},u.setChar=function(o,S){this.uchar=o,this.penState.copy(S)},u.setPenState=function(o){this.penState.copy(o)},u.equals=function(o){return this.uchar===o.uchar&&this.penState.equals(o.penState)},u.copy=function(o){this.uchar=o.uchar,this.penState.copy(o.penState)},u.isEmpty=function(){return this.uchar===" "&&this.penState.isDefault()},_}(),h=function(){function _(m){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var o=0;o<H;o++)this.chars.push(new v);this.logger=m,this.pos=0,this.currPenState=new d}var u=_.prototype;return u.equals=function(o){for(var S=!0,U=0;U<H;U++)if(!this.chars[U].equals(o.chars[U])){S=!1;break}return S},u.copy=function(o){for(var S=0;S<H;S++)this.chars[S].copy(o.chars[S])},u.isEmpty=function(){for(var o=!0,S=0;S<H;S++)if(!this.chars[S].isEmpty()){o=!1;break}return o},u.setCursor=function(o){this.pos!==o&&(this.pos=o),this.pos<0?(this.logger.log(l.DEBUG,"Negative cursor position "+this.pos),this.pos=0):this.pos>H&&(this.logger.log(l.DEBUG,"Too large cursor position "+this.pos),this.pos=H)},u.moveCursor=function(o){var S=this.pos+o;if(o>1)for(var U=this.pos+1;U<S+1;U++)this.chars[U].setPenState(this.currPenState);this.setCursor(S)},u.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},u.insertChar=function(o){var S=this;o>=144&&this.backSpace();var U=K(o);if(this.pos>=H){this.logger.log(l.ERROR,function(){return"Cannot insert "+o.toString(16)+" ("+U+") at position "+S.pos+". Skipping it!"});return}this.chars[this.pos].setChar(U,this.currPenState),this.moveCursor(1)},u.clearFromPos=function(o){var S;for(S=o;S<H;S++)this.chars[S].reset()},u.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},u.clearToEndOfRow=function(){this.clearFromPos(this.pos)},u.getTextString=function(){for(var o=[],S=!0,U=0;U<H;U++){var R=this.chars[U].uchar;R!==" "&&(S=!1),o.push(R)}return S?"":o.join("")},u.setPenStyles=function(o){this.currPenState.setStyles(o);var S=this.chars[this.pos];S.setPenState(this.currPenState)},_}(),g=function(){function _(m){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var o=0;o<M;o++)this.rows.push(new h(m));this.logger=m,this.currRow=M-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}var u=_.prototype;return u.reset=function(){for(var o=0;o<M;o++)this.rows[o].clear();this.currRow=M-1},u.equals=function(o){for(var S=!0,U=0;U<M;U++)if(!this.rows[U].equals(o.rows[U])){S=!1;break}return S},u.copy=function(o){for(var S=0;S<M;S++)this.rows[S].copy(o.rows[S])},u.isEmpty=function(){for(var o=!0,S=0;S<M;S++)if(!this.rows[S].isEmpty()){o=!1;break}return o},u.backSpace=function(){var o=this.rows[this.currRow];o.backSpace()},u.clearToEndOfRow=function(){var o=this.rows[this.currRow];o.clearToEndOfRow()},u.insertChar=function(o){var S=this.rows[this.currRow];S.insertChar(o)},u.setPen=function(o){var S=this.rows[this.currRow];S.setPenStyles(o)},u.moveCursor=function(o){var S=this.rows[this.currRow];S.moveCursor(o)},u.setCursor=function(o){this.logger.log(l.INFO,"setCursor: "+o);var S=this.rows[this.currRow];S.setCursor(o)},u.setPAC=function(o){this.logger.log(l.INFO,function(){return"pacData = "+JSON.stringify(o)});var S=o.row-1;if(this.nrRollUpRows&&S<this.nrRollUpRows-1&&(S=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==S){for(var U=0;U<M;U++)this.rows[U].clear();var R=this.currRow+1-this.nrRollUpRows,G=this.lastOutputScreen;if(G){var j=G.rows[R].cueStartTime,V=this.logger.time;if(j&&V!==null&&j<V)for(var z=0;z<this.nrRollUpRows;z++)this.rows[S-this.nrRollUpRows+z+1].copy(G.rows[R+z])}}this.currRow=S;var $=this.rows[this.currRow];if(o.indent!==null){var X=o.indent,J=Math.max(X-1,0);$.setCursor(o.indent),o.color=$.chars[J].penState.foreground}var q={foreground:o.color,underline:o.underline,italics:o.italics,background:"black",flash:!1};this.setPen(q)},u.setBkgData=function(o){this.logger.log(l.INFO,function(){return"bkgData = "+JSON.stringify(o)}),this.backSpace(),this.setPen(o),this.insertChar(32)},u.setRollUpRows=function(o){this.nrRollUpRows=o},u.rollUp=function(){var o=this;if(this.nrRollUpRows===null){this.logger.log(l.DEBUG,"roll_up but nrRollUpRows not set yet");return}this.logger.log(l.TEXT,function(){return o.getDisplayText()});var S=this.currRow+1-this.nrRollUpRows,U=this.rows.splice(S,1)[0];U.clear(),this.rows.splice(this.currRow,0,U),this.logger.log(l.INFO,"Rolling up")},u.getDisplayText=function(o){o=o||!1;for(var S=[],U="",R=-1,G=0;G<M;G++){var j=this.rows[G].getTextString();j&&(R=G+1,o?S.push("Row "+R+": '"+j+"'"):S.push(j.trim()))}return S.length>0&&(o?U="["+S.join(" | ")+"]":U=S.join(`
`)),U},u.getTextAndFormat=function(){return this.rows},_}(),P=function(){function _(m,o,S){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=m,this.outputFilter=o,this.mode=null,this.verbose=0,this.displayedMemory=new g(S),this.nonDisplayedMemory=new g(S),this.lastOutputScreen=new g(S),this.currRollUpRow=this.displayedMemory.rows[M-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=S}var u=_.prototype;return u.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[M-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},u.getHandler=function(){return this.outputFilter},u.setHandler=function(o){this.outputFilter=o},u.setPAC=function(o){this.writeScreen.setPAC(o)},u.setBkgData=function(o){this.writeScreen.setBkgData(o)},u.setMode=function(o){o!==this.mode&&(this.mode=o,this.logger.log(l.INFO,function(){return"MODE="+o}),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=o)},u.insertChars=function(o){for(var S=this,U=0;U<o.length;U++)this.writeScreen.insertChar(o[U]);var R=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(l.INFO,function(){return R+": "+S.writeScreen.getDisplayText(!0)}),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(l.TEXT,function(){return"DISPLAYED: "+S.displayedMemory.getDisplayText(!0)}),this.outputDataUpdate())},u.ccRCL=function(){this.logger.log(l.INFO,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},u.ccBS=function(){this.logger.log(l.INFO,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},u.ccAOF=function(){},u.ccAON=function(){},u.ccDER=function(){this.logger.log(l.INFO,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},u.ccRU=function(o){this.logger.log(l.INFO,"RU("+o+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(o)},u.ccFON=function(){this.logger.log(l.INFO,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},u.ccRDC=function(){this.logger.log(l.INFO,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},u.ccTR=function(){this.logger.log(l.INFO,"TR"),this.setMode("MODE_TEXT")},u.ccRTD=function(){this.logger.log(l.INFO,"RTD"),this.setMode("MODE_TEXT")},u.ccEDM=function(){this.logger.log(l.INFO,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},u.ccCR=function(){this.logger.log(l.INFO,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},u.ccENM=function(){this.logger.log(l.INFO,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},u.ccEOC=function(){var o=this;if(this.logger.log(l.INFO,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){var S=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=S,this.writeScreen=this.nonDisplayedMemory,this.logger.log(l.TEXT,function(){return"DISP: "+o.displayedMemory.getDisplayText()})}this.outputDataUpdate(!0)},u.ccTO=function(o){this.logger.log(l.INFO,"TO("+o+") - Tab Offset"),this.writeScreen.moveCursor(o)},u.ccMIDROW=function(o){var S={flash:!1};if(S.underline=o%2===1,S.italics=o>=46,S.italics)S.foreground="white";else{var U=Math.floor(o/2)-16,R=["white","green","blue","cyan","red","yellow","magenta"];S.foreground=R[U]}this.logger.log(l.INFO,"MIDROW: "+JSON.stringify(S)),this.writeScreen.setPen(S)},u.outputDataUpdate=function(o){o===void 0&&(o=!1);var S=this.logger.time;S!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=S:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,S,this.lastOutputScreen),o&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:S),this.lastOutputScreen.copy(this.displayedMemory))},u.cueSplitAtTime=function(o){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,o,this.displayedMemory),this.cueStartTime=o))},_}(),D=function(){function _(m,o,S){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var U=new C;this.channels=[null,new P(m,o,U),new P(m+1,S,U)],this.cmdHistory=b(),this.logger=U}var u=_.prototype;return u.getHandler=function(o){return this.channels[o].getHandler()},u.setHandler=function(o,S){this.channels[o].setHandler(S)},u.addData=function(o,S){var U,R,G,j=!1;this.logger.time=o;for(var V=0;V<S.length;V+=2)if(R=S[V]&127,G=S[V+1]&127,!(R===0&&G===0)){if(this.logger.log(l.DATA,"["+A([S[V],S[V+1]])+"] -> ("+A([R,G])+")"),U=this.parseCmd(R,G),U||(U=this.parseMidrow(R,G)),U||(U=this.parsePAC(R,G)),U||(U=this.parseBackgroundAttributes(R,G)),!U&&(j=this.parseChars(R,G),j)){var z=this.currentChannel;if(z&&z>0){var $=this.channels[z];$.insertChars(j)}else this.logger.log(l.WARNING,"No channel found yet. TEXT-MODE?")}!U&&!j&&this.logger.log(l.WARNING,"Couldn't parse cleaned data "+A([R,G])+" orig: "+A([S[V],S[V+1]]))}},u.parseCmd=function(o,S){var U=this.cmdHistory,R=(o===20||o===28||o===21||o===29)&&S>=32&&S<=47,G=(o===23||o===31)&&S>=33&&S<=35;if(!(R||G))return!1;if(x(o,S,U))return p(null,null,U),this.logger.log(l.DEBUG,"Repeated command ("+A([o,S])+") is dropped"),!0;var j=o===20||o===21||o===23?1:2,V=this.channels[j];return o===20||o===21||o===28||o===29?S===32?V.ccRCL():S===33?V.ccBS():S===34?V.ccAOF():S===35?V.ccAON():S===36?V.ccDER():S===37?V.ccRU(2):S===38?V.ccRU(3):S===39?V.ccRU(4):S===40?V.ccFON():S===41?V.ccRDC():S===42?V.ccTR():S===43?V.ccRTD():S===44?V.ccEDM():S===45?V.ccCR():S===46?V.ccENM():S===47&&V.ccEOC():V.ccTO(S-32),p(o,S,U),this.currentChannel=j,!0},u.parseMidrow=function(o,S){var U=0;if((o===17||o===25)&&S>=32&&S<=47){if(o===17?U=1:U=2,U!==this.currentChannel)return this.logger.log(l.ERROR,"Mismatch channel in midrow parsing"),!1;var R=this.channels[U];return R?(R.ccMIDROW(S),this.logger.log(l.DEBUG,"MIDROW ("+A([o,S])+")"),!0):!1}return!1},u.parsePAC=function(o,S){var U,R=this.cmdHistory,G=(o>=17&&o<=23||o>=25&&o<=31)&&S>=64&&S<=127,j=(o===16||o===24)&&S>=64&&S<=95;if(!(G||j))return!1;if(x(o,S,R))return p(null,null,R),!0;var V=o<=23?1:2;S>=64&&S<=95?U=V===1?B[o]:N[o]:U=V===1?k[o]:L[o];var z=this.channels[V];return z?(z.setPAC(this.interpretPAC(U,S)),p(o,S,R),this.currentChannel=V,!0):!1},u.interpretPAC=function(o,S){var U,R={color:null,italics:!1,indent:null,underline:!1,row:o};return S>95?U=S-96:U=S-64,R.underline=(U&1)===1,U<=13?R.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(U/2)]:U<=15?(R.italics=!0,R.color="white"):R.indent=Math.floor((U-16)/2)*4,R},u.parseChars=function(o,S){var U,R=null,G=null;if(o>=25?(U=2,G=o-8):(U=1,G=o),G>=17&&G<=19){var j;G===17?j=S+80:G===18?j=S+112:j=S+144,this.logger.log(l.INFO,"Special char '"+K(j)+"' in channel "+U),R=[j]}else o>=32&&o<=127&&(R=S===0?[o]:[o,S]);if(R){var V=A(R);this.logger.log(l.DEBUG,"Char codes =  "+V.join(",")),p(o,S,this.cmdHistory)}return R},u.parseBackgroundAttributes=function(o,S){var U=(o===16||o===24)&&S>=32&&S<=47,R=(o===23||o===31)&&S>=45&&S<=47;if(!(U||R))return!1;var G,j={};o===16||o===24?(G=Math.floor((S-32)/2),j.background=T[G],S%2===1&&(j.background=j.background+"_semi")):S===45?j.background="transparent":(j.foreground="black",S===47&&(j.underline=!0));var V=o<=23?1:2,z=this.channels[V];return z.setBkgData(j),p(o,S,this.cmdHistory),!0},u.reset=function(){for(var o=0;o<Object.keys(this.channels).length;o++){var S=this.channels[o];S&&S.reset()}this.cmdHistory=b()},u.cueSplitAtTime=function(o){for(var S=0;S<this.channels.length;S++){var U=this.channels[S];U&&U.cueSplitAtTime(o)}},_}();function p(_,u,m){m.a=_,m.b=u}function x(_,u,m){return m.a===_&&m.b===u}function b(){return{a:null,b:null}}const y=D},"./src/utils/codecs.ts":(O,w,f)=>{f.r(w),f.d(w,{isCodecSupportedInMp4:()=>K,isCodecType:()=>I});var F={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dva1:!0,dvav:!0,dvh1:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}};function I(M,H){var B=F[H];return!!B&&B[M.slice(0,4)]===!0}function K(M,H){return MediaSource.isTypeSupported((H||"video")+'/mp4;codecs="'+M+'"')}},"./src/utils/cues.ts":(O,w,f)=>{f.r(w),f.d(w,{default:()=>B});var F=f("./src/utils/vttparser.ts"),I=f("./src/utils/webvtt-parser.ts"),K=f("./src/utils/texttrack-utils.ts"),M=/\s/,H={newCue:function(N,L,T,l){for(var C=[],A,d,v,h,g,P=self.VTTCue||self.TextTrackCue,D=0;D<l.rows.length;D++)if(A=l.rows[D],v=!0,h=0,g="",!A.isEmpty()){for(var p=0;p<A.chars.length;p++)M.test(A.chars[p].uchar)&&v?h++:(g+=A.chars[p].uchar,v=!1);A.cueStartTime=L,L===T&&(T+=1e-4),h>=16?h--:h++;var x=(0,F.fixLineBreaks)(g.trim()),b=(0,I.generateCueId)(L,T,x);(!N||!N.cues||!N.cues.getCueById(b))&&(d=new P(L,T,x),d.id=b,d.line=D+1,d.align="left",d.position=10+Math.min(80,Math.floor(h*8/32)*10),C.push(d))}return N&&C.length&&(C.sort(function(y,_){return y.line==="auto"||_.line==="auto"?0:y.line>8&&_.line>8?_.line-y.line:y.line-_.line}),C.forEach(function(y){return(0,K.addCueToTrack)(N,y)})),C}};const B=H},"./src/utils/discontinuities.ts":(O,w,f)=>{f.r(w),f.d(w,{adjustSlidingStart:()=>N,alignMediaPlaylistByPDT:()=>C,alignPDT:()=>l,alignStream:()=>L,findDiscontinuousReferenceFrag:()=>B,findFirstFragWithCC:()=>M,shouldAlignOnDiscontinuities:()=>H});var F=f("./src/polyfills/number.ts"),I=f("./src/utils/logger.ts"),K=f("./src/controller/level-helper.ts");function M(A,d){for(var v=null,h=0,g=A.length;h<g;h++){var P=A[h];if(P&&P.cc===d){v=P;break}}return v}function H(A,d,v){return!!(d.details&&(v.endCC>v.startCC||A&&A.cc<v.startCC))}function B(A,d,v){var h=A.fragments,g=d.fragments;if(!g.length||!h.length){I.logger.log("No fragments to align");return}var P=M(h,g[0].cc);if(!P||P&&!P.startPTS){I.logger.log("No frag in previous level to align on");return}return P}function k(A,d){if(A){var v=A.start+d;A.start=A.startPTS=v,A.endPTS=v+A.duration}}function N(A,d){for(var v=d.fragments,h=0,g=v.length;h<g;h++)k(v[h],A);d.fragmentHint&&k(d.fragmentHint,A),d.alignedSliding=!0}function L(A,d,v){d&&(T(A,v,d),!v.alignedSliding&&d.details&&l(v,d.details),!v.alignedSliding&&d.details&&!v.skippedSegments&&(0,K.adjustSliding)(d.details,v))}function T(A,d,v){if(H(A,v,d)){var h=B(v.details,d);h&&(0,F.isFiniteNumber)(h.start)&&(I.logger.log("Adjusting PTS using last level due to CC increase within current level "+d.url),N(h.start,d))}}function l(A,d){if(!(!d.fragments.length||!A.hasProgramDateTime||!d.hasProgramDateTime)){var v=d.fragments[0].programDateTime,h=A.fragments[0].programDateTime,g=(h-v)/1e3+d.fragments[0].start;g&&(0,F.isFiniteNumber)(g)&&(I.logger.log("Adjusting PTS using programDateTime delta "+(h-v)+"ms, sliding:"+g.toFixed(3)+" "+A.url+" "),N(g,A))}}function C(A,d){if(!(!A.hasProgramDateTime||!d.hasProgramDateTime)){var v=A.fragments,h=d.fragments;if(!(!v.length||!h.length)){var g=Math.round(h.length/2)-1,P=h[g],D=M(v,P.cc)||v[Math.round(v.length/2)-1],p=P.programDateTime,x=D.programDateTime;if(!(p===null||x===null)){var b=(x-p)/1e3-(D.start-P.start);N(b,A)}}}}},"./src/utils/ewma-bandwidth-estimator.ts":(O,w,f)=>{f.r(w),f.d(w,{default:()=>K});var F=f("./src/utils/ewma.ts"),I=function(){function M(B,k,N){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultEstimate_=N,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new F.default(B),this.fast_=new F.default(k)}var H=M.prototype;return H.update=function(k,N){var L=this.slow_,T=this.fast_;this.slow_.halfLife!==k&&(this.slow_=new F.default(k,L.getEstimate(),L.getTotalWeight())),this.fast_.halfLife!==N&&(this.fast_=new F.default(N,T.getEstimate(),T.getTotalWeight()))},H.sample=function(k,N){k=Math.max(k,this.minDelayMs_);var L=8*N,T=k/1e3,l=L/T;this.fast_.sample(T,l),this.slow_.sample(T,l)},H.canEstimate=function(){var k=this.fast_;return k&&k.getTotalWeight()>=this.minWeight_},H.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},H.destroy=function(){},M}();const K=I},"./src/utils/ewma.ts":(O,w,f)=>{f.r(w),f.d(w,{default:()=>I});var F=function(){function K(H,B,k){B===void 0&&(B=0),k===void 0&&(k=0),this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=H,this.alpha_=H?Math.exp(Math.log(.5)/H):0,this.estimate_=B,this.totalWeight_=k}var M=K.prototype;return M.sample=function(B,k){var N=Math.pow(this.alpha_,B);this.estimate_=k*(1-N)+N*this.estimate_,this.totalWeight_+=B},M.getTotalWeight=function(){return this.totalWeight_},M.getEstimate=function(){if(this.alpha_){var B=1-Math.pow(this.alpha_,this.totalWeight_);if(B)return this.estimate_/B}return this.estimate_},K}();const I=F},"./src/utils/fetch-loader.ts":(O,w,f)=>{f.r(w),f.d(w,{default:()=>g,fetchSupported:()=>C});var F=f("./src/polyfills/number.ts"),I=f("./src/loader/load-stats.ts"),K=f("./src/demux/chunk-cache.ts");function M(P,D){P.prototype=Object.create(D.prototype),P.prototype.constructor=P,L(P,D)}function H(P){var D=typeof Map=="function"?new Map:void 0;return H=function(x){if(x===null||!N(x))return x;if(typeof x!="function")throw new TypeError("Super expression must either be null or a function");if(typeof D<"u"){if(D.has(x))return D.get(x);D.set(x,b)}function b(){return B(x,arguments,T(this).constructor)}return b.prototype=Object.create(x.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),L(b,x)},H(P)}function B(P,D,p){return k()?B=Reflect.construct.bind():B=function(b,y,_){var u=[null];u.push.apply(u,y);var m=Function.bind.apply(b,u),o=new m;return _&&L(o,_.prototype),o},B.apply(null,arguments)}function k(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function N(P){return Function.toString.call(P).indexOf("[native code]")!==-1}function L(P,D){return L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(x,b){return x.__proto__=b,x},L(P,D)}function T(P){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(p){return p.__proto__||Object.getPrototypeOf(p)},T(P)}function l(){return l=Object.assign?Object.assign.bind():function(P){for(var D=1;D<arguments.length;D++){var p=arguments[D];for(var x in p)Object.prototype.hasOwnProperty.call(p,x)&&(P[x]=p[x])}return P},l.apply(this,arguments)}function C(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}var A=function(){function P(p){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=void 0,this.response=void 0,this.controller=void 0,this.context=void 0,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=p.fetchSetup||v,this.controller=new self.AbortController,this.stats=new I.LoadStats}var D=P.prototype;return D.destroy=function(){this.loader=this.callbacks=null,this.abortInternal()},D.abortInternal=function(){var x=this.response;(!x||!x.ok)&&(this.stats.aborted=!0,this.controller.abort())},D.abort=function(){var x;this.abortInternal(),(x=this.callbacks)!==null&&x!==void 0&&x.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)},D.load=function(x,b,y){var _=this,u=this.stats;if(u.loading.start)throw new Error("Loader can only be used once.");u.loading.start=self.performance.now();var m=d(x,this.controller.signal),o=y.onProgress,S=x.responseType==="arraybuffer",U=S?"byteLength":"length";this.context=x,this.config=b,this.callbacks=y,this.request=this.fetchSetup(x,m),self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(function(){_.abortInternal(),y.onTimeout(u,x,_.response)},b.timeout),self.fetch(this.request).then(function(R){if(_.response=_.loader=R,!R.ok){var G=R.status,j=R.statusText;throw new h(j||"fetch, bad network response",G,R)}return u.loading.first=Math.max(self.performance.now(),u.loading.start),u.total=parseInt(R.headers.get("Content-Length")||"0"),o&&(0,F.isFiniteNumber)(b.highWaterMark)?_.loadProgressively(R,u,x,b.highWaterMark,o):S?R.arrayBuffer():R.text()}).then(function(R){var G=_.response;self.clearTimeout(_.requestTimeout),u.loading.end=Math.max(self.performance.now(),u.loading.first);var j=R[U];j&&(u.loaded=u.total=j);var V={url:G.url,data:R};o&&!(0,F.isFiniteNumber)(b.highWaterMark)&&o(u,x,R,G),y.onSuccess(V,u,x,G)}).catch(function(R){if(self.clearTimeout(_.requestTimeout),!u.aborted){var G=R&&R.code||0,j=R?R.message:null;y.onError({code:G,text:j},x,R?R.details:null)}})},D.getCacheAge=function(){var x=null;if(this.response){var b=this.response.headers.get("age");x=b?parseFloat(b):null}return x},D.loadProgressively=function(x,b,y,_,u){_===void 0&&(_=0);var m=new K.default,o=x.body.getReader(),S=function U(){return o.read().then(function(R){if(R.done)return m.dataLength&&u(b,y,m.flush(),x),Promise.resolve(new ArrayBuffer(0));var G=R.value,j=G.length;return b.loaded+=j,j<_||m.dataLength?(m.push(G),m.dataLength>=_&&u(b,y,m.flush(),x)):u(b,y,G,x),U()}).catch(function(){return Promise.reject()})};return S()},P}();function d(P,D){var p={method:"GET",mode:"cors",credentials:"same-origin",signal:D,headers:new self.Headers(l({},P.headers))};return P.rangeEnd&&p.headers.set("Range","bytes="+P.rangeStart+"-"+String(P.rangeEnd-1)),p}function v(P,D){return new self.Request(P.url,D)}var h=function(P){M(D,P);function D(p,x,b){var y;return y=P.call(this,p)||this,y.code=void 0,y.details=void 0,y.code=x,y.details=b,y}return D}(H(Error));const g=A},"./src/utils/hex.ts":(O,w,f)=>{f.r(w),f.d(w,{default:()=>I});var F={hexDump:function(M){for(var H="",B=0;B<M.length;B++){var k=M[B].toString(16);k.length<2&&(k="0"+k),H+=k}return H}};const I=F},"./src/utils/imsc1-ttml-parser.ts":(O,w,f)=>{f.r(w),f.d(w,{IMSC1_CODEC:()=>N,parseIMSC1:()=>C});var F=f("./src/utils/mp4-tools.ts"),I=f("./src/utils/vttparser.ts"),K=f("./src/utils/vttcue.ts"),M=f("./src/demux/id3.ts"),H=f("./src/utils/timescale-conversion.ts"),B=f("./src/utils/webvtt-parser.ts");function k(){return k=Object.assign?Object.assign.bind():function(y){for(var _=1;_<arguments.length;_++){var u=arguments[_];for(var m in u)Object.prototype.hasOwnProperty.call(u,m)&&(y[m]=u[m])}return y},k.apply(this,arguments)}var N="stpp.ttml.im1t",L=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,T=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,l={left:"start",center:"center",right:"end",start:"start",end:"end"};function C(y,_,u,m,o){var S=(0,F.findBox)(new Uint8Array(y),["mdat"]);if(S.length===0){o(new Error("Could not parse IMSC1 mdat"));return}var U=S.map(function(G){return(0,M.utf8ArrayToStr)(G)}),R=(0,H.toTimescaleFromScale)(_,1,u);try{U.forEach(function(G){return m(A(G,R))})}catch(G){o(G)}}function A(y,_){var u=new DOMParser,m=u.parseFromString(y,"text/xml"),o=m.getElementsByTagName("tt")[0];if(!o)throw new Error("Invalid ttml");var S={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},U=Object.keys(S).reduce(function(z,$){return z[$]=o.getAttribute("ttp:"+$)||S[$],z},{}),R=o.getAttribute("xml:space")!=="preserve",G=v(d(o,"styling","style")),j=v(d(o,"layout","region")),V=d(o,"body","[begin]");return[].map.call(V,function(z){var $=h(z,R);if(!$||!z.hasAttribute("begin"))return null;var X=p(z.getAttribute("begin"),U),J=p(z.getAttribute("dur"),U),q=p(z.getAttribute("end"),U);if(X===null)throw D(z);if(q===null){if(J===null)throw D(z);q=X+J}var ee=new K.default(X-_,q-_,$);ee.id=(0,B.generateCueId)(ee.startTime,ee.endTime,ee.text);var ne=j[z.getAttribute("region")],ae=G[z.getAttribute("style")],ue=g(ne,ae,G),le=ue.textAlign;if(le){var fe=l[le];fe&&(ee.lineAlign=fe),ee.align=le}return k(ee,ue),ee}).filter(function(z){return z!==null})}function d(y,_,u){var m=y.getElementsByTagName(_)[0];return m?[].slice.call(m.querySelectorAll(u)):[]}function v(y){return y.reduce(function(_,u){var m=u.getAttribute("xml:id");return m&&(_[m]=u),_},{})}function h(y,_){return[].slice.call(y.childNodes).reduce(function(u,m,o){var S;return m.nodeName==="br"&&o?u+`
`:(S=m.childNodes)!==null&&S!==void 0&&S.length?h(m,_):_?u+m.textContent.trim().replace(/\s+/g," "):u+m.textContent},"")}function g(y,_,u){var m="http://www.w3.org/ns/ttml#styling",o=null,S=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],U=y!=null&&y.hasAttribute("style")?y.getAttribute("style"):null;return U&&u.hasOwnProperty(U)&&(o=u[U]),S.reduce(function(R,G){var j=P(_,m,G)||P(y,m,G)||P(o,m,G);return j&&(R[G]=j),R},{})}function P(y,_,u){return y&&y.hasAttributeNS(_,u)?y.getAttributeNS(_,u):null}function D(y){return new Error("Could not parse ttml timestamp "+y)}function p(y,_){if(!y)return null;var u=(0,I.parseTimeStamp)(y);return u===null&&(L.test(y)?u=x(y,_):T.test(y)&&(u=b(y,_))),u}function x(y,_){var u=L.exec(y),m=(u[4]|0)+(u[5]|0)/_.subFrameRate;return(u[1]|0)*3600+(u[2]|0)*60+(u[3]|0)+m/_.frameRate}function b(y,_){var u=T.exec(y),m=Number(u[1]),o=u[2];switch(o){case"h":return m*3600;case"m":return m*60;case"ms":return m*1e3;case"f":return m/_.frameRate;case"t":return m/_.tickRate}return m}},"./src/utils/keysystem-util.ts":(O,w,f)=>{f.r(w),f.d(w,{changeEndianness:()=>K,convertDataUriToArrayBytes:()=>M,strToUtf8array:()=>H});var F=f("./src/utils/numeric-encoding-utils.ts");function I(B){var k=H(B).subarray(0,16),N=new Uint8Array(16);return N.set(k,16-k.length),N}function K(B){var k=function(L,T,l){var C=L[T];L[T]=L[l],L[l]=C};k(B,0,3),k(B,1,2),k(B,4,5),k(B,6,7)}function M(B){var k=B.split(":"),N=null;if(k[0]==="data"&&k.length===2){var L=k[1].split(";"),T=L[L.length-1].split(",");if(T.length===2){var l=T[0]==="base64",C=T[1];l?(L.splice(-1,1),N=(0,F.base64Decode)(C)):N=I(C)}}return N}function H(B){return Uint8Array.from(unescape(encodeURIComponent(B)),function(k){return k.charCodeAt(0)})}},"./src/utils/logger.ts":(O,w,f)=>{f.r(w),f.d(w,{enableLogs:()=>B,logger:()=>k});var F=function(){},I={trace:F,debug:F,log:F,warn:F,info:F,error:F},K=I;function M(N){var L=self.console[N];return L?L.bind(self.console,"["+N+"] >"):F}function H(N){for(var L=arguments.length,T=new Array(L>1?L-1:0),l=1;l<L;l++)T[l-1]=arguments[l];T.forEach(function(C){K[C]=N[C]?N[C].bind(N):M(C)})}function B(N,L){if(self.console&&N===!0||typeof N=="object"){H(N,"debug","log","info","warn","error");try{K.log('Debug logs enabled for "'+L+'"')}catch{K=I}}else K=I}var k=K},"./src/utils/mediakeys-helper.ts":(O,w,f)=>{f.r(w),f.d(w,{KeySystemFormats:()=>I,KeySystemIds:()=>M,KeySystems:()=>F,getKeySystemsForConfig:()=>k,getSupportedMediaKeySystemConfigurations:()=>L,keySystemDomainToKeySystemFormat:()=>B,keySystemFormatToKeySystemDomain:()=>K,keySystemIdToKeySystemDomain:()=>H,requestMediaKeySystemAccess:()=>N});var F;(function(l){l.CLEARKEY="org.w3.clearkey",l.FAIRPLAY="com.apple.fps",l.PLAYREADY="com.microsoft.playready",l.WIDEVINE="com.widevine.alpha"})(F||(F={}));var I;(function(l){l.CLEARKEY="org.w3.clearkey",l.FAIRPLAY="com.apple.streamingkeydelivery",l.PLAYREADY="com.microsoft.playready",l.WIDEVINE="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"})(I||(I={}));function K(l){switch(l){case I.FAIRPLAY:return F.FAIRPLAY;case I.PLAYREADY:return F.PLAYREADY;case I.WIDEVINE:return F.WIDEVINE;case I.CLEARKEY:return F.CLEARKEY}}var M;(function(l){l.WIDEVINE="edef8ba979d64acea3c827dcd51d21ed"})(M||(M={}));function H(l){if(l===M.WIDEVINE)return F.WIDEVINE}function B(l){switch(l){case F.FAIRPLAY:return I.FAIRPLAY;case F.PLAYREADY:return I.PLAYREADY;case F.WIDEVINE:return I.WIDEVINE;case F.CLEARKEY:return I.CLEARKEY}}function k(l){var C=l.drmSystems,A=l.widevineLicenseUrl,d=C?[F.FAIRPLAY,F.WIDEVINE,F.PLAYREADY,F.CLEARKEY].filter(function(v){return!!C[v]}):[];return!d[F.WIDEVINE]&&A&&d.push(F.WIDEVINE),d}var N=function(){return typeof self<"u"&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null}();function L(l,C,A,d){var v;switch(l){case F.FAIRPLAY:v=["cenc","sinf"];break;case F.WIDEVINE:case F.PLAYREADY:v=["cenc"];break;case F.CLEARKEY:v=["cenc","keyids"];break;default:throw new Error("Unknown key-system: "+l)}return T(v,C,A,d)}function T(l,C,A,d){var v={initDataTypes:l,persistentState:d.persistentState||"not-allowed",distinctiveIdentifier:d.distinctiveIdentifier||"not-allowed",sessionTypes:d.sessionTypes||[d.sessionType||"temporary"],audioCapabilities:C.map(function(h){return{contentType:'audio/mp4; codecs="'+h+'"',robustness:d.audioRobustness||"",encryptionScheme:d.audioEncryptionScheme||null}}),videoCapabilities:A.map(function(h){return{contentType:'video/mp4; codecs="'+h+'"',robustness:d.videoRobustness||"",encryptionScheme:d.videoEncryptionScheme||null}})};return[v]}},"./src/utils/mediasource-helper.ts":(O,w,f)=>{f.r(w),f.d(w,{getMediaSource:()=>F});function F(){return self.MediaSource||self.WebKitMediaSource}},"./src/utils/mp4-tools.ts":(O,w,f)=>{f.r(w),f.d(w,{RemuxerTrackIdConfig:()=>N,appendUint8Array:()=>_,bin2str:()=>L,computeRawDurationFromSamples:()=>x,discardEPB:()=>U,findBox:()=>d,getDuration:()=>p,getStartDTS:()=>D,mp4Box:()=>G,mp4pssh:()=>j,offsetStartDTS:()=>b,parseEmsg:()=>R,parseInitSegment:()=>h,parsePssh:()=>V,parseSEIMessageFromNALu:()=>S,parseSamples:()=>u,parseSegmentIndex:()=>v,parseSinf:()=>P,patchEncyptionData:()=>g,readSint32:()=>C,readUint16:()=>T,readUint32:()=>l,segmentValidRange:()=>y,writeUint32:()=>A});var F=f("./src/loader/fragment.ts"),I=f("./src/utils/typed-array.ts"),K=f("./src/demux/id3.ts"),M=f("./src/utils/logger.ts"),H=f("./src/utils/hex.ts"),B=Math.pow(2,32)-1,k=[].push,N={video:1,audio:2,id3:3,text:4};function L(z){return String.fromCharCode.apply(null,z)}function T(z,$){var X=z[$]<<8|z[$+1];return X<0?65536+X:X}function l(z,$){var X=C(z,$);return X<0?4294967296+X:X}function C(z,$){return z[$]<<24|z[$+1]<<16|z[$+2]<<8|z[$+3]}function A(z,$,X){z[$]=X>>24,z[$+1]=X>>16&255,z[$+2]=X>>8&255,z[$+3]=X&255}function d(z,$){var X=[];if(!$.length)return X;for(var J=z.byteLength,q=0;q<J;){var ee=l(z,q),ne=L(z.subarray(q+4,q+8)),ae=ee>1?q+ee:J;if(ne===$[0])if($.length===1)X.push(z.subarray(q+8,ae));else{var ue=d(z.subarray(q+8,ae),$.slice(1));ue.length&&k.apply(X,ue)}q=ae}return X}function v(z){var $=[],X=z[0],J=8,q=l(z,J);J+=4;var ee=0,ne=0;X===0?J+=8:J+=16,J+=2;var ae=z.length+ne,ue=T(z,J);J+=2;for(var le=0;le<ue;le++){var fe=J,ye=l(z,fe);fe+=4;var Le=ye&2147483647,Ee=(ye&2147483648)>>>31;if(Ee===1)return console.warn("SIDX has hierarchical references (not supported)"),null;var ve=l(z,fe);fe+=4,$.push({referenceSize:Le,subsegmentDuration:ve,info:{duration:ve/q,start:ae,end:ae+Le-1}}),ae+=Le,fe+=4,J=fe}return{earliestPresentationTime:ee,timescale:q,version:X,referencesCount:ue,references:$}}function h(z){for(var $=[],X=d(z,["moov","trak"]),J=0;J<X.length;J++){var q=X[J],ee=d(q,["tkhd"])[0];if(ee){var ne=ee[0],ae=ne===0?12:20,ue=l(ee,ae),le=d(q,["mdia","mdhd"])[0];if(le){ne=le[0],ae=ne===0?12:20;var fe=l(le,ae),ye=d(q,["mdia","hdlr"])[0];if(ye){var Le=L(ye.subarray(8,12)),Ee={soun:F.ElementaryStreamTypes.AUDIO,vide:F.ElementaryStreamTypes.VIDEO}[Le];if(Ee){var ve=d(q,["mdia","minf","stbl","stsd"])[0],Ae=void 0;ve&&(Ae=L(ve.subarray(12,16))),$[ue]={timescale:fe,type:Ee},$[Ee]={timescale:fe,id:ue,codec:Ae}}}}}}var we=d(z,["moov","mvex","trex"]);return we.forEach(function(be){var ct=l(be,4),Ge=$[ct];Ge&&(Ge.default={duration:l(be,12),flags:l(be,20)})}),$}function g(z,$){if(!z||!$)return z;var X=$.keyId;if(X&&$.isCommonEncryption){var J=d(z,["moov","trak"]);J.forEach(function(q){var ee=d(q,["mdia","minf","stbl","stsd"])[0],ne=ee.subarray(8),ae=d(ne,["enca"]),ue=ae.length>0;ue||(ae=d(ne,["encv"])),ae.forEach(function(le){var fe=ue?le.subarray(28):le.subarray(78),ye=d(fe,["sinf"]);ye.forEach(function(Le){var Ee=P(Le);if(Ee){var ve=Ee.subarray(8,24);ve.some(function(Ae){return Ae!==0})||(M.logger.log("[eme] Patching keyId in 'enc"+(ue?"a":"v")+">sinf>>tenc' box: "+H.default.hexDump(ve)+" -> "+H.default.hexDump(X)),Ee.set(X,8))}})})})}return z}function P(z){var $=d(z,["schm"])[0];if($){var X=L($.subarray(4,8));if(X==="cbcs"||X==="cenc")return d(z,["schi","tenc"])[0]}return M.logger.error("[eme] missing 'schm' box"),null}function D(z,$){return d($,["moof","traf"]).reduce(function(X,J){var q=d(J,["tfdt"])[0],ee=q[0],ne=d(J,["tfhd"]).reduce(function(ae,ue){var le=l(ue,4),fe=z[le];if(fe){var ye=l(q,4);ee===1&&(ye*=Math.pow(2,32),ye+=l(q,8));var Le=fe.timescale||9e4,Ee=ye/Le;if(isFinite(Ee)&&(ae===null||Ee<ae))return Ee}return ae},null);return ne!==null&&isFinite(ne)&&(X===null||ne<X)?ne:X},null)||0}function p(z,$){for(var X=0,J=0,q=0,ee=d(z,["moof","traf"]),ne=0;ne<ee.length;ne++){var ae=ee[ne],ue=d(ae,["tfhd"])[0],le=l(ue,4),fe=$[le];if(fe){var ye=fe.default,Le=l(ue,0)|(ye==null?void 0:ye.flags),Ee=ye==null?void 0:ye.duration;Le&8&&(Le&2?Ee=l(ue,12):Ee=l(ue,8));for(var ve=fe.timescale||9e4,Ae=d(ae,["trun"]),we=0;we<Ae.length;we++){if(X=x(Ae[we]),!X&&Ee){var be=l(Ae[we],4);X=Ee*be}fe.type===F.ElementaryStreamTypes.VIDEO?J+=X/ve:fe.type===F.ElementaryStreamTypes.AUDIO&&(q+=X/ve)}}}if(J===0&&q===0){for(var ct=0,Ge=d(z,["sidx"]),qe=0;qe<Ge.length;qe++){var Ke=v(Ge[qe]);Ke!=null&&Ke.references&&(ct+=Ke.references.reduce(function(He,ze){return He+ze.info.duration||0},0))}return ct}return J||q}function x(z){var $=l(z,0),X=8;$&1&&(X+=4),$&4&&(X+=4);for(var J=0,q=l(z,4),ee=0;ee<q;ee++){if($&256){var ne=l(z,X);J+=ne,X+=4}$&512&&(X+=4),$&1024&&(X+=4),$&2048&&(X+=4)}return J}function b(z,$,X){d($,["moof","traf"]).forEach(function(J){d(J,["tfhd"]).forEach(function(q){var ee=l(q,4),ne=z[ee];if(ne){var ae=ne.timescale||9e4;d(J,["tfdt"]).forEach(function(ue){var le=ue[0],fe=l(ue,4);if(le===0)fe-=X*ae,fe=Math.max(fe,0),A(ue,4,fe);else{fe*=Math.pow(2,32),fe+=l(ue,8),fe-=X*ae,fe=Math.max(fe,0);var ye=Math.floor(fe/(B+1)),Le=Math.floor(fe%(B+1));A(ue,4,ye),A(ue,8,Le)}})}})})}function y(z){var $={valid:null,remainder:null},X=d(z,["moof"]);if(X){if(X.length<2)return $.remainder=z,$}else return $;var J=X[X.length-1];return $.valid=(0,I.sliceUint8)(z,0,J.byteOffset-8),$.remainder=(0,I.sliceUint8)(z,J.byteOffset-8),$}function _(z,$){var X=new Uint8Array(z.length+$.length);return X.set(z),X.set($,z.length),X}function u(z,$){var X=[],J=$.samples,q=$.timescale,ee=$.id,ne=!1,ae=d(J,["moof"]);return ae.map(function(ue){var le=ue.byteOffset-8,fe=d(ue,["traf"]);fe.map(function(ye){var Le=d(ye,["tfdt"]).map(function(Ee){var ve=Ee[0],Ae=l(Ee,4);return ve===1&&(Ae*=Math.pow(2,32),Ae+=l(Ee,8)),Ae/q})[0];return Le!==void 0&&(z=Le),d(ye,["tfhd"]).map(function(Ee){var ve=l(Ee,4),Ae=l(Ee,0)&16777215,we=(Ae&1)!==0,be=(Ae&2)!==0,ct=(Ae&8)!==0,Ge=0,qe=(Ae&16)!==0,Ke=0,He=(Ae&32)!==0,ze=8;ve===ee&&(we&&(ze+=8),be&&(ze+=4),ct&&(Ge=l(Ee,ze),ze+=4),qe&&(Ke=l(Ee,ze),ze+=4),He&&(ze+=4),$.type==="video"&&(ne=m($.codec)),d(ye,["trun"]).map(function(nt){var Et=nt[0],ot=l(nt,0)&16777215,_t=(ot&1)!==0,ir=0,Dt=(ot&4)!==0,pr=(ot&256)!==0,Xt=0,ar=(ot&512)!==0,sr=0,wt=(ot&1024)!==0,Lt=(ot&2048)!==0,Qt=0,mr=l(nt,4),pt=8;_t&&(ir=l(nt,pt),pt+=4),Dt&&(pt+=4);for(var br=ir+le,yr=0;yr<mr;yr++){if(pr?(Xt=l(nt,pt),pt+=4):Xt=Ge,ar?(sr=l(nt,pt),pt+=4):sr=Ke,wt&&(pt+=4),Lt&&(Et===0?Qt=l(nt,pt):Qt=C(nt,pt),pt+=4),$.type===F.ElementaryStreamTypes.VIDEO)for(var Pi=0;Pi<sr;){var _n=l(J,br);if(br+=4,o(ne,J[br])){var Wn=J.subarray(br,br+_n);S(Wn,ne?2:1,z+Qt/q,X)}br+=_n,Pi+=_n+4}z+=Xt/q}}))})})}),X}function m(z){if(!z)return!1;var $=z.indexOf("."),X=$<0?z:z.substring(0,$);return X==="hvc1"||X==="hev1"||X==="dvh1"||X==="dvhe"}function o(z,$){if(z){var X=$>>1&63;return X===39||X===40}else{var J=$&31;return J===6}}function S(z,$,X,J){var q=U(z),ee=0;ee+=$;for(var ne=0,ae=0,ue=!1,le=0;ee<q.length;){ne=0;do{if(ee>=q.length)break;le=q[ee++],ne+=le}while(le===255);ae=0;do{if(ee>=q.length)break;le=q[ee++],ae+=le}while(le===255);var fe=q.length-ee;if(!ue&&ne===4&&ee<q.length){ue=!0;var ye=q[ee++];if(ye===181){var Le=T(q,ee);if(ee+=2,Le===49){var Ee=l(q,ee);if(ee+=4,Ee===1195456820){var ve=q[ee++];if(ve===3){var Ae=q[ee++],we=31&Ae,be=64&Ae,ct=be?2+we*3:0,Ge=new Uint8Array(ct);if(be){Ge[0]=Ae;for(var qe=1;qe<ct;qe++)Ge[qe]=q[ee++]}J.push({type:ve,payloadType:ne,pts:X,bytes:Ge})}}}}}else if(ne===5&&ae<fe){if(ue=!0,ae>16){for(var Ke=[],He=0;He<16;He++){var ze=q[ee++].toString(16);Ke.push(ze.length==1?"0"+ze:ze),(He===3||He===5||He===7||He===9)&&Ke.push("-")}for(var nt=ae-16,Et=new Uint8Array(nt),ot=0;ot<nt;ot++)Et[ot]=q[ee++];J.push({payloadType:ne,pts:X,uuid:Ke.join(""),userData:(0,K.utf8ArrayToStr)(Et),userDataBytes:Et})}}else if(ae<fe)ee+=ae;else if(ae>fe)break}}function U(z){for(var $=z.byteLength,X=[],J=1;J<$-2;)z[J]===0&&z[J+1]===0&&z[J+2]===3?(X.push(J+2),J+=2):J++;if(X.length===0)return z;var q=$-X.length,ee=new Uint8Array(q),ne=0;for(J=0;J<q;ne++,J++)ne===X[0]&&(ne++,X.shift()),ee[J]=z[ne];return ee}function R(z){var $=z[0],X="",J="",q=0,ee=0,ne=0,ae=0,ue=0,le=0;if($===0){for(;L(z.subarray(le,le+1))!=="\0";)X+=L(z.subarray(le,le+1)),le+=1;for(X+=L(z.subarray(le,le+1)),le+=1;L(z.subarray(le,le+1))!=="\0";)J+=L(z.subarray(le,le+1)),le+=1;J+=L(z.subarray(le,le+1)),le+=1,q=l(z,12),ee=l(z,16),ae=l(z,20),ue=l(z,24),le=28}else if($===1){le+=4,q=l(z,le),le+=4;var fe=l(z,le);le+=4;var ye=l(z,le);for(le+=4,ne=Math.pow(2,32)*fe+ye,Number.isSafeInteger(ne)||(ne=Number.MAX_SAFE_INTEGER,console.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),ae=l(z,le),le+=4,ue=l(z,le),le+=4;L(z.subarray(le,le+1))!=="\0";)X+=L(z.subarray(le,le+1)),le+=1;for(X+=L(z.subarray(le,le+1)),le+=1;L(z.subarray(le,le+1))!=="\0";)J+=L(z.subarray(le,le+1)),le+=1;J+=L(z.subarray(le,le+1)),le+=1}var Le=z.subarray(le,z.byteLength);return{schemeIdUri:X,value:J,timeScale:q,presentationTime:ne,presentationTimeDelta:ee,eventDuration:ae,id:ue,payload:Le}}function G(z){for(var $=arguments.length,X=new Array($>1?$-1:0),J=1;J<$;J++)X[J-1]=arguments[J];for(var q=X.length,ee=8,ne=q;ne--;)ee+=X[ne].byteLength;var ae=new Uint8Array(ee);for(ae[0]=ee>>24&255,ae[1]=ee>>16&255,ae[2]=ee>>8&255,ae[3]=ee&255,ae.set(z,4),ne=0,ee=8;ne<q;ne++)ae.set(X[ne],ee),ee+=X[ne].byteLength;return ae}function j(z,$,X){if(z.byteLength!==16)throw new RangeError("Invalid system id");var J,q;if($){J=1,q=new Uint8Array($.length*16);for(var ee=0;ee<$.length;ee++){var ne=$[ee];if(ne.byteLength!==16)throw new RangeError("Invalid key");q.set(ne,ee*16)}}else J=0,q=new Uint8Array;var ae;J>0?(ae=new Uint8Array(4),$.length>0&&new DataView(ae.buffer).setUint32(0,$.length,!1)):ae=new Uint8Array;var ue=new Uint8Array(4);return X&&X.byteLength>0&&new DataView(ue.buffer).setUint32(0,X.byteLength,!1),G([112,115,115,104],new Uint8Array([J,0,0,0]),z,ae,q,ue,X||new Uint8Array)}function V(z){if(!(z instanceof ArrayBuffer)||z.byteLength<32)return null;var $={version:0,systemId:"",kids:null,data:null},X=new DataView(z),J=X.getUint32(0);if(z.byteLength!==J&&J>44)return null;var q=X.getUint32(4);if(q!==1886614376||($.version=X.getUint32(8)>>>24,$.version>1))return null;$.systemId=H.default.hexDump(new Uint8Array(z,12,16));var ee=X.getUint32(28);if($.version===0){if(J-32<ee)return null;$.data=new Uint8Array(z,32,ee)}else if($.version===1){$.kids=[];for(var ne=0;ne<ee;ne++)$.kids.push(new Uint8Array(z,32+ne*16,16))}return $}},"./src/utils/numeric-encoding-utils.ts":(O,w,f)=>{f.r(w),f.d(w,{base64Decode:()=>B,base64DecodeToStr:()=>K,base64Encode:()=>M,base64ToBase64Url:()=>F,base64UrlEncode:()=>H,strToBase64Encode:()=>I});function F(k){return k.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function I(k){return btoa(k)}function K(k){return atob(k)}function M(k){return btoa(String.fromCharCode.apply(String,k))}function H(k){return F(M(k))}function B(k){return Uint8Array.from(atob(k),function(N){return N.charCodeAt(0)})}},"./src/utils/output-filter.ts":(O,w,f)=>{f.r(w),f.d(w,{default:()=>F});var F=function(){function I(M,H){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=M,this.trackName=H}var K=I.prototype;return K.dispatchCue=function(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},K.newCue=function(H,B,k){(this.startTime===null||this.startTime>H)&&(this.startTime=H),this.endTime=B,this.screen=k,this.timelineController.createCaptionsTrack(this.trackName)},K.reset=function(){this.cueRanges=[],this.startTime=null},I}()},"./src/utils/texttrack-utils.ts":(O,w,f)=>{f.r(w),f.d(w,{addCueToTrack:()=>K,clearCurrentCues:()=>M,getCuesInRange:()=>k,removeCuesInRange:()=>H,sendAddTrackEvent:()=>I});var F=f("./src/utils/logger.ts");function I(N,L){var T;try{T=new Event("addtrack")}catch{T=document.createEvent("Event"),T.initEvent("addtrack",!1,!1)}T.track=N,L.dispatchEvent(T)}function K(N,L){var T=N.mode;if(T==="disabled"&&(N.mode="hidden"),N.cues&&!N.cues.getCueById(L.id))try{if(N.addCue(L),!N.cues.getCueById(L.id))throw new Error("addCue is failed for: "+L)}catch(C){F.logger.debug("[texttrack-utils]: "+C);var l=new self.TextTrackCue(L.startTime,L.endTime,L.text);l.id=L.id,N.addCue(l)}T==="disabled"&&(N.mode=T)}function M(N){var L=N.mode;if(L==="disabled"&&(N.mode="hidden"),N.cues)for(var T=N.cues.length;T--;)N.removeCue(N.cues[T]);L==="disabled"&&(N.mode=L)}function H(N,L,T,l){var C=N.mode;if(C==="disabled"&&(N.mode="hidden"),N.cues&&N.cues.length>0)for(var A=k(N.cues,L,T),d=0;d<A.length;d++)(!l||l(A[d]))&&N.removeCue(A[d]);C==="disabled"&&(N.mode=C)}function B(N,L){if(L<N[0].startTime)return 0;var T=N.length-1;if(L>N[T].endTime)return-1;for(var l=0,C=T;l<=C;){var A=Math.floor((C+l)/2);if(L<N[A].startTime)C=A-1;else if(L>N[A].startTime&&l<T)l=A+1;else return A}return N[l].startTime-L<L-N[C].startTime?l:C}function k(N,L,T){var l=[],C=B(N,L);if(C>-1)for(var A=C,d=N.length;A<d;A++){var v=N[A];if(v.startTime>=L&&v.endTime<=T)l.push(v);else if(v.startTime>T)return l}return l}},"./src/utils/time-ranges.ts":(O,w,f)=>{f.r(w),f.d(w,{default:()=>I});var F={toString:function(M){for(var H="",B=M.length,k=0;k<B;k++)H+="["+M.start(k).toFixed(3)+"-"+M.end(k).toFixed(3)+"]";return H}};const I=F},"./src/utils/timescale-conversion.ts":(O,w,f)=>{f.r(w),f.d(w,{toMpegTsClockFromTimescale:()=>H,toMsFromMpegTsClock:()=>M,toTimescaleFromBase:()=>I,toTimescaleFromScale:()=>K});var F=9e4;function I(B,k,N,L){N===void 0&&(N=1),L===void 0&&(L=!1);var T=B*k*N;return L?Math.round(T):T}function K(B,k,N,L){return N===void 0&&(N=1),L===void 0&&(L=!1),I(B,k,1/N,L)}function M(B,k){return k===void 0&&(k=!1),I(B,1e3,1/F,k)}function H(B,k){return k===void 0&&(k=1),I(B,F,1/k)}},"./src/utils/typed-array.ts":(O,w,f)=>{f.r(w),f.d(w,{sliceUint8:()=>F});function F(I,K,M){return Uint8Array.prototype.slice?I.slice(K,M):new Uint8Array(Array.prototype.slice.call(I,K,M))}},"./src/utils/vttcue.ts":(O,w,f)=>{f.r(w),f.d(w,{default:()=>F});const F=function(){if(typeof self<"u"&&self.VTTCue)return self.VTTCue;var I=["","lr","rl"],K=["start","middle","end","left","right"];function M(L,T){if(typeof T!="string"||!Array.isArray(L))return!1;var l=T.toLowerCase();return~L.indexOf(l)?l:!1}function H(L){return M(I,L)}function B(L){return M(K,L)}function k(L){for(var T=arguments.length,l=new Array(T>1?T-1:0),C=1;C<T;C++)l[C-1]=arguments[C];for(var A=1;A<arguments.length;A++){var d=arguments[A];for(var v in d)L[v]=d[v]}return L}function N(L,T,l){var C=this,A={enumerable:!0};C.hasBeenReset=!1;var d="",v=!1,h=L,g=T,P=l,D=null,p="",x=!0,b="auto",y="start",_=50,u="middle",m=50,o="middle";Object.defineProperty(C,"id",k({},A,{get:function(){return d},set:function(U){d=""+U}})),Object.defineProperty(C,"pauseOnExit",k({},A,{get:function(){return v},set:function(U){v=!!U}})),Object.defineProperty(C,"startTime",k({},A,{get:function(){return h},set:function(U){if(typeof U!="number")throw new TypeError("Start time must be set to a number.");h=U,this.hasBeenReset=!0}})),Object.defineProperty(C,"endTime",k({},A,{get:function(){return g},set:function(U){if(typeof U!="number")throw new TypeError("End time must be set to a number.");g=U,this.hasBeenReset=!0}})),Object.defineProperty(C,"text",k({},A,{get:function(){return P},set:function(U){P=""+U,this.hasBeenReset=!0}})),Object.defineProperty(C,"region",k({},A,{get:function(){return D},set:function(U){D=U,this.hasBeenReset=!0}})),Object.defineProperty(C,"vertical",k({},A,{get:function(){return p},set:function(U){var R=H(U);if(R===!1)throw new SyntaxError("An invalid or illegal string was specified.");p=R,this.hasBeenReset=!0}})),Object.defineProperty(C,"snapToLines",k({},A,{get:function(){return x},set:function(U){x=!!U,this.hasBeenReset=!0}})),Object.defineProperty(C,"line",k({},A,{get:function(){return b},set:function(U){if(typeof U!="number"&&U!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");b=U,this.hasBeenReset=!0}})),Object.defineProperty(C,"lineAlign",k({},A,{get:function(){return y},set:function(U){var R=B(U);if(!R)throw new SyntaxError("An invalid or illegal string was specified.");y=R,this.hasBeenReset=!0}})),Object.defineProperty(C,"position",k({},A,{get:function(){return _},set:function(U){if(U<0||U>100)throw new Error("Position must be between 0 and 100.");_=U,this.hasBeenReset=!0}})),Object.defineProperty(C,"positionAlign",k({},A,{get:function(){return u},set:function(U){var R=B(U);if(!R)throw new SyntaxError("An invalid or illegal string was specified.");u=R,this.hasBeenReset=!0}})),Object.defineProperty(C,"size",k({},A,{get:function(){return m},set:function(U){if(U<0||U>100)throw new Error("Size must be between 0 and 100.");m=U,this.hasBeenReset=!0}})),Object.defineProperty(C,"align",k({},A,{get:function(){return o},set:function(U){var R=B(U);if(!R)throw new SyntaxError("An invalid or illegal string was specified.");o=R,this.hasBeenReset=!0}})),C.displayState=void 0}return N.prototype.getCueAsHTML=function(){var L=self.WebVTT;return L.convertCueToDOMTree(self,this.text)},N}()},"./src/utils/vttparser.ts":(O,w,f)=>{f.r(w),f.d(w,{VTTParser:()=>T,fixLineBreaks:()=>L,parseTimeStamp:()=>K});var F=f("./src/utils/vttcue.ts"),I=function(){function l(){}var C=l.prototype;return C.decode=function(d,v){if(!d)return"";if(typeof d!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(d))},l}();function K(l){function C(d,v,h,g){return(d|0)*3600+(v|0)*60+(h|0)+parseFloat(g||0)}var A=l.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return A?parseFloat(A[2])>59?C(A[2],A[3],0,A[4]):C(A[1],A[2],A[3],A[4]):null}var M=function(){function l(){this.values=Object.create(null)}var C=l.prototype;return C.set=function(d,v){!this.get(d)&&v!==""&&(this.values[d]=v)},C.get=function(d,v,h){return h?this.has(d)?this.values[d]:v[h]:this.has(d)?this.values[d]:v},C.has=function(d){return d in this.values},C.alt=function(d,v,h){for(var g=0;g<h.length;++g)if(v===h[g]){this.set(d,v);break}},C.integer=function(d,v){/^-?\d+$/.test(v)&&this.set(d,parseInt(v,10))},C.percent=function(d,v){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(v)){var h=parseFloat(v);if(h>=0&&h<=100)return this.set(d,h),!0}return!1},l}();function H(l,C,A,d){var v=d?l.split(d):[l];for(var h in v)if(typeof v[h]=="string"){var g=v[h].split(A);if(g.length===2){var P=g[0],D=g[1];C(P,D)}}}var B=new F.default(0,0,""),k=B.align==="middle"?"middle":"center";function N(l,C,A){var d=l;function v(){var P=K(l);if(P===null)throw new Error("Malformed timestamp: "+d);return l=l.replace(/^[^\sa-zA-Z-]+/,""),P}function h(P,D){var p=new M;H(P,function(y,_){var u;switch(y){case"region":for(var m=A.length-1;m>=0;m--)if(A[m].id===_){p.set(y,A[m].region);break}break;case"vertical":p.alt(y,_,["rl","lr"]);break;case"line":u=_.split(","),p.integer(y,u[0]),p.percent(y,u[0])&&p.set("snapToLines",!1),p.alt(y,u[0],["auto"]),u.length===2&&p.alt("lineAlign",u[1],["start",k,"end"]);break;case"position":u=_.split(","),p.percent(y,u[0]),u.length===2&&p.alt("positionAlign",u[1],["start",k,"end","line-left","line-right","auto"]);break;case"size":p.percent(y,_);break;case"align":p.alt(y,_,["start",k,"end","left","right"]);break}},/:/,/\s/),D.region=p.get("region",null),D.vertical=p.get("vertical","");var x=p.get("line","auto");x==="auto"&&B.line===-1&&(x=-1),D.line=x,D.lineAlign=p.get("lineAlign","start"),D.snapToLines=p.get("snapToLines",!0),D.size=p.get("size",100),D.align=p.get("align",k);var b=p.get("position","auto");b==="auto"&&B.position===50&&(b=D.align==="start"||D.align==="left"?0:D.align==="end"||D.align==="right"?100:50),D.position=b}function g(){l=l.replace(/^\s+/,"")}if(g(),C.startTime=v(),g(),l.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+d);l=l.slice(3),g(),C.endTime=v(),g(),h(l,C)}function L(l){return l.replace(/<br(?: \/)?>/gi,`
`)}var T=function(){function l(){this.state="INITIAL",this.buffer="",this.decoder=new I,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}var C=l.prototype;return C.parse=function(d){var v=this;d&&(v.buffer+=v.decoder.decode(d,{stream:!0}));function h(){var b=v.buffer,y=0;for(b=L(b);y<b.length&&b[y]!=="\r"&&b[y]!==`
`;)++y;var _=b.slice(0,y);return b[y]==="\r"&&++y,b[y]===`
`&&++y,v.buffer=b.slice(y),_}function g(b){H(b,function(y,_){},/:/)}try{var P="";if(v.state==="INITIAL"){if(!/\r\n|\n/.test(v.buffer))return this;P=h();var D=P.match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!D||!D[0])throw new Error("Malformed WebVTT signature.");v.state="HEADER"}for(var p=!1;v.buffer;){if(!/\r\n|\n/.test(v.buffer))return this;switch(p?p=!1:P=h(),v.state){case"HEADER":/:/.test(P)?g(P):P||(v.state="ID");continue;case"NOTE":P||(v.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(P)){v.state="NOTE";break}if(!P)continue;if(v.cue=new F.default(0,0,""),v.state="CUE",P.indexOf("-->")===-1){v.cue.id=P;continue}case"CUE":if(!v.cue){v.state="BADCUE";continue}try{N(P,v.cue,v.regionList)}catch{v.cue=null,v.state="BADCUE";continue}v.state="CUETEXT";continue;case"CUETEXT":{var x=P.indexOf("-->")!==-1;if(!P||x&&(p=!0)){v.oncue&&v.cue&&v.oncue(v.cue),v.cue=null,v.state="ID";continue}if(v.cue===null)continue;v.cue.text&&(v.cue.text+=`
`),v.cue.text+=P}continue;case"BADCUE":P||(v.state="ID")}}}catch{v.state==="CUETEXT"&&v.cue&&v.oncue&&v.oncue(v.cue),v.cue=null,v.state=v.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},C.flush=function(){var d=this;try{if((d.cue||d.state==="HEADER")&&(d.buffer+=`

`,d.parse()),d.state==="INITIAL"||d.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(v){d.onparsingerror&&d.onparsingerror(v)}return d.onflush&&d.onflush(),this},l}()},"./src/utils/webvtt-parser.ts":(O,w,f)=>{f.r(w),f.d(w,{generateCueId:()=>T,parseWebVTT:()=>C});var F=f("./src/polyfills/number.ts"),I=f("./src/utils/vttparser.ts"),K=f("./src/demux/id3.ts"),M=f("./src/utils/timescale-conversion.ts"),H=f("./src/remux/mp4-remuxer.ts"),B=/\r\n|\n\r|\n|\r/g,k=function(d,v,h){return h===void 0&&(h=0),d.slice(h,h+v.length)===v},N=function(d){var v=parseInt(d.slice(-3)),h=parseInt(d.slice(-6,-4)),g=parseInt(d.slice(-9,-7)),P=d.length>9?parseInt(d.substring(0,d.indexOf(":"))):0;if(!(0,F.isFiniteNumber)(v)||!(0,F.isFiniteNumber)(h)||!(0,F.isFiniteNumber)(g)||!(0,F.isFiniteNumber)(P))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+d);return v+=1e3*h,v+=60*1e3*g,v+=60*60*1e3*P,v},L=function(d){for(var v=5381,h=d.length;h;)v=v*33^d.charCodeAt(--h);return(v>>>0).toString()};function T(A,d,v){return L(A.toString())+L(d.toString())+L(v)}var l=function(d,v,h){var g=d[v],P=d[g.prevCC];if(!P||!P.new&&g.new){d.ccOffset=d.presentationOffset=g.start,g.new=!1;return}for(;(D=P)!==null&&D!==void 0&&D.new;){var D;d.ccOffset+=g.start-P.start,g.new=!1,g=P,P=d[g.prevCC]}d.presentationOffset=h};function C(A,d,v,h,g,P,D,p){var x=new I.VTTParser,b=(0,K.utf8ArrayToStr)(new Uint8Array(A)).trim().replace(B,`
`).split(`
`),y=[],_=(0,M.toMpegTsClockFromTimescale)(d,v),u="00:00.000",m=0,o=0,S,U=!0;x.oncue=function(R){var G=h[g],j=h.ccOffset,V=(m-_)/9e4;G!=null&&G.new&&(o!==void 0?j=h.ccOffset=G.start:l(h,g,V)),V&&(j=V-h.presentationOffset);var z=R.endTime-R.startTime,$=(0,H.normalizePts)((R.startTime+j-o)*9e4,P*9e4)/9e4;R.startTime=Math.max($,0),R.endTime=Math.max($+z,0);var X=R.text.trim();R.text=decodeURIComponent(encodeURIComponent(X)),R.id||(R.id=T(R.startTime,R.endTime,X)),R.endTime>0&&y.push(R)},x.onparsingerror=function(R){S=R},x.onflush=function(){if(S){p(S);return}D(y)},b.forEach(function(R){if(U)if(k(R,"X-TIMESTAMP-MAP=")){U=!1,R.slice(16).split(",").forEach(function(G){k(G,"LOCAL:")?u=G.slice(6):k(G,"MPEGTS:")&&(m=parseInt(G.slice(7)))});try{o=N(u)/1e3}catch(G){S=G}return}else R===""&&(U=!1);x.parse(R+`
`)}),x.flush()}},"./src/utils/xhr-loader.ts":(O,w,f)=>{f.r(w),f.d(w,{default:()=>H});var F=f("./src/utils/logger.ts"),I=f("./src/loader/load-stats.ts"),K=/^age:\s*[\d.]+\s*$/m,M=function(){function B(N){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=void 0,this.loader=null,this.stats=void 0,this.xhrSetup=N?N.xhrSetup:null,this.stats=new I.LoadStats,this.retryDelay=0}var k=B.prototype;return k.destroy=function(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null},k.abortInternal=function(){var L=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),L&&(L.onreadystatechange=null,L.onprogress=null,L.readyState!==4&&(this.stats.aborted=!0,L.abort()))},k.abort=function(){var L;this.abortInternal(),(L=this.callbacks)!==null&&L!==void 0&&L.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)},k.load=function(L,T,l){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=L,this.config=T,this.callbacks=l,this.retryDelay=T.retryDelay,this.loadInternal()},k.loadInternal=function(){var L=this.config,T=this.context;if(L){var l=this.loader=new self.XMLHttpRequest,C=this.stats;C.loading.first=0,C.loaded=0;var A=this.xhrSetup;try{if(A)try{A(l,T.url)}catch{l.open("GET",T.url,!0),A(l,T.url)}l.readyState||l.open("GET",T.url,!0);var d=this.context.headers;if(d)for(var v in d)l.setRequestHeader(v,d[v])}catch(h){this.callbacks.onError({code:l.status,text:h.message},T,l);return}T.rangeEnd&&l.setRequestHeader("Range","bytes="+T.rangeStart+"-"+(T.rangeEnd-1)),l.onreadystatechange=this.readystatechange.bind(this),l.onprogress=this.loadprogress.bind(this),l.responseType=T.responseType,self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),L.timeout),l.send()}},k.readystatechange=function(){var L=this.context,T=this.loader,l=this.stats;if(!(!L||!T)){var C=T.readyState,A=this.config;if(!l.aborted&&C>=2)if(self.clearTimeout(this.requestTimeout),l.loading.first===0&&(l.loading.first=Math.max(self.performance.now(),l.loading.start)),C===4){T.onreadystatechange=null,T.onprogress=null;var d=T.status,v=T.responseType==="arraybuffer";if(d>=200&&d<300&&(v&&T.response||T.responseText!==null)){l.loading.end=Math.max(self.performance.now(),l.loading.first);var h,g;if(v?(h=T.response,g=h.byteLength):(h=T.responseText,g=h.length),l.loaded=l.total=g,!this.callbacks)return;var P=this.callbacks.onProgress;if(P&&P(l,L,h,T),!this.callbacks)return;var D={url:T.responseURL,data:h};this.callbacks.onSuccess(D,l,L,T)}else l.retry>=A.maxRetry||d>=400&&d<499?(F.logger.error(d+" while loading "+L.url),this.callbacks.onError({code:d,text:T.statusText},L,T)):(F.logger.warn(d+" while loading "+L.url+", retrying in "+this.retryDelay+"..."),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,A.maxRetryDelay),l.retry++)}else self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),A.timeout)}},k.loadtimeout=function(){F.logger.warn("timeout while loading "+this.context.url);var L=this.callbacks;L&&(this.abortInternal(),L.onTimeout(this.stats,this.context,this.loader))},k.loadprogress=function(L){var T=this.stats;T.loaded=L.loaded,L.lengthComputable&&(T.total=L.total)},k.getCacheAge=function(){var L=null;if(this.loader&&K.test(this.loader.getAllResponseHeaders())){var T=this.loader.getResponseHeader("age");L=T?parseFloat(T):null}return L},B}();const H=M},"./node_modules/eventemitter3/index.js":O=>{var w=Object.prototype.hasOwnProperty,f="~";function F(){}Object.create&&(F.prototype=Object.create(null),new F().__proto__||(f=!1));function I(B,k,N){this.fn=B,this.context=k,this.once=N||!1}function K(B,k,N,L,T){if(typeof N!="function")throw new TypeError("The listener must be a function");var l=new I(N,L||B,T),C=f?f+k:k;return B._events[C]?B._events[C].fn?B._events[C]=[B._events[C],l]:B._events[C].push(l):(B._events[C]=l,B._eventsCount++),B}function M(B,k){--B._eventsCount===0?B._events=new F:delete B._events[k]}function H(){this._events=new F,this._eventsCount=0}H.prototype.eventNames=function(){var k=[],N,L;if(this._eventsCount===0)return k;for(L in N=this._events)w.call(N,L)&&k.push(f?L.slice(1):L);return Object.getOwnPropertySymbols?k.concat(Object.getOwnPropertySymbols(N)):k},H.prototype.listeners=function(k){var N=f?f+k:k,L=this._events[N];if(!L)return[];if(L.fn)return[L.fn];for(var T=0,l=L.length,C=new Array(l);T<l;T++)C[T]=L[T].fn;return C},H.prototype.listenerCount=function(k){var N=f?f+k:k,L=this._events[N];return L?L.fn?1:L.length:0},H.prototype.emit=function(k,N,L,T,l,C){var A=f?f+k:k;if(!this._events[A])return!1;var d=this._events[A],v=arguments.length,h,g;if(d.fn){switch(d.once&&this.removeListener(k,d.fn,void 0,!0),v){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,N),!0;case 3:return d.fn.call(d.context,N,L),!0;case 4:return d.fn.call(d.context,N,L,T),!0;case 5:return d.fn.call(d.context,N,L,T,l),!0;case 6:return d.fn.call(d.context,N,L,T,l,C),!0}for(g=1,h=new Array(v-1);g<v;g++)h[g-1]=arguments[g];d.fn.apply(d.context,h)}else{var P=d.length,D;for(g=0;g<P;g++)switch(d[g].once&&this.removeListener(k,d[g].fn,void 0,!0),v){case 1:d[g].fn.call(d[g].context);break;case 2:d[g].fn.call(d[g].context,N);break;case 3:d[g].fn.call(d[g].context,N,L);break;case 4:d[g].fn.call(d[g].context,N,L,T);break;default:if(!h)for(D=1,h=new Array(v-1);D<v;D++)h[D-1]=arguments[D];d[g].fn.apply(d[g].context,h)}}return!0},H.prototype.on=function(k,N,L){return K(this,k,N,L,!1)},H.prototype.once=function(k,N,L){return K(this,k,N,L,!0)},H.prototype.removeListener=function(k,N,L,T){var l=f?f+k:k;if(!this._events[l])return this;if(!N)return M(this,l),this;var C=this._events[l];if(C.fn)C.fn===N&&(!T||C.once)&&(!L||C.context===L)&&M(this,l);else{for(var A=0,d=[],v=C.length;A<v;A++)(C[A].fn!==N||T&&!C[A].once||L&&C[A].context!==L)&&d.push(C[A]);d.length?this._events[l]=d.length===1?d[0]:d:M(this,l)}return this},H.prototype.removeAllListeners=function(k){var N;return k?(N=f?f+k:k,this._events[N]&&M(this,N)):(this._events=new F,this._eventsCount=0),this},H.prototype.off=H.prototype.removeListener,H.prototype.addListener=H.prototype.on,H.prefixed=f,H.EventEmitter=H,O.exports=H},"./node_modules/url-toolkit/src/url-toolkit.js":function(O){(function(w){var f=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,F=/^(?=([^\/?#]*))\1([^]*)$/,I=/(?:\/|^)\.(?=\/)/g,K=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,M={buildAbsoluteURL:function(H,B,k){if(k=k||{},H=H.trim(),B=B.trim(),!B){if(!k.alwaysNormalize)return H;var N=M.parseURL(H);if(!N)throw new Error("Error trying to parse base URL.");return N.path=M.normalizePath(N.path),M.buildURLFromParts(N)}var L=M.parseURL(B);if(!L)throw new Error("Error trying to parse relative URL.");if(L.scheme)return k.alwaysNormalize?(L.path=M.normalizePath(L.path),M.buildURLFromParts(L)):B;var T=M.parseURL(H);if(!T)throw new Error("Error trying to parse base URL.");if(!T.netLoc&&T.path&&T.path[0]!=="/"){var l=F.exec(T.path);T.netLoc=l[1],T.path=l[2]}T.netLoc&&!T.path&&(T.path="/");var C={scheme:T.scheme,netLoc:L.netLoc,path:null,params:L.params,query:L.query,fragment:L.fragment};if(!L.netLoc&&(C.netLoc=T.netLoc,L.path[0]!=="/"))if(!L.path)C.path=T.path,L.params||(C.params=T.params,L.query||(C.query=T.query));else{var A=T.path,d=A.substring(0,A.lastIndexOf("/")+1)+L.path;C.path=M.normalizePath(d)}return C.path===null&&(C.path=k.alwaysNormalize?M.normalizePath(L.path):L.path),M.buildURLFromParts(C)},parseURL:function(H){var B=f.exec(H);return B?{scheme:B[1]||"",netLoc:B[2]||"",path:B[3]||"",params:B[4]||"",query:B[5]||"",fragment:B[6]||""}:null},normalizePath:function(H){for(H=H.split("").reverse().join("").replace(I,"");H.length!==(H=H.replace(K,"")).length;);return H.split("").reverse().join("")},buildURLFromParts:function(H){return H.scheme+H.netLoc+H.path+H.params+H.query+H.fragment}};O.exports=M})()}},a={};function s(O){var w=a[O];if(w!==void 0)return w.exports;var f=a[O]={exports:{}};return r[O].call(f.exports,f,f.exports,s),f.exports}s.m=r,s.n=O=>{var w=O&&O.__esModule?()=>O.default:()=>O;return s.d(w,{a:w}),w},s.d=(O,w)=>{for(var f in w)s.o(w,f)&&!s.o(O,f)&&Object.defineProperty(O,f,{enumerable:!0,get:w[f]})},s.o=(O,w)=>Object.prototype.hasOwnProperty.call(O,w),s.r=O=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(O,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(O,"__esModule",{value:!0})};var c=s("./src/hls.ts");return c=c.default,c})())})(hw);const Ca=bm(mh);var _u={},vw={get exports(){return _u},set exports(e){_u=e}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(e,t){(function(){var r,a="4.17.21",s=200,c="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",O="Expected a function",w="Invalid `variable` option passed into `_.template`",f="__lodash_hash_undefined__",F=500,I="__lodash_placeholder__",K=1,M=2,H=4,B=1,k=2,N=1,L=2,T=4,l=8,C=16,A=32,d=64,v=128,h=256,g=512,P=30,D="...",p=800,x=16,b=1,y=2,_=3,u=1/0,m=9007199254740991,o=17976931348623157e292,S=0/0,U=4294967295,R=U-1,G=U>>>1,j=[["ary",v],["bind",N],["bindKey",L],["curry",l],["curryRight",C],["flip",g],["partial",A],["partialRight",d],["rearg",h]],V="[object Arguments]",z="[object Array]",$="[object AsyncFunction]",X="[object Boolean]",J="[object Date]",q="[object DOMException]",ee="[object Error]",ne="[object Function]",ae="[object GeneratorFunction]",ue="[object Map]",le="[object Number]",fe="[object Null]",ye="[object Object]",Le="[object Promise]",Ee="[object Proxy]",ve="[object RegExp]",Ae="[object Set]",we="[object String]",be="[object Symbol]",ct="[object Undefined]",Ge="[object WeakMap]",qe="[object WeakSet]",Ke="[object ArrayBuffer]",He="[object DataView]",ze="[object Float32Array]",nt="[object Float64Array]",Et="[object Int8Array]",ot="[object Int16Array]",_t="[object Int32Array]",ir="[object Uint8Array]",Dt="[object Uint8ClampedArray]",pr="[object Uint16Array]",Xt="[object Uint32Array]",ar=/\b__p \+= '';/g,sr=/\b(__p \+=) '' \+/g,wt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Lt=/&(?:amp|lt|gt|quot|#39);/g,Qt=/[&<>"']/g,mr=RegExp(Lt.source),pt=RegExp(Qt.source),br=/<%-([\s\S]+?)%>/g,yr=/<%([\s\S]+?)%>/g,Pi=/<%=([\s\S]+?)%>/g,_n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Wn=/^\w*$/,po=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Gn=/[\\^$.*+?()[\]{}|]/g,lf=RegExp(Gn.source),Di=/^\s+/,uf=/\s/,mo=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ja=/\{\n\/\* \[wrapped with (.+)\] \*/,Er=/,? & /,yo=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Eo=/[()=,{}\[\]\/\s]/,ff=/\\(\\)?/g,cf=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,_o=/\w*$/,df=/^[-+]0x[0-9a-f]+$/i,hf=/^0b[01]+$/i,qa=/^\[object .+?Constructor\]$/,To=/^0o[0-7]+$/i,vf=/^(?:0|[1-9]\d*)$/,gf=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,So=/($^)/,x_=/['\n\r\u2028\u2029\\]/g,xo="\\ud800-\\udfff",L_="\\u0300-\\u036f",A_="\\ufe20-\\ufe2f",P_="\\u20d0-\\u20ff",Iv=L_+A_+P_,Ov="\\u2700-\\u27bf",wv="a-z\\xdf-\\xf6\\xf8-\\xff",D_="\\xac\\xb1\\xd7\\xf7",R_="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",C_="\\u2000-\\u206f",I_=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Mv="A-Z\\xc0-\\xd6\\xd8-\\xde",kv="\\ufe0e\\ufe0f",bv=D_+R_+C_+I_,pf="['’]",O_="["+xo+"]",Fv="["+bv+"]",Lo="["+Iv+"]",Nv="\\d+",w_="["+Ov+"]",Uv="["+wv+"]",Bv="[^"+xo+bv+Nv+Ov+wv+Mv+"]",mf="\\ud83c[\\udffb-\\udfff]",M_="(?:"+Lo+"|"+mf+")",Kv="[^"+xo+"]",yf="(?:\\ud83c[\\udde6-\\uddff]){2}",Ef="[\\ud800-\\udbff][\\udc00-\\udfff]",ea="["+Mv+"]",Wv="\\u200d",Gv="(?:"+Uv+"|"+Bv+")",k_="(?:"+ea+"|"+Bv+")",Hv="(?:"+pf+"(?:d|ll|m|re|s|t|ve))?",jv="(?:"+pf+"(?:D|LL|M|RE|S|T|VE))?",Vv=M_+"?",zv="["+kv+"]?",b_="(?:"+Wv+"(?:"+[Kv,yf,Ef].join("|")+")"+zv+Vv+")*",F_="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",N_="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",$v=zv+Vv+b_,U_="(?:"+[w_,yf,Ef].join("|")+")"+$v,B_="(?:"+[Kv+Lo+"?",Lo,yf,Ef,O_].join("|")+")",K_=RegExp(pf,"g"),W_=RegExp(Lo,"g"),_f=RegExp(mf+"(?="+mf+")|"+B_+$v,"g"),G_=RegExp([ea+"?"+Uv+"+"+Hv+"(?="+[Fv,ea,"$"].join("|")+")",k_+"+"+jv+"(?="+[Fv,ea+Gv,"$"].join("|")+")",ea+"?"+Gv+"+"+Hv,ea+"+"+jv,N_,F_,Nv,U_].join("|"),"g"),H_=RegExp("["+Wv+xo+Iv+kv+"]"),j_=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,V_=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],z_=-1,it={};it[ze]=it[nt]=it[Et]=it[ot]=it[_t]=it[ir]=it[Dt]=it[pr]=it[Xt]=!0,it[V]=it[z]=it[Ke]=it[X]=it[He]=it[J]=it[ee]=it[ne]=it[ue]=it[le]=it[ye]=it[ve]=it[Ae]=it[we]=it[Ge]=!1;var et={};et[V]=et[z]=et[Ke]=et[He]=et[X]=et[J]=et[ze]=et[nt]=et[Et]=et[ot]=et[_t]=et[ue]=et[le]=et[ye]=et[ve]=et[Ae]=et[we]=et[be]=et[ir]=et[Dt]=et[pr]=et[Xt]=!0,et[ee]=et[ne]=et[Ge]=!1;var $_={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Y_={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},X_={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Q_={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Z_=parseFloat,J_=parseInt,Yv=typeof ga=="object"&&ga&&ga.Object===Object&&ga,q_=typeof self=="object"&&self&&self.Object===Object&&self,Nt=Yv||q_||Function("return this")(),Tf=t&&!t.nodeType&&t,Ri=Tf&&!0&&e&&!e.nodeType&&e,Xv=Ri&&Ri.exports===Tf,Sf=Xv&&Yv.process,Fr=function(){try{var ie=Ri&&Ri.require&&Ri.require("util").types;return ie||Sf&&Sf.binding&&Sf.binding("util")}catch{}}(),Qv=Fr&&Fr.isArrayBuffer,Zv=Fr&&Fr.isDate,Jv=Fr&&Fr.isMap,qv=Fr&&Fr.isRegExp,eg=Fr&&Fr.isSet,tg=Fr&&Fr.isTypedArray;function _r(ie,ce,oe){switch(oe.length){case 0:return ie.call(ce);case 1:return ie.call(ce,oe[0]);case 2:return ie.call(ce,oe[0],oe[1]);case 3:return ie.call(ce,oe[0],oe[1],oe[2])}return ie.apply(ce,oe)}function eT(ie,ce,oe,Se){for(var Ie=-1,Ve=ie==null?0:ie.length;++Ie<Ve;){var Rt=ie[Ie];ce(Se,Rt,oe(Rt),ie)}return Se}function Nr(ie,ce){for(var oe=-1,Se=ie==null?0:ie.length;++oe<Se&&ce(ie[oe],oe,ie)!==!1;);return ie}function tT(ie,ce){for(var oe=ie==null?0:ie.length;oe--&&ce(ie[oe],oe,ie)!==!1;);return ie}function rg(ie,ce){for(var oe=-1,Se=ie==null?0:ie.length;++oe<Se;)if(!ce(ie[oe],oe,ie))return!1;return!0}function Hn(ie,ce){for(var oe=-1,Se=ie==null?0:ie.length,Ie=0,Ve=[];++oe<Se;){var Rt=ie[oe];ce(Rt,oe,ie)&&(Ve[Ie++]=Rt)}return Ve}function Ao(ie,ce){var oe=ie==null?0:ie.length;return!!oe&&ta(ie,ce,0)>-1}function xf(ie,ce,oe){for(var Se=-1,Ie=ie==null?0:ie.length;++Se<Ie;)if(oe(ce,ie[Se]))return!0;return!1}function lt(ie,ce){for(var oe=-1,Se=ie==null?0:ie.length,Ie=Array(Se);++oe<Se;)Ie[oe]=ce(ie[oe],oe,ie);return Ie}function jn(ie,ce){for(var oe=-1,Se=ce.length,Ie=ie.length;++oe<Se;)ie[Ie+oe]=ce[oe];return ie}function Lf(ie,ce,oe,Se){var Ie=-1,Ve=ie==null?0:ie.length;for(Se&&Ve&&(oe=ie[++Ie]);++Ie<Ve;)oe=ce(oe,ie[Ie],Ie,ie);return oe}function rT(ie,ce,oe,Se){var Ie=ie==null?0:ie.length;for(Se&&Ie&&(oe=ie[--Ie]);Ie--;)oe=ce(oe,ie[Ie],Ie,ie);return oe}function Af(ie,ce){for(var oe=-1,Se=ie==null?0:ie.length;++oe<Se;)if(ce(ie[oe],oe,ie))return!0;return!1}var nT=Pf("length");function iT(ie){return ie.split("")}function aT(ie){return ie.match(yo)||[]}function ng(ie,ce,oe){var Se;return oe(ie,function(Ie,Ve,Rt){if(ce(Ie,Ve,Rt))return Se=Ve,!1}),Se}function Po(ie,ce,oe,Se){for(var Ie=ie.length,Ve=oe+(Se?1:-1);Se?Ve--:++Ve<Ie;)if(ce(ie[Ve],Ve,ie))return Ve;return-1}function ta(ie,ce,oe){return ce===ce?mT(ie,ce,oe):Po(ie,ig,oe)}function sT(ie,ce,oe,Se){for(var Ie=oe-1,Ve=ie.length;++Ie<Ve;)if(Se(ie[Ie],ce))return Ie;return-1}function ig(ie){return ie!==ie}function ag(ie,ce){var oe=ie==null?0:ie.length;return oe?Rf(ie,ce)/oe:S}function Pf(ie){return function(ce){return ce==null?r:ce[ie]}}function Df(ie){return function(ce){return ie==null?r:ie[ce]}}function sg(ie,ce,oe,Se,Ie){return Ie(ie,function(Ve,Rt,Je){oe=Se?(Se=!1,Ve):ce(oe,Ve,Rt,Je)}),oe}function oT(ie,ce){var oe=ie.length;for(ie.sort(ce);oe--;)ie[oe]=ie[oe].value;return ie}function Rf(ie,ce){for(var oe,Se=-1,Ie=ie.length;++Se<Ie;){var Ve=ce(ie[Se]);Ve!==r&&(oe=oe===r?Ve:oe+Ve)}return oe}function Cf(ie,ce){for(var oe=-1,Se=Array(ie);++oe<ie;)Se[oe]=ce(oe);return Se}function lT(ie,ce){return lt(ce,function(oe){return[oe,ie[oe]]})}function og(ie){return ie&&ie.slice(0,cg(ie)+1).replace(Di,"")}function Tr(ie){return function(ce){return ie(ce)}}function If(ie,ce){return lt(ce,function(oe){return ie[oe]})}function es(ie,ce){return ie.has(ce)}function lg(ie,ce){for(var oe=-1,Se=ie.length;++oe<Se&&ta(ce,ie[oe],0)>-1;);return oe}function ug(ie,ce){for(var oe=ie.length;oe--&&ta(ce,ie[oe],0)>-1;);return oe}function uT(ie,ce){for(var oe=ie.length,Se=0;oe--;)ie[oe]===ce&&++Se;return Se}var fT=Df($_),cT=Df(Y_);function dT(ie){return"\\"+Q_[ie]}function hT(ie,ce){return ie==null?r:ie[ce]}function ra(ie){return H_.test(ie)}function vT(ie){return j_.test(ie)}function gT(ie){for(var ce,oe=[];!(ce=ie.next()).done;)oe.push(ce.value);return oe}function Of(ie){var ce=-1,oe=Array(ie.size);return ie.forEach(function(Se,Ie){oe[++ce]=[Ie,Se]}),oe}function fg(ie,ce){return function(oe){return ie(ce(oe))}}function Vn(ie,ce){for(var oe=-1,Se=ie.length,Ie=0,Ve=[];++oe<Se;){var Rt=ie[oe];(Rt===ce||Rt===I)&&(ie[oe]=I,Ve[Ie++]=oe)}return Ve}function Do(ie){var ce=-1,oe=Array(ie.size);return ie.forEach(function(Se){oe[++ce]=Se}),oe}function pT(ie){var ce=-1,oe=Array(ie.size);return ie.forEach(function(Se){oe[++ce]=[Se,Se]}),oe}function mT(ie,ce,oe){for(var Se=oe-1,Ie=ie.length;++Se<Ie;)if(ie[Se]===ce)return Se;return-1}function yT(ie,ce,oe){for(var Se=oe+1;Se--;)if(ie[Se]===ce)return Se;return Se}function na(ie){return ra(ie)?_T(ie):nT(ie)}function Zr(ie){return ra(ie)?TT(ie):iT(ie)}function cg(ie){for(var ce=ie.length;ce--&&uf.test(ie.charAt(ce)););return ce}var ET=Df(X_);function _T(ie){for(var ce=_f.lastIndex=0;_f.test(ie);)++ce;return ce}function TT(ie){return ie.match(_f)||[]}function ST(ie){return ie.match(G_)||[]}var xT=function ie(ce){ce=ce==null?Nt:ia.defaults(Nt.Object(),ce,ia.pick(Nt,V_));var oe=ce.Array,Se=ce.Date,Ie=ce.Error,Ve=ce.Function,Rt=ce.Math,Je=ce.Object,wf=ce.RegExp,LT=ce.String,Ur=ce.TypeError,Ro=oe.prototype,AT=Ve.prototype,aa=Je.prototype,Co=ce["__core-js_shared__"],Io=AT.toString,Ye=aa.hasOwnProperty,PT=0,dg=function(){var n=/[^.]+$/.exec(Co&&Co.keys&&Co.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),Oo=aa.toString,DT=Io.call(Je),RT=Nt._,CT=wf("^"+Io.call(Ye).replace(Gn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),wo=Xv?ce.Buffer:r,zn=ce.Symbol,Mo=ce.Uint8Array,hg=wo?wo.allocUnsafe:r,ko=fg(Je.getPrototypeOf,Je),vg=Je.create,gg=aa.propertyIsEnumerable,bo=Ro.splice,pg=zn?zn.isConcatSpreadable:r,ts=zn?zn.iterator:r,Ci=zn?zn.toStringTag:r,Fo=function(){try{var n=ki(Je,"defineProperty");return n({},"",{}),n}catch{}}(),IT=ce.clearTimeout!==Nt.clearTimeout&&ce.clearTimeout,OT=Se&&Se.now!==Nt.Date.now&&Se.now,wT=ce.setTimeout!==Nt.setTimeout&&ce.setTimeout,No=Rt.ceil,Uo=Rt.floor,Mf=Je.getOwnPropertySymbols,MT=wo?wo.isBuffer:r,mg=ce.isFinite,kT=Ro.join,bT=fg(Je.keys,Je),Ct=Rt.max,Gt=Rt.min,FT=Se.now,NT=ce.parseInt,yg=Rt.random,UT=Ro.reverse,kf=ki(ce,"DataView"),rs=ki(ce,"Map"),bf=ki(ce,"Promise"),sa=ki(ce,"Set"),ns=ki(ce,"WeakMap"),is=ki(Je,"create"),Bo=ns&&new ns,oa={},BT=bi(kf),KT=bi(rs),WT=bi(bf),GT=bi(sa),HT=bi(ns),Ko=zn?zn.prototype:r,as=Ko?Ko.valueOf:r,Eg=Ko?Ko.toString:r;function Q(n){if(mt(n)&&!Oe(n)&&!(n instanceof Ue)){if(n instanceof Br)return n;if(Ye.call(n,"__wrapped__"))return _p(n)}return new Br(n)}var la=function(){function n(){}return function(i){if(!dt(i))return{};if(vg)return vg(i);n.prototype=i;var E=new n;return n.prototype=r,E}}();function Wo(){}function Br(n,i){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=r}Q.templateSettings={escape:br,evaluate:yr,interpolate:Pi,variable:"",imports:{_:Q}},Q.prototype=Wo.prototype,Q.prototype.constructor=Q,Br.prototype=la(Wo.prototype),Br.prototype.constructor=Br;function Ue(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=U,this.__views__=[]}function jT(){var n=new Ue(this.__wrapped__);return n.__actions__=or(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=or(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=or(this.__views__),n}function VT(){if(this.__filtered__){var n=new Ue(this);n.__dir__=-1,n.__filtered__=!0}else n=this.clone(),n.__dir__*=-1;return n}function zT(){var n=this.__wrapped__.value(),i=this.__dir__,E=Oe(n),W=i<0,Y=E?n.length:0,Z=ix(0,Y,this.__views__),te=Z.start,re=Z.end,se=re-te,de=W?re:te-1,he=this.__iteratees__,ge=he.length,Te=0,Pe=Gt(se,this.__takeCount__);if(!E||!W&&Y==se&&Pe==se)return Hg(n,this.__actions__);var Re=[];e:for(;se--&&Te<Pe;){de+=i;for(var ke=-1,Ce=n[de];++ke<ge;){var Ne=he[ke],We=Ne.iteratee,Lr=Ne.type,qt=We(Ce);if(Lr==y)Ce=qt;else if(!qt){if(Lr==b)continue e;break e}}Re[Te++]=Ce}return Re}Ue.prototype=la(Wo.prototype),Ue.prototype.constructor=Ue;function Ii(n){var i=-1,E=n==null?0:n.length;for(this.clear();++i<E;){var W=n[i];this.set(W[0],W[1])}}function $T(){this.__data__=is?is(null):{},this.size=0}function YT(n){var i=this.has(n)&&delete this.__data__[n];return this.size-=i?1:0,i}function XT(n){var i=this.__data__;if(is){var E=i[n];return E===f?r:E}return Ye.call(i,n)?i[n]:r}function QT(n){var i=this.__data__;return is?i[n]!==r:Ye.call(i,n)}function ZT(n,i){var E=this.__data__;return this.size+=this.has(n)?0:1,E[n]=is&&i===r?f:i,this}Ii.prototype.clear=$T,Ii.prototype.delete=YT,Ii.prototype.get=XT,Ii.prototype.has=QT,Ii.prototype.set=ZT;function Tn(n){var i=-1,E=n==null?0:n.length;for(this.clear();++i<E;){var W=n[i];this.set(W[0],W[1])}}function JT(){this.__data__=[],this.size=0}function qT(n){var i=this.__data__,E=Go(i,n);if(E<0)return!1;var W=i.length-1;return E==W?i.pop():bo.call(i,E,1),--this.size,!0}function eS(n){var i=this.__data__,E=Go(i,n);return E<0?r:i[E][1]}function tS(n){return Go(this.__data__,n)>-1}function rS(n,i){var E=this.__data__,W=Go(E,n);return W<0?(++this.size,E.push([n,i])):E[W][1]=i,this}Tn.prototype.clear=JT,Tn.prototype.delete=qT,Tn.prototype.get=eS,Tn.prototype.has=tS,Tn.prototype.set=rS;function Sn(n){var i=-1,E=n==null?0:n.length;for(this.clear();++i<E;){var W=n[i];this.set(W[0],W[1])}}function nS(){this.size=0,this.__data__={hash:new Ii,map:new(rs||Tn),string:new Ii}}function iS(n){var i=el(this,n).delete(n);return this.size-=i?1:0,i}function aS(n){return el(this,n).get(n)}function sS(n){return el(this,n).has(n)}function oS(n,i){var E=el(this,n),W=E.size;return E.set(n,i),this.size+=E.size==W?0:1,this}Sn.prototype.clear=nS,Sn.prototype.delete=iS,Sn.prototype.get=aS,Sn.prototype.has=sS,Sn.prototype.set=oS;function Oi(n){var i=-1,E=n==null?0:n.length;for(this.__data__=new Sn;++i<E;)this.add(n[i])}function lS(n){return this.__data__.set(n,f),this}function uS(n){return this.__data__.has(n)}Oi.prototype.add=Oi.prototype.push=lS,Oi.prototype.has=uS;function Jr(n){var i=this.__data__=new Tn(n);this.size=i.size}function fS(){this.__data__=new Tn,this.size=0}function cS(n){var i=this.__data__,E=i.delete(n);return this.size=i.size,E}function dS(n){return this.__data__.get(n)}function hS(n){return this.__data__.has(n)}function vS(n,i){var E=this.__data__;if(E instanceof Tn){var W=E.__data__;if(!rs||W.length<s-1)return W.push([n,i]),this.size=++E.size,this;E=this.__data__=new Sn(W)}return E.set(n,i),this.size=E.size,this}Jr.prototype.clear=fS,Jr.prototype.delete=cS,Jr.prototype.get=dS,Jr.prototype.has=hS,Jr.prototype.set=vS;function _g(n,i){var E=Oe(n),W=!E&&Fi(n),Y=!E&&!W&&Zn(n),Z=!E&&!W&&!Y&&da(n),te=E||W||Y||Z,re=te?Cf(n.length,LT):[],se=re.length;for(var de in n)(i||Ye.call(n,de))&&!(te&&(de=="length"||Y&&(de=="offset"||de=="parent")||Z&&(de=="buffer"||de=="byteLength"||de=="byteOffset")||Pn(de,se)))&&re.push(de);return re}function Tg(n){var i=n.length;return i?n[zf(0,i-1)]:r}function gS(n,i){return tl(or(n),wi(i,0,n.length))}function pS(n){return tl(or(n))}function Ff(n,i,E){(E!==r&&!qr(n[i],E)||E===r&&!(i in n))&&xn(n,i,E)}function ss(n,i,E){var W=n[i];(!(Ye.call(n,i)&&qr(W,E))||E===r&&!(i in n))&&xn(n,i,E)}function Go(n,i){for(var E=n.length;E--;)if(qr(n[E][0],i))return E;return-1}function mS(n,i,E,W){return $n(n,function(Y,Z,te){i(W,Y,E(Y),te)}),W}function Sg(n,i){return n&&dn(i,Mt(i),n)}function yS(n,i){return n&&dn(i,ur(i),n)}function xn(n,i,E){i=="__proto__"&&Fo?Fo(n,i,{configurable:!0,enumerable:!0,value:E,writable:!0}):n[i]=E}function Nf(n,i){for(var E=-1,W=i.length,Y=oe(W),Z=n==null;++E<W;)Y[E]=Z?r:mc(n,i[E]);return Y}function wi(n,i,E){return n===n&&(E!==r&&(n=n<=E?n:E),i!==r&&(n=n>=i?n:i)),n}function Kr(n,i,E,W,Y,Z){var te,re=i&K,se=i&M,de=i&H;if(E&&(te=Y?E(n,W,Y,Z):E(n)),te!==r)return te;if(!dt(n))return n;var he=Oe(n);if(he){if(te=sx(n),!re)return or(n,te)}else{var ge=Ht(n),Te=ge==ne||ge==ae;if(Zn(n))return zg(n,re);if(ge==ye||ge==V||Te&&!Y){if(te=se||Te?{}:cp(n),!re)return se?XS(n,yS(te,n)):YS(n,Sg(te,n))}else{if(!et[ge])return Y?n:{};te=ox(n,ge,re)}}Z||(Z=new Jr);var Pe=Z.get(n);if(Pe)return Pe;Z.set(n,te),Kp(n)?n.forEach(function(Ce){te.add(Kr(Ce,i,E,Ce,n,Z))}):Up(n)&&n.forEach(function(Ce,Ne){te.set(Ne,Kr(Ce,i,E,Ne,n,Z))});var Re=de?se?nc:rc:se?ur:Mt,ke=he?r:Re(n);return Nr(ke||n,function(Ce,Ne){ke&&(Ne=Ce,Ce=n[Ne]),ss(te,Ne,Kr(Ce,i,E,Ne,n,Z))}),te}function ES(n){var i=Mt(n);return function(E){return xg(E,n,i)}}function xg(n,i,E){var W=E.length;if(n==null)return!W;for(n=Je(n);W--;){var Y=E[W],Z=i[Y],te=n[Y];if(te===r&&!(Y in n)||!Z(te))return!1}return!0}function Lg(n,i,E){if(typeof n!="function")throw new Ur(O);return hs(function(){n.apply(r,E)},i)}function os(n,i,E,W){var Y=-1,Z=Ao,te=!0,re=n.length,se=[],de=i.length;if(!re)return se;E&&(i=lt(i,Tr(E))),W?(Z=xf,te=!1):i.length>=s&&(Z=es,te=!1,i=new Oi(i));e:for(;++Y<re;){var he=n[Y],ge=E==null?he:E(he);if(he=W||he!==0?he:0,te&&ge===ge){for(var Te=de;Te--;)if(i[Te]===ge)continue e;se.push(he)}else Z(i,ge,W)||se.push(he)}return se}var $n=Zg(cn),Ag=Zg(Bf,!0);function _S(n,i){var E=!0;return $n(n,function(W,Y,Z){return E=!!i(W,Y,Z),E}),E}function Ho(n,i,E){for(var W=-1,Y=n.length;++W<Y;){var Z=n[W],te=i(Z);if(te!=null&&(re===r?te===te&&!xr(te):E(te,re)))var re=te,se=Z}return se}function TS(n,i,E,W){var Y=n.length;for(E=Me(E),E<0&&(E=-E>Y?0:Y+E),W=W===r||W>Y?Y:Me(W),W<0&&(W+=Y),W=E>W?0:Gp(W);E<W;)n[E++]=i;return n}function Pg(n,i){var E=[];return $n(n,function(W,Y,Z){i(W,Y,Z)&&E.push(W)}),E}function Ut(n,i,E,W,Y){var Z=-1,te=n.length;for(E||(E=ux),Y||(Y=[]);++Z<te;){var re=n[Z];i>0&&E(re)?i>1?Ut(re,i-1,E,W,Y):jn(Y,re):W||(Y[Y.length]=re)}return Y}var Uf=Jg(),Dg=Jg(!0);function cn(n,i){return n&&Uf(n,i,Mt)}function Bf(n,i){return n&&Dg(n,i,Mt)}function jo(n,i){return Hn(i,function(E){return Dn(n[E])})}function Mi(n,i){i=Xn(i,n);for(var E=0,W=i.length;n!=null&&E<W;)n=n[hn(i[E++])];return E&&E==W?n:r}function Rg(n,i,E){var W=i(n);return Oe(n)?W:jn(W,E(n))}function Zt(n){return n==null?n===r?ct:fe:Ci&&Ci in Je(n)?nx(n):px(n)}function Kf(n,i){return n>i}function SS(n,i){return n!=null&&Ye.call(n,i)}function xS(n,i){return n!=null&&i in Je(n)}function LS(n,i,E){return n>=Gt(i,E)&&n<Ct(i,E)}function Wf(n,i,E){for(var W=E?xf:Ao,Y=n[0].length,Z=n.length,te=Z,re=oe(Z),se=1/0,de=[];te--;){var he=n[te];te&&i&&(he=lt(he,Tr(i))),se=Gt(he.length,se),re[te]=!E&&(i||Y>=120&&he.length>=120)?new Oi(te&&he):r}he=n[0];var ge=-1,Te=re[0];e:for(;++ge<Y&&de.length<se;){var Pe=he[ge],Re=i?i(Pe):Pe;if(Pe=E||Pe!==0?Pe:0,!(Te?es(Te,Re):W(de,Re,E))){for(te=Z;--te;){var ke=re[te];if(!(ke?es(ke,Re):W(n[te],Re,E)))continue e}Te&&Te.push(Re),de.push(Pe)}}return de}function AS(n,i,E,W){return cn(n,function(Y,Z,te){i(W,E(Y),Z,te)}),W}function ls(n,i,E){i=Xn(i,n),n=gp(n,i);var W=n==null?n:n[hn(Gr(i))];return W==null?r:_r(W,n,E)}function Cg(n){return mt(n)&&Zt(n)==V}function PS(n){return mt(n)&&Zt(n)==Ke}function DS(n){return mt(n)&&Zt(n)==J}function us(n,i,E,W,Y){return n===i?!0:n==null||i==null||!mt(n)&&!mt(i)?n!==n&&i!==i:RS(n,i,E,W,us,Y)}function RS(n,i,E,W,Y,Z){var te=Oe(n),re=Oe(i),se=te?z:Ht(n),de=re?z:Ht(i);se=se==V?ye:se,de=de==V?ye:de;var he=se==ye,ge=de==ye,Te=se==de;if(Te&&Zn(n)){if(!Zn(i))return!1;te=!0,he=!1}if(Te&&!he)return Z||(Z=new Jr),te||da(n)?lp(n,i,E,W,Y,Z):tx(n,i,se,E,W,Y,Z);if(!(E&B)){var Pe=he&&Ye.call(n,"__wrapped__"),Re=ge&&Ye.call(i,"__wrapped__");if(Pe||Re){var ke=Pe?n.value():n,Ce=Re?i.value():i;return Z||(Z=new Jr),Y(ke,Ce,E,W,Z)}}return Te?(Z||(Z=new Jr),rx(n,i,E,W,Y,Z)):!1}function CS(n){return mt(n)&&Ht(n)==ue}function Gf(n,i,E,W){var Y=E.length,Z=Y,te=!W;if(n==null)return!Z;for(n=Je(n);Y--;){var re=E[Y];if(te&&re[2]?re[1]!==n[re[0]]:!(re[0]in n))return!1}for(;++Y<Z;){re=E[Y];var se=re[0],de=n[se],he=re[1];if(te&&re[2]){if(de===r&&!(se in n))return!1}else{var ge=new Jr;if(W)var Te=W(de,he,se,n,i,ge);if(!(Te===r?us(he,de,B|k,W,ge):Te))return!1}}return!0}function Ig(n){if(!dt(n)||cx(n))return!1;var i=Dn(n)?CT:qa;return i.test(bi(n))}function IS(n){return mt(n)&&Zt(n)==ve}function OS(n){return mt(n)&&Ht(n)==Ae}function wS(n){return mt(n)&&ol(n.length)&&!!it[Zt(n)]}function Og(n){return typeof n=="function"?n:n==null?fr:typeof n=="object"?Oe(n)?kg(n[0],n[1]):Mg(n):qp(n)}function Hf(n){if(!ds(n))return bT(n);var i=[];for(var E in Je(n))Ye.call(n,E)&&E!="constructor"&&i.push(E);return i}function MS(n){if(!dt(n))return gx(n);var i=ds(n),E=[];for(var W in n)W=="constructor"&&(i||!Ye.call(n,W))||E.push(W);return E}function jf(n,i){return n<i}function wg(n,i){var E=-1,W=lr(n)?oe(n.length):[];return $n(n,function(Y,Z,te){W[++E]=i(Y,Z,te)}),W}function Mg(n){var i=ac(n);return i.length==1&&i[0][2]?hp(i[0][0],i[0][1]):function(E){return E===n||Gf(E,n,i)}}function kg(n,i){return oc(n)&&dp(i)?hp(hn(n),i):function(E){var W=mc(E,n);return W===r&&W===i?yc(E,n):us(i,W,B|k)}}function Vo(n,i,E,W,Y){n!==i&&Uf(i,function(Z,te){if(Y||(Y=new Jr),dt(Z))kS(n,i,te,E,Vo,W,Y);else{var re=W?W(uc(n,te),Z,te+"",n,i,Y):r;re===r&&(re=Z),Ff(n,te,re)}},ur)}function kS(n,i,E,W,Y,Z,te){var re=uc(n,E),se=uc(i,E),de=te.get(se);if(de){Ff(n,E,de);return}var he=Z?Z(re,se,E+"",n,i,te):r,ge=he===r;if(ge){var Te=Oe(se),Pe=!Te&&Zn(se),Re=!Te&&!Pe&&da(se);he=se,Te||Pe||Re?Oe(re)?he=re:Tt(re)?he=or(re):Pe?(ge=!1,he=zg(se,!0)):Re?(ge=!1,he=$g(se,!0)):he=[]:vs(se)||Fi(se)?(he=re,Fi(re)?he=Hp(re):(!dt(re)||Dn(re))&&(he=cp(se))):ge=!1}ge&&(te.set(se,he),Y(he,se,W,Z,te),te.delete(se)),Ff(n,E,he)}function bg(n,i){var E=n.length;if(E)return i+=i<0?E:0,Pn(i,E)?n[i]:r}function Fg(n,i,E){i.length?i=lt(i,function(Z){return Oe(Z)?function(te){return Mi(te,Z.length===1?Z[0]:Z)}:Z}):i=[fr];var W=-1;i=lt(i,Tr(De()));var Y=wg(n,function(Z,te,re){var se=lt(i,function(de){return de(Z)});return{criteria:se,index:++W,value:Z}});return oT(Y,function(Z,te){return $S(Z,te,E)})}function bS(n,i){return Ng(n,i,function(E,W){return yc(n,W)})}function Ng(n,i,E){for(var W=-1,Y=i.length,Z={};++W<Y;){var te=i[W],re=Mi(n,te);E(re,te)&&fs(Z,Xn(te,n),re)}return Z}function FS(n){return function(i){return Mi(i,n)}}function Vf(n,i,E,W){var Y=W?sT:ta,Z=-1,te=i.length,re=n;for(n===i&&(i=or(i)),E&&(re=lt(n,Tr(E)));++Z<te;)for(var se=0,de=i[Z],he=E?E(de):de;(se=Y(re,he,se,W))>-1;)re!==n&&bo.call(re,se,1),bo.call(n,se,1);return n}function Ug(n,i){for(var E=n?i.length:0,W=E-1;E--;){var Y=i[E];if(E==W||Y!==Z){var Z=Y;Pn(Y)?bo.call(n,Y,1):Xf(n,Y)}}return n}function zf(n,i){return n+Uo(yg()*(i-n+1))}function NS(n,i,E,W){for(var Y=-1,Z=Ct(No((i-n)/(E||1)),0),te=oe(Z);Z--;)te[W?Z:++Y]=n,n+=E;return te}function $f(n,i){var E="";if(!n||i<1||i>m)return E;do i%2&&(E+=n),i=Uo(i/2),i&&(n+=n);while(i);return E}function Fe(n,i){return fc(vp(n,i,fr),n+"")}function US(n){return Tg(ha(n))}function BS(n,i){var E=ha(n);return tl(E,wi(i,0,E.length))}function fs(n,i,E,W){if(!dt(n))return n;i=Xn(i,n);for(var Y=-1,Z=i.length,te=Z-1,re=n;re!=null&&++Y<Z;){var se=hn(i[Y]),de=E;if(se==="__proto__"||se==="constructor"||se==="prototype")return n;if(Y!=te){var he=re[se];de=W?W(he,se,re):r,de===r&&(de=dt(he)?he:Pn(i[Y+1])?[]:{})}ss(re,se,de),re=re[se]}return n}var Bg=Bo?function(n,i){return Bo.set(n,i),n}:fr,KS=Fo?function(n,i){return Fo(n,"toString",{configurable:!0,enumerable:!1,value:_c(i),writable:!0})}:fr;function WS(n){return tl(ha(n))}function Wr(n,i,E){var W=-1,Y=n.length;i<0&&(i=-i>Y?0:Y+i),E=E>Y?Y:E,E<0&&(E+=Y),Y=i>E?0:E-i>>>0,i>>>=0;for(var Z=oe(Y);++W<Y;)Z[W]=n[W+i];return Z}function GS(n,i){var E;return $n(n,function(W,Y,Z){return E=i(W,Y,Z),!E}),!!E}function zo(n,i,E){var W=0,Y=n==null?W:n.length;if(typeof i=="number"&&i===i&&Y<=G){for(;W<Y;){var Z=W+Y>>>1,te=n[Z];te!==null&&!xr(te)&&(E?te<=i:te<i)?W=Z+1:Y=Z}return Y}return Yf(n,i,fr,E)}function Yf(n,i,E,W){var Y=0,Z=n==null?0:n.length;if(Z===0)return 0;i=E(i);for(var te=i!==i,re=i===null,se=xr(i),de=i===r;Y<Z;){var he=Uo((Y+Z)/2),ge=E(n[he]),Te=ge!==r,Pe=ge===null,Re=ge===ge,ke=xr(ge);if(te)var Ce=W||Re;else de?Ce=Re&&(W||Te):re?Ce=Re&&Te&&(W||!Pe):se?Ce=Re&&Te&&!Pe&&(W||!ke):Pe||ke?Ce=!1:Ce=W?ge<=i:ge<i;Ce?Y=he+1:Z=he}return Gt(Z,R)}function Kg(n,i){for(var E=-1,W=n.length,Y=0,Z=[];++E<W;){var te=n[E],re=i?i(te):te;if(!E||!qr(re,se)){var se=re;Z[Y++]=te===0?0:te}}return Z}function Wg(n){return typeof n=="number"?n:xr(n)?S:+n}function Sr(n){if(typeof n=="string")return n;if(Oe(n))return lt(n,Sr)+"";if(xr(n))return Eg?Eg.call(n):"";var i=n+"";return i=="0"&&1/n==-u?"-0":i}function Yn(n,i,E){var W=-1,Y=Ao,Z=n.length,te=!0,re=[],se=re;if(E)te=!1,Y=xf;else if(Z>=s){var de=i?null:qS(n);if(de)return Do(de);te=!1,Y=es,se=new Oi}else se=i?[]:re;e:for(;++W<Z;){var he=n[W],ge=i?i(he):he;if(he=E||he!==0?he:0,te&&ge===ge){for(var Te=se.length;Te--;)if(se[Te]===ge)continue e;i&&se.push(ge),re.push(he)}else Y(se,ge,E)||(se!==re&&se.push(ge),re.push(he))}return re}function Xf(n,i){return i=Xn(i,n),n=gp(n,i),n==null||delete n[hn(Gr(i))]}function Gg(n,i,E,W){return fs(n,i,E(Mi(n,i)),W)}function $o(n,i,E,W){for(var Y=n.length,Z=W?Y:-1;(W?Z--:++Z<Y)&&i(n[Z],Z,n););return E?Wr(n,W?0:Z,W?Z+1:Y):Wr(n,W?Z+1:0,W?Y:Z)}function Hg(n,i){var E=n;return E instanceof Ue&&(E=E.value()),Lf(i,function(W,Y){return Y.func.apply(Y.thisArg,jn([W],Y.args))},E)}function Qf(n,i,E){var W=n.length;if(W<2)return W?Yn(n[0]):[];for(var Y=-1,Z=oe(W);++Y<W;)for(var te=n[Y],re=-1;++re<W;)re!=Y&&(Z[Y]=os(Z[Y]||te,n[re],i,E));return Yn(Ut(Z,1),i,E)}function jg(n,i,E){for(var W=-1,Y=n.length,Z=i.length,te={};++W<Y;){var re=W<Z?i[W]:r;E(te,n[W],re)}return te}function Zf(n){return Tt(n)?n:[]}function Jf(n){return typeof n=="function"?n:fr}function Xn(n,i){return Oe(n)?n:oc(n,i)?[n]:Ep($e(n))}var HS=Fe;function Qn(n,i,E){var W=n.length;return E=E===r?W:E,!i&&E>=W?n:Wr(n,i,E)}var Vg=IT||function(n){return Nt.clearTimeout(n)};function zg(n,i){if(i)return n.slice();var E=n.length,W=hg?hg(E):new n.constructor(E);return n.copy(W),W}function qf(n){var i=new n.constructor(n.byteLength);return new Mo(i).set(new Mo(n)),i}function jS(n,i){var E=i?qf(n.buffer):n.buffer;return new n.constructor(E,n.byteOffset,n.byteLength)}function VS(n){var i=new n.constructor(n.source,_o.exec(n));return i.lastIndex=n.lastIndex,i}function zS(n){return as?Je(as.call(n)):{}}function $g(n,i){var E=i?qf(n.buffer):n.buffer;return new n.constructor(E,n.byteOffset,n.length)}function Yg(n,i){if(n!==i){var E=n!==r,W=n===null,Y=n===n,Z=xr(n),te=i!==r,re=i===null,se=i===i,de=xr(i);if(!re&&!de&&!Z&&n>i||Z&&te&&se&&!re&&!de||W&&te&&se||!E&&se||!Y)return 1;if(!W&&!Z&&!de&&n<i||de&&E&&Y&&!W&&!Z||re&&E&&Y||!te&&Y||!se)return-1}return 0}function $S(n,i,E){for(var W=-1,Y=n.criteria,Z=i.criteria,te=Y.length,re=E.length;++W<te;){var se=Yg(Y[W],Z[W]);if(se){if(W>=re)return se;var de=E[W];return se*(de=="desc"?-1:1)}}return n.index-i.index}function Xg(n,i,E,W){for(var Y=-1,Z=n.length,te=E.length,re=-1,se=i.length,de=Ct(Z-te,0),he=oe(se+de),ge=!W;++re<se;)he[re]=i[re];for(;++Y<te;)(ge||Y<Z)&&(he[E[Y]]=n[Y]);for(;de--;)he[re++]=n[Y++];return he}function Qg(n,i,E,W){for(var Y=-1,Z=n.length,te=-1,re=E.length,se=-1,de=i.length,he=Ct(Z-re,0),ge=oe(he+de),Te=!W;++Y<he;)ge[Y]=n[Y];for(var Pe=Y;++se<de;)ge[Pe+se]=i[se];for(;++te<re;)(Te||Y<Z)&&(ge[Pe+E[te]]=n[Y++]);return ge}function or(n,i){var E=-1,W=n.length;for(i||(i=oe(W));++E<W;)i[E]=n[E];return i}function dn(n,i,E,W){var Y=!E;E||(E={});for(var Z=-1,te=i.length;++Z<te;){var re=i[Z],se=W?W(E[re],n[re],re,E,n):r;se===r&&(se=n[re]),Y?xn(E,re,se):ss(E,re,se)}return E}function YS(n,i){return dn(n,sc(n),i)}function XS(n,i){return dn(n,up(n),i)}function Yo(n,i){return function(E,W){var Y=Oe(E)?eT:mS,Z=i?i():{};return Y(E,n,De(W,2),Z)}}function ua(n){return Fe(function(i,E){var W=-1,Y=E.length,Z=Y>1?E[Y-1]:r,te=Y>2?E[2]:r;for(Z=n.length>3&&typeof Z=="function"?(Y--,Z):r,te&&Jt(E[0],E[1],te)&&(Z=Y<3?r:Z,Y=1),i=Je(i);++W<Y;){var re=E[W];re&&n(i,re,W,Z)}return i})}function Zg(n,i){return function(E,W){if(E==null)return E;if(!lr(E))return n(E,W);for(var Y=E.length,Z=i?Y:-1,te=Je(E);(i?Z--:++Z<Y)&&W(te[Z],Z,te)!==!1;);return E}}function Jg(n){return function(i,E,W){for(var Y=-1,Z=Je(i),te=W(i),re=te.length;re--;){var se=te[n?re:++Y];if(E(Z[se],se,Z)===!1)break}return i}}function QS(n,i,E){var W=i&N,Y=cs(n);function Z(){var te=this&&this!==Nt&&this instanceof Z?Y:n;return te.apply(W?E:this,arguments)}return Z}function qg(n){return function(i){i=$e(i);var E=ra(i)?Zr(i):r,W=E?E[0]:i.charAt(0),Y=E?Qn(E,1).join(""):i.slice(1);return W[n]()+Y}}function fa(n){return function(i){return Lf(Zp(Qp(i).replace(K_,"")),n,"")}}function cs(n){return function(){var i=arguments;switch(i.length){case 0:return new n;case 1:return new n(i[0]);case 2:return new n(i[0],i[1]);case 3:return new n(i[0],i[1],i[2]);case 4:return new n(i[0],i[1],i[2],i[3]);case 5:return new n(i[0],i[1],i[2],i[3],i[4]);case 6:return new n(i[0],i[1],i[2],i[3],i[4],i[5]);case 7:return new n(i[0],i[1],i[2],i[3],i[4],i[5],i[6])}var E=la(n.prototype),W=n.apply(E,i);return dt(W)?W:E}}function ZS(n,i,E){var W=cs(n);function Y(){for(var Z=arguments.length,te=oe(Z),re=Z,se=ca(Y);re--;)te[re]=arguments[re];var de=Z<3&&te[0]!==se&&te[Z-1]!==se?[]:Vn(te,se);if(Z-=de.length,Z<E)return ip(n,i,Xo,Y.placeholder,r,te,de,r,r,E-Z);var he=this&&this!==Nt&&this instanceof Y?W:n;return _r(he,this,te)}return Y}function ep(n){return function(i,E,W){var Y=Je(i);if(!lr(i)){var Z=De(E,3);i=Mt(i),E=function(re){return Z(Y[re],re,Y)}}var te=n(i,E,W);return te>-1?Y[Z?i[te]:te]:r}}function tp(n){return An(function(i){var E=i.length,W=E,Y=Br.prototype.thru;for(n&&i.reverse();W--;){var Z=i[W];if(typeof Z!="function")throw new Ur(O);if(Y&&!te&&qo(Z)=="wrapper")var te=new Br([],!0)}for(W=te?W:E;++W<E;){Z=i[W];var re=qo(Z),se=re=="wrapper"?ic(Z):r;se&&lc(se[0])&&se[1]==(v|l|A|h)&&!se[4].length&&se[9]==1?te=te[qo(se[0])].apply(te,se[3]):te=Z.length==1&&lc(Z)?te[re]():te.thru(Z)}return function(){var de=arguments,he=de[0];if(te&&de.length==1&&Oe(he))return te.plant(he).value();for(var ge=0,Te=E?i[ge].apply(this,de):he;++ge<E;)Te=i[ge].call(this,Te);return Te}})}function Xo(n,i,E,W,Y,Z,te,re,se,de){var he=i&v,ge=i&N,Te=i&L,Pe=i&(l|C),Re=i&g,ke=Te?r:cs(n);function Ce(){for(var Ne=arguments.length,We=oe(Ne),Lr=Ne;Lr--;)We[Lr]=arguments[Lr];if(Pe)var qt=ca(Ce),Ar=uT(We,qt);if(W&&(We=Xg(We,W,Y,Pe)),Z&&(We=Qg(We,Z,te,Pe)),Ne-=Ar,Pe&&Ne<de){var St=Vn(We,qt);return ip(n,i,Xo,Ce.placeholder,E,We,St,re,se,de-Ne)}var en=ge?E:this,Cn=Te?en[n]:n;return Ne=We.length,re?We=mx(We,re):Re&&Ne>1&&We.reverse(),he&&se<Ne&&(We.length=se),this&&this!==Nt&&this instanceof Ce&&(Cn=ke||cs(Cn)),Cn.apply(en,We)}return Ce}function rp(n,i){return function(E,W){return AS(E,n,i(W),{})}}function Qo(n,i){return function(E,W){var Y;if(E===r&&W===r)return i;if(E!==r&&(Y=E),W!==r){if(Y===r)return W;typeof E=="string"||typeof W=="string"?(E=Sr(E),W=Sr(W)):(E=Wg(E),W=Wg(W)),Y=n(E,W)}return Y}}function ec(n){return An(function(i){return i=lt(i,Tr(De())),Fe(function(E){var W=this;return n(i,function(Y){return _r(Y,W,E)})})})}function Zo(n,i){i=i===r?" ":Sr(i);var E=i.length;if(E<2)return E?$f(i,n):i;var W=$f(i,No(n/na(i)));return ra(i)?Qn(Zr(W),0,n).join(""):W.slice(0,n)}function JS(n,i,E,W){var Y=i&N,Z=cs(n);function te(){for(var re=-1,se=arguments.length,de=-1,he=W.length,ge=oe(he+se),Te=this&&this!==Nt&&this instanceof te?Z:n;++de<he;)ge[de]=W[de];for(;se--;)ge[de++]=arguments[++re];return _r(Te,Y?E:this,ge)}return te}function np(n){return function(i,E,W){return W&&typeof W!="number"&&Jt(i,E,W)&&(E=W=r),i=Rn(i),E===r?(E=i,i=0):E=Rn(E),W=W===r?i<E?1:-1:Rn(W),NS(i,E,W,n)}}function Jo(n){return function(i,E){return typeof i=="string"&&typeof E=="string"||(i=Hr(i),E=Hr(E)),n(i,E)}}function ip(n,i,E,W,Y,Z,te,re,se,de){var he=i&l,ge=he?te:r,Te=he?r:te,Pe=he?Z:r,Re=he?r:Z;i|=he?A:d,i&=~(he?d:A),i&T||(i&=~(N|L));var ke=[n,i,Y,Pe,ge,Re,Te,re,se,de],Ce=E.apply(r,ke);return lc(n)&&pp(Ce,ke),Ce.placeholder=W,mp(Ce,n,i)}function tc(n){var i=Rt[n];return function(E,W){if(E=Hr(E),W=W==null?0:Gt(Me(W),292),W&&mg(E)){var Y=($e(E)+"e").split("e"),Z=i(Y[0]+"e"+(+Y[1]+W));return Y=($e(Z)+"e").split("e"),+(Y[0]+"e"+(+Y[1]-W))}return i(E)}}var qS=sa&&1/Do(new sa([,-0]))[1]==u?function(n){return new sa(n)}:xc;function ap(n){return function(i){var E=Ht(i);return E==ue?Of(i):E==Ae?pT(i):lT(i,n(i))}}function Ln(n,i,E,W,Y,Z,te,re){var se=i&L;if(!se&&typeof n!="function")throw new Ur(O);var de=W?W.length:0;if(de||(i&=~(A|d),W=Y=r),te=te===r?te:Ct(Me(te),0),re=re===r?re:Me(re),de-=Y?Y.length:0,i&d){var he=W,ge=Y;W=Y=r}var Te=se?r:ic(n),Pe=[n,i,E,W,Y,he,ge,Z,te,re];if(Te&&vx(Pe,Te),n=Pe[0],i=Pe[1],E=Pe[2],W=Pe[3],Y=Pe[4],re=Pe[9]=Pe[9]===r?se?0:n.length:Ct(Pe[9]-de,0),!re&&i&(l|C)&&(i&=~(l|C)),!i||i==N)var Re=QS(n,i,E);else i==l||i==C?Re=ZS(n,i,re):(i==A||i==(N|A))&&!Y.length?Re=JS(n,i,E,W):Re=Xo.apply(r,Pe);var ke=Te?Bg:pp;return mp(ke(Re,Pe),n,i)}function sp(n,i,E,W){return n===r||qr(n,aa[E])&&!Ye.call(W,E)?i:n}function op(n,i,E,W,Y,Z){return dt(n)&&dt(i)&&(Z.set(i,n),Vo(n,i,r,op,Z),Z.delete(i)),n}function ex(n){return vs(n)?r:n}function lp(n,i,E,W,Y,Z){var te=E&B,re=n.length,se=i.length;if(re!=se&&!(te&&se>re))return!1;var de=Z.get(n),he=Z.get(i);if(de&&he)return de==i&&he==n;var ge=-1,Te=!0,Pe=E&k?new Oi:r;for(Z.set(n,i),Z.set(i,n);++ge<re;){var Re=n[ge],ke=i[ge];if(W)var Ce=te?W(ke,Re,ge,i,n,Z):W(Re,ke,ge,n,i,Z);if(Ce!==r){if(Ce)continue;Te=!1;break}if(Pe){if(!Af(i,function(Ne,We){if(!es(Pe,We)&&(Re===Ne||Y(Re,Ne,E,W,Z)))return Pe.push(We)})){Te=!1;break}}else if(!(Re===ke||Y(Re,ke,E,W,Z))){Te=!1;break}}return Z.delete(n),Z.delete(i),Te}function tx(n,i,E,W,Y,Z,te){switch(E){case He:if(n.byteLength!=i.byteLength||n.byteOffset!=i.byteOffset)return!1;n=n.buffer,i=i.buffer;case Ke:return!(n.byteLength!=i.byteLength||!Z(new Mo(n),new Mo(i)));case X:case J:case le:return qr(+n,+i);case ee:return n.name==i.name&&n.message==i.message;case ve:case we:return n==i+"";case ue:var re=Of;case Ae:var se=W&B;if(re||(re=Do),n.size!=i.size&&!se)return!1;var de=te.get(n);if(de)return de==i;W|=k,te.set(n,i);var he=lp(re(n),re(i),W,Y,Z,te);return te.delete(n),he;case be:if(as)return as.call(n)==as.call(i)}return!1}function rx(n,i,E,W,Y,Z){var te=E&B,re=rc(n),se=re.length,de=rc(i),he=de.length;if(se!=he&&!te)return!1;for(var ge=se;ge--;){var Te=re[ge];if(!(te?Te in i:Ye.call(i,Te)))return!1}var Pe=Z.get(n),Re=Z.get(i);if(Pe&&Re)return Pe==i&&Re==n;var ke=!0;Z.set(n,i),Z.set(i,n);for(var Ce=te;++ge<se;){Te=re[ge];var Ne=n[Te],We=i[Te];if(W)var Lr=te?W(We,Ne,Te,i,n,Z):W(Ne,We,Te,n,i,Z);if(!(Lr===r?Ne===We||Y(Ne,We,E,W,Z):Lr)){ke=!1;break}Ce||(Ce=Te=="constructor")}if(ke&&!Ce){var qt=n.constructor,Ar=i.constructor;qt!=Ar&&"constructor"in n&&"constructor"in i&&!(typeof qt=="function"&&qt instanceof qt&&typeof Ar=="function"&&Ar instanceof Ar)&&(ke=!1)}return Z.delete(n),Z.delete(i),ke}function An(n){return fc(vp(n,r,xp),n+"")}function rc(n){return Rg(n,Mt,sc)}function nc(n){return Rg(n,ur,up)}var ic=Bo?function(n){return Bo.get(n)}:xc;function qo(n){for(var i=n.name+"",E=oa[i],W=Ye.call(oa,i)?E.length:0;W--;){var Y=E[W],Z=Y.func;if(Z==null||Z==n)return Y.name}return i}function ca(n){var i=Ye.call(Q,"placeholder")?Q:n;return i.placeholder}function De(){var n=Q.iteratee||Tc;return n=n===Tc?Og:n,arguments.length?n(arguments[0],arguments[1]):n}function el(n,i){var E=n.__data__;return fx(i)?E[typeof i=="string"?"string":"hash"]:E.map}function ac(n){for(var i=Mt(n),E=i.length;E--;){var W=i[E],Y=n[W];i[E]=[W,Y,dp(Y)]}return i}function ki(n,i){var E=hT(n,i);return Ig(E)?E:r}function nx(n){var i=Ye.call(n,Ci),E=n[Ci];try{n[Ci]=r;var W=!0}catch{}var Y=Oo.call(n);return W&&(i?n[Ci]=E:delete n[Ci]),Y}var sc=Mf?function(n){return n==null?[]:(n=Je(n),Hn(Mf(n),function(i){return gg.call(n,i)}))}:Lc,up=Mf?function(n){for(var i=[];n;)jn(i,sc(n)),n=ko(n);return i}:Lc,Ht=Zt;(kf&&Ht(new kf(new ArrayBuffer(1)))!=He||rs&&Ht(new rs)!=ue||bf&&Ht(bf.resolve())!=Le||sa&&Ht(new sa)!=Ae||ns&&Ht(new ns)!=Ge)&&(Ht=function(n){var i=Zt(n),E=i==ye?n.constructor:r,W=E?bi(E):"";if(W)switch(W){case BT:return He;case KT:return ue;case WT:return Le;case GT:return Ae;case HT:return Ge}return i});function ix(n,i,E){for(var W=-1,Y=E.length;++W<Y;){var Z=E[W],te=Z.size;switch(Z.type){case"drop":n+=te;break;case"dropRight":i-=te;break;case"take":i=Gt(i,n+te);break;case"takeRight":n=Ct(n,i-te);break}}return{start:n,end:i}}function ax(n){var i=n.match(Ja);return i?i[1].split(Er):[]}function fp(n,i,E){i=Xn(i,n);for(var W=-1,Y=i.length,Z=!1;++W<Y;){var te=hn(i[W]);if(!(Z=n!=null&&E(n,te)))break;n=n[te]}return Z||++W!=Y?Z:(Y=n==null?0:n.length,!!Y&&ol(Y)&&Pn(te,Y)&&(Oe(n)||Fi(n)))}function sx(n){var i=n.length,E=new n.constructor(i);return i&&typeof n[0]=="string"&&Ye.call(n,"index")&&(E.index=n.index,E.input=n.input),E}function cp(n){return typeof n.constructor=="function"&&!ds(n)?la(ko(n)):{}}function ox(n,i,E){var W=n.constructor;switch(i){case Ke:return qf(n);case X:case J:return new W(+n);case He:return jS(n,E);case ze:case nt:case Et:case ot:case _t:case ir:case Dt:case pr:case Xt:return $g(n,E);case ue:return new W;case le:case we:return new W(n);case ve:return VS(n);case Ae:return new W;case be:return zS(n)}}function lx(n,i){var E=i.length;if(!E)return n;var W=E-1;return i[W]=(E>1?"& ":"")+i[W],i=i.join(E>2?", ":" "),n.replace(mo,`{
/* [wrapped with `+i+`] */
`)}function ux(n){return Oe(n)||Fi(n)||!!(pg&&n&&n[pg])}function Pn(n,i){var E=typeof n;return i=i??m,!!i&&(E=="number"||E!="symbol"&&vf.test(n))&&n>-1&&n%1==0&&n<i}function Jt(n,i,E){if(!dt(E))return!1;var W=typeof i;return(W=="number"?lr(E)&&Pn(i,E.length):W=="string"&&i in E)?qr(E[i],n):!1}function oc(n,i){if(Oe(n))return!1;var E=typeof n;return E=="number"||E=="symbol"||E=="boolean"||n==null||xr(n)?!0:Wn.test(n)||!_n.test(n)||i!=null&&n in Je(i)}function fx(n){var i=typeof n;return i=="string"||i=="number"||i=="symbol"||i=="boolean"?n!=="__proto__":n===null}function lc(n){var i=qo(n),E=Q[i];if(typeof E!="function"||!(i in Ue.prototype))return!1;if(n===E)return!0;var W=ic(E);return!!W&&n===W[0]}function cx(n){return!!dg&&dg in n}var dx=Co?Dn:Ac;function ds(n){var i=n&&n.constructor,E=typeof i=="function"&&i.prototype||aa;return n===E}function dp(n){return n===n&&!dt(n)}function hp(n,i){return function(E){return E==null?!1:E[n]===i&&(i!==r||n in Je(E))}}function hx(n){var i=al(n,function(W){return E.size===F&&E.clear(),W}),E=i.cache;return i}function vx(n,i){var E=n[1],W=i[1],Y=E|W,Z=Y<(N|L|v),te=W==v&&E==l||W==v&&E==h&&n[7].length<=i[8]||W==(v|h)&&i[7].length<=i[8]&&E==l;if(!(Z||te))return n;W&N&&(n[2]=i[2],Y|=E&N?0:T);var re=i[3];if(re){var se=n[3];n[3]=se?Xg(se,re,i[4]):re,n[4]=se?Vn(n[3],I):i[4]}return re=i[5],re&&(se=n[5],n[5]=se?Qg(se,re,i[6]):re,n[6]=se?Vn(n[5],I):i[6]),re=i[7],re&&(n[7]=re),W&v&&(n[8]=n[8]==null?i[8]:Gt(n[8],i[8])),n[9]==null&&(n[9]=i[9]),n[0]=i[0],n[1]=Y,n}function gx(n){var i=[];if(n!=null)for(var E in Je(n))i.push(E);return i}function px(n){return Oo.call(n)}function vp(n,i,E){return i=Ct(i===r?n.length-1:i,0),function(){for(var W=arguments,Y=-1,Z=Ct(W.length-i,0),te=oe(Z);++Y<Z;)te[Y]=W[i+Y];Y=-1;for(var re=oe(i+1);++Y<i;)re[Y]=W[Y];return re[i]=E(te),_r(n,this,re)}}function gp(n,i){return i.length<2?n:Mi(n,Wr(i,0,-1))}function mx(n,i){for(var E=n.length,W=Gt(i.length,E),Y=or(n);W--;){var Z=i[W];n[W]=Pn(Z,E)?Y[Z]:r}return n}function uc(n,i){if(!(i==="constructor"&&typeof n[i]=="function")&&i!="__proto__")return n[i]}var pp=yp(Bg),hs=wT||function(n,i){return Nt.setTimeout(n,i)},fc=yp(KS);function mp(n,i,E){var W=i+"";return fc(n,lx(W,yx(ax(W),E)))}function yp(n){var i=0,E=0;return function(){var W=FT(),Y=x-(W-E);if(E=W,Y>0){if(++i>=p)return arguments[0]}else i=0;return n.apply(r,arguments)}}function tl(n,i){var E=-1,W=n.length,Y=W-1;for(i=i===r?W:i;++E<i;){var Z=zf(E,Y),te=n[Z];n[Z]=n[E],n[E]=te}return n.length=i,n}var Ep=hx(function(n){var i=[];return n.charCodeAt(0)===46&&i.push(""),n.replace(po,function(E,W,Y,Z){i.push(Y?Z.replace(ff,"$1"):W||E)}),i});function hn(n){if(typeof n=="string"||xr(n))return n;var i=n+"";return i=="0"&&1/n==-u?"-0":i}function bi(n){if(n!=null){try{return Io.call(n)}catch{}try{return n+""}catch{}}return""}function yx(n,i){return Nr(j,function(E){var W="_."+E[0];i&E[1]&&!Ao(n,W)&&n.push(W)}),n.sort()}function _p(n){if(n instanceof Ue)return n.clone();var i=new Br(n.__wrapped__,n.__chain__);return i.__actions__=or(n.__actions__),i.__index__=n.__index__,i.__values__=n.__values__,i}function Ex(n,i,E){(E?Jt(n,i,E):i===r)?i=1:i=Ct(Me(i),0);var W=n==null?0:n.length;if(!W||i<1)return[];for(var Y=0,Z=0,te=oe(No(W/i));Y<W;)te[Z++]=Wr(n,Y,Y+=i);return te}function _x(n){for(var i=-1,E=n==null?0:n.length,W=0,Y=[];++i<E;){var Z=n[i];Z&&(Y[W++]=Z)}return Y}function Tx(){var n=arguments.length;if(!n)return[];for(var i=oe(n-1),E=arguments[0],W=n;W--;)i[W-1]=arguments[W];return jn(Oe(E)?or(E):[E],Ut(i,1))}var Sx=Fe(function(n,i){return Tt(n)?os(n,Ut(i,1,Tt,!0)):[]}),xx=Fe(function(n,i){var E=Gr(i);return Tt(E)&&(E=r),Tt(n)?os(n,Ut(i,1,Tt,!0),De(E,2)):[]}),Lx=Fe(function(n,i){var E=Gr(i);return Tt(E)&&(E=r),Tt(n)?os(n,Ut(i,1,Tt,!0),r,E):[]});function Ax(n,i,E){var W=n==null?0:n.length;return W?(i=E||i===r?1:Me(i),Wr(n,i<0?0:i,W)):[]}function Px(n,i,E){var W=n==null?0:n.length;return W?(i=E||i===r?1:Me(i),i=W-i,Wr(n,0,i<0?0:i)):[]}function Dx(n,i){return n&&n.length?$o(n,De(i,3),!0,!0):[]}function Rx(n,i){return n&&n.length?$o(n,De(i,3),!0):[]}function Cx(n,i,E,W){var Y=n==null?0:n.length;return Y?(E&&typeof E!="number"&&Jt(n,i,E)&&(E=0,W=Y),TS(n,i,E,W)):[]}function Tp(n,i,E){var W=n==null?0:n.length;if(!W)return-1;var Y=E==null?0:Me(E);return Y<0&&(Y=Ct(W+Y,0)),Po(n,De(i,3),Y)}function Sp(n,i,E){var W=n==null?0:n.length;if(!W)return-1;var Y=W-1;return E!==r&&(Y=Me(E),Y=E<0?Ct(W+Y,0):Gt(Y,W-1)),Po(n,De(i,3),Y,!0)}function xp(n){var i=n==null?0:n.length;return i?Ut(n,1):[]}function Ix(n){var i=n==null?0:n.length;return i?Ut(n,u):[]}function Ox(n,i){var E=n==null?0:n.length;return E?(i=i===r?1:Me(i),Ut(n,i)):[]}function wx(n){for(var i=-1,E=n==null?0:n.length,W={};++i<E;){var Y=n[i];W[Y[0]]=Y[1]}return W}function Lp(n){return n&&n.length?n[0]:r}function Mx(n,i,E){var W=n==null?0:n.length;if(!W)return-1;var Y=E==null?0:Me(E);return Y<0&&(Y=Ct(W+Y,0)),ta(n,i,Y)}function kx(n){var i=n==null?0:n.length;return i?Wr(n,0,-1):[]}var bx=Fe(function(n){var i=lt(n,Zf);return i.length&&i[0]===n[0]?Wf(i):[]}),Fx=Fe(function(n){var i=Gr(n),E=lt(n,Zf);return i===Gr(E)?i=r:E.pop(),E.length&&E[0]===n[0]?Wf(E,De(i,2)):[]}),Nx=Fe(function(n){var i=Gr(n),E=lt(n,Zf);return i=typeof i=="function"?i:r,i&&E.pop(),E.length&&E[0]===n[0]?Wf(E,r,i):[]});function Ux(n,i){return n==null?"":kT.call(n,i)}function Gr(n){var i=n==null?0:n.length;return i?n[i-1]:r}function Bx(n,i,E){var W=n==null?0:n.length;if(!W)return-1;var Y=W;return E!==r&&(Y=Me(E),Y=Y<0?Ct(W+Y,0):Gt(Y,W-1)),i===i?yT(n,i,Y):Po(n,ig,Y,!0)}function Kx(n,i){return n&&n.length?bg(n,Me(i)):r}var Wx=Fe(Ap);function Ap(n,i){return n&&n.length&&i&&i.length?Vf(n,i):n}function Gx(n,i,E){return n&&n.length&&i&&i.length?Vf(n,i,De(E,2)):n}function Hx(n,i,E){return n&&n.length&&i&&i.length?Vf(n,i,r,E):n}var jx=An(function(n,i){var E=n==null?0:n.length,W=Nf(n,i);return Ug(n,lt(i,function(Y){return Pn(Y,E)?+Y:Y}).sort(Yg)),W});function Vx(n,i){var E=[];if(!(n&&n.length))return E;var W=-1,Y=[],Z=n.length;for(i=De(i,3);++W<Z;){var te=n[W];i(te,W,n)&&(E.push(te),Y.push(W))}return Ug(n,Y),E}function cc(n){return n==null?n:UT.call(n)}function zx(n,i,E){var W=n==null?0:n.length;return W?(E&&typeof E!="number"&&Jt(n,i,E)?(i=0,E=W):(i=i==null?0:Me(i),E=E===r?W:Me(E)),Wr(n,i,E)):[]}function $x(n,i){return zo(n,i)}function Yx(n,i,E){return Yf(n,i,De(E,2))}function Xx(n,i){var E=n==null?0:n.length;if(E){var W=zo(n,i);if(W<E&&qr(n[W],i))return W}return-1}function Qx(n,i){return zo(n,i,!0)}function Zx(n,i,E){return Yf(n,i,De(E,2),!0)}function Jx(n,i){var E=n==null?0:n.length;if(E){var W=zo(n,i,!0)-1;if(qr(n[W],i))return W}return-1}function qx(n){return n&&n.length?Kg(n):[]}function e1(n,i){return n&&n.length?Kg(n,De(i,2)):[]}function t1(n){var i=n==null?0:n.length;return i?Wr(n,1,i):[]}function r1(n,i,E){return n&&n.length?(i=E||i===r?1:Me(i),Wr(n,0,i<0?0:i)):[]}function n1(n,i,E){var W=n==null?0:n.length;return W?(i=E||i===r?1:Me(i),i=W-i,Wr(n,i<0?0:i,W)):[]}function i1(n,i){return n&&n.length?$o(n,De(i,3),!1,!0):[]}function a1(n,i){return n&&n.length?$o(n,De(i,3)):[]}var s1=Fe(function(n){return Yn(Ut(n,1,Tt,!0))}),o1=Fe(function(n){var i=Gr(n);return Tt(i)&&(i=r),Yn(Ut(n,1,Tt,!0),De(i,2))}),l1=Fe(function(n){var i=Gr(n);return i=typeof i=="function"?i:r,Yn(Ut(n,1,Tt,!0),r,i)});function u1(n){return n&&n.length?Yn(n):[]}function f1(n,i){return n&&n.length?Yn(n,De(i,2)):[]}function c1(n,i){return i=typeof i=="function"?i:r,n&&n.length?Yn(n,r,i):[]}function dc(n){if(!(n&&n.length))return[];var i=0;return n=Hn(n,function(E){if(Tt(E))return i=Ct(E.length,i),!0}),Cf(i,function(E){return lt(n,Pf(E))})}function Pp(n,i){if(!(n&&n.length))return[];var E=dc(n);return i==null?E:lt(E,function(W){return _r(i,r,W)})}var d1=Fe(function(n,i){return Tt(n)?os(n,i):[]}),h1=Fe(function(n){return Qf(Hn(n,Tt))}),v1=Fe(function(n){var i=Gr(n);return Tt(i)&&(i=r),Qf(Hn(n,Tt),De(i,2))}),g1=Fe(function(n){var i=Gr(n);return i=typeof i=="function"?i:r,Qf(Hn(n,Tt),r,i)}),p1=Fe(dc);function m1(n,i){return jg(n||[],i||[],ss)}function y1(n,i){return jg(n||[],i||[],fs)}var E1=Fe(function(n){var i=n.length,E=i>1?n[i-1]:r;return E=typeof E=="function"?(n.pop(),E):r,Pp(n,E)});function Dp(n){var i=Q(n);return i.__chain__=!0,i}function _1(n,i){return i(n),n}function rl(n,i){return i(n)}var T1=An(function(n){var i=n.length,E=i?n[0]:0,W=this.__wrapped__,Y=function(Z){return Nf(Z,n)};return i>1||this.__actions__.length||!(W instanceof Ue)||!Pn(E)?this.thru(Y):(W=W.slice(E,+E+(i?1:0)),W.__actions__.push({func:rl,args:[Y],thisArg:r}),new Br(W,this.__chain__).thru(function(Z){return i&&!Z.length&&Z.push(r),Z}))});function S1(){return Dp(this)}function x1(){return new Br(this.value(),this.__chain__)}function L1(){this.__values__===r&&(this.__values__=Wp(this.value()));var n=this.__index__>=this.__values__.length,i=n?r:this.__values__[this.__index__++];return{done:n,value:i}}function A1(){return this}function P1(n){for(var i,E=this;E instanceof Wo;){var W=_p(E);W.__index__=0,W.__values__=r,i?Y.__wrapped__=W:i=W;var Y=W;E=E.__wrapped__}return Y.__wrapped__=n,i}function D1(){var n=this.__wrapped__;if(n instanceof Ue){var i=n;return this.__actions__.length&&(i=new Ue(this)),i=i.reverse(),i.__actions__.push({func:rl,args:[cc],thisArg:r}),new Br(i,this.__chain__)}return this.thru(cc)}function R1(){return Hg(this.__wrapped__,this.__actions__)}var C1=Yo(function(n,i,E){Ye.call(n,E)?++n[E]:xn(n,E,1)});function I1(n,i,E){var W=Oe(n)?rg:_S;return E&&Jt(n,i,E)&&(i=r),W(n,De(i,3))}function O1(n,i){var E=Oe(n)?Hn:Pg;return E(n,De(i,3))}var w1=ep(Tp),M1=ep(Sp);function k1(n,i){return Ut(nl(n,i),1)}function b1(n,i){return Ut(nl(n,i),u)}function F1(n,i,E){return E=E===r?1:Me(E),Ut(nl(n,i),E)}function Rp(n,i){var E=Oe(n)?Nr:$n;return E(n,De(i,3))}function Cp(n,i){var E=Oe(n)?tT:Ag;return E(n,De(i,3))}var N1=Yo(function(n,i,E){Ye.call(n,E)?n[E].push(i):xn(n,E,[i])});function U1(n,i,E,W){n=lr(n)?n:ha(n),E=E&&!W?Me(E):0;var Y=n.length;return E<0&&(E=Ct(Y+E,0)),ll(n)?E<=Y&&n.indexOf(i,E)>-1:!!Y&&ta(n,i,E)>-1}var B1=Fe(function(n,i,E){var W=-1,Y=typeof i=="function",Z=lr(n)?oe(n.length):[];return $n(n,function(te){Z[++W]=Y?_r(i,te,E):ls(te,i,E)}),Z}),K1=Yo(function(n,i,E){xn(n,E,i)});function nl(n,i){var E=Oe(n)?lt:wg;return E(n,De(i,3))}function W1(n,i,E,W){return n==null?[]:(Oe(i)||(i=i==null?[]:[i]),E=W?r:E,Oe(E)||(E=E==null?[]:[E]),Fg(n,i,E))}var G1=Yo(function(n,i,E){n[E?0:1].push(i)},function(){return[[],[]]});function H1(n,i,E){var W=Oe(n)?Lf:sg,Y=arguments.length<3;return W(n,De(i,4),E,Y,$n)}function j1(n,i,E){var W=Oe(n)?rT:sg,Y=arguments.length<3;return W(n,De(i,4),E,Y,Ag)}function V1(n,i){var E=Oe(n)?Hn:Pg;return E(n,sl(De(i,3)))}function z1(n){var i=Oe(n)?Tg:US;return i(n)}function $1(n,i,E){(E?Jt(n,i,E):i===r)?i=1:i=Me(i);var W=Oe(n)?gS:BS;return W(n,i)}function Y1(n){var i=Oe(n)?pS:WS;return i(n)}function X1(n){if(n==null)return 0;if(lr(n))return ll(n)?na(n):n.length;var i=Ht(n);return i==ue||i==Ae?n.size:Hf(n).length}function Q1(n,i,E){var W=Oe(n)?Af:GS;return E&&Jt(n,i,E)&&(i=r),W(n,De(i,3))}var Z1=Fe(function(n,i){if(n==null)return[];var E=i.length;return E>1&&Jt(n,i[0],i[1])?i=[]:E>2&&Jt(i[0],i[1],i[2])&&(i=[i[0]]),Fg(n,Ut(i,1),[])}),il=OT||function(){return Nt.Date.now()};function J1(n,i){if(typeof i!="function")throw new Ur(O);return n=Me(n),function(){if(--n<1)return i.apply(this,arguments)}}function Ip(n,i,E){return i=E?r:i,i=n&&i==null?n.length:i,Ln(n,v,r,r,r,r,i)}function Op(n,i){var E;if(typeof i!="function")throw new Ur(O);return n=Me(n),function(){return--n>0&&(E=i.apply(this,arguments)),n<=1&&(i=r),E}}var hc=Fe(function(n,i,E){var W=N;if(E.length){var Y=Vn(E,ca(hc));W|=A}return Ln(n,W,i,E,Y)}),wp=Fe(function(n,i,E){var W=N|L;if(E.length){var Y=Vn(E,ca(wp));W|=A}return Ln(i,W,n,E,Y)});function Mp(n,i,E){i=E?r:i;var W=Ln(n,l,r,r,r,r,r,i);return W.placeholder=Mp.placeholder,W}function kp(n,i,E){i=E?r:i;var W=Ln(n,C,r,r,r,r,r,i);return W.placeholder=kp.placeholder,W}function bp(n,i,E){var W,Y,Z,te,re,se,de=0,he=!1,ge=!1,Te=!0;if(typeof n!="function")throw new Ur(O);i=Hr(i)||0,dt(E)&&(he=!!E.leading,ge="maxWait"in E,Z=ge?Ct(Hr(E.maxWait)||0,i):Z,Te="trailing"in E?!!E.trailing:Te);function Pe(St){var en=W,Cn=Y;return W=Y=r,de=St,te=n.apply(Cn,en),te}function Re(St){return de=St,re=hs(Ne,i),he?Pe(St):te}function ke(St){var en=St-se,Cn=St-de,e0=i-en;return ge?Gt(e0,Z-Cn):e0}function Ce(St){var en=St-se,Cn=St-de;return se===r||en>=i||en<0||ge&&Cn>=Z}function Ne(){var St=il();if(Ce(St))return We(St);re=hs(Ne,ke(St))}function We(St){return re=r,Te&&W?Pe(St):(W=Y=r,te)}function Lr(){re!==r&&Vg(re),de=0,W=se=Y=re=r}function qt(){return re===r?te:We(il())}function Ar(){var St=il(),en=Ce(St);if(W=arguments,Y=this,se=St,en){if(re===r)return Re(se);if(ge)return Vg(re),re=hs(Ne,i),Pe(se)}return re===r&&(re=hs(Ne,i)),te}return Ar.cancel=Lr,Ar.flush=qt,Ar}var q1=Fe(function(n,i){return Lg(n,1,i)}),eL=Fe(function(n,i,E){return Lg(n,Hr(i)||0,E)});function tL(n){return Ln(n,g)}function al(n,i){if(typeof n!="function"||i!=null&&typeof i!="function")throw new Ur(O);var E=function(){var W=arguments,Y=i?i.apply(this,W):W[0],Z=E.cache;if(Z.has(Y))return Z.get(Y);var te=n.apply(this,W);return E.cache=Z.set(Y,te)||Z,te};return E.cache=new(al.Cache||Sn),E}al.Cache=Sn;function sl(n){if(typeof n!="function")throw new Ur(O);return function(){var i=arguments;switch(i.length){case 0:return!n.call(this);case 1:return!n.call(this,i[0]);case 2:return!n.call(this,i[0],i[1]);case 3:return!n.call(this,i[0],i[1],i[2])}return!n.apply(this,i)}}function rL(n){return Op(2,n)}var nL=HS(function(n,i){i=i.length==1&&Oe(i[0])?lt(i[0],Tr(De())):lt(Ut(i,1),Tr(De()));var E=i.length;return Fe(function(W){for(var Y=-1,Z=Gt(W.length,E);++Y<Z;)W[Y]=i[Y].call(this,W[Y]);return _r(n,this,W)})}),vc=Fe(function(n,i){var E=Vn(i,ca(vc));return Ln(n,A,r,i,E)}),Fp=Fe(function(n,i){var E=Vn(i,ca(Fp));return Ln(n,d,r,i,E)}),iL=An(function(n,i){return Ln(n,h,r,r,r,i)});function aL(n,i){if(typeof n!="function")throw new Ur(O);return i=i===r?i:Me(i),Fe(n,i)}function sL(n,i){if(typeof n!="function")throw new Ur(O);return i=i==null?0:Ct(Me(i),0),Fe(function(E){var W=E[i],Y=Qn(E,0,i);return W&&jn(Y,W),_r(n,this,Y)})}function oL(n,i,E){var W=!0,Y=!0;if(typeof n!="function")throw new Ur(O);return dt(E)&&(W="leading"in E?!!E.leading:W,Y="trailing"in E?!!E.trailing:Y),bp(n,i,{leading:W,maxWait:i,trailing:Y})}function lL(n){return Ip(n,1)}function uL(n,i){return vc(Jf(i),n)}function fL(){if(!arguments.length)return[];var n=arguments[0];return Oe(n)?n:[n]}function cL(n){return Kr(n,H)}function dL(n,i){return i=typeof i=="function"?i:r,Kr(n,H,i)}function hL(n){return Kr(n,K|H)}function vL(n,i){return i=typeof i=="function"?i:r,Kr(n,K|H,i)}function gL(n,i){return i==null||xg(n,i,Mt(i))}function qr(n,i){return n===i||n!==n&&i!==i}var pL=Jo(Kf),mL=Jo(function(n,i){return n>=i}),Fi=Cg(function(){return arguments}())?Cg:function(n){return mt(n)&&Ye.call(n,"callee")&&!gg.call(n,"callee")},Oe=oe.isArray,yL=Qv?Tr(Qv):PS;function lr(n){return n!=null&&ol(n.length)&&!Dn(n)}function Tt(n){return mt(n)&&lr(n)}function EL(n){return n===!0||n===!1||mt(n)&&Zt(n)==X}var Zn=MT||Ac,_L=Zv?Tr(Zv):DS;function TL(n){return mt(n)&&n.nodeType===1&&!vs(n)}function SL(n){if(n==null)return!0;if(lr(n)&&(Oe(n)||typeof n=="string"||typeof n.splice=="function"||Zn(n)||da(n)||Fi(n)))return!n.length;var i=Ht(n);if(i==ue||i==Ae)return!n.size;if(ds(n))return!Hf(n).length;for(var E in n)if(Ye.call(n,E))return!1;return!0}function xL(n,i){return us(n,i)}function LL(n,i,E){E=typeof E=="function"?E:r;var W=E?E(n,i):r;return W===r?us(n,i,r,E):!!W}function gc(n){if(!mt(n))return!1;var i=Zt(n);return i==ee||i==q||typeof n.message=="string"&&typeof n.name=="string"&&!vs(n)}function AL(n){return typeof n=="number"&&mg(n)}function Dn(n){if(!dt(n))return!1;var i=Zt(n);return i==ne||i==ae||i==$||i==Ee}function Np(n){return typeof n=="number"&&n==Me(n)}function ol(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=m}function dt(n){var i=typeof n;return n!=null&&(i=="object"||i=="function")}function mt(n){return n!=null&&typeof n=="object"}var Up=Jv?Tr(Jv):CS;function PL(n,i){return n===i||Gf(n,i,ac(i))}function DL(n,i,E){return E=typeof E=="function"?E:r,Gf(n,i,ac(i),E)}function RL(n){return Bp(n)&&n!=+n}function CL(n){if(dx(n))throw new Ie(c);return Ig(n)}function IL(n){return n===null}function OL(n){return n==null}function Bp(n){return typeof n=="number"||mt(n)&&Zt(n)==le}function vs(n){if(!mt(n)||Zt(n)!=ye)return!1;var i=ko(n);if(i===null)return!0;var E=Ye.call(i,"constructor")&&i.constructor;return typeof E=="function"&&E instanceof E&&Io.call(E)==DT}var pc=qv?Tr(qv):IS;function wL(n){return Np(n)&&n>=-m&&n<=m}var Kp=eg?Tr(eg):OS;function ll(n){return typeof n=="string"||!Oe(n)&&mt(n)&&Zt(n)==we}function xr(n){return typeof n=="symbol"||mt(n)&&Zt(n)==be}var da=tg?Tr(tg):wS;function ML(n){return n===r}function kL(n){return mt(n)&&Ht(n)==Ge}function bL(n){return mt(n)&&Zt(n)==qe}var FL=Jo(jf),NL=Jo(function(n,i){return n<=i});function Wp(n){if(!n)return[];if(lr(n))return ll(n)?Zr(n):or(n);if(ts&&n[ts])return gT(n[ts]());var i=Ht(n),E=i==ue?Of:i==Ae?Do:ha;return E(n)}function Rn(n){if(!n)return n===0?n:0;if(n=Hr(n),n===u||n===-u){var i=n<0?-1:1;return i*o}return n===n?n:0}function Me(n){var i=Rn(n),E=i%1;return i===i?E?i-E:i:0}function Gp(n){return n?wi(Me(n),0,U):0}function Hr(n){if(typeof n=="number")return n;if(xr(n))return S;if(dt(n)){var i=typeof n.valueOf=="function"?n.valueOf():n;n=dt(i)?i+"":i}if(typeof n!="string")return n===0?n:+n;n=og(n);var E=hf.test(n);return E||To.test(n)?J_(n.slice(2),E?2:8):df.test(n)?S:+n}function Hp(n){return dn(n,ur(n))}function UL(n){return n?wi(Me(n),-m,m):n===0?n:0}function $e(n){return n==null?"":Sr(n)}var BL=ua(function(n,i){if(ds(i)||lr(i)){dn(i,Mt(i),n);return}for(var E in i)Ye.call(i,E)&&ss(n,E,i[E])}),jp=ua(function(n,i){dn(i,ur(i),n)}),ul=ua(function(n,i,E,W){dn(i,ur(i),n,W)}),KL=ua(function(n,i,E,W){dn(i,Mt(i),n,W)}),WL=An(Nf);function GL(n,i){var E=la(n);return i==null?E:Sg(E,i)}var HL=Fe(function(n,i){n=Je(n);var E=-1,W=i.length,Y=W>2?i[2]:r;for(Y&&Jt(i[0],i[1],Y)&&(W=1);++E<W;)for(var Z=i[E],te=ur(Z),re=-1,se=te.length;++re<se;){var de=te[re],he=n[de];(he===r||qr(he,aa[de])&&!Ye.call(n,de))&&(n[de]=Z[de])}return n}),jL=Fe(function(n){return n.push(r,op),_r(Vp,r,n)});function VL(n,i){return ng(n,De(i,3),cn)}function zL(n,i){return ng(n,De(i,3),Bf)}function $L(n,i){return n==null?n:Uf(n,De(i,3),ur)}function YL(n,i){return n==null?n:Dg(n,De(i,3),ur)}function XL(n,i){return n&&cn(n,De(i,3))}function QL(n,i){return n&&Bf(n,De(i,3))}function ZL(n){return n==null?[]:jo(n,Mt(n))}function JL(n){return n==null?[]:jo(n,ur(n))}function mc(n,i,E){var W=n==null?r:Mi(n,i);return W===r?E:W}function qL(n,i){return n!=null&&fp(n,i,SS)}function yc(n,i){return n!=null&&fp(n,i,xS)}var eA=rp(function(n,i,E){i!=null&&typeof i.toString!="function"&&(i=Oo.call(i)),n[i]=E},_c(fr)),tA=rp(function(n,i,E){i!=null&&typeof i.toString!="function"&&(i=Oo.call(i)),Ye.call(n,i)?n[i].push(E):n[i]=[E]},De),rA=Fe(ls);function Mt(n){return lr(n)?_g(n):Hf(n)}function ur(n){return lr(n)?_g(n,!0):MS(n)}function nA(n,i){var E={};return i=De(i,3),cn(n,function(W,Y,Z){xn(E,i(W,Y,Z),W)}),E}function iA(n,i){var E={};return i=De(i,3),cn(n,function(W,Y,Z){xn(E,Y,i(W,Y,Z))}),E}var aA=ua(function(n,i,E){Vo(n,i,E)}),Vp=ua(function(n,i,E,W){Vo(n,i,E,W)}),sA=An(function(n,i){var E={};if(n==null)return E;var W=!1;i=lt(i,function(Z){return Z=Xn(Z,n),W||(W=Z.length>1),Z}),dn(n,nc(n),E),W&&(E=Kr(E,K|M|H,ex));for(var Y=i.length;Y--;)Xf(E,i[Y]);return E});function oA(n,i){return zp(n,sl(De(i)))}var lA=An(function(n,i){return n==null?{}:bS(n,i)});function zp(n,i){if(n==null)return{};var E=lt(nc(n),function(W){return[W]});return i=De(i),Ng(n,E,function(W,Y){return i(W,Y[0])})}function uA(n,i,E){i=Xn(i,n);var W=-1,Y=i.length;for(Y||(Y=1,n=r);++W<Y;){var Z=n==null?r:n[hn(i[W])];Z===r&&(W=Y,Z=E),n=Dn(Z)?Z.call(n):Z}return n}function fA(n,i,E){return n==null?n:fs(n,i,E)}function cA(n,i,E,W){return W=typeof W=="function"?W:r,n==null?n:fs(n,i,E,W)}var $p=ap(Mt),Yp=ap(ur);function dA(n,i,E){var W=Oe(n),Y=W||Zn(n)||da(n);if(i=De(i,4),E==null){var Z=n&&n.constructor;Y?E=W?new Z:[]:dt(n)?E=Dn(Z)?la(ko(n)):{}:E={}}return(Y?Nr:cn)(n,function(te,re,se){return i(E,te,re,se)}),E}function hA(n,i){return n==null?!0:Xf(n,i)}function vA(n,i,E){return n==null?n:Gg(n,i,Jf(E))}function gA(n,i,E,W){return W=typeof W=="function"?W:r,n==null?n:Gg(n,i,Jf(E),W)}function ha(n){return n==null?[]:If(n,Mt(n))}function pA(n){return n==null?[]:If(n,ur(n))}function mA(n,i,E){return E===r&&(E=i,i=r),E!==r&&(E=Hr(E),E=E===E?E:0),i!==r&&(i=Hr(i),i=i===i?i:0),wi(Hr(n),i,E)}function yA(n,i,E){return i=Rn(i),E===r?(E=i,i=0):E=Rn(E),n=Hr(n),LS(n,i,E)}function EA(n,i,E){if(E&&typeof E!="boolean"&&Jt(n,i,E)&&(i=E=r),E===r&&(typeof i=="boolean"?(E=i,i=r):typeof n=="boolean"&&(E=n,n=r)),n===r&&i===r?(n=0,i=1):(n=Rn(n),i===r?(i=n,n=0):i=Rn(i)),n>i){var W=n;n=i,i=W}if(E||n%1||i%1){var Y=yg();return Gt(n+Y*(i-n+Z_("1e-"+((Y+"").length-1))),i)}return zf(n,i)}var _A=fa(function(n,i,E){return i=i.toLowerCase(),n+(E?Xp(i):i)});function Xp(n){return Ec($e(n).toLowerCase())}function Qp(n){return n=$e(n),n&&n.replace(gf,fT).replace(W_,"")}function TA(n,i,E){n=$e(n),i=Sr(i);var W=n.length;E=E===r?W:wi(Me(E),0,W);var Y=E;return E-=i.length,E>=0&&n.slice(E,Y)==i}function SA(n){return n=$e(n),n&&pt.test(n)?n.replace(Qt,cT):n}function xA(n){return n=$e(n),n&&lf.test(n)?n.replace(Gn,"\\$&"):n}var LA=fa(function(n,i,E){return n+(E?"-":"")+i.toLowerCase()}),AA=fa(function(n,i,E){return n+(E?" ":"")+i.toLowerCase()}),PA=qg("toLowerCase");function DA(n,i,E){n=$e(n),i=Me(i);var W=i?na(n):0;if(!i||W>=i)return n;var Y=(i-W)/2;return Zo(Uo(Y),E)+n+Zo(No(Y),E)}function RA(n,i,E){n=$e(n),i=Me(i);var W=i?na(n):0;return i&&W<i?n+Zo(i-W,E):n}function CA(n,i,E){n=$e(n),i=Me(i);var W=i?na(n):0;return i&&W<i?Zo(i-W,E)+n:n}function IA(n,i,E){return E||i==null?i=0:i&&(i=+i),NT($e(n).replace(Di,""),i||0)}function OA(n,i,E){return(E?Jt(n,i,E):i===r)?i=1:i=Me(i),$f($e(n),i)}function wA(){var n=arguments,i=$e(n[0]);return n.length<3?i:i.replace(n[1],n[2])}var MA=fa(function(n,i,E){return n+(E?"_":"")+i.toLowerCase()});function kA(n,i,E){return E&&typeof E!="number"&&Jt(n,i,E)&&(i=E=r),E=E===r?U:E>>>0,E?(n=$e(n),n&&(typeof i=="string"||i!=null&&!pc(i))&&(i=Sr(i),!i&&ra(n))?Qn(Zr(n),0,E):n.split(i,E)):[]}var bA=fa(function(n,i,E){return n+(E?" ":"")+Ec(i)});function FA(n,i,E){return n=$e(n),E=E==null?0:wi(Me(E),0,n.length),i=Sr(i),n.slice(E,E+i.length)==i}function NA(n,i,E){var W=Q.templateSettings;E&&Jt(n,i,E)&&(i=r),n=$e(n),i=ul({},i,W,sp);var Y=ul({},i.imports,W.imports,sp),Z=Mt(Y),te=If(Y,Z),re,se,de=0,he=i.interpolate||So,ge="__p += '",Te=wf((i.escape||So).source+"|"+he.source+"|"+(he===Pi?cf:So).source+"|"+(i.evaluate||So).source+"|$","g"),Pe="//# sourceURL="+(Ye.call(i,"sourceURL")?(i.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++z_+"]")+`
`;n.replace(Te,function(Ce,Ne,We,Lr,qt,Ar){return We||(We=Lr),ge+=n.slice(de,Ar).replace(x_,dT),Ne&&(re=!0,ge+=`' +
__e(`+Ne+`) +
'`),qt&&(se=!0,ge+=`';
`+qt+`;
__p += '`),We&&(ge+=`' +
((__t = (`+We+`)) == null ? '' : __t) +
'`),de=Ar+Ce.length,Ce}),ge+=`';
`;var Re=Ye.call(i,"variable")&&i.variable;if(!Re)ge=`with (obj) {
`+ge+`
}
`;else if(Eo.test(Re))throw new Ie(w);ge=(se?ge.replace(ar,""):ge).replace(sr,"$1").replace(wt,"$1;"),ge="function("+(Re||"obj")+`) {
`+(Re?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(re?", __e = _.escape":"")+(se?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ge+`return __p
}`;var ke=Jp(function(){return Ve(Z,Pe+"return "+ge).apply(r,te)});if(ke.source=ge,gc(ke))throw ke;return ke}function UA(n){return $e(n).toLowerCase()}function BA(n){return $e(n).toUpperCase()}function KA(n,i,E){if(n=$e(n),n&&(E||i===r))return og(n);if(!n||!(i=Sr(i)))return n;var W=Zr(n),Y=Zr(i),Z=lg(W,Y),te=ug(W,Y)+1;return Qn(W,Z,te).join("")}function WA(n,i,E){if(n=$e(n),n&&(E||i===r))return n.slice(0,cg(n)+1);if(!n||!(i=Sr(i)))return n;var W=Zr(n),Y=ug(W,Zr(i))+1;return Qn(W,0,Y).join("")}function GA(n,i,E){if(n=$e(n),n&&(E||i===r))return n.replace(Di,"");if(!n||!(i=Sr(i)))return n;var W=Zr(n),Y=lg(W,Zr(i));return Qn(W,Y).join("")}function HA(n,i){var E=P,W=D;if(dt(i)){var Y="separator"in i?i.separator:Y;E="length"in i?Me(i.length):E,W="omission"in i?Sr(i.omission):W}n=$e(n);var Z=n.length;if(ra(n)){var te=Zr(n);Z=te.length}if(E>=Z)return n;var re=E-na(W);if(re<1)return W;var se=te?Qn(te,0,re).join(""):n.slice(0,re);if(Y===r)return se+W;if(te&&(re+=se.length-re),pc(Y)){if(n.slice(re).search(Y)){var de,he=se;for(Y.global||(Y=wf(Y.source,$e(_o.exec(Y))+"g")),Y.lastIndex=0;de=Y.exec(he);)var ge=de.index;se=se.slice(0,ge===r?re:ge)}}else if(n.indexOf(Sr(Y),re)!=re){var Te=se.lastIndexOf(Y);Te>-1&&(se=se.slice(0,Te))}return se+W}function jA(n){return n=$e(n),n&&mr.test(n)?n.replace(Lt,ET):n}var VA=fa(function(n,i,E){return n+(E?" ":"")+i.toUpperCase()}),Ec=qg("toUpperCase");function Zp(n,i,E){return n=$e(n),i=E?r:i,i===r?vT(n)?ST(n):aT(n):n.match(i)||[]}var Jp=Fe(function(n,i){try{return _r(n,r,i)}catch(E){return gc(E)?E:new Ie(E)}}),zA=An(function(n,i){return Nr(i,function(E){E=hn(E),xn(n,E,hc(n[E],n))}),n});function $A(n){var i=n==null?0:n.length,E=De();return n=i?lt(n,function(W){if(typeof W[1]!="function")throw new Ur(O);return[E(W[0]),W[1]]}):[],Fe(function(W){for(var Y=-1;++Y<i;){var Z=n[Y];if(_r(Z[0],this,W))return _r(Z[1],this,W)}})}function YA(n){return ES(Kr(n,K))}function _c(n){return function(){return n}}function XA(n,i){return n==null||n!==n?i:n}var QA=tp(),ZA=tp(!0);function fr(n){return n}function Tc(n){return Og(typeof n=="function"?n:Kr(n,K))}function JA(n){return Mg(Kr(n,K))}function qA(n,i){return kg(n,Kr(i,K))}var eP=Fe(function(n,i){return function(E){return ls(E,n,i)}}),tP=Fe(function(n,i){return function(E){return ls(n,E,i)}});function Sc(n,i,E){var W=Mt(i),Y=jo(i,W);E==null&&!(dt(i)&&(Y.length||!W.length))&&(E=i,i=n,n=this,Y=jo(i,Mt(i)));var Z=!(dt(E)&&"chain"in E)||!!E.chain,te=Dn(n);return Nr(Y,function(re){var se=i[re];n[re]=se,te&&(n.prototype[re]=function(){var de=this.__chain__;if(Z||de){var he=n(this.__wrapped__),ge=he.__actions__=or(this.__actions__);return ge.push({func:se,args:arguments,thisArg:n}),he.__chain__=de,he}return se.apply(n,jn([this.value()],arguments))})}),n}function rP(){return Nt._===this&&(Nt._=RT),this}function xc(){}function nP(n){return n=Me(n),Fe(function(i){return bg(i,n)})}var iP=ec(lt),aP=ec(rg),sP=ec(Af);function qp(n){return oc(n)?Pf(hn(n)):FS(n)}function oP(n){return function(i){return n==null?r:Mi(n,i)}}var lP=np(),uP=np(!0);function Lc(){return[]}function Ac(){return!1}function fP(){return{}}function cP(){return""}function dP(){return!0}function hP(n,i){if(n=Me(n),n<1||n>m)return[];var E=U,W=Gt(n,U);i=De(i),n-=U;for(var Y=Cf(W,i);++E<n;)i(E);return Y}function vP(n){return Oe(n)?lt(n,hn):xr(n)?[n]:or(Ep($e(n)))}function gP(n){var i=++PT;return $e(n)+i}var pP=Qo(function(n,i){return n+i},0),mP=tc("ceil"),yP=Qo(function(n,i){return n/i},1),EP=tc("floor");function _P(n){return n&&n.length?Ho(n,fr,Kf):r}function TP(n,i){return n&&n.length?Ho(n,De(i,2),Kf):r}function SP(n){return ag(n,fr)}function xP(n,i){return ag(n,De(i,2))}function LP(n){return n&&n.length?Ho(n,fr,jf):r}function AP(n,i){return n&&n.length?Ho(n,De(i,2),jf):r}var PP=Qo(function(n,i){return n*i},1),DP=tc("round"),RP=Qo(function(n,i){return n-i},0);function CP(n){return n&&n.length?Rf(n,fr):0}function IP(n,i){return n&&n.length?Rf(n,De(i,2)):0}return Q.after=J1,Q.ary=Ip,Q.assign=BL,Q.assignIn=jp,Q.assignInWith=ul,Q.assignWith=KL,Q.at=WL,Q.before=Op,Q.bind=hc,Q.bindAll=zA,Q.bindKey=wp,Q.castArray=fL,Q.chain=Dp,Q.chunk=Ex,Q.compact=_x,Q.concat=Tx,Q.cond=$A,Q.conforms=YA,Q.constant=_c,Q.countBy=C1,Q.create=GL,Q.curry=Mp,Q.curryRight=kp,Q.debounce=bp,Q.defaults=HL,Q.defaultsDeep=jL,Q.defer=q1,Q.delay=eL,Q.difference=Sx,Q.differenceBy=xx,Q.differenceWith=Lx,Q.drop=Ax,Q.dropRight=Px,Q.dropRightWhile=Dx,Q.dropWhile=Rx,Q.fill=Cx,Q.filter=O1,Q.flatMap=k1,Q.flatMapDeep=b1,Q.flatMapDepth=F1,Q.flatten=xp,Q.flattenDeep=Ix,Q.flattenDepth=Ox,Q.flip=tL,Q.flow=QA,Q.flowRight=ZA,Q.fromPairs=wx,Q.functions=ZL,Q.functionsIn=JL,Q.groupBy=N1,Q.initial=kx,Q.intersection=bx,Q.intersectionBy=Fx,Q.intersectionWith=Nx,Q.invert=eA,Q.invertBy=tA,Q.invokeMap=B1,Q.iteratee=Tc,Q.keyBy=K1,Q.keys=Mt,Q.keysIn=ur,Q.map=nl,Q.mapKeys=nA,Q.mapValues=iA,Q.matches=JA,Q.matchesProperty=qA,Q.memoize=al,Q.merge=aA,Q.mergeWith=Vp,Q.method=eP,Q.methodOf=tP,Q.mixin=Sc,Q.negate=sl,Q.nthArg=nP,Q.omit=sA,Q.omitBy=oA,Q.once=rL,Q.orderBy=W1,Q.over=iP,Q.overArgs=nL,Q.overEvery=aP,Q.overSome=sP,Q.partial=vc,Q.partialRight=Fp,Q.partition=G1,Q.pick=lA,Q.pickBy=zp,Q.property=qp,Q.propertyOf=oP,Q.pull=Wx,Q.pullAll=Ap,Q.pullAllBy=Gx,Q.pullAllWith=Hx,Q.pullAt=jx,Q.range=lP,Q.rangeRight=uP,Q.rearg=iL,Q.reject=V1,Q.remove=Vx,Q.rest=aL,Q.reverse=cc,Q.sampleSize=$1,Q.set=fA,Q.setWith=cA,Q.shuffle=Y1,Q.slice=zx,Q.sortBy=Z1,Q.sortedUniq=qx,Q.sortedUniqBy=e1,Q.split=kA,Q.spread=sL,Q.tail=t1,Q.take=r1,Q.takeRight=n1,Q.takeRightWhile=i1,Q.takeWhile=a1,Q.tap=_1,Q.throttle=oL,Q.thru=rl,Q.toArray=Wp,Q.toPairs=$p,Q.toPairsIn=Yp,Q.toPath=vP,Q.toPlainObject=Hp,Q.transform=dA,Q.unary=lL,Q.union=s1,Q.unionBy=o1,Q.unionWith=l1,Q.uniq=u1,Q.uniqBy=f1,Q.uniqWith=c1,Q.unset=hA,Q.unzip=dc,Q.unzipWith=Pp,Q.update=vA,Q.updateWith=gA,Q.values=ha,Q.valuesIn=pA,Q.without=d1,Q.words=Zp,Q.wrap=uL,Q.xor=h1,Q.xorBy=v1,Q.xorWith=g1,Q.zip=p1,Q.zipObject=m1,Q.zipObjectDeep=y1,Q.zipWith=E1,Q.entries=$p,Q.entriesIn=Yp,Q.extend=jp,Q.extendWith=ul,Sc(Q,Q),Q.add=pP,Q.attempt=Jp,Q.camelCase=_A,Q.capitalize=Xp,Q.ceil=mP,Q.clamp=mA,Q.clone=cL,Q.cloneDeep=hL,Q.cloneDeepWith=vL,Q.cloneWith=dL,Q.conformsTo=gL,Q.deburr=Qp,Q.defaultTo=XA,Q.divide=yP,Q.endsWith=TA,Q.eq=qr,Q.escape=SA,Q.escapeRegExp=xA,Q.every=I1,Q.find=w1,Q.findIndex=Tp,Q.findKey=VL,Q.findLast=M1,Q.findLastIndex=Sp,Q.findLastKey=zL,Q.floor=EP,Q.forEach=Rp,Q.forEachRight=Cp,Q.forIn=$L,Q.forInRight=YL,Q.forOwn=XL,Q.forOwnRight=QL,Q.get=mc,Q.gt=pL,Q.gte=mL,Q.has=qL,Q.hasIn=yc,Q.head=Lp,Q.identity=fr,Q.includes=U1,Q.indexOf=Mx,Q.inRange=yA,Q.invoke=rA,Q.isArguments=Fi,Q.isArray=Oe,Q.isArrayBuffer=yL,Q.isArrayLike=lr,Q.isArrayLikeObject=Tt,Q.isBoolean=EL,Q.isBuffer=Zn,Q.isDate=_L,Q.isElement=TL,Q.isEmpty=SL,Q.isEqual=xL,Q.isEqualWith=LL,Q.isError=gc,Q.isFinite=AL,Q.isFunction=Dn,Q.isInteger=Np,Q.isLength=ol,Q.isMap=Up,Q.isMatch=PL,Q.isMatchWith=DL,Q.isNaN=RL,Q.isNative=CL,Q.isNil=OL,Q.isNull=IL,Q.isNumber=Bp,Q.isObject=dt,Q.isObjectLike=mt,Q.isPlainObject=vs,Q.isRegExp=pc,Q.isSafeInteger=wL,Q.isSet=Kp,Q.isString=ll,Q.isSymbol=xr,Q.isTypedArray=da,Q.isUndefined=ML,Q.isWeakMap=kL,Q.isWeakSet=bL,Q.join=Ux,Q.kebabCase=LA,Q.last=Gr,Q.lastIndexOf=Bx,Q.lowerCase=AA,Q.lowerFirst=PA,Q.lt=FL,Q.lte=NL,Q.max=_P,Q.maxBy=TP,Q.mean=SP,Q.meanBy=xP,Q.min=LP,Q.minBy=AP,Q.stubArray=Lc,Q.stubFalse=Ac,Q.stubObject=fP,Q.stubString=cP,Q.stubTrue=dP,Q.multiply=PP,Q.nth=Kx,Q.noConflict=rP,Q.noop=xc,Q.now=il,Q.pad=DA,Q.padEnd=RA,Q.padStart=CA,Q.parseInt=IA,Q.random=EA,Q.reduce=H1,Q.reduceRight=j1,Q.repeat=OA,Q.replace=wA,Q.result=uA,Q.round=DP,Q.runInContext=ie,Q.sample=z1,Q.size=X1,Q.snakeCase=MA,Q.some=Q1,Q.sortedIndex=$x,Q.sortedIndexBy=Yx,Q.sortedIndexOf=Xx,Q.sortedLastIndex=Qx,Q.sortedLastIndexBy=Zx,Q.sortedLastIndexOf=Jx,Q.startCase=bA,Q.startsWith=FA,Q.subtract=RP,Q.sum=CP,Q.sumBy=IP,Q.template=NA,Q.times=hP,Q.toFinite=Rn,Q.toInteger=Me,Q.toLength=Gp,Q.toLower=UA,Q.toNumber=Hr,Q.toSafeInteger=UL,Q.toString=$e,Q.toUpper=BA,Q.trim=KA,Q.trimEnd=WA,Q.trimStart=GA,Q.truncate=HA,Q.unescape=jA,Q.uniqueId=gP,Q.upperCase=VA,Q.upperFirst=Ec,Q.each=Rp,Q.eachRight=Cp,Q.first=Lp,Sc(Q,function(){var n={};return cn(Q,function(i,E){Ye.call(Q.prototype,E)||(n[E]=i)}),n}(),{chain:!1}),Q.VERSION=a,Nr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){Q[n].placeholder=Q}),Nr(["drop","take"],function(n,i){Ue.prototype[n]=function(E){E=E===r?1:Ct(Me(E),0);var W=this.__filtered__&&!i?new Ue(this):this.clone();return W.__filtered__?W.__takeCount__=Gt(E,W.__takeCount__):W.__views__.push({size:Gt(E,U),type:n+(W.__dir__<0?"Right":"")}),W},Ue.prototype[n+"Right"]=function(E){return this.reverse()[n](E).reverse()}}),Nr(["filter","map","takeWhile"],function(n,i){var E=i+1,W=E==b||E==_;Ue.prototype[n]=function(Y){var Z=this.clone();return Z.__iteratees__.push({iteratee:De(Y,3),type:E}),Z.__filtered__=Z.__filtered__||W,Z}}),Nr(["head","last"],function(n,i){var E="take"+(i?"Right":"");Ue.prototype[n]=function(){return this[E](1).value()[0]}}),Nr(["initial","tail"],function(n,i){var E="drop"+(i?"":"Right");Ue.prototype[n]=function(){return this.__filtered__?new Ue(this):this[E](1)}}),Ue.prototype.compact=function(){return this.filter(fr)},Ue.prototype.find=function(n){return this.filter(n).head()},Ue.prototype.findLast=function(n){return this.reverse().find(n)},Ue.prototype.invokeMap=Fe(function(n,i){return typeof n=="function"?new Ue(this):this.map(function(E){return ls(E,n,i)})}),Ue.prototype.reject=function(n){return this.filter(sl(De(n)))},Ue.prototype.slice=function(n,i){n=Me(n);var E=this;return E.__filtered__&&(n>0||i<0)?new Ue(E):(n<0?E=E.takeRight(-n):n&&(E=E.drop(n)),i!==r&&(i=Me(i),E=i<0?E.dropRight(-i):E.take(i-n)),E)},Ue.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()},Ue.prototype.toArray=function(){return this.take(U)},cn(Ue.prototype,function(n,i){var E=/^(?:filter|find|map|reject)|While$/.test(i),W=/^(?:head|last)$/.test(i),Y=Q[W?"take"+(i=="last"?"Right":""):i],Z=W||/^find/.test(i);Y&&(Q.prototype[i]=function(){var te=this.__wrapped__,re=W?[1]:arguments,se=te instanceof Ue,de=re[0],he=se||Oe(te),ge=function(Ne){var We=Y.apply(Q,jn([Ne],re));return W&&Te?We[0]:We};he&&E&&typeof de=="function"&&de.length!=1&&(se=he=!1);var Te=this.__chain__,Pe=!!this.__actions__.length,Re=Z&&!Te,ke=se&&!Pe;if(!Z&&he){te=ke?te:new Ue(this);var Ce=n.apply(te,re);return Ce.__actions__.push({func:rl,args:[ge],thisArg:r}),new Br(Ce,Te)}return Re&&ke?n.apply(this,re):(Ce=this.thru(ge),Re?W?Ce.value()[0]:Ce.value():Ce)})}),Nr(["pop","push","shift","sort","splice","unshift"],function(n){var i=Ro[n],E=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",W=/^(?:pop|shift)$/.test(n);Q.prototype[n]=function(){var Y=arguments;if(W&&!this.__chain__){var Z=this.value();return i.apply(Oe(Z)?Z:[],Y)}return this[E](function(te){return i.apply(Oe(te)?te:[],Y)})}}),cn(Ue.prototype,function(n,i){var E=Q[i];if(E){var W=E.name+"";Ye.call(oa,W)||(oa[W]=[]),oa[W].push({name:i,func:E})}}),oa[Xo(r,L).name]=[{name:"wrapper",func:r}],Ue.prototype.clone=jT,Ue.prototype.reverse=VT,Ue.prototype.value=zT,Q.prototype.at=T1,Q.prototype.chain=S1,Q.prototype.commit=x1,Q.prototype.next=L1,Q.prototype.plant=P1,Q.prototype.reverse=D1,Q.prototype.toJSON=Q.prototype.valueOf=Q.prototype.value=R1,Q.prototype.first=Q.prototype.head,ts&&(Q.prototype[ts]=A1),Q},ia=xT();Ri?((Ri.exports=ia)._=ia,Tf._=ia):Nt._=ia}).call(ga)})(vw,_u);function Kl(e,t){const r=new URLSearchParams(e.toString());return Object.entries(t).forEach(([a,s])=>{s===null?r.delete(a):Array.isArray(s)?(r.delete(a),s.forEach(c=>{r.append(a,c)})):r.set(a,s)}),r.toString()}const gw=()=>{const{selectedCourse:e}=go(N=>N.selectedCourse),t=pe.useRef(null),r=ho(),[a]=_v(),s=a.get("lesson")||"",c=pe.useMemo(()=>s?(e==null?void 0:e.lessons.find(N=>N.id===s))||null:(e==null?void 0:e.lessons.find(N=>N.status!=="locked"))||null,[s,e==null?void 0:e.lessons]),[O,w]=pe.useState(c),[f,F]=pe.useState(!1),I=+JSON.parse(localStorage.getItem(`video-progress-${O==null?void 0:O.id}`)||"0"),[K]=aO(`video-progress-${O==null?void 0:O.id}`,I),M=N=>{const L=Kl(a,{lesson:`${N}`});r({search:L})},H=_u.debounce(N=>{K(N)},1e3),B=N=>{const L=t.current;w(N),M(N.id),N.id===(O==null?void 0:O.id)&&L&&(f&&(L.pause(),F(!1)),f||(L.play(),F(!0)))},k=(N,L)=>{const T=t.current;T&&(N.key==="ArrowUp"&&N.shiftKey&&(T.playbackRate+=.25),N.key==="ArrowDown"&&N.shiftKey&&(T.playbackRate-=.25)),L&&N.key==="Enter"&&B(L)};return pe.useEffect(()=>{let N,L,T;(async()=>{if(!t.current)return;const A=t.current,d=`${O==null?void 0:O.link}`,v=`${O==null?void 0:O.id}`,h=new Ca({enableWorker:!1});h.on(Ca.Events.MEDIA_ATTACHED,()=>{h.loadSource(d),h.on(Ca.Events.MANIFEST_PARSED,()=>{A.currentTime=I,M(v),A.play(),F(!0)})}),N=()=>{F(!0)},L=()=>{F(!1),H(A.currentTime)},T=()=>{H(A.currentTime)},A.addEventListener("play",N),A.addEventListener("pause",L),A.addEventListener("timeupdate",T),Ca.isSupported()?h.attachMedia(A):A.canPlayType("application/vnd.apple.mpegurl")&&(A.src=d)})();const C=t.current;return()=>{C&&(C.removeEventListener("play",N),C.removeEventListener("pause",L),C.removeEventListener("timeupdate",T))}},[O]),tt("div",{className:"course__lesson lesson",children:[tt("div",{className:"lesson__player player",children:[_e("h2",{className:"player__title",children:O==null?void 0:O.title}),_e("video",{className:"player__video",poster:`${O==null?void 0:O.previewImageLink}/lesson-${O==null?void 0:O.order}.webp`,ref:t,controls:!0,onKeyDown:N=>k(N),children:_e("track",{kind:"captions"})}),tt("div",{className:"player__description",children:[_e("b",{children:"Shift + ↑ "}),": speed up the video;",_e("br",{}),_e("b",{children:"Shift + ↓ "}),": slow down the video;"]})]}),_e("div",{className:"lesson__playlist playlist",children:_e("div",{className:"playlist__list",children:e==null?void 0:e.lessons.map(N=>tt("button",{type:"button",className:of("playlist__item",{"playlist__item--active":(O==null?void 0:O.id)===N.id&&N.status!=="locked","playlist__item--disabled":N.status==="locked"}),onKeyDown:L=>k(L,N),onClick:()=>B(N),disabled:N.status==="locked",children:[N.status==="unlocked"&&_e(on,{type:f&&(O==null?void 0:O.id)===N.id?Rr.PAUSE:Rr.PLAY,addClassName:"playlist__item-icon"}),O!==N&&N.status==="locked"&&_e(on,{type:Rr.BLOCKED,addClassName:"playlist__item-icon"}),_e("p",{className:"playlist__item-title",children:N.title})]},N.id))})})]})};const pw=()=>{const{selectedCourse:e}=go(t=>t.selectedCourse);return tt("div",{className:"course",children:[_e(dw,{}),tt("div",{className:"course__title title",children:[_e("h1",{className:"title__main",children:e==null?void 0:e.title}),_e("p",{className:"title__description",children:e==null?void 0:e.description})]}),_e(gw,{})]})};const T_=({error:e})=>_e("h1",{className:"error-notification",children:`...${e}...`});const S_=()=>_e("div",{className:"Loader",children:_e("div",{className:"Loader__content"})});var Cv=(e=>(e.GET_COURSES="Unable to get the courses",e.GET_COURSE_DETAILS="Unable to get the course's details",e))(Cv||{});const mw=()=>{const e=Tv(),{selectedCourse:t,hasError:r,loaded:a}=go(c=>c.selectedCourse),{courseId:s=""}=FI();return pe.useEffect(()=>{t||e(Ns(s))},[s,t,e]),tt(Sh,{children:[r&&_e(T_,{error:Cv.GET_COURSE_DETAILS}),!a&&_e(S_,{}),t&&!r&&a&&_e(pw,{})]})};const yw=({rating:e})=>{const t=Math.floor(e),r=e%1!==0,a=r?4-t:5-t,s=w=>Array.from({length:w},(f,F)=>F),c=s(t),O=s(a);return tt("div",{className:"rating__stars stars",children:[c.map(w=>_e(on,{type:Rr.STAR_FILLED,addClassName:"stars__star"},w)),r&&_e(on,{type:Rr.STAR_HALF_FILLED,addClassName:"stars__star"}),O.map(w=>_e(on,{type:Rr.STAR_EMPTY,addClassName:"stars__star"},w))]})};const Ew=({course:e})=>{var N,L,T,l;const{id:t,tags:r,title:a,previewImageLink:s,lessonsCount:c,meta:O,rating:w}=e,[f,F]=pe.useState(!1),I=pe.useRef(null),K=()=>{F(!0)},M=()=>{F(!1),I.current&&!I.current.paused&&I.current.pause()},H=Tv(),B=()=>{H(Ns(t))},k=C=>{C.key==="Escape"&&F(!1),C.key==="Enter"&&B()};return pe.useEffect(()=>{var A;let C;return f&&I.current&&(I.current.paused||I.current.pause(),C=new Ca({enableWorker:!1}),(A=O.courseVideoPreview)!=null&&A.link?(C.loadSource(O.courseVideoPreview.link),C.attachMedia(I.current),C.on(Ca.Events.MANIFEST_PARSED,()=>{var d;(d=I.current)==null||d.play()})):F(!1)),()=>{C&&C.destroy()}},[f,(N=O.courseVideoPreview)==null?void 0:N.link]),tt(vo,{to:`../course/${t}`,className:"course-card",onMouseEnter:K,onMouseLeave:M,onKeyDown:C=>k(C),onClick:B,children:[_e("h5",{className:of("course-card__category",{"course-card__category--yellow":r[0]==="productivity"},{"course-card__category--purple":r[0]==="learning ability"},{"course-card__category--red":r[0]==="communication"},{"course-card__category--green":r[0]==="psychology"}),children:r[0]}),_e("div",{className:"course-card__image",children:f&&((L=O.courseVideoPreview)!=null&&L.link)?_e("video",{className:"course-card__video",src:O.courseVideoPreview.link,ref:I,muted:!0,loop:!0,poster:`${s}/cover.webp`}):_e("img",{className:"course-card__pic",src:`${s}/cover.webp`,alt:a})}),_e("h3",{className:"course-card__title",children:a}),tt("div",{className:"course-card__features",children:[tt("span",{className:"course-card__feature-item",children:["Lessons count",_e("span",{className:"course-card__feature-info",children:c})]}),tt("span",{className:"course-card__feature-item",children:["Rating",tt("span",{className:"course-card__feature-info--rating rating",children:[_e(yw,{rating:w}),w]})]}),tt("span",{className:"course-card__feature-item",children:["Skills",tt("ul",{className:"course-card__feature-info",children:[!((T=O.skills)!=null&&T.length)&&_e("span",{className:"course-card__feature-info",children:"N/A"}),(l=O.skills)==null?void 0:l.map(C=>_e("li",{className:"course-card__feature-info",children:C},C))]})]})]})]})};const _w=({length:e})=>{const t=ho(),[r]=_v(),[a,s]=pe.useState(0),c=r.get("page")||"1",O=10,w=a>1?Array.from({length:a},(M,H)=>H+1):[1],f=c==="1",F=c==="1"?c===`${a+1}`:c===`${a}`,I=M=>{if(c===`${M}`)return;const H=Kl(r,{page:`${M}`});t({search:H})},K=M=>{const H=c?+c:null;if(M==="prev"&&H){if(H===1)return;const B=Kl(r,{page:`${H-1}`});t({search:B})}if(M==="next"&&H){if(H===a)return;const B=Kl(r,{page:`${H+1}`});t({search:B})}};return pe.useEffect(()=>{const H=(()=>Math.ceil(e/O))();s(H)},[e]),_e("div",{className:"category-page__pagination",children:tt("ul",{className:"pagination",children:[tt("button",{type:"button",className:"pagination__button","data-cy":"paginationLeft",disabled:f,onClick:()=>K("prev"),children:[!f&&_e(on,{type:Rr.ARROW_LEFT}),f&&_e(on,{type:Rr.ARROW_LEFT_DISABLED})]}),_e("div",{className:"pagination__list",children:w.map(M=>_e("button",{type:"button",className:of("pagination__item",{"pagination__item--is-active":+c===M}),onClick:()=>I(M),children:M},M))}),tt("button",{type:"button",className:"pagination__button","data-cy":"paginationRight",disabled:F,onClick:()=>K("next"),children:[!F&&_e(on,{type:Rr.ARROW_RIGHT}),F&&_e(on,{type:Rr.ARROW_RIGHT_DISABLED})]})]})})};const Tw=()=>{const{courses:e}=go(w=>w.courses),[t]=_v(),r=t.get("page")||"1",a=10;let s=0,c=e.length;r&&a?(s=a*(+r-1),c=a*+r>e.length?e.length:a*+r):(s=0,c=e.length);const O=pe.useMemo(()=>e.slice(s,c),[e,s,c]);return tt(Sh,{children:[_e("div",{className:"course-list",children:O.map(w=>_e(Ew,{course:w},w.id))}),_e(_w,{length:e.length})]})},Sw=()=>{const{courses:e,hasError:t,loaded:r}=go(a=>a.courses);return tt(Sh,{children:[t&&_e(T_,{error:Cv.GET_COURSES}),!r&&_e(S_,{}),e.length>0&&!t&&r&&_e(Tw,{})]})};const xw=()=>tt("div",{className:"not-found-page",children:[_e("h1",{className:"not-found-page__title",children:"Oh, no! Page is not found..."}),_e("span",{className:"not-found-page__image"})]}),Lw=document.getElementById("root"),Aw=VE(Lw);Aw.render(_e($C,{store:cw,children:_e(tO,{children:_e(XI,{children:tt(pa,{path:"/",element:_e(ow,{}),children:[_e(pa,{path:"*",element:_e(xw,{})}),_e(pa,{index:!0,element:_e(Sw,{})}),_e(pa,{path:"home",element:_e(zI,{to:"/",replace:!0})}),_e(pa,{path:"course/:courseId",element:_e(mw,{})})]})})})}));
