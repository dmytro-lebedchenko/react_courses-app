var CC=Object.defineProperty;var IC=(e,t,r)=>t in e?CC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Le=(e,t,r)=>(IC(e,typeof t!="symbol"?t+"":t,r),r);function OC(e,t){for(var r=0;r<t.length;r++){const i=t[r];if(typeof i!="string"&&!Array.isArray(i)){for(const s in i)if(s!=="default"&&!(s in e)){const f=Object.getOwnPropertyDescriptor(i,s);f&&Object.defineProperty(e,s,f.get?f:{enumerable:!0,get:()=>i[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const f of s)if(f.type==="childList")for(const C of f.addedNodes)C.tagName==="LINK"&&C.rel==="modulepreload"&&i(C)}).observe(document,{childList:!0,subtree:!0});function r(s){const f={};return s.integrity&&(f.integrity=s.integrity),s.referrerPolicy&&(f.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?f.credentials="include":s.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function i(s){if(s.ep)return;s.ep=!0;const f=r(s);fetch(s.href,f)}})();var Ka=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qE(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var So={},wC={get exports(){return So},set exports(e){So=e}},Rf={},oe={},MC={get exports(){return oe},set exports(e){oe=e}},Ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qo=Symbol.for("react.element"),kC=Symbol.for("react.portal"),bC=Symbol.for("react.fragment"),FC=Symbol.for("react.strict_mode"),NC=Symbol.for("react.profiler"),UC=Symbol.for("react.provider"),BC=Symbol.for("react.context"),KC=Symbol.for("react.forward_ref"),WC=Symbol.for("react.suspense"),GC=Symbol.for("react.memo"),$C=Symbol.for("react.lazy"),Vm=Symbol.iterator;function HC(e){return e===null||typeof e!="object"?null:(e=Vm&&e[Vm]||e["@@iterator"],typeof e=="function"?e:null)}var e_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},t_=Object.assign,r_={};function _s(e,t,r){this.props=e,this.context=t,this.refs=r_,this.updater=r||e_}_s.prototype.isReactComponent={};_s.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};_s.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function n_(){}n_.prototype=_s.prototype;function Xv(e,t,r){this.props=e,this.context=t,this.refs=r_,this.updater=r||e_}var Qv=Xv.prototype=new n_;Qv.constructor=Xv;t_(Qv,_s.prototype);Qv.isPureReactComponent=!0;var zm=Array.isArray,i_=Object.prototype.hasOwnProperty,Zv={current:null},a_={key:!0,ref:!0,__self:!0,__source:!0};function s_(e,t,r){var i,s={},f=null,C=null;if(t!=null)for(i in t.ref!==void 0&&(C=t.ref),t.key!==void 0&&(f=""+t.key),t)i_.call(t,i)&&!a_.hasOwnProperty(i)&&(s[i]=t[i]);var D=arguments.length-2;if(D===1)s.children=r;else if(1<D){for(var o=Array(D),M=0;M<D;M++)o[M]=arguments[M+2];s.children=o}if(e&&e.defaultProps)for(i in D=e.defaultProps,D)s[i]===void 0&&(s[i]=D[i]);return{$$typeof:qo,type:e,key:f,ref:C,props:s,_owner:Zv.current}}function jC(e,t){return{$$typeof:qo,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Jv(e){return typeof e=="object"&&e!==null&&e.$$typeof===qo}function VC(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Ym=/\/+/g;function Kd(e,t){return typeof e=="object"&&e!==null&&e.key!=null?VC(""+e.key):t.toString(36)}function Pu(e,t,r,i,s){var f=typeof e;(f==="undefined"||f==="boolean")&&(e=null);var C=!1;if(e===null)C=!0;else switch(f){case"string":case"number":C=!0;break;case"object":switch(e.$$typeof){case qo:case kC:C=!0}}if(C)return C=e,s=s(C),e=i===""?"."+Kd(C,0):i,zm(s)?(r="",e!=null&&(r=e.replace(Ym,"$&/")+"/"),Pu(s,t,r,"",function(M){return M})):s!=null&&(Jv(s)&&(s=jC(s,r+(!s.key||C&&C.key===s.key?"":(""+s.key).replace(Ym,"$&/")+"/")+e)),t.push(s)),1;if(C=0,i=i===""?".":i+":",zm(e))for(var D=0;D<e.length;D++){f=e[D];var o=i+Kd(f,D);C+=Pu(f,t,r,o,s)}else if(o=HC(e),typeof o=="function")for(e=o.call(e),D=0;!(f=e.next()).done;)f=f.value,o=i+Kd(f,D++),C+=Pu(f,t,r,o,s);else if(f==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return C}function iu(e,t,r){if(e==null)return e;var i=[],s=0;return Pu(e,i,"","",function(f){return t.call(r,f,s++)}),i}function zC(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ur={current:null},Du={transition:null},YC={ReactCurrentDispatcher:ur,ReactCurrentBatchConfig:Du,ReactCurrentOwner:Zv};Ge.Children={map:iu,forEach:function(e,t,r){iu(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return iu(e,function(){t++}),t},toArray:function(e){return iu(e,function(t){return t})||[]},only:function(e){if(!Jv(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ge.Component=_s;Ge.Fragment=bC;Ge.Profiler=NC;Ge.PureComponent=Xv;Ge.StrictMode=FC;Ge.Suspense=WC;Ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=YC;Ge.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=t_({},e.props),s=e.key,f=e.ref,C=e._owner;if(t!=null){if(t.ref!==void 0&&(f=t.ref,C=Zv.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var D=e.type.defaultProps;for(o in t)i_.call(t,o)&&!a_.hasOwnProperty(o)&&(i[o]=t[o]===void 0&&D!==void 0?D[o]:t[o])}var o=arguments.length-2;if(o===1)i.children=r;else if(1<o){D=Array(o);for(var M=0;M<o;M++)D[M]=arguments[M+2];i.children=D}return{$$typeof:qo,type:e.type,key:s,ref:f,props:i,_owner:C}};Ge.createContext=function(e){return e={$$typeof:BC,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:UC,_context:e},e.Consumer=e};Ge.createElement=s_;Ge.createFactory=function(e){var t=s_.bind(null,e);return t.type=e,t};Ge.createRef=function(){return{current:null}};Ge.forwardRef=function(e){return{$$typeof:KC,render:e}};Ge.isValidElement=Jv;Ge.lazy=function(e){return{$$typeof:$C,_payload:{_status:-1,_result:e},_init:zC}};Ge.memo=function(e,t){return{$$typeof:GC,type:e,compare:t===void 0?null:t}};Ge.startTransition=function(e){var t=Du.transition;Du.transition={};try{e()}finally{Du.transition=t}};Ge.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Ge.useCallback=function(e,t){return ur.current.useCallback(e,t)};Ge.useContext=function(e){return ur.current.useContext(e)};Ge.useDebugValue=function(){};Ge.useDeferredValue=function(e){return ur.current.useDeferredValue(e)};Ge.useEffect=function(e,t){return ur.current.useEffect(e,t)};Ge.useId=function(){return ur.current.useId()};Ge.useImperativeHandle=function(e,t,r){return ur.current.useImperativeHandle(e,t,r)};Ge.useInsertionEffect=function(e,t){return ur.current.useInsertionEffect(e,t)};Ge.useLayoutEffect=function(e,t){return ur.current.useLayoutEffect(e,t)};Ge.useMemo=function(e,t){return ur.current.useMemo(e,t)};Ge.useReducer=function(e,t,r){return ur.current.useReducer(e,t,r)};Ge.useRef=function(e){return ur.current.useRef(e)};Ge.useState=function(e){return ur.current.useState(e)};Ge.useSyncExternalStore=function(e,t,r){return ur.current.useSyncExternalStore(e,t,r)};Ge.useTransition=function(){return ur.current.useTransition()};Ge.version="18.2.0";(function(e){e.exports=Ge})(MC);const o_=qE(oe),Ch=OC({__proto__:null,default:o_},[oe]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XC=oe,QC=Symbol.for("react.element"),ZC=Symbol.for("react.fragment"),JC=Object.prototype.hasOwnProperty,qC=XC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,eI={key:!0,ref:!0,__self:!0,__source:!0};function l_(e,t,r){var i,s={},f=null,C=null;r!==void 0&&(f=""+r),t.key!==void 0&&(f=""+t.key),t.ref!==void 0&&(C=t.ref);for(i in t)JC.call(t,i)&&!eI.hasOwnProperty(i)&&(s[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)s[i]===void 0&&(s[i]=t[i]);return{$$typeof:QC,type:e,key:f,ref:C,props:s,_owner:qC.current}}Rf.Fragment=ZC;Rf.jsx=l_;Rf.jsxs=l_;(function(e){e.exports=Rf})(wC);const qv=So.Fragment,_e=So.jsx,ut=So.jsxs;var xo={},tI={get exports(){return xo},set exports(e){xo=e}},Kr={},Ih={},rI={get exports(){return Ih},set exports(e){Ih=e}},u_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(E,l){var x=E.length;E.push(l);e:for(;0<x;){var B=x-1>>>1,O=E[B];if(0<s(O,l))E[B]=l,E[x]=O,x=B;else break e}}function r(E){return E.length===0?null:E[0]}function i(E){if(E.length===0)return null;var l=E[0],x=E.pop();if(x!==l){E[0]=x;e:for(var B=0,O=E.length,$=O>>>1;B<$;){var H=2*(B+1)-1,j=E[H],V=H+1,z=E[V];if(0>s(j,x))V<O&&0>s(z,j)?(E[B]=z,E[V]=x,B=V):(E[B]=j,E[H]=x,B=H);else if(V<O&&0>s(z,x))E[B]=z,E[V]=x,B=V;else break e}}return l}function s(E,l){var x=E.sortIndex-l.sortIndex;return x!==0?x:E.id-l.id}if(typeof performance=="object"&&typeof performance.now=="function"){var f=performance;e.unstable_now=function(){return f.now()}}else{var C=Date,D=C.now();e.unstable_now=function(){return C.now()-D}}var o=[],M=[],I=1,K=null,b=3,W=!1,F=!1,k=!1,N=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function u(E){for(var l=r(M);l!==null;){if(l.callback===null)i(M);else if(l.startTime<=E)i(M),l.sortIndex=l.expirationTime,t(o,l);else break;l=r(M)}}function w(E){if(k=!1,u(E),!F)if(r(o)!==null)F=!0,S(A);else{var l=r(M);l!==null&&c(w,l.startTime-E)}}function A(E,l){F=!1,k&&(k=!1,m(h),h=-1),W=!0;var x=b;try{for(u(l),K=r(o);K!==null&&(!(K.expirationTime>l)||E&&!R());){var B=K.callback;if(typeof B=="function"){K.callback=null,b=K.priorityLevel;var O=B(K.expirationTime<=l);l=e.unstable_now(),typeof O=="function"?K.callback=O:K===r(o)&&i(o),u(l)}else i(o);K=r(o)}if(K!==null)var $=!0;else{var H=r(M);H!==null&&c(w,H.startTime-l),$=!1}return $}finally{K=null,b=x,W=!1}}var d=!1,v=null,h=-1,g=5,P=-1;function R(){return!(e.unstable_now()-P<g)}function y(){if(v!==null){var E=e.unstable_now();P=E;var l=!0;try{l=v(!0,E)}finally{l?L():(d=!1,v=null)}}else d=!1}var L;if(typeof p=="function")L=function(){p(y)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,_=U.port2;U.port1.onmessage=y,L=function(){_.postMessage(null)}}else L=function(){N(y,0)};function S(E){v=E,d||(d=!0,L())}function c(E,l){h=N(function(){E(e.unstable_now())},l)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(E){E.callback=null},e.unstable_continueExecution=function(){F||W||(F=!0,S(A))},e.unstable_forceFrameRate=function(E){0>E||125<E?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):g=0<E?Math.floor(1e3/E):5},e.unstable_getCurrentPriorityLevel=function(){return b},e.unstable_getFirstCallbackNode=function(){return r(o)},e.unstable_next=function(E){switch(b){case 1:case 2:case 3:var l=3;break;default:l=b}var x=b;b=l;try{return E()}finally{b=x}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(E,l){switch(E){case 1:case 2:case 3:case 4:case 5:break;default:E=3}var x=b;b=E;try{return l()}finally{b=x}},e.unstable_scheduleCallback=function(E,l,x){var B=e.unstable_now();switch(typeof x=="object"&&x!==null?(x=x.delay,x=typeof x=="number"&&0<x?B+x:B):x=B,E){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=x+O,E={id:I++,callback:l,priorityLevel:E,startTime:x,expirationTime:O,sortIndex:-1},x>B?(E.sortIndex=x,t(M,E),r(o)===null&&E===r(M)&&(k?(m(h),h=-1):k=!0,c(w,x-B))):(E.sortIndex=O,t(o,E),F||W||(F=!0,S(A))),E},e.unstable_shouldYield=R,e.unstable_wrapCallback=function(E){var l=b;return function(){var x=b;b=l;try{return E.apply(this,arguments)}finally{b=x}}}})(u_);(function(e){e.exports=u_})(rI);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f_=oe,Ur=Ih;function me(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var c_=new Set,Lo={};function Ta(e,t){cs(e,t),cs(e+"Capture",t)}function cs(e,t){for(Lo[e]=t,e=0;e<t.length;e++)c_.add(t[e])}var Zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Oh=Object.prototype.hasOwnProperty,nI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Xm={},Qm={};function iI(e){return Oh.call(Qm,e)?!0:Oh.call(Xm,e)?!1:nI.test(e)?Qm[e]=!0:(Xm[e]=!0,!1)}function aI(e,t,r,i){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function sI(e,t,r,i){if(t===null||typeof t>"u"||aI(e,t,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function fr(e,t,r,i,s,f,C){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=f,this.removeEmptyString=C}var zt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){zt[e]=new fr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];zt[t]=new fr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){zt[e]=new fr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){zt[e]=new fr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){zt[e]=new fr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){zt[e]=new fr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){zt[e]=new fr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){zt[e]=new fr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){zt[e]=new fr(e,5,!1,e.toLowerCase(),null,!1,!1)});var eg=/[\-:]([a-z])/g;function tg(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(eg,tg);zt[t]=new fr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(eg,tg);zt[t]=new fr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(eg,tg);zt[t]=new fr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){zt[e]=new fr(e,1,!1,e.toLowerCase(),null,!1,!1)});zt.xlinkHref=new fr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){zt[e]=new fr(e,1,!1,e.toLowerCase(),null,!0,!0)});function rg(e,t,r,i){var s=zt.hasOwnProperty(t)?zt[t]:null;(s!==null?s.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(sI(t,r,s,i)&&(r=null),i||s===null?iI(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,i=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,i?e.setAttributeNS(i,t,r):e.setAttribute(t,r))))}var ri=f_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,au=Symbol.for("react.element"),Ga=Symbol.for("react.portal"),$a=Symbol.for("react.fragment"),ng=Symbol.for("react.strict_mode"),wh=Symbol.for("react.profiler"),d_=Symbol.for("react.provider"),h_=Symbol.for("react.context"),ig=Symbol.for("react.forward_ref"),Mh=Symbol.for("react.suspense"),kh=Symbol.for("react.suspense_list"),ag=Symbol.for("react.memo"),pi=Symbol.for("react.lazy"),v_=Symbol.for("react.offscreen"),Zm=Symbol.iterator;function Hs(e){return e===null||typeof e!="object"?null:(e=Zm&&e[Zm]||e["@@iterator"],typeof e=="function"?e:null)}var Et=Object.assign,Wd;function to(e){if(Wd===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Wd=t&&t[1]||""}return`
`+Wd+e}var Gd=!1;function $d(e,t){if(!e||Gd)return"";Gd=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(M){var i=M}Reflect.construct(e,[],t)}else{try{t.call()}catch(M){i=M}e.call(t.prototype)}else{try{throw Error()}catch(M){i=M}e()}}catch(M){if(M&&i&&typeof M.stack=="string"){for(var s=M.stack.split(`
`),f=i.stack.split(`
`),C=s.length-1,D=f.length-1;1<=C&&0<=D&&s[C]!==f[D];)D--;for(;1<=C&&0<=D;C--,D--)if(s[C]!==f[D]){if(C!==1||D!==1)do if(C--,D--,0>D||s[C]!==f[D]){var o=`
`+s[C].replace(" at new "," at ");return e.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",e.displayName)),o}while(1<=C&&0<=D);break}}}finally{Gd=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?to(e):""}function oI(e){switch(e.tag){case 5:return to(e.type);case 16:return to("Lazy");case 13:return to("Suspense");case 19:return to("SuspenseList");case 0:case 2:case 15:return e=$d(e.type,!1),e;case 11:return e=$d(e.type.render,!1),e;case 1:return e=$d(e.type,!0),e;default:return""}}function bh(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case $a:return"Fragment";case Ga:return"Portal";case wh:return"Profiler";case ng:return"StrictMode";case Mh:return"Suspense";case kh:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case h_:return(e.displayName||"Context")+".Consumer";case d_:return(e._context.displayName||"Context")+".Provider";case ig:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ag:return t=e.displayName||null,t!==null?t:bh(e.type)||"Memo";case pi:t=e._payload,e=e._init;try{return bh(e(t))}catch{}}return null}function lI(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return bh(t);case 8:return t===ng?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ui(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function g_(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function uI(e){var t=g_(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,f=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(C){i=""+C,f.call(this,C)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(C){i=""+C},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function su(e){e._valueTracker||(e._valueTracker=uI(e))}function p_(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),i="";return e&&(i=g_(e)?e.checked?"true":"false":e.value),e=i,e!==r?(t.setValue(e),!0):!1}function $u(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Fh(e,t){var r=t.checked;return Et({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Jm(e,t){var r=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;r=Ui(t.value!=null?t.value:r),e._wrapperState={initialChecked:i,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function m_(e,t){t=t.checked,t!=null&&rg(e,"checked",t,!1)}function Nh(e,t){m_(e,t);var r=Ui(t.value),i=t.type;if(r!=null)i==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Uh(e,t.type,r):t.hasOwnProperty("defaultValue")&&Uh(e,t.type,Ui(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function qm(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Uh(e,t,r){(t!=="number"||$u(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var ro=Array.isArray;function ts(e,t,r,i){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&i&&(e[r].defaultSelected=!0)}else{for(r=""+Ui(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,i&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Bh(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(me(91));return Et({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ey(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(me(92));if(ro(r)){if(1<r.length)throw Error(me(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Ui(r)}}function y_(e,t){var r=Ui(t.value),i=Ui(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),i!=null&&(e.defaultValue=""+i)}function ty(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function E_(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Kh(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?E_(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ou,__=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,i,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,i,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ou=ou||document.createElement("div"),ou.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ou.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ao(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var oo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fI=["Webkit","ms","Moz","O"];Object.keys(oo).forEach(function(e){fI.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),oo[t]=oo[e]})});function T_(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||oo.hasOwnProperty(e)&&oo[e]?(""+t).trim():t+"px"}function S_(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var i=r.indexOf("--")===0,s=T_(r,t[r],i);r==="float"&&(r="cssFloat"),i?e.setProperty(r,s):e[r]=s}}var cI=Et({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wh(e,t){if(t){if(cI[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(me(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(me(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(me(61))}if(t.style!=null&&typeof t.style!="object")throw Error(me(62))}}function Gh(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $h=null;function sg(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Hh=null,rs=null,ns=null;function ry(e){if(e=rl(e)){if(typeof Hh!="function")throw Error(me(280));var t=e.stateNode;t&&(t=Mf(t),Hh(e.stateNode,e.type,t))}}function x_(e){rs?ns?ns.push(e):ns=[e]:rs=e}function L_(){if(rs){var e=rs,t=ns;if(ns=rs=null,ry(e),t)for(e=0;e<t.length;e++)ry(t[e])}}function A_(e,t){return e(t)}function P_(){}var Hd=!1;function D_(e,t,r){if(Hd)return e(t,r);Hd=!0;try{return A_(e,t,r)}finally{Hd=!1,(rs!==null||ns!==null)&&(P_(),L_())}}function Po(e,t){var r=e.stateNode;if(r===null)return null;var i=Mf(r);if(i===null)return null;r=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(me(231,t,typeof r));return r}var jh=!1;if(Zn)try{var js={};Object.defineProperty(js,"passive",{get:function(){jh=!0}}),window.addEventListener("test",js,js),window.removeEventListener("test",js,js)}catch{jh=!1}function dI(e,t,r,i,s,f,C,D,o){var M=Array.prototype.slice.call(arguments,3);try{t.apply(r,M)}catch(I){this.onError(I)}}var lo=!1,Hu=null,ju=!1,Vh=null,hI={onError:function(e){lo=!0,Hu=e}};function vI(e,t,r,i,s,f,C,D,o){lo=!1,Hu=null,dI.apply(hI,arguments)}function gI(e,t,r,i,s,f,C,D,o){if(vI.apply(this,arguments),lo){if(lo){var M=Hu;lo=!1,Hu=null}else throw Error(me(198));ju||(ju=!0,Vh=M)}}function Sa(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function R_(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function ny(e){if(Sa(e)!==e)throw Error(me(188))}function pI(e){var t=e.alternate;if(!t){if(t=Sa(e),t===null)throw Error(me(188));return t!==e?null:e}for(var r=e,i=t;;){var s=r.return;if(s===null)break;var f=s.alternate;if(f===null){if(i=s.return,i!==null){r=i;continue}break}if(s.child===f.child){for(f=s.child;f;){if(f===r)return ny(s),e;if(f===i)return ny(s),t;f=f.sibling}throw Error(me(188))}if(r.return!==i.return)r=s,i=f;else{for(var C=!1,D=s.child;D;){if(D===r){C=!0,r=s,i=f;break}if(D===i){C=!0,i=s,r=f;break}D=D.sibling}if(!C){for(D=f.child;D;){if(D===r){C=!0,r=f,i=s;break}if(D===i){C=!0,i=f,r=s;break}D=D.sibling}if(!C)throw Error(me(189))}}if(r.alternate!==i)throw Error(me(190))}if(r.tag!==3)throw Error(me(188));return r.stateNode.current===r?e:t}function C_(e){return e=pI(e),e!==null?I_(e):null}function I_(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=I_(e);if(t!==null)return t;e=e.sibling}return null}var O_=Ur.unstable_scheduleCallback,iy=Ur.unstable_cancelCallback,mI=Ur.unstable_shouldYield,yI=Ur.unstable_requestPaint,Dt=Ur.unstable_now,EI=Ur.unstable_getCurrentPriorityLevel,og=Ur.unstable_ImmediatePriority,w_=Ur.unstable_UserBlockingPriority,Vu=Ur.unstable_NormalPriority,_I=Ur.unstable_LowPriority,M_=Ur.unstable_IdlePriority,Cf=null,In=null;function TI(e){if(In&&typeof In.onCommitFiberRoot=="function")try{In.onCommitFiberRoot(Cf,e,void 0,(e.current.flags&128)===128)}catch{}}var En=Math.clz32?Math.clz32:LI,SI=Math.log,xI=Math.LN2;function LI(e){return e>>>=0,e===0?32:31-(SI(e)/xI|0)|0}var lu=64,uu=4194304;function no(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function zu(e,t){var r=e.pendingLanes;if(r===0)return 0;var i=0,s=e.suspendedLanes,f=e.pingedLanes,C=r&268435455;if(C!==0){var D=C&~s;D!==0?i=no(D):(f&=C,f!==0&&(i=no(f)))}else C=r&~s,C!==0?i=no(C):f!==0&&(i=no(f));if(i===0)return 0;if(t!==0&&t!==i&&!(t&s)&&(s=i&-i,f=t&-t,s>=f||s===16&&(f&4194240)!==0))return t;if(i&4&&(i|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)r=31-En(t),s=1<<r,i|=e[r],t&=~s;return i}function AI(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function PI(e,t){for(var r=e.suspendedLanes,i=e.pingedLanes,s=e.expirationTimes,f=e.pendingLanes;0<f;){var C=31-En(f),D=1<<C,o=s[C];o===-1?(!(D&r)||D&i)&&(s[C]=AI(D,t)):o<=t&&(e.expiredLanes|=D),f&=~D}}function zh(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function k_(){var e=lu;return lu<<=1,!(lu&4194240)&&(lu=64),e}function jd(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function el(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-En(t),e[t]=r}function DI(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-En(r),f=1<<s;t[s]=0,i[s]=-1,e[s]=-1,r&=~f}}function lg(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var i=31-En(r),s=1<<i;s&t|e[i]&t&&(e[i]|=t),r&=~s}}var qe=0;function b_(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var F_,ug,N_,U_,B_,Yh=!1,fu=[],Pi=null,Di=null,Ri=null,Do=new Map,Ro=new Map,yi=[],RI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ay(e,t){switch(e){case"focusin":case"focusout":Pi=null;break;case"dragenter":case"dragleave":Di=null;break;case"mouseover":case"mouseout":Ri=null;break;case"pointerover":case"pointerout":Do.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ro.delete(t.pointerId)}}function Vs(e,t,r,i,s,f){return e===null||e.nativeEvent!==f?(e={blockedOn:t,domEventName:r,eventSystemFlags:i,nativeEvent:f,targetContainers:[s]},t!==null&&(t=rl(t),t!==null&&ug(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function CI(e,t,r,i,s){switch(t){case"focusin":return Pi=Vs(Pi,e,t,r,i,s),!0;case"dragenter":return Di=Vs(Di,e,t,r,i,s),!0;case"mouseover":return Ri=Vs(Ri,e,t,r,i,s),!0;case"pointerover":var f=s.pointerId;return Do.set(f,Vs(Do.get(f)||null,e,t,r,i,s)),!0;case"gotpointercapture":return f=s.pointerId,Ro.set(f,Vs(Ro.get(f)||null,e,t,r,i,s)),!0}return!1}function K_(e){var t=la(e.target);if(t!==null){var r=Sa(t);if(r!==null){if(t=r.tag,t===13){if(t=R_(r),t!==null){e.blockedOn=t,B_(e.priority,function(){N_(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ru(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Xh(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var i=new r.constructor(r.type,r);$h=i,r.target.dispatchEvent(i),$h=null}else return t=rl(r),t!==null&&ug(t),e.blockedOn=r,!1;t.shift()}return!0}function sy(e,t,r){Ru(e)&&r.delete(t)}function II(){Yh=!1,Pi!==null&&Ru(Pi)&&(Pi=null),Di!==null&&Ru(Di)&&(Di=null),Ri!==null&&Ru(Ri)&&(Ri=null),Do.forEach(sy),Ro.forEach(sy)}function zs(e,t){e.blockedOn===t&&(e.blockedOn=null,Yh||(Yh=!0,Ur.unstable_scheduleCallback(Ur.unstable_NormalPriority,II)))}function Co(e){function t(s){return zs(s,e)}if(0<fu.length){zs(fu[0],e);for(var r=1;r<fu.length;r++){var i=fu[r];i.blockedOn===e&&(i.blockedOn=null)}}for(Pi!==null&&zs(Pi,e),Di!==null&&zs(Di,e),Ri!==null&&zs(Ri,e),Do.forEach(t),Ro.forEach(t),r=0;r<yi.length;r++)i=yi[r],i.blockedOn===e&&(i.blockedOn=null);for(;0<yi.length&&(r=yi[0],r.blockedOn===null);)K_(r),r.blockedOn===null&&yi.shift()}var is=ri.ReactCurrentBatchConfig,Yu=!0;function OI(e,t,r,i){var s=qe,f=is.transition;is.transition=null;try{qe=1,fg(e,t,r,i)}finally{qe=s,is.transition=f}}function wI(e,t,r,i){var s=qe,f=is.transition;is.transition=null;try{qe=4,fg(e,t,r,i)}finally{qe=s,is.transition=f}}function fg(e,t,r,i){if(Yu){var s=Xh(e,t,r,i);if(s===null)th(e,t,i,Xu,r),ay(e,i);else if(CI(s,e,t,r,i))i.stopPropagation();else if(ay(e,i),t&4&&-1<RI.indexOf(e)){for(;s!==null;){var f=rl(s);if(f!==null&&F_(f),f=Xh(e,t,r,i),f===null&&th(e,t,i,Xu,r),f===s)break;s=f}s!==null&&i.stopPropagation()}else th(e,t,i,null,r)}}var Xu=null;function Xh(e,t,r,i){if(Xu=null,e=sg(i),e=la(e),e!==null)if(t=Sa(e),t===null)e=null;else if(r=t.tag,r===13){if(e=R_(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xu=e,null}function W_(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(EI()){case og:return 1;case w_:return 4;case Vu:case _I:return 16;case M_:return 536870912;default:return 16}default:return 16}}var Ti=null,cg=null,Cu=null;function G_(){if(Cu)return Cu;var e,t=cg,r=t.length,i,s="value"in Ti?Ti.value:Ti.textContent,f=s.length;for(e=0;e<r&&t[e]===s[e];e++);var C=r-e;for(i=1;i<=C&&t[r-i]===s[f-i];i++);return Cu=s.slice(e,1<i?1-i:void 0)}function Iu(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function cu(){return!0}function oy(){return!1}function Wr(e){function t(r,i,s,f,C){this._reactName=r,this._targetInst=s,this.type=i,this.nativeEvent=f,this.target=C,this.currentTarget=null;for(var D in e)e.hasOwnProperty(D)&&(r=e[D],this[D]=r?r(f):f[D]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?cu:oy,this.isPropagationStopped=oy,this}return Et(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=cu)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=cu)},persist:function(){},isPersistent:cu}),t}var Ts={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dg=Wr(Ts),tl=Et({},Ts,{view:0,detail:0}),MI=Wr(tl),Vd,zd,Ys,If=Et({},tl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hg,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ys&&(Ys&&e.type==="mousemove"?(Vd=e.screenX-Ys.screenX,zd=e.screenY-Ys.screenY):zd=Vd=0,Ys=e),Vd)},movementY:function(e){return"movementY"in e?e.movementY:zd}}),ly=Wr(If),kI=Et({},If,{dataTransfer:0}),bI=Wr(kI),FI=Et({},tl,{relatedTarget:0}),Yd=Wr(FI),NI=Et({},Ts,{animationName:0,elapsedTime:0,pseudoElement:0}),UI=Wr(NI),BI=Et({},Ts,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),KI=Wr(BI),WI=Et({},Ts,{data:0}),uy=Wr(WI),GI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$I={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},HI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jI(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=HI[e])?!!t[e]:!1}function hg(){return jI}var VI=Et({},tl,{key:function(e){if(e.key){var t=GI[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Iu(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?$I[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hg,charCode:function(e){return e.type==="keypress"?Iu(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Iu(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),zI=Wr(VI),YI=Et({},If,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fy=Wr(YI),XI=Et({},tl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hg}),QI=Wr(XI),ZI=Et({},Ts,{propertyName:0,elapsedTime:0,pseudoElement:0}),JI=Wr(ZI),qI=Et({},If,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),eO=Wr(qI),tO=[9,13,27,32],vg=Zn&&"CompositionEvent"in window,uo=null;Zn&&"documentMode"in document&&(uo=document.documentMode);var rO=Zn&&"TextEvent"in window&&!uo,$_=Zn&&(!vg||uo&&8<uo&&11>=uo),cy=String.fromCharCode(32),dy=!1;function H_(e,t){switch(e){case"keyup":return tO.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function j_(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ha=!1;function nO(e,t){switch(e){case"compositionend":return j_(t);case"keypress":return t.which!==32?null:(dy=!0,cy);case"textInput":return e=t.data,e===cy&&dy?null:e;default:return null}}function iO(e,t){if(Ha)return e==="compositionend"||!vg&&H_(e,t)?(e=G_(),Cu=cg=Ti=null,Ha=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return $_&&t.locale!=="ko"?null:t.data;default:return null}}var aO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hy(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!aO[e.type]:t==="textarea"}function V_(e,t,r,i){x_(i),t=Qu(t,"onChange"),0<t.length&&(r=new dg("onChange","change",null,r,i),e.push({event:r,listeners:t}))}var fo=null,Io=null;function sO(e){nT(e,0)}function Of(e){var t=za(e);if(p_(t))return e}function oO(e,t){if(e==="change")return t}var z_=!1;if(Zn){var Xd;if(Zn){var Qd="oninput"in document;if(!Qd){var vy=document.createElement("div");vy.setAttribute("oninput","return;"),Qd=typeof vy.oninput=="function"}Xd=Qd}else Xd=!1;z_=Xd&&(!document.documentMode||9<document.documentMode)}function gy(){fo&&(fo.detachEvent("onpropertychange",Y_),Io=fo=null)}function Y_(e){if(e.propertyName==="value"&&Of(Io)){var t=[];V_(t,Io,e,sg(e)),D_(sO,t)}}function lO(e,t,r){e==="focusin"?(gy(),fo=t,Io=r,fo.attachEvent("onpropertychange",Y_)):e==="focusout"&&gy()}function uO(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Of(Io)}function fO(e,t){if(e==="click")return Of(t)}function cO(e,t){if(e==="input"||e==="change")return Of(t)}function dO(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Tn=typeof Object.is=="function"?Object.is:dO;function Oo(e,t){if(Tn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var s=r[i];if(!Oh.call(t,s)||!Tn(e[s],t[s]))return!1}return!0}function py(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function my(e,t){var r=py(e);e=0;for(var i;r;){if(r.nodeType===3){if(i=e+r.textContent.length,e<=t&&i>=t)return{node:r,offset:t-e};e=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=py(r)}}function X_(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?X_(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Q_(){for(var e=window,t=$u();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=$u(e.document)}return t}function gg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function hO(e){var t=Q_(),r=e.focusedElem,i=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&X_(r.ownerDocument.documentElement,r)){if(i!==null&&gg(r)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,f=Math.min(i.start,s);i=i.end===void 0?f:Math.min(i.end,s),!e.extend&&f>i&&(s=i,i=f,f=s),s=my(r,f);var C=my(r,i);s&&C&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==C.node||e.focusOffset!==C.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),f>i?(e.addRange(t),e.extend(C.node,C.offset)):(t.setEnd(C.node,C.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vO=Zn&&"documentMode"in document&&11>=document.documentMode,ja=null,Qh=null,co=null,Zh=!1;function yy(e,t,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Zh||ja==null||ja!==$u(i)||(i=ja,"selectionStart"in i&&gg(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),co&&Oo(co,i)||(co=i,i=Qu(Qh,"onSelect"),0<i.length&&(t=new dg("onSelect","select",null,t,r),e.push({event:t,listeners:i}),t.target=ja)))}function du(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Va={animationend:du("Animation","AnimationEnd"),animationiteration:du("Animation","AnimationIteration"),animationstart:du("Animation","AnimationStart"),transitionend:du("Transition","TransitionEnd")},Zd={},Z_={};Zn&&(Z_=document.createElement("div").style,"AnimationEvent"in window||(delete Va.animationend.animation,delete Va.animationiteration.animation,delete Va.animationstart.animation),"TransitionEvent"in window||delete Va.transitionend.transition);function wf(e){if(Zd[e])return Zd[e];if(!Va[e])return e;var t=Va[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Z_)return Zd[e]=t[r];return e}var J_=wf("animationend"),q_=wf("animationiteration"),eT=wf("animationstart"),tT=wf("transitionend"),rT=new Map,Ey="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gi(e,t){rT.set(e,t),Ta(t,[e])}for(var Jd=0;Jd<Ey.length;Jd++){var qd=Ey[Jd],gO=qd.toLowerCase(),pO=qd[0].toUpperCase()+qd.slice(1);Gi(gO,"on"+pO)}Gi(J_,"onAnimationEnd");Gi(q_,"onAnimationIteration");Gi(eT,"onAnimationStart");Gi("dblclick","onDoubleClick");Gi("focusin","onFocus");Gi("focusout","onBlur");Gi(tT,"onTransitionEnd");cs("onMouseEnter",["mouseout","mouseover"]);cs("onMouseLeave",["mouseout","mouseover"]);cs("onPointerEnter",["pointerout","pointerover"]);cs("onPointerLeave",["pointerout","pointerover"]);Ta("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ta("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ta("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ta("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ta("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ta("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var io="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mO=new Set("cancel close invalid load scroll toggle".split(" ").concat(io));function _y(e,t,r){var i=e.type||"unknown-event";e.currentTarget=r,gI(i,t,void 0,e),e.currentTarget=null}function nT(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var i=e[r],s=i.event;i=i.listeners;e:{var f=void 0;if(t)for(var C=i.length-1;0<=C;C--){var D=i[C],o=D.instance,M=D.currentTarget;if(D=D.listener,o!==f&&s.isPropagationStopped())break e;_y(s,D,M),f=o}else for(C=0;C<i.length;C++){if(D=i[C],o=D.instance,M=D.currentTarget,D=D.listener,o!==f&&s.isPropagationStopped())break e;_y(s,D,M),f=o}}}if(ju)throw e=Vh,ju=!1,Vh=null,e}function lt(e,t){var r=t[rv];r===void 0&&(r=t[rv]=new Set);var i=e+"__bubble";r.has(i)||(iT(t,e,2,!1),r.add(i))}function eh(e,t,r){var i=0;t&&(i|=4),iT(r,e,i,t)}var hu="_reactListening"+Math.random().toString(36).slice(2);function wo(e){if(!e[hu]){e[hu]=!0,c_.forEach(function(r){r!=="selectionchange"&&(mO.has(r)||eh(r,!1,e),eh(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[hu]||(t[hu]=!0,eh("selectionchange",!1,t))}}function iT(e,t,r,i){switch(W_(t)){case 1:var s=OI;break;case 4:s=wI;break;default:s=fg}r=s.bind(null,t,r,e),s=void 0,!jh||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),i?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function th(e,t,r,i,s){var f=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var C=i.tag;if(C===3||C===4){var D=i.stateNode.containerInfo;if(D===s||D.nodeType===8&&D.parentNode===s)break;if(C===4)for(C=i.return;C!==null;){var o=C.tag;if((o===3||o===4)&&(o=C.stateNode.containerInfo,o===s||o.nodeType===8&&o.parentNode===s))return;C=C.return}for(;D!==null;){if(C=la(D),C===null)return;if(o=C.tag,o===5||o===6){i=f=C;continue e}D=D.parentNode}}i=i.return}D_(function(){var M=f,I=sg(r),K=[];e:{var b=rT.get(e);if(b!==void 0){var W=dg,F=e;switch(e){case"keypress":if(Iu(r)===0)break e;case"keydown":case"keyup":W=zI;break;case"focusin":F="focus",W=Yd;break;case"focusout":F="blur",W=Yd;break;case"beforeblur":case"afterblur":W=Yd;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=ly;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=bI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=QI;break;case J_:case q_:case eT:W=UI;break;case tT:W=JI;break;case"scroll":W=MI;break;case"wheel":W=eO;break;case"copy":case"cut":case"paste":W=KI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=fy}var k=(t&4)!==0,N=!k&&e==="scroll",m=k?b!==null?b+"Capture":null:b;k=[];for(var p=M,u;p!==null;){u=p;var w=u.stateNode;if(u.tag===5&&w!==null&&(u=w,m!==null&&(w=Po(p,m),w!=null&&k.push(Mo(p,w,u)))),N)break;p=p.return}0<k.length&&(b=new W(b,F,null,r,I),K.push({event:b,listeners:k}))}}if(!(t&7)){e:{if(b=e==="mouseover"||e==="pointerover",W=e==="mouseout"||e==="pointerout",b&&r!==$h&&(F=r.relatedTarget||r.fromElement)&&(la(F)||F[Jn]))break e;if((W||b)&&(b=I.window===I?I:(b=I.ownerDocument)?b.defaultView||b.parentWindow:window,W?(F=r.relatedTarget||r.toElement,W=M,F=F?la(F):null,F!==null&&(N=Sa(F),F!==N||F.tag!==5&&F.tag!==6)&&(F=null)):(W=null,F=M),W!==F)){if(k=ly,w="onMouseLeave",m="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(k=fy,w="onPointerLeave",m="onPointerEnter",p="pointer"),N=W==null?b:za(W),u=F==null?b:za(F),b=new k(w,p+"leave",W,r,I),b.target=N,b.relatedTarget=u,w=null,la(I)===M&&(k=new k(m,p+"enter",F,r,I),k.target=u,k.relatedTarget=N,w=k),N=w,W&&F)t:{for(k=W,m=F,p=0,u=k;u;u=Ua(u))p++;for(u=0,w=m;w;w=Ua(w))u++;for(;0<p-u;)k=Ua(k),p--;for(;0<u-p;)m=Ua(m),u--;for(;p--;){if(k===m||m!==null&&k===m.alternate)break t;k=Ua(k),m=Ua(m)}k=null}else k=null;W!==null&&Ty(K,b,W,k,!1),F!==null&&N!==null&&Ty(K,N,F,k,!0)}}e:{if(b=M?za(M):window,W=b.nodeName&&b.nodeName.toLowerCase(),W==="select"||W==="input"&&b.type==="file")var A=oO;else if(hy(b))if(z_)A=cO;else{A=uO;var d=lO}else(W=b.nodeName)&&W.toLowerCase()==="input"&&(b.type==="checkbox"||b.type==="radio")&&(A=fO);if(A&&(A=A(e,M))){V_(K,A,r,I);break e}d&&d(e,b,M),e==="focusout"&&(d=b._wrapperState)&&d.controlled&&b.type==="number"&&Uh(b,"number",b.value)}switch(d=M?za(M):window,e){case"focusin":(hy(d)||d.contentEditable==="true")&&(ja=d,Qh=M,co=null);break;case"focusout":co=Qh=ja=null;break;case"mousedown":Zh=!0;break;case"contextmenu":case"mouseup":case"dragend":Zh=!1,yy(K,r,I);break;case"selectionchange":if(vO)break;case"keydown":case"keyup":yy(K,r,I)}var v;if(vg)e:{switch(e){case"compositionstart":var h="onCompositionStart";break e;case"compositionend":h="onCompositionEnd";break e;case"compositionupdate":h="onCompositionUpdate";break e}h=void 0}else Ha?H_(e,r)&&(h="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(h="onCompositionStart");h&&($_&&r.locale!=="ko"&&(Ha||h!=="onCompositionStart"?h==="onCompositionEnd"&&Ha&&(v=G_()):(Ti=I,cg="value"in Ti?Ti.value:Ti.textContent,Ha=!0)),d=Qu(M,h),0<d.length&&(h=new uy(h,e,null,r,I),K.push({event:h,listeners:d}),v?h.data=v:(v=j_(r),v!==null&&(h.data=v)))),(v=rO?nO(e,r):iO(e,r))&&(M=Qu(M,"onBeforeInput"),0<M.length&&(I=new uy("onBeforeInput","beforeinput",null,r,I),K.push({event:I,listeners:M}),I.data=v))}nT(K,t)})}function Mo(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Qu(e,t){for(var r=t+"Capture",i=[];e!==null;){var s=e,f=s.stateNode;s.tag===5&&f!==null&&(s=f,f=Po(e,r),f!=null&&i.unshift(Mo(e,f,s)),f=Po(e,t),f!=null&&i.push(Mo(e,f,s))),e=e.return}return i}function Ua(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ty(e,t,r,i,s){for(var f=t._reactName,C=[];r!==null&&r!==i;){var D=r,o=D.alternate,M=D.stateNode;if(o!==null&&o===i)break;D.tag===5&&M!==null&&(D=M,s?(o=Po(r,f),o!=null&&C.unshift(Mo(r,o,D))):s||(o=Po(r,f),o!=null&&C.push(Mo(r,o,D)))),r=r.return}C.length!==0&&e.push({event:t,listeners:C})}var yO=/\r\n?/g,EO=/\u0000|\uFFFD/g;function Sy(e){return(typeof e=="string"?e:""+e).replace(yO,`
`).replace(EO,"")}function vu(e,t,r){if(t=Sy(t),Sy(e)!==t&&r)throw Error(me(425))}function Zu(){}var Jh=null,qh=null;function ev(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var tv=typeof setTimeout=="function"?setTimeout:void 0,_O=typeof clearTimeout=="function"?clearTimeout:void 0,xy=typeof Promise=="function"?Promise:void 0,TO=typeof queueMicrotask=="function"?queueMicrotask:typeof xy<"u"?function(e){return xy.resolve(null).then(e).catch(SO)}:tv;function SO(e){setTimeout(function(){throw e})}function rh(e,t){var r=t,i=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(i===0){e.removeChild(s),Co(t);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=s}while(r);Co(t)}function Ci(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Ly(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Ss=Math.random().toString(36).slice(2),Cn="__reactFiber$"+Ss,ko="__reactProps$"+Ss,Jn="__reactContainer$"+Ss,rv="__reactEvents$"+Ss,xO="__reactListeners$"+Ss,LO="__reactHandles$"+Ss;function la(e){var t=e[Cn];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Jn]||r[Cn]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Ly(e);e!==null;){if(r=e[Cn])return r;e=Ly(e)}return t}e=r,r=e.parentNode}return null}function rl(e){return e=e[Cn]||e[Jn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function za(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(me(33))}function Mf(e){return e[ko]||null}var nv=[],Ya=-1;function $i(e){return{current:e}}function ft(e){0>Ya||(e.current=nv[Ya],nv[Ya]=null,Ya--)}function at(e,t){Ya++,nv[Ya]=e.current,e.current=t}var Bi={},er=$i(Bi),Tr=$i(!1),ha=Bi;function ds(e,t){var r=e.type.contextTypes;if(!r)return Bi;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var s={},f;for(f in r)s[f]=t[f];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Sr(e){return e=e.childContextTypes,e!=null}function Ju(){ft(Tr),ft(er)}function Ay(e,t,r){if(er.current!==Bi)throw Error(me(168));at(er,t),at(Tr,r)}function aT(e,t,r){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var s in i)if(!(s in t))throw Error(me(108,lI(e)||"Unknown",s));return Et({},r,i)}function qu(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Bi,ha=er.current,at(er,e),at(Tr,Tr.current),!0}function Py(e,t,r){var i=e.stateNode;if(!i)throw Error(me(169));r?(e=aT(e,t,ha),i.__reactInternalMemoizedMergedChildContext=e,ft(Tr),ft(er),at(er,e)):ft(Tr),at(Tr,r)}var Vn=null,kf=!1,nh=!1;function sT(e){Vn===null?Vn=[e]:Vn.push(e)}function AO(e){kf=!0,sT(e)}function Hi(){if(!nh&&Vn!==null){nh=!0;var e=0,t=qe;try{var r=Vn;for(qe=1;e<r.length;e++){var i=r[e];do i=i(!0);while(i!==null)}Vn=null,kf=!1}catch(s){throw Vn!==null&&(Vn=Vn.slice(e+1)),O_(og,Hi),s}finally{qe=t,nh=!1}}return null}var Xa=[],Qa=0,ef=null,tf=0,Jr=[],qr=0,va=null,zn=1,Yn="";function na(e,t){Xa[Qa++]=tf,Xa[Qa++]=ef,ef=e,tf=t}function oT(e,t,r){Jr[qr++]=zn,Jr[qr++]=Yn,Jr[qr++]=va,va=e;var i=zn;e=Yn;var s=32-En(i)-1;i&=~(1<<s),r+=1;var f=32-En(t)+s;if(30<f){var C=s-s%5;f=(i&(1<<C)-1).toString(32),i>>=C,s-=C,zn=1<<32-En(t)+s|r<<s|i,Yn=f+e}else zn=1<<f|r<<s|i,Yn=e}function pg(e){e.return!==null&&(na(e,1),oT(e,1,0))}function mg(e){for(;e===ef;)ef=Xa[--Qa],Xa[Qa]=null,tf=Xa[--Qa],Xa[Qa]=null;for(;e===va;)va=Jr[--qr],Jr[qr]=null,Yn=Jr[--qr],Jr[qr]=null,zn=Jr[--qr],Jr[qr]=null}var Nr=null,br=null,vt=!1,gn=null;function lT(e,t){var r=rn(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Dy(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Nr=e,br=Ci(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Nr=e,br=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=va!==null?{id:zn,overflow:Yn}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=rn(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Nr=e,br=null,!0):!1;default:return!1}}function iv(e){return(e.mode&1)!==0&&(e.flags&128)===0}function av(e){if(vt){var t=br;if(t){var r=t;if(!Dy(e,t)){if(iv(e))throw Error(me(418));t=Ci(r.nextSibling);var i=Nr;t&&Dy(e,t)?lT(i,r):(e.flags=e.flags&-4097|2,vt=!1,Nr=e)}}else{if(iv(e))throw Error(me(418));e.flags=e.flags&-4097|2,vt=!1,Nr=e}}}function Ry(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Nr=e}function gu(e){if(e!==Nr)return!1;if(!vt)return Ry(e),vt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ev(e.type,e.memoizedProps)),t&&(t=br)){if(iv(e))throw uT(),Error(me(418));for(;t;)lT(e,t),t=Ci(t.nextSibling)}if(Ry(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(me(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){br=Ci(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}br=null}}else br=Nr?Ci(e.stateNode.nextSibling):null;return!0}function uT(){for(var e=br;e;)e=Ci(e.nextSibling)}function hs(){br=Nr=null,vt=!1}function yg(e){gn===null?gn=[e]:gn.push(e)}var PO=ri.ReactCurrentBatchConfig;function hn(e,t){if(e&&e.defaultProps){t=Et({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var rf=$i(null),nf=null,Za=null,Eg=null;function _g(){Eg=Za=nf=null}function Tg(e){var t=rf.current;ft(rf),e._currentValue=t}function sv(e,t,r){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===r)break;e=e.return}}function as(e,t){nf=e,Eg=Za=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(_r=!0),e.firstContext=null)}function an(e){var t=e._currentValue;if(Eg!==e)if(e={context:e,memoizedValue:t,next:null},Za===null){if(nf===null)throw Error(me(308));Za=e,nf.dependencies={lanes:0,firstContext:e}}else Za=Za.next=e;return t}var ua=null;function Sg(e){ua===null?ua=[e]:ua.push(e)}function fT(e,t,r,i){var s=t.interleaved;return s===null?(r.next=r,Sg(t)):(r.next=s.next,s.next=r),t.interleaved=r,qn(e,i)}function qn(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var mi=!1;function xg(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function cT(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Xn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ii(e,t,r){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,Ye&2){var s=i.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),i.pending=t,qn(e,r)}return s=i.interleaved,s===null?(t.next=t,Sg(i)):(t.next=s.next,s.next=t),i.interleaved=t,qn(e,r)}function Ou(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,lg(e,r)}}function Cy(e,t){var r=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var s=null,f=null;if(r=r.firstBaseUpdate,r!==null){do{var C={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};f===null?s=f=C:f=f.next=C,r=r.next}while(r!==null);f===null?s=f=t:f=f.next=t}else s=f=t;r={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:f,shared:i.shared,effects:i.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function af(e,t,r,i){var s=e.updateQueue;mi=!1;var f=s.firstBaseUpdate,C=s.lastBaseUpdate,D=s.shared.pending;if(D!==null){s.shared.pending=null;var o=D,M=o.next;o.next=null,C===null?f=M:C.next=M,C=o;var I=e.alternate;I!==null&&(I=I.updateQueue,D=I.lastBaseUpdate,D!==C&&(D===null?I.firstBaseUpdate=M:D.next=M,I.lastBaseUpdate=o))}if(f!==null){var K=s.baseState;C=0,I=M=o=null,D=f;do{var b=D.lane,W=D.eventTime;if((i&b)===b){I!==null&&(I=I.next={eventTime:W,lane:0,tag:D.tag,payload:D.payload,callback:D.callback,next:null});e:{var F=e,k=D;switch(b=t,W=r,k.tag){case 1:if(F=k.payload,typeof F=="function"){K=F.call(W,K,b);break e}K=F;break e;case 3:F.flags=F.flags&-65537|128;case 0:if(F=k.payload,b=typeof F=="function"?F.call(W,K,b):F,b==null)break e;K=Et({},K,b);break e;case 2:mi=!0}}D.callback!==null&&D.lane!==0&&(e.flags|=64,b=s.effects,b===null?s.effects=[D]:b.push(D))}else W={eventTime:W,lane:b,tag:D.tag,payload:D.payload,callback:D.callback,next:null},I===null?(M=I=W,o=K):I=I.next=W,C|=b;if(D=D.next,D===null){if(D=s.shared.pending,D===null)break;b=D,D=b.next,b.next=null,s.lastBaseUpdate=b,s.shared.pending=null}}while(1);if(I===null&&(o=K),s.baseState=o,s.firstBaseUpdate=M,s.lastBaseUpdate=I,t=s.shared.interleaved,t!==null){s=t;do C|=s.lane,s=s.next;while(s!==t)}else f===null&&(s.shared.lanes=0);pa|=C,e.lanes=C,e.memoizedState=K}}function Iy(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],s=i.callback;if(s!==null){if(i.callback=null,i=r,typeof s!="function")throw Error(me(191,s));s.call(i)}}}var dT=new f_.Component().refs;function ov(e,t,r,i){t=e.memoizedState,r=r(i,t),r=r==null?t:Et({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var bf={isMounted:function(e){return(e=e._reactInternals)?Sa(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var i=lr(),s=wi(e),f=Xn(i,s);f.payload=t,r!=null&&(f.callback=r),t=Ii(e,f,s),t!==null&&(_n(t,e,s,i),Ou(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var i=lr(),s=wi(e),f=Xn(i,s);f.tag=1,f.payload=t,r!=null&&(f.callback=r),t=Ii(e,f,s),t!==null&&(_n(t,e,s,i),Ou(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=lr(),i=wi(e),s=Xn(r,i);s.tag=2,t!=null&&(s.callback=t),t=Ii(e,s,i),t!==null&&(_n(t,e,i,r),Ou(t,e,i))}};function Oy(e,t,r,i,s,f,C){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,f,C):t.prototype&&t.prototype.isPureReactComponent?!Oo(r,i)||!Oo(s,f):!0}function hT(e,t,r){var i=!1,s=Bi,f=t.contextType;return typeof f=="object"&&f!==null?f=an(f):(s=Sr(t)?ha:er.current,i=t.contextTypes,f=(i=i!=null)?ds(e,s):Bi),t=new t(r,f),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=bf,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=f),t}function wy(e,t,r,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,i),t.state!==e&&bf.enqueueReplaceState(t,t.state,null)}function lv(e,t,r,i){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs=dT,xg(e);var f=t.contextType;typeof f=="object"&&f!==null?s.context=an(f):(f=Sr(t)?ha:er.current,s.context=ds(e,f)),s.state=e.memoizedState,f=t.getDerivedStateFromProps,typeof f=="function"&&(ov(e,t,f,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&bf.enqueueReplaceState(s,s.state,null),af(e,r,s,i),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Xs(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(me(309));var i=r.stateNode}if(!i)throw Error(me(147,e));var s=i,f=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===f?t.ref:(t=function(C){var D=s.refs;D===dT&&(D=s.refs={}),C===null?delete D[f]:D[f]=C},t._stringRef=f,t)}if(typeof e!="string")throw Error(me(284));if(!r._owner)throw Error(me(290,e))}return e}function pu(e,t){throw e=Object.prototype.toString.call(t),Error(me(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function My(e){var t=e._init;return t(e._payload)}function vT(e){function t(m,p){if(e){var u=m.deletions;u===null?(m.deletions=[p],m.flags|=16):u.push(p)}}function r(m,p){if(!e)return null;for(;p!==null;)t(m,p),p=p.sibling;return null}function i(m,p){for(m=new Map;p!==null;)p.key!==null?m.set(p.key,p):m.set(p.index,p),p=p.sibling;return m}function s(m,p){return m=Mi(m,p),m.index=0,m.sibling=null,m}function f(m,p,u){return m.index=u,e?(u=m.alternate,u!==null?(u=u.index,u<p?(m.flags|=2,p):u):(m.flags|=2,p)):(m.flags|=1048576,p)}function C(m){return e&&m.alternate===null&&(m.flags|=2),m}function D(m,p,u,w){return p===null||p.tag!==6?(p=fh(u,m.mode,w),p.return=m,p):(p=s(p,u),p.return=m,p)}function o(m,p,u,w){var A=u.type;return A===$a?I(m,p,u.props.children,w,u.key):p!==null&&(p.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===pi&&My(A)===p.type)?(w=s(p,u.props),w.ref=Xs(m,p,u),w.return=m,w):(w=Nu(u.type,u.key,u.props,null,m.mode,w),w.ref=Xs(m,p,u),w.return=m,w)}function M(m,p,u,w){return p===null||p.tag!==4||p.stateNode.containerInfo!==u.containerInfo||p.stateNode.implementation!==u.implementation?(p=ch(u,m.mode,w),p.return=m,p):(p=s(p,u.children||[]),p.return=m,p)}function I(m,p,u,w,A){return p===null||p.tag!==7?(p=da(u,m.mode,w,A),p.return=m,p):(p=s(p,u),p.return=m,p)}function K(m,p,u){if(typeof p=="string"&&p!==""||typeof p=="number")return p=fh(""+p,m.mode,u),p.return=m,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case au:return u=Nu(p.type,p.key,p.props,null,m.mode,u),u.ref=Xs(m,null,p),u.return=m,u;case Ga:return p=ch(p,m.mode,u),p.return=m,p;case pi:var w=p._init;return K(m,w(p._payload),u)}if(ro(p)||Hs(p))return p=da(p,m.mode,u,null),p.return=m,p;pu(m,p)}return null}function b(m,p,u,w){var A=p!==null?p.key:null;if(typeof u=="string"&&u!==""||typeof u=="number")return A!==null?null:D(m,p,""+u,w);if(typeof u=="object"&&u!==null){switch(u.$$typeof){case au:return u.key===A?o(m,p,u,w):null;case Ga:return u.key===A?M(m,p,u,w):null;case pi:return A=u._init,b(m,p,A(u._payload),w)}if(ro(u)||Hs(u))return A!==null?null:I(m,p,u,w,null);pu(m,u)}return null}function W(m,p,u,w,A){if(typeof w=="string"&&w!==""||typeof w=="number")return m=m.get(u)||null,D(p,m,""+w,A);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case au:return m=m.get(w.key===null?u:w.key)||null,o(p,m,w,A);case Ga:return m=m.get(w.key===null?u:w.key)||null,M(p,m,w,A);case pi:var d=w._init;return W(m,p,u,d(w._payload),A)}if(ro(w)||Hs(w))return m=m.get(u)||null,I(p,m,w,A,null);pu(p,w)}return null}function F(m,p,u,w){for(var A=null,d=null,v=p,h=p=0,g=null;v!==null&&h<u.length;h++){v.index>h?(g=v,v=null):g=v.sibling;var P=b(m,v,u[h],w);if(P===null){v===null&&(v=g);break}e&&v&&P.alternate===null&&t(m,v),p=f(P,p,h),d===null?A=P:d.sibling=P,d=P,v=g}if(h===u.length)return r(m,v),vt&&na(m,h),A;if(v===null){for(;h<u.length;h++)v=K(m,u[h],w),v!==null&&(p=f(v,p,h),d===null?A=v:d.sibling=v,d=v);return vt&&na(m,h),A}for(v=i(m,v);h<u.length;h++)g=W(v,m,h,u[h],w),g!==null&&(e&&g.alternate!==null&&v.delete(g.key===null?h:g.key),p=f(g,p,h),d===null?A=g:d.sibling=g,d=g);return e&&v.forEach(function(R){return t(m,R)}),vt&&na(m,h),A}function k(m,p,u,w){var A=Hs(u);if(typeof A!="function")throw Error(me(150));if(u=A.call(u),u==null)throw Error(me(151));for(var d=A=null,v=p,h=p=0,g=null,P=u.next();v!==null&&!P.done;h++,P=u.next()){v.index>h?(g=v,v=null):g=v.sibling;var R=b(m,v,P.value,w);if(R===null){v===null&&(v=g);break}e&&v&&R.alternate===null&&t(m,v),p=f(R,p,h),d===null?A=R:d.sibling=R,d=R,v=g}if(P.done)return r(m,v),vt&&na(m,h),A;if(v===null){for(;!P.done;h++,P=u.next())P=K(m,P.value,w),P!==null&&(p=f(P,p,h),d===null?A=P:d.sibling=P,d=P);return vt&&na(m,h),A}for(v=i(m,v);!P.done;h++,P=u.next())P=W(v,m,h,P.value,w),P!==null&&(e&&P.alternate!==null&&v.delete(P.key===null?h:P.key),p=f(P,p,h),d===null?A=P:d.sibling=P,d=P);return e&&v.forEach(function(y){return t(m,y)}),vt&&na(m,h),A}function N(m,p,u,w){if(typeof u=="object"&&u!==null&&u.type===$a&&u.key===null&&(u=u.props.children),typeof u=="object"&&u!==null){switch(u.$$typeof){case au:e:{for(var A=u.key,d=p;d!==null;){if(d.key===A){if(A=u.type,A===$a){if(d.tag===7){r(m,d.sibling),p=s(d,u.props.children),p.return=m,m=p;break e}}else if(d.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===pi&&My(A)===d.type){r(m,d.sibling),p=s(d,u.props),p.ref=Xs(m,d,u),p.return=m,m=p;break e}r(m,d);break}else t(m,d);d=d.sibling}u.type===$a?(p=da(u.props.children,m.mode,w,u.key),p.return=m,m=p):(w=Nu(u.type,u.key,u.props,null,m.mode,w),w.ref=Xs(m,p,u),w.return=m,m=w)}return C(m);case Ga:e:{for(d=u.key;p!==null;){if(p.key===d)if(p.tag===4&&p.stateNode.containerInfo===u.containerInfo&&p.stateNode.implementation===u.implementation){r(m,p.sibling),p=s(p,u.children||[]),p.return=m,m=p;break e}else{r(m,p);break}else t(m,p);p=p.sibling}p=ch(u,m.mode,w),p.return=m,m=p}return C(m);case pi:return d=u._init,N(m,p,d(u._payload),w)}if(ro(u))return F(m,p,u,w);if(Hs(u))return k(m,p,u,w);pu(m,u)}return typeof u=="string"&&u!==""||typeof u=="number"?(u=""+u,p!==null&&p.tag===6?(r(m,p.sibling),p=s(p,u),p.return=m,m=p):(r(m,p),p=fh(u,m.mode,w),p.return=m,m=p),C(m)):r(m,p)}return N}var vs=vT(!0),gT=vT(!1),nl={},On=$i(nl),bo=$i(nl),Fo=$i(nl);function fa(e){if(e===nl)throw Error(me(174));return e}function Lg(e,t){switch(at(Fo,t),at(bo,e),at(On,nl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Kh(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Kh(t,e)}ft(On),at(On,t)}function gs(){ft(On),ft(bo),ft(Fo)}function pT(e){fa(Fo.current);var t=fa(On.current),r=Kh(t,e.type);t!==r&&(at(bo,e),at(On,r))}function Ag(e){bo.current===e&&(ft(On),ft(bo))}var mt=$i(0);function sf(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ih=[];function Pg(){for(var e=0;e<ih.length;e++)ih[e]._workInProgressVersionPrimary=null;ih.length=0}var wu=ri.ReactCurrentDispatcher,ah=ri.ReactCurrentBatchConfig,ga=0,yt=null,bt=null,Bt=null,of=!1,ho=!1,No=0,DO=0;function Qt(){throw Error(me(321))}function Dg(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Tn(e[r],t[r]))return!1;return!0}function Rg(e,t,r,i,s,f){if(ga=f,yt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,wu.current=e===null||e.memoizedState===null?OO:wO,e=r(i,s),ho){f=0;do{if(ho=!1,No=0,25<=f)throw Error(me(301));f+=1,Bt=bt=null,t.updateQueue=null,wu.current=MO,e=r(i,s)}while(ho)}if(wu.current=lf,t=bt!==null&&bt.next!==null,ga=0,Bt=bt=yt=null,of=!1,t)throw Error(me(300));return e}function Cg(){var e=No!==0;return No=0,e}function Dn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bt===null?yt.memoizedState=Bt=e:Bt=Bt.next=e,Bt}function sn(){if(bt===null){var e=yt.alternate;e=e!==null?e.memoizedState:null}else e=bt.next;var t=Bt===null?yt.memoizedState:Bt.next;if(t!==null)Bt=t,bt=e;else{if(e===null)throw Error(me(310));bt=e,e={memoizedState:bt.memoizedState,baseState:bt.baseState,baseQueue:bt.baseQueue,queue:bt.queue,next:null},Bt===null?yt.memoizedState=Bt=e:Bt=Bt.next=e}return Bt}function Uo(e,t){return typeof t=="function"?t(e):t}function sh(e){var t=sn(),r=t.queue;if(r===null)throw Error(me(311));r.lastRenderedReducer=e;var i=bt,s=i.baseQueue,f=r.pending;if(f!==null){if(s!==null){var C=s.next;s.next=f.next,f.next=C}i.baseQueue=s=f,r.pending=null}if(s!==null){f=s.next,i=i.baseState;var D=C=null,o=null,M=f;do{var I=M.lane;if((ga&I)===I)o!==null&&(o=o.next={lane:0,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null}),i=M.hasEagerState?M.eagerState:e(i,M.action);else{var K={lane:I,action:M.action,hasEagerState:M.hasEagerState,eagerState:M.eagerState,next:null};o===null?(D=o=K,C=i):o=o.next=K,yt.lanes|=I,pa|=I}M=M.next}while(M!==null&&M!==f);o===null?C=i:o.next=D,Tn(i,t.memoizedState)||(_r=!0),t.memoizedState=i,t.baseState=C,t.baseQueue=o,r.lastRenderedState=i}if(e=r.interleaved,e!==null){s=e;do f=s.lane,yt.lanes|=f,pa|=f,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function oh(e){var t=sn(),r=t.queue;if(r===null)throw Error(me(311));r.lastRenderedReducer=e;var i=r.dispatch,s=r.pending,f=t.memoizedState;if(s!==null){r.pending=null;var C=s=s.next;do f=e(f,C.action),C=C.next;while(C!==s);Tn(f,t.memoizedState)||(_r=!0),t.memoizedState=f,t.baseQueue===null&&(t.baseState=f),r.lastRenderedState=f}return[f,i]}function mT(){}function yT(e,t){var r=yt,i=sn(),s=t(),f=!Tn(i.memoizedState,s);if(f&&(i.memoizedState=s,_r=!0),i=i.queue,Ig(TT.bind(null,r,i,e),[e]),i.getSnapshot!==t||f||Bt!==null&&Bt.memoizedState.tag&1){if(r.flags|=2048,Bo(9,_T.bind(null,r,i,s,t),void 0,null),Wt===null)throw Error(me(349));ga&30||ET(r,t,s)}return s}function ET(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=yt.updateQueue,t===null?(t={lastEffect:null,stores:null},yt.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function _T(e,t,r,i){t.value=r,t.getSnapshot=i,ST(t)&&xT(e)}function TT(e,t,r){return r(function(){ST(t)&&xT(e)})}function ST(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Tn(e,r)}catch{return!0}}function xT(e){var t=qn(e,1);t!==null&&_n(t,e,1,-1)}function ky(e){var t=Dn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Uo,lastRenderedState:e},t.queue=e,e=e.dispatch=IO.bind(null,yt,e),[t.memoizedState,e]}function Bo(e,t,r,i){return e={tag:e,create:t,destroy:r,deps:i,next:null},t=yt.updateQueue,t===null?(t={lastEffect:null,stores:null},yt.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(i=r.next,r.next=e,e.next=i,t.lastEffect=e)),e}function LT(){return sn().memoizedState}function Mu(e,t,r,i){var s=Dn();yt.flags|=e,s.memoizedState=Bo(1|t,r,void 0,i===void 0?null:i)}function Ff(e,t,r,i){var s=sn();i=i===void 0?null:i;var f=void 0;if(bt!==null){var C=bt.memoizedState;if(f=C.destroy,i!==null&&Dg(i,C.deps)){s.memoizedState=Bo(t,r,f,i);return}}yt.flags|=e,s.memoizedState=Bo(1|t,r,f,i)}function by(e,t){return Mu(8390656,8,e,t)}function Ig(e,t){return Ff(2048,8,e,t)}function AT(e,t){return Ff(4,2,e,t)}function PT(e,t){return Ff(4,4,e,t)}function DT(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function RT(e,t,r){return r=r!=null?r.concat([e]):null,Ff(4,4,DT.bind(null,t,e),r)}function Og(){}function CT(e,t){var r=sn();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&Dg(t,i[1])?i[0]:(r.memoizedState=[e,t],e)}function IT(e,t){var r=sn();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&Dg(t,i[1])?i[0]:(e=e(),r.memoizedState=[e,t],e)}function OT(e,t,r){return ga&21?(Tn(r,t)||(r=k_(),yt.lanes|=r,pa|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,_r=!0),e.memoizedState=r)}function RO(e,t){var r=qe;qe=r!==0&&4>r?r:4,e(!0);var i=ah.transition;ah.transition={};try{e(!1),t()}finally{qe=r,ah.transition=i}}function wT(){return sn().memoizedState}function CO(e,t,r){var i=wi(e);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},MT(e))kT(t,r);else if(r=fT(e,t,r,i),r!==null){var s=lr();_n(r,e,i,s),bT(r,t,i)}}function IO(e,t,r){var i=wi(e),s={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(MT(e))kT(t,s);else{var f=e.alternate;if(e.lanes===0&&(f===null||f.lanes===0)&&(f=t.lastRenderedReducer,f!==null))try{var C=t.lastRenderedState,D=f(C,r);if(s.hasEagerState=!0,s.eagerState=D,Tn(D,C)){var o=t.interleaved;o===null?(s.next=s,Sg(t)):(s.next=o.next,o.next=s),t.interleaved=s;return}}catch{}finally{}r=fT(e,t,s,i),r!==null&&(s=lr(),_n(r,e,i,s),bT(r,t,i))}}function MT(e){var t=e.alternate;return e===yt||t!==null&&t===yt}function kT(e,t){ho=of=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function bT(e,t,r){if(r&4194240){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,lg(e,r)}}var lf={readContext:an,useCallback:Qt,useContext:Qt,useEffect:Qt,useImperativeHandle:Qt,useInsertionEffect:Qt,useLayoutEffect:Qt,useMemo:Qt,useReducer:Qt,useRef:Qt,useState:Qt,useDebugValue:Qt,useDeferredValue:Qt,useTransition:Qt,useMutableSource:Qt,useSyncExternalStore:Qt,useId:Qt,unstable_isNewReconciler:!1},OO={readContext:an,useCallback:function(e,t){return Dn().memoizedState=[e,t===void 0?null:t],e},useContext:an,useEffect:by,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Mu(4194308,4,DT.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Mu(4194308,4,e,t)},useInsertionEffect:function(e,t){return Mu(4,2,e,t)},useMemo:function(e,t){var r=Dn();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var i=Dn();return t=r!==void 0?r(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=CO.bind(null,yt,e),[i.memoizedState,e]},useRef:function(e){var t=Dn();return e={current:e},t.memoizedState=e},useState:ky,useDebugValue:Og,useDeferredValue:function(e){return Dn().memoizedState=e},useTransition:function(){var e=ky(!1),t=e[0];return e=RO.bind(null,e[1]),Dn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var i=yt,s=Dn();if(vt){if(r===void 0)throw Error(me(407));r=r()}else{if(r=t(),Wt===null)throw Error(me(349));ga&30||ET(i,t,r)}s.memoizedState=r;var f={value:r,getSnapshot:t};return s.queue=f,by(TT.bind(null,i,f,e),[e]),i.flags|=2048,Bo(9,_T.bind(null,i,f,r,t),void 0,null),r},useId:function(){var e=Dn(),t=Wt.identifierPrefix;if(vt){var r=Yn,i=zn;r=(i&~(1<<32-En(i)-1)).toString(32)+r,t=":"+t+"R"+r,r=No++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=DO++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},wO={readContext:an,useCallback:CT,useContext:an,useEffect:Ig,useImperativeHandle:RT,useInsertionEffect:AT,useLayoutEffect:PT,useMemo:IT,useReducer:sh,useRef:LT,useState:function(){return sh(Uo)},useDebugValue:Og,useDeferredValue:function(e){var t=sn();return OT(t,bt.memoizedState,e)},useTransition:function(){var e=sh(Uo)[0],t=sn().memoizedState;return[e,t]},useMutableSource:mT,useSyncExternalStore:yT,useId:wT,unstable_isNewReconciler:!1},MO={readContext:an,useCallback:CT,useContext:an,useEffect:Ig,useImperativeHandle:RT,useInsertionEffect:AT,useLayoutEffect:PT,useMemo:IT,useReducer:oh,useRef:LT,useState:function(){return oh(Uo)},useDebugValue:Og,useDeferredValue:function(e){var t=sn();return bt===null?t.memoizedState=e:OT(t,bt.memoizedState,e)},useTransition:function(){var e=oh(Uo)[0],t=sn().memoizedState;return[e,t]},useMutableSource:mT,useSyncExternalStore:yT,useId:wT,unstable_isNewReconciler:!1};function ps(e,t){try{var r="",i=t;do r+=oI(i),i=i.return;while(i);var s=r}catch(f){s=`
Error generating stack: `+f.message+`
`+f.stack}return{value:e,source:t,stack:s,digest:null}}function lh(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function uv(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var kO=typeof WeakMap=="function"?WeakMap:Map;function FT(e,t,r){r=Xn(-1,r),r.tag=3,r.payload={element:null};var i=t.value;return r.callback=function(){ff||(ff=!0,Ev=i),uv(e,t)},r}function NT(e,t,r){r=Xn(-1,r),r.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var s=t.value;r.payload=function(){return i(s)},r.callback=function(){uv(e,t)}}var f=e.stateNode;return f!==null&&typeof f.componentDidCatch=="function"&&(r.callback=function(){uv(e,t),typeof i!="function"&&(Oi===null?Oi=new Set([this]):Oi.add(this));var C=t.stack;this.componentDidCatch(t.value,{componentStack:C!==null?C:""})}),r}function Fy(e,t,r){var i=e.pingCache;if(i===null){i=e.pingCache=new kO;var s=new Set;i.set(t,s)}else s=i.get(t),s===void 0&&(s=new Set,i.set(t,s));s.has(r)||(s.add(r),e=YO.bind(null,e,t,r),t.then(e,e))}function Ny(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Uy(e,t,r,i,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Xn(-1,1),t.tag=2,Ii(r,t,1))),r.lanes|=1),e)}var bO=ri.ReactCurrentOwner,_r=!1;function or(e,t,r,i){t.child=e===null?gT(t,null,r,i):vs(t,e.child,r,i)}function By(e,t,r,i,s){r=r.render;var f=t.ref;return as(t,s),i=Rg(e,t,r,i,f,s),r=Cg(),e!==null&&!_r?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,ei(e,t,s)):(vt&&r&&pg(t),t.flags|=1,or(e,t,i,s),t.child)}function Ky(e,t,r,i,s){if(e===null){var f=r.type;return typeof f=="function"&&!Bg(f)&&f.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=f,UT(e,t,f,i,s)):(e=Nu(r.type,null,i,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(f=e.child,!(e.lanes&s)){var C=f.memoizedProps;if(r=r.compare,r=r!==null?r:Oo,r(C,i)&&e.ref===t.ref)return ei(e,t,s)}return t.flags|=1,e=Mi(f,i),e.ref=t.ref,e.return=t,t.child=e}function UT(e,t,r,i,s){if(e!==null){var f=e.memoizedProps;if(Oo(f,i)&&e.ref===t.ref)if(_r=!1,t.pendingProps=i=f,(e.lanes&s)!==0)e.flags&131072&&(_r=!0);else return t.lanes=e.lanes,ei(e,t,s)}return fv(e,t,r,i,s)}function BT(e,t,r){var i=t.pendingProps,s=i.children,f=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},at(qa,kr),kr|=r;else{if(!(r&1073741824))return e=f!==null?f.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,at(qa,kr),kr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=f!==null?f.baseLanes:r,at(qa,kr),kr|=i}else f!==null?(i=f.baseLanes|r,t.memoizedState=null):i=r,at(qa,kr),kr|=i;return or(e,t,s,r),t.child}function KT(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function fv(e,t,r,i,s){var f=Sr(r)?ha:er.current;return f=ds(t,f),as(t,s),r=Rg(e,t,r,i,f,s),i=Cg(),e!==null&&!_r?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,ei(e,t,s)):(vt&&i&&pg(t),t.flags|=1,or(e,t,r,s),t.child)}function Wy(e,t,r,i,s){if(Sr(r)){var f=!0;qu(t)}else f=!1;if(as(t,s),t.stateNode===null)ku(e,t),hT(t,r,i),lv(t,r,i,s),i=!0;else if(e===null){var C=t.stateNode,D=t.memoizedProps;C.props=D;var o=C.context,M=r.contextType;typeof M=="object"&&M!==null?M=an(M):(M=Sr(r)?ha:er.current,M=ds(t,M));var I=r.getDerivedStateFromProps,K=typeof I=="function"||typeof C.getSnapshotBeforeUpdate=="function";K||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(D!==i||o!==M)&&wy(t,C,i,M),mi=!1;var b=t.memoizedState;C.state=b,af(t,i,C,s),o=t.memoizedState,D!==i||b!==o||Tr.current||mi?(typeof I=="function"&&(ov(t,r,I,i),o=t.memoizedState),(D=mi||Oy(t,r,D,i,b,o,M))?(K||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(t.flags|=4194308)):(typeof C.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=o),C.props=i,C.state=o,C.context=M,i=D):(typeof C.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{C=t.stateNode,cT(e,t),D=t.memoizedProps,M=t.type===t.elementType?D:hn(t.type,D),C.props=M,K=t.pendingProps,b=C.context,o=r.contextType,typeof o=="object"&&o!==null?o=an(o):(o=Sr(r)?ha:er.current,o=ds(t,o));var W=r.getDerivedStateFromProps;(I=typeof W=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(D!==K||b!==o)&&wy(t,C,i,o),mi=!1,b=t.memoizedState,C.state=b,af(t,i,C,s);var F=t.memoizedState;D!==K||b!==F||Tr.current||mi?(typeof W=="function"&&(ov(t,r,W,i),F=t.memoizedState),(M=mi||Oy(t,r,M,i,b,F,o)||!1)?(I||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(i,F,o),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(i,F,o)),typeof C.componentDidUpdate=="function"&&(t.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof C.componentDidUpdate!="function"||D===e.memoizedProps&&b===e.memoizedState||(t.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||D===e.memoizedProps&&b===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=F),C.props=i,C.state=F,C.context=o,i=M):(typeof C.componentDidUpdate!="function"||D===e.memoizedProps&&b===e.memoizedState||(t.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||D===e.memoizedProps&&b===e.memoizedState||(t.flags|=1024),i=!1)}return cv(e,t,r,i,f,s)}function cv(e,t,r,i,s,f){KT(e,t);var C=(t.flags&128)!==0;if(!i&&!C)return s&&Py(t,r,!1),ei(e,t,f);i=t.stateNode,bO.current=t;var D=C&&typeof r.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&C?(t.child=vs(t,e.child,null,f),t.child=vs(t,null,D,f)):or(e,t,D,f),t.memoizedState=i.state,s&&Py(t,r,!0),t.child}function WT(e){var t=e.stateNode;t.pendingContext?Ay(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ay(e,t.context,!1),Lg(e,t.containerInfo)}function Gy(e,t,r,i,s){return hs(),yg(s),t.flags|=256,or(e,t,r,i),t.child}var dv={dehydrated:null,treeContext:null,retryLane:0};function hv(e){return{baseLanes:e,cachePool:null,transitions:null}}function GT(e,t,r){var i=t.pendingProps,s=mt.current,f=!1,C=(t.flags&128)!==0,D;if((D=C)||(D=e!==null&&e.memoizedState===null?!1:(s&2)!==0),D?(f=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),at(mt,s&1),e===null)return av(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(C=i.children,e=i.fallback,f?(i=t.mode,f=t.child,C={mode:"hidden",children:C},!(i&1)&&f!==null?(f.childLanes=0,f.pendingProps=C):f=Bf(C,i,0,null),e=da(e,i,r,null),f.return=t,e.return=t,f.sibling=e,t.child=f,t.child.memoizedState=hv(r),t.memoizedState=dv,e):wg(t,C));if(s=e.memoizedState,s!==null&&(D=s.dehydrated,D!==null))return FO(e,t,C,i,D,s,r);if(f){f=i.fallback,C=t.mode,s=e.child,D=s.sibling;var o={mode:"hidden",children:i.children};return!(C&1)&&t.child!==s?(i=t.child,i.childLanes=0,i.pendingProps=o,t.deletions=null):(i=Mi(s,o),i.subtreeFlags=s.subtreeFlags&14680064),D!==null?f=Mi(D,f):(f=da(f,C,r,null),f.flags|=2),f.return=t,i.return=t,i.sibling=f,t.child=i,i=f,f=t.child,C=e.child.memoizedState,C=C===null?hv(r):{baseLanes:C.baseLanes|r,cachePool:null,transitions:C.transitions},f.memoizedState=C,f.childLanes=e.childLanes&~r,t.memoizedState=dv,i}return f=e.child,e=f.sibling,i=Mi(f,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=r),i.return=t,i.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=i,t.memoizedState=null,i}function wg(e,t){return t=Bf({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function mu(e,t,r,i){return i!==null&&yg(i),vs(t,e.child,null,r),e=wg(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function FO(e,t,r,i,s,f,C){if(r)return t.flags&256?(t.flags&=-257,i=lh(Error(me(422))),mu(e,t,C,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(f=i.fallback,s=t.mode,i=Bf({mode:"visible",children:i.children},s,0,null),f=da(f,s,C,null),f.flags|=2,i.return=t,f.return=t,i.sibling=f,t.child=i,t.mode&1&&vs(t,e.child,null,C),t.child.memoizedState=hv(C),t.memoizedState=dv,f);if(!(t.mode&1))return mu(e,t,C,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var D=i.dgst;return i=D,f=Error(me(419)),i=lh(f,i,void 0),mu(e,t,C,i)}if(D=(C&e.childLanes)!==0,_r||D){if(i=Wt,i!==null){switch(C&-C){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|C)?0:s,s!==0&&s!==f.retryLane&&(f.retryLane=s,qn(e,s),_n(i,e,s,-1))}return Ug(),i=lh(Error(me(421))),mu(e,t,C,i)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=XO.bind(null,e),s._reactRetry=t,null):(e=f.treeContext,br=Ci(s.nextSibling),Nr=t,vt=!0,gn=null,e!==null&&(Jr[qr++]=zn,Jr[qr++]=Yn,Jr[qr++]=va,zn=e.id,Yn=e.overflow,va=t),t=wg(t,i.children),t.flags|=4096,t)}function $y(e,t,r){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),sv(e.return,t,r)}function uh(e,t,r,i,s){var f=e.memoizedState;f===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:s}:(f.isBackwards=t,f.rendering=null,f.renderingStartTime=0,f.last=i,f.tail=r,f.tailMode=s)}function $T(e,t,r){var i=t.pendingProps,s=i.revealOrder,f=i.tail;if(or(e,t,i.children,r),i=mt.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&$y(e,r,t);else if(e.tag===19)$y(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(at(mt,i),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&sf(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),uh(t,!1,s,r,f);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&sf(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}uh(t,!0,r,null,f);break;case"together":uh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ku(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ei(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),pa|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(me(153));if(t.child!==null){for(e=t.child,r=Mi(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Mi(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function NO(e,t,r){switch(t.tag){case 3:WT(t),hs();break;case 5:pT(t);break;case 1:Sr(t.type)&&qu(t);break;case 4:Lg(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,s=t.memoizedProps.value;at(rf,i._currentValue),i._currentValue=s;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(at(mt,mt.current&1),t.flags|=128,null):r&t.child.childLanes?GT(e,t,r):(at(mt,mt.current&1),e=ei(e,t,r),e!==null?e.sibling:null);at(mt,mt.current&1);break;case 19:if(i=(r&t.childLanes)!==0,e.flags&128){if(i)return $T(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),at(mt,mt.current),i)break;return null;case 22:case 23:return t.lanes=0,BT(e,t,r)}return ei(e,t,r)}var HT,vv,jT,VT;HT=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};vv=function(){};jT=function(e,t,r,i){var s=e.memoizedProps;if(s!==i){e=t.stateNode,fa(On.current);var f=null;switch(r){case"input":s=Fh(e,s),i=Fh(e,i),f=[];break;case"select":s=Et({},s,{value:void 0}),i=Et({},i,{value:void 0}),f=[];break;case"textarea":s=Bh(e,s),i=Bh(e,i),f=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=Zu)}Wh(r,i);var C;r=null;for(M in s)if(!i.hasOwnProperty(M)&&s.hasOwnProperty(M)&&s[M]!=null)if(M==="style"){var D=s[M];for(C in D)D.hasOwnProperty(C)&&(r||(r={}),r[C]="")}else M!=="dangerouslySetInnerHTML"&&M!=="children"&&M!=="suppressContentEditableWarning"&&M!=="suppressHydrationWarning"&&M!=="autoFocus"&&(Lo.hasOwnProperty(M)?f||(f=[]):(f=f||[]).push(M,null));for(M in i){var o=i[M];if(D=s!=null?s[M]:void 0,i.hasOwnProperty(M)&&o!==D&&(o!=null||D!=null))if(M==="style")if(D){for(C in D)!D.hasOwnProperty(C)||o&&o.hasOwnProperty(C)||(r||(r={}),r[C]="");for(C in o)o.hasOwnProperty(C)&&D[C]!==o[C]&&(r||(r={}),r[C]=o[C])}else r||(f||(f=[]),f.push(M,r)),r=o;else M==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,D=D?D.__html:void 0,o!=null&&D!==o&&(f=f||[]).push(M,o)):M==="children"?typeof o!="string"&&typeof o!="number"||(f=f||[]).push(M,""+o):M!=="suppressContentEditableWarning"&&M!=="suppressHydrationWarning"&&(Lo.hasOwnProperty(M)?(o!=null&&M==="onScroll"&&lt("scroll",e),f||D===o||(f=[])):(f=f||[]).push(M,o))}r&&(f=f||[]).push("style",r);var M=f;(t.updateQueue=M)&&(t.flags|=4)}};VT=function(e,t,r,i){r!==i&&(t.flags|=4)};function Qs(e,t){if(!vt)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Zt(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,i=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=i,e.childLanes=r,t}function UO(e,t,r){var i=t.pendingProps;switch(mg(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zt(t),null;case 1:return Sr(t.type)&&Ju(),Zt(t),null;case 3:return i=t.stateNode,gs(),ft(Tr),ft(er),Pg(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(gu(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,gn!==null&&(Sv(gn),gn=null))),vv(e,t),Zt(t),null;case 5:Ag(t);var s=fa(Fo.current);if(r=t.type,e!==null&&t.stateNode!=null)jT(e,t,r,i,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(me(166));return Zt(t),null}if(e=fa(On.current),gu(t)){i=t.stateNode,r=t.type;var f=t.memoizedProps;switch(i[Cn]=t,i[ko]=f,e=(t.mode&1)!==0,r){case"dialog":lt("cancel",i),lt("close",i);break;case"iframe":case"object":case"embed":lt("load",i);break;case"video":case"audio":for(s=0;s<io.length;s++)lt(io[s],i);break;case"source":lt("error",i);break;case"img":case"image":case"link":lt("error",i),lt("load",i);break;case"details":lt("toggle",i);break;case"input":Jm(i,f),lt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!f.multiple},lt("invalid",i);break;case"textarea":ey(i,f),lt("invalid",i)}Wh(r,f),s=null;for(var C in f)if(f.hasOwnProperty(C)){var D=f[C];C==="children"?typeof D=="string"?i.textContent!==D&&(f.suppressHydrationWarning!==!0&&vu(i.textContent,D,e),s=["children",D]):typeof D=="number"&&i.textContent!==""+D&&(f.suppressHydrationWarning!==!0&&vu(i.textContent,D,e),s=["children",""+D]):Lo.hasOwnProperty(C)&&D!=null&&C==="onScroll"&&lt("scroll",i)}switch(r){case"input":su(i),qm(i,f,!0);break;case"textarea":su(i),ty(i);break;case"select":case"option":break;default:typeof f.onClick=="function"&&(i.onclick=Zu)}i=s,t.updateQueue=i,i!==null&&(t.flags|=4)}else{C=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=E_(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=C.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=C.createElement(r,{is:i.is}):(e=C.createElement(r),r==="select"&&(C=e,i.multiple?C.multiple=!0:i.size&&(C.size=i.size))):e=C.createElementNS(e,r),e[Cn]=t,e[ko]=i,HT(e,t,!1,!1),t.stateNode=e;e:{switch(C=Gh(r,i),r){case"dialog":lt("cancel",e),lt("close",e),s=i;break;case"iframe":case"object":case"embed":lt("load",e),s=i;break;case"video":case"audio":for(s=0;s<io.length;s++)lt(io[s],e);s=i;break;case"source":lt("error",e),s=i;break;case"img":case"image":case"link":lt("error",e),lt("load",e),s=i;break;case"details":lt("toggle",e),s=i;break;case"input":Jm(e,i),s=Fh(e,i),lt("invalid",e);break;case"option":s=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},s=Et({},i,{value:void 0}),lt("invalid",e);break;case"textarea":ey(e,i),s=Bh(e,i),lt("invalid",e);break;default:s=i}Wh(r,s),D=s;for(f in D)if(D.hasOwnProperty(f)){var o=D[f];f==="style"?S_(e,o):f==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,o!=null&&__(e,o)):f==="children"?typeof o=="string"?(r!=="textarea"||o!=="")&&Ao(e,o):typeof o=="number"&&Ao(e,""+o):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Lo.hasOwnProperty(f)?o!=null&&f==="onScroll"&&lt("scroll",e):o!=null&&rg(e,f,o,C))}switch(r){case"input":su(e),qm(e,i,!1);break;case"textarea":su(e),ty(e);break;case"option":i.value!=null&&e.setAttribute("value",""+Ui(i.value));break;case"select":e.multiple=!!i.multiple,f=i.value,f!=null?ts(e,!!i.multiple,f,!1):i.defaultValue!=null&&ts(e,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Zu)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Zt(t),null;case 6:if(e&&t.stateNode!=null)VT(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(me(166));if(r=fa(Fo.current),fa(On.current),gu(t)){if(i=t.stateNode,r=t.memoizedProps,i[Cn]=t,(f=i.nodeValue!==r)&&(e=Nr,e!==null))switch(e.tag){case 3:vu(i.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&vu(i.nodeValue,r,(e.mode&1)!==0)}f&&(t.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[Cn]=t,t.stateNode=i}return Zt(t),null;case 13:if(ft(mt),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(vt&&br!==null&&t.mode&1&&!(t.flags&128))uT(),hs(),t.flags|=98560,f=!1;else if(f=gu(t),i!==null&&i.dehydrated!==null){if(e===null){if(!f)throw Error(me(318));if(f=t.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(me(317));f[Cn]=t}else hs(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Zt(t),f=!1}else gn!==null&&(Sv(gn),gn=null),f=!0;if(!f)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||mt.current&1?Ft===0&&(Ft=3):Ug())),t.updateQueue!==null&&(t.flags|=4),Zt(t),null);case 4:return gs(),vv(e,t),e===null&&wo(t.stateNode.containerInfo),Zt(t),null;case 10:return Tg(t.type._context),Zt(t),null;case 17:return Sr(t.type)&&Ju(),Zt(t),null;case 19:if(ft(mt),f=t.memoizedState,f===null)return Zt(t),null;if(i=(t.flags&128)!==0,C=f.rendering,C===null)if(i)Qs(f,!1);else{if(Ft!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(C=sf(e),C!==null){for(t.flags|=128,Qs(f,!1),i=C.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=r,r=t.child;r!==null;)f=r,e=i,f.flags&=14680066,C=f.alternate,C===null?(f.childLanes=0,f.lanes=e,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=C.childLanes,f.lanes=C.lanes,f.child=C.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=C.memoizedProps,f.memoizedState=C.memoizedState,f.updateQueue=C.updateQueue,f.type=C.type,e=C.dependencies,f.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return at(mt,mt.current&1|2),t.child}e=e.sibling}f.tail!==null&&Dt()>ms&&(t.flags|=128,i=!0,Qs(f,!1),t.lanes=4194304)}else{if(!i)if(e=sf(C),e!==null){if(t.flags|=128,i=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Qs(f,!0),f.tail===null&&f.tailMode==="hidden"&&!C.alternate&&!vt)return Zt(t),null}else 2*Dt()-f.renderingStartTime>ms&&r!==1073741824&&(t.flags|=128,i=!0,Qs(f,!1),t.lanes=4194304);f.isBackwards?(C.sibling=t.child,t.child=C):(r=f.last,r!==null?r.sibling=C:t.child=C,f.last=C)}return f.tail!==null?(t=f.tail,f.rendering=t,f.tail=t.sibling,f.renderingStartTime=Dt(),t.sibling=null,r=mt.current,at(mt,i?r&1|2:r&1),t):(Zt(t),null);case 22:case 23:return Ng(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?kr&1073741824&&(Zt(t),t.subtreeFlags&6&&(t.flags|=8192)):Zt(t),null;case 24:return null;case 25:return null}throw Error(me(156,t.tag))}function BO(e,t){switch(mg(t),t.tag){case 1:return Sr(t.type)&&Ju(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return gs(),ft(Tr),ft(er),Pg(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ag(t),null;case 13:if(ft(mt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(me(340));hs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ft(mt),null;case 4:return gs(),null;case 10:return Tg(t.type._context),null;case 22:case 23:return Ng(),null;case 24:return null;default:return null}}var yu=!1,qt=!1,KO=typeof WeakSet=="function"?WeakSet:Set,Ae=null;function Ja(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){St(e,t,i)}else r.current=null}function gv(e,t,r){try{r()}catch(i){St(e,t,i)}}var Hy=!1;function WO(e,t){if(Jh=Yu,e=Q_(),gg(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var s=i.anchorOffset,f=i.focusNode;i=i.focusOffset;try{r.nodeType,f.nodeType}catch{r=null;break e}var C=0,D=-1,o=-1,M=0,I=0,K=e,b=null;t:for(;;){for(var W;K!==r||s!==0&&K.nodeType!==3||(D=C+s),K!==f||i!==0&&K.nodeType!==3||(o=C+i),K.nodeType===3&&(C+=K.nodeValue.length),(W=K.firstChild)!==null;)b=K,K=W;for(;;){if(K===e)break t;if(b===r&&++M===s&&(D=C),b===f&&++I===i&&(o=C),(W=K.nextSibling)!==null)break;K=b,b=K.parentNode}K=W}r=D===-1||o===-1?null:{start:D,end:o}}else r=null}r=r||{start:0,end:0}}else r=null;for(qh={focusedElem:e,selectionRange:r},Yu=!1,Ae=t;Ae!==null;)if(t=Ae,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ae=e;else for(;Ae!==null;){t=Ae;try{var F=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(F!==null){var k=F.memoizedProps,N=F.memoizedState,m=t.stateNode,p=m.getSnapshotBeforeUpdate(t.elementType===t.type?k:hn(t.type,k),N);m.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var u=t.stateNode.containerInfo;u.nodeType===1?u.textContent="":u.nodeType===9&&u.documentElement&&u.removeChild(u.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(me(163))}}catch(w){St(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,Ae=e;break}Ae=t.return}return F=Hy,Hy=!1,F}function vo(e,t,r){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&e)===e){var f=s.destroy;s.destroy=void 0,f!==void 0&&gv(t,r,f)}s=s.next}while(s!==i)}}function Nf(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var i=r.create;r.destroy=i()}r=r.next}while(r!==t)}}function pv(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function zT(e){var t=e.alternate;t!==null&&(e.alternate=null,zT(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Cn],delete t[ko],delete t[rv],delete t[xO],delete t[LO])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function YT(e){return e.tag===5||e.tag===3||e.tag===4}function jy(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||YT(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function mv(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Zu));else if(i!==4&&(e=e.child,e!==null))for(mv(e,t,r),e=e.sibling;e!==null;)mv(e,t,r),e=e.sibling}function yv(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(yv(e,t,r),e=e.sibling;e!==null;)yv(e,t,r),e=e.sibling}var jt=null,vn=!1;function vi(e,t,r){for(r=r.child;r!==null;)XT(e,t,r),r=r.sibling}function XT(e,t,r){if(In&&typeof In.onCommitFiberUnmount=="function")try{In.onCommitFiberUnmount(Cf,r)}catch{}switch(r.tag){case 5:qt||Ja(r,t);case 6:var i=jt,s=vn;jt=null,vi(e,t,r),jt=i,vn=s,jt!==null&&(vn?(e=jt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):jt.removeChild(r.stateNode));break;case 18:jt!==null&&(vn?(e=jt,r=r.stateNode,e.nodeType===8?rh(e.parentNode,r):e.nodeType===1&&rh(e,r),Co(e)):rh(jt,r.stateNode));break;case 4:i=jt,s=vn,jt=r.stateNode.containerInfo,vn=!0,vi(e,t,r),jt=i,vn=s;break;case 0:case 11:case 14:case 15:if(!qt&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var f=s,C=f.destroy;f=f.tag,C!==void 0&&(f&2||f&4)&&gv(r,t,C),s=s.next}while(s!==i)}vi(e,t,r);break;case 1:if(!qt&&(Ja(r,t),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(D){St(r,t,D)}vi(e,t,r);break;case 21:vi(e,t,r);break;case 22:r.mode&1?(qt=(i=qt)||r.memoizedState!==null,vi(e,t,r),qt=i):vi(e,t,r);break;default:vi(e,t,r)}}function Vy(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new KO),t.forEach(function(i){var s=QO.bind(null,e,i);r.has(i)||(r.add(i),i.then(s,s))})}}function dn(e,t){var r=t.deletions;if(r!==null)for(var i=0;i<r.length;i++){var s=r[i];try{var f=e,C=t,D=C;e:for(;D!==null;){switch(D.tag){case 5:jt=D.stateNode,vn=!1;break e;case 3:jt=D.stateNode.containerInfo,vn=!0;break e;case 4:jt=D.stateNode.containerInfo,vn=!0;break e}D=D.return}if(jt===null)throw Error(me(160));XT(f,C,s),jt=null,vn=!1;var o=s.alternate;o!==null&&(o.return=null),s.return=null}catch(M){St(s,t,M)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)QT(t,e),t=t.sibling}function QT(e,t){var r=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(dn(t,e),Pn(e),i&4){try{vo(3,e,e.return),Nf(3,e)}catch(k){St(e,e.return,k)}try{vo(5,e,e.return)}catch(k){St(e,e.return,k)}}break;case 1:dn(t,e),Pn(e),i&512&&r!==null&&Ja(r,r.return);break;case 5:if(dn(t,e),Pn(e),i&512&&r!==null&&Ja(r,r.return),e.flags&32){var s=e.stateNode;try{Ao(s,"")}catch(k){St(e,e.return,k)}}if(i&4&&(s=e.stateNode,s!=null)){var f=e.memoizedProps,C=r!==null?r.memoizedProps:f,D=e.type,o=e.updateQueue;if(e.updateQueue=null,o!==null)try{D==="input"&&f.type==="radio"&&f.name!=null&&m_(s,f),Gh(D,C);var M=Gh(D,f);for(C=0;C<o.length;C+=2){var I=o[C],K=o[C+1];I==="style"?S_(s,K):I==="dangerouslySetInnerHTML"?__(s,K):I==="children"?Ao(s,K):rg(s,I,K,M)}switch(D){case"input":Nh(s,f);break;case"textarea":y_(s,f);break;case"select":var b=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!f.multiple;var W=f.value;W!=null?ts(s,!!f.multiple,W,!1):b!==!!f.multiple&&(f.defaultValue!=null?ts(s,!!f.multiple,f.defaultValue,!0):ts(s,!!f.multiple,f.multiple?[]:"",!1))}s[ko]=f}catch(k){St(e,e.return,k)}}break;case 6:if(dn(t,e),Pn(e),i&4){if(e.stateNode===null)throw Error(me(162));s=e.stateNode,f=e.memoizedProps;try{s.nodeValue=f}catch(k){St(e,e.return,k)}}break;case 3:if(dn(t,e),Pn(e),i&4&&r!==null&&r.memoizedState.isDehydrated)try{Co(t.containerInfo)}catch(k){St(e,e.return,k)}break;case 4:dn(t,e),Pn(e);break;case 13:dn(t,e),Pn(e),s=e.child,s.flags&8192&&(f=s.memoizedState!==null,s.stateNode.isHidden=f,!f||s.alternate!==null&&s.alternate.memoizedState!==null||(bg=Dt())),i&4&&Vy(e);break;case 22:if(I=r!==null&&r.memoizedState!==null,e.mode&1?(qt=(M=qt)||I,dn(t,e),qt=M):dn(t,e),Pn(e),i&8192){if(M=e.memoizedState!==null,(e.stateNode.isHidden=M)&&!I&&e.mode&1)for(Ae=e,I=e.child;I!==null;){for(K=Ae=I;Ae!==null;){switch(b=Ae,W=b.child,b.tag){case 0:case 11:case 14:case 15:vo(4,b,b.return);break;case 1:Ja(b,b.return);var F=b.stateNode;if(typeof F.componentWillUnmount=="function"){i=b,r=b.return;try{t=i,F.props=t.memoizedProps,F.state=t.memoizedState,F.componentWillUnmount()}catch(k){St(i,r,k)}}break;case 5:Ja(b,b.return);break;case 22:if(b.memoizedState!==null){Yy(K);continue}}W!==null?(W.return=b,Ae=W):Yy(K)}I=I.sibling}e:for(I=null,K=e;;){if(K.tag===5){if(I===null){I=K;try{s=K.stateNode,M?(f=s.style,typeof f.setProperty=="function"?f.setProperty("display","none","important"):f.display="none"):(D=K.stateNode,o=K.memoizedProps.style,C=o!=null&&o.hasOwnProperty("display")?o.display:null,D.style.display=T_("display",C))}catch(k){St(e,e.return,k)}}}else if(K.tag===6){if(I===null)try{K.stateNode.nodeValue=M?"":K.memoizedProps}catch(k){St(e,e.return,k)}}else if((K.tag!==22&&K.tag!==23||K.memoizedState===null||K===e)&&K.child!==null){K.child.return=K,K=K.child;continue}if(K===e)break e;for(;K.sibling===null;){if(K.return===null||K.return===e)break e;I===K&&(I=null),K=K.return}I===K&&(I=null),K.sibling.return=K.return,K=K.sibling}}break;case 19:dn(t,e),Pn(e),i&4&&Vy(e);break;case 21:break;default:dn(t,e),Pn(e)}}function Pn(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(YT(r)){var i=r;break e}r=r.return}throw Error(me(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(Ao(s,""),i.flags&=-33);var f=jy(e);yv(e,f,s);break;case 3:case 4:var C=i.stateNode.containerInfo,D=jy(e);mv(e,D,C);break;default:throw Error(me(161))}}catch(o){St(e,e.return,o)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function GO(e,t,r){Ae=e,ZT(e)}function ZT(e,t,r){for(var i=(e.mode&1)!==0;Ae!==null;){var s=Ae,f=s.child;if(s.tag===22&&i){var C=s.memoizedState!==null||yu;if(!C){var D=s.alternate,o=D!==null&&D.memoizedState!==null||qt;D=yu;var M=qt;if(yu=C,(qt=o)&&!M)for(Ae=s;Ae!==null;)C=Ae,o=C.child,C.tag===22&&C.memoizedState!==null?Xy(s):o!==null?(o.return=C,Ae=o):Xy(s);for(;f!==null;)Ae=f,ZT(f),f=f.sibling;Ae=s,yu=D,qt=M}zy(e)}else s.subtreeFlags&8772&&f!==null?(f.return=s,Ae=f):zy(e)}}function zy(e){for(;Ae!==null;){var t=Ae;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:qt||Nf(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!qt)if(r===null)i.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:hn(t.type,r.memoizedProps);i.componentDidUpdate(s,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var f=t.updateQueue;f!==null&&Iy(t,f,i);break;case 3:var C=t.updateQueue;if(C!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Iy(t,C,r)}break;case 5:var D=t.stateNode;if(r===null&&t.flags&4){r=D;var o=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":o.autoFocus&&r.focus();break;case"img":o.src&&(r.src=o.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var M=t.alternate;if(M!==null){var I=M.memoizedState;if(I!==null){var K=I.dehydrated;K!==null&&Co(K)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(me(163))}qt||t.flags&512&&pv(t)}catch(b){St(t,t.return,b)}}if(t===e){Ae=null;break}if(r=t.sibling,r!==null){r.return=t.return,Ae=r;break}Ae=t.return}}function Yy(e){for(;Ae!==null;){var t=Ae;if(t===e){Ae=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Ae=r;break}Ae=t.return}}function Xy(e){for(;Ae!==null;){var t=Ae;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Nf(4,t)}catch(o){St(t,r,o)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var s=t.return;try{i.componentDidMount()}catch(o){St(t,s,o)}}var f=t.return;try{pv(t)}catch(o){St(t,f,o)}break;case 5:var C=t.return;try{pv(t)}catch(o){St(t,C,o)}}}catch(o){St(t,t.return,o)}if(t===e){Ae=null;break}var D=t.sibling;if(D!==null){D.return=t.return,Ae=D;break}Ae=t.return}}var $O=Math.ceil,uf=ri.ReactCurrentDispatcher,Mg=ri.ReactCurrentOwner,nn=ri.ReactCurrentBatchConfig,Ye=0,Wt=null,It=null,Vt=0,kr=0,qa=$i(0),Ft=0,Ko=null,pa=0,Uf=0,kg=0,go=null,Er=null,bg=0,ms=1/0,Hn=null,ff=!1,Ev=null,Oi=null,Eu=!1,Si=null,cf=0,po=0,_v=null,bu=-1,Fu=0;function lr(){return Ye&6?Dt():bu!==-1?bu:bu=Dt()}function wi(e){return e.mode&1?Ye&2&&Vt!==0?Vt&-Vt:PO.transition!==null?(Fu===0&&(Fu=k_()),Fu):(e=qe,e!==0||(e=window.event,e=e===void 0?16:W_(e.type)),e):1}function _n(e,t,r,i){if(50<po)throw po=0,_v=null,Error(me(185));el(e,r,i),(!(Ye&2)||e!==Wt)&&(e===Wt&&(!(Ye&2)&&(Uf|=r),Ft===4&&Ei(e,Vt)),xr(e,i),r===1&&Ye===0&&!(t.mode&1)&&(ms=Dt()+500,kf&&Hi()))}function xr(e,t){var r=e.callbackNode;PI(e,t);var i=zu(e,e===Wt?Vt:0);if(i===0)r!==null&&iy(r),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(r!=null&&iy(r),t===1)e.tag===0?AO(Qy.bind(null,e)):sT(Qy.bind(null,e)),TO(function(){!(Ye&6)&&Hi()}),r=null;else{switch(b_(i)){case 1:r=og;break;case 4:r=w_;break;case 16:r=Vu;break;case 536870912:r=M_;break;default:r=Vu}r=aS(r,JT.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function JT(e,t){if(bu=-1,Fu=0,Ye&6)throw Error(me(327));var r=e.callbackNode;if(ss()&&e.callbackNode!==r)return null;var i=zu(e,e===Wt?Vt:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=df(e,i);else{t=i;var s=Ye;Ye|=2;var f=eS();(Wt!==e||Vt!==t)&&(Hn=null,ms=Dt()+500,ca(e,t));do try{VO();break}catch(D){qT(e,D)}while(1);_g(),uf.current=f,Ye=s,It!==null?t=0:(Wt=null,Vt=0,t=Ft)}if(t!==0){if(t===2&&(s=zh(e),s!==0&&(i=s,t=Tv(e,s))),t===1)throw r=Ko,ca(e,0),Ei(e,i),xr(e,Dt()),r;if(t===6)Ei(e,i);else{if(s=e.current.alternate,!(i&30)&&!HO(s)&&(t=df(e,i),t===2&&(f=zh(e),f!==0&&(i=f,t=Tv(e,f))),t===1))throw r=Ko,ca(e,0),Ei(e,i),xr(e,Dt()),r;switch(e.finishedWork=s,e.finishedLanes=i,t){case 0:case 1:throw Error(me(345));case 2:ia(e,Er,Hn);break;case 3:if(Ei(e,i),(i&130023424)===i&&(t=bg+500-Dt(),10<t)){if(zu(e,0)!==0)break;if(s=e.suspendedLanes,(s&i)!==i){lr(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=tv(ia.bind(null,e,Er,Hn),t);break}ia(e,Er,Hn);break;case 4:if(Ei(e,i),(i&4194240)===i)break;for(t=e.eventTimes,s=-1;0<i;){var C=31-En(i);f=1<<C,C=t[C],C>s&&(s=C),i&=~f}if(i=s,i=Dt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*$O(i/1960))-i,10<i){e.timeoutHandle=tv(ia.bind(null,e,Er,Hn),i);break}ia(e,Er,Hn);break;case 5:ia(e,Er,Hn);break;default:throw Error(me(329))}}}return xr(e,Dt()),e.callbackNode===r?JT.bind(null,e):null}function Tv(e,t){var r=go;return e.current.memoizedState.isDehydrated&&(ca(e,t).flags|=256),e=df(e,t),e!==2&&(t=Er,Er=r,t!==null&&Sv(t)),e}function Sv(e){Er===null?Er=e:Er.push.apply(Er,e)}function HO(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var s=r[i],f=s.getSnapshot;s=s.value;try{if(!Tn(f(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ei(e,t){for(t&=~kg,t&=~Uf,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-En(t),i=1<<r;e[r]=-1,t&=~i}}function Qy(e){if(Ye&6)throw Error(me(327));ss();var t=zu(e,0);if(!(t&1))return xr(e,Dt()),null;var r=df(e,t);if(e.tag!==0&&r===2){var i=zh(e);i!==0&&(t=i,r=Tv(e,i))}if(r===1)throw r=Ko,ca(e,0),Ei(e,t),xr(e,Dt()),r;if(r===6)throw Error(me(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ia(e,Er,Hn),xr(e,Dt()),null}function Fg(e,t){var r=Ye;Ye|=1;try{return e(t)}finally{Ye=r,Ye===0&&(ms=Dt()+500,kf&&Hi())}}function ma(e){Si!==null&&Si.tag===0&&!(Ye&6)&&ss();var t=Ye;Ye|=1;var r=nn.transition,i=qe;try{if(nn.transition=null,qe=1,e)return e()}finally{qe=i,nn.transition=r,Ye=t,!(Ye&6)&&Hi()}}function Ng(){kr=qa.current,ft(qa)}function ca(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,_O(r)),It!==null)for(r=It.return;r!==null;){var i=r;switch(mg(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Ju();break;case 3:gs(),ft(Tr),ft(er),Pg();break;case 5:Ag(i);break;case 4:gs();break;case 13:ft(mt);break;case 19:ft(mt);break;case 10:Tg(i.type._context);break;case 22:case 23:Ng()}r=r.return}if(Wt=e,It=e=Mi(e.current,null),Vt=kr=t,Ft=0,Ko=null,kg=Uf=pa=0,Er=go=null,ua!==null){for(t=0;t<ua.length;t++)if(r=ua[t],i=r.interleaved,i!==null){r.interleaved=null;var s=i.next,f=r.pending;if(f!==null){var C=f.next;f.next=s,i.next=C}r.pending=i}ua=null}return e}function qT(e,t){do{var r=It;try{if(_g(),wu.current=lf,of){for(var i=yt.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}of=!1}if(ga=0,Bt=bt=yt=null,ho=!1,No=0,Mg.current=null,r===null||r.return===null){Ft=1,Ko=t,It=null;break}e:{var f=e,C=r.return,D=r,o=t;if(t=Vt,D.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){var M=o,I=D,K=I.tag;if(!(I.mode&1)&&(K===0||K===11||K===15)){var b=I.alternate;b?(I.updateQueue=b.updateQueue,I.memoizedState=b.memoizedState,I.lanes=b.lanes):(I.updateQueue=null,I.memoizedState=null)}var W=Ny(C);if(W!==null){W.flags&=-257,Uy(W,C,D,f,t),W.mode&1&&Fy(f,M,t),t=W,o=M;var F=t.updateQueue;if(F===null){var k=new Set;k.add(o),t.updateQueue=k}else F.add(o);break e}else{if(!(t&1)){Fy(f,M,t),Ug();break e}o=Error(me(426))}}else if(vt&&D.mode&1){var N=Ny(C);if(N!==null){!(N.flags&65536)&&(N.flags|=256),Uy(N,C,D,f,t),yg(ps(o,D));break e}}f=o=ps(o,D),Ft!==4&&(Ft=2),go===null?go=[f]:go.push(f),f=C;do{switch(f.tag){case 3:f.flags|=65536,t&=-t,f.lanes|=t;var m=FT(f,o,t);Cy(f,m);break e;case 1:D=o;var p=f.type,u=f.stateNode;if(!(f.flags&128)&&(typeof p.getDerivedStateFromError=="function"||u!==null&&typeof u.componentDidCatch=="function"&&(Oi===null||!Oi.has(u)))){f.flags|=65536,t&=-t,f.lanes|=t;var w=NT(f,D,t);Cy(f,w);break e}}f=f.return}while(f!==null)}rS(r)}catch(A){t=A,It===r&&r!==null&&(It=r=r.return);continue}break}while(1)}function eS(){var e=uf.current;return uf.current=lf,e===null?lf:e}function Ug(){(Ft===0||Ft===3||Ft===2)&&(Ft=4),Wt===null||!(pa&268435455)&&!(Uf&268435455)||Ei(Wt,Vt)}function df(e,t){var r=Ye;Ye|=2;var i=eS();(Wt!==e||Vt!==t)&&(Hn=null,ca(e,t));do try{jO();break}catch(s){qT(e,s)}while(1);if(_g(),Ye=r,uf.current=i,It!==null)throw Error(me(261));return Wt=null,Vt=0,Ft}function jO(){for(;It!==null;)tS(It)}function VO(){for(;It!==null&&!mI();)tS(It)}function tS(e){var t=iS(e.alternate,e,kr);e.memoizedProps=e.pendingProps,t===null?rS(e):It=t,Mg.current=null}function rS(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=BO(r,t),r!==null){r.flags&=32767,It=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ft=6,It=null;return}}else if(r=UO(r,t,kr),r!==null){It=r;return}if(t=t.sibling,t!==null){It=t;return}It=t=e}while(t!==null);Ft===0&&(Ft=5)}function ia(e,t,r){var i=qe,s=nn.transition;try{nn.transition=null,qe=1,zO(e,t,r,i)}finally{nn.transition=s,qe=i}return null}function zO(e,t,r,i){do ss();while(Si!==null);if(Ye&6)throw Error(me(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(me(177));e.callbackNode=null,e.callbackPriority=0;var f=r.lanes|r.childLanes;if(DI(e,f),e===Wt&&(It=Wt=null,Vt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Eu||(Eu=!0,aS(Vu,function(){return ss(),null})),f=(r.flags&15990)!==0,r.subtreeFlags&15990||f){f=nn.transition,nn.transition=null;var C=qe;qe=1;var D=Ye;Ye|=4,Mg.current=null,WO(e,r),QT(r,e),hO(qh),Yu=!!Jh,qh=Jh=null,e.current=r,GO(r),yI(),Ye=D,qe=C,nn.transition=f}else e.current=r;if(Eu&&(Eu=!1,Si=e,cf=s),f=e.pendingLanes,f===0&&(Oi=null),TI(r.stateNode),xr(e,Dt()),t!==null)for(i=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],i(s.value,{componentStack:s.stack,digest:s.digest});if(ff)throw ff=!1,e=Ev,Ev=null,e;return cf&1&&e.tag!==0&&ss(),f=e.pendingLanes,f&1?e===_v?po++:(po=0,_v=e):po=0,Hi(),null}function ss(){if(Si!==null){var e=b_(cf),t=nn.transition,r=qe;try{if(nn.transition=null,qe=16>e?16:e,Si===null)var i=!1;else{if(e=Si,Si=null,cf=0,Ye&6)throw Error(me(331));var s=Ye;for(Ye|=4,Ae=e.current;Ae!==null;){var f=Ae,C=f.child;if(Ae.flags&16){var D=f.deletions;if(D!==null){for(var o=0;o<D.length;o++){var M=D[o];for(Ae=M;Ae!==null;){var I=Ae;switch(I.tag){case 0:case 11:case 15:vo(8,I,f)}var K=I.child;if(K!==null)K.return=I,Ae=K;else for(;Ae!==null;){I=Ae;var b=I.sibling,W=I.return;if(zT(I),I===M){Ae=null;break}if(b!==null){b.return=W,Ae=b;break}Ae=W}}}var F=f.alternate;if(F!==null){var k=F.child;if(k!==null){F.child=null;do{var N=k.sibling;k.sibling=null,k=N}while(k!==null)}}Ae=f}}if(f.subtreeFlags&2064&&C!==null)C.return=f,Ae=C;else e:for(;Ae!==null;){if(f=Ae,f.flags&2048)switch(f.tag){case 0:case 11:case 15:vo(9,f,f.return)}var m=f.sibling;if(m!==null){m.return=f.return,Ae=m;break e}Ae=f.return}}var p=e.current;for(Ae=p;Ae!==null;){C=Ae;var u=C.child;if(C.subtreeFlags&2064&&u!==null)u.return=C,Ae=u;else e:for(C=p;Ae!==null;){if(D=Ae,D.flags&2048)try{switch(D.tag){case 0:case 11:case 15:Nf(9,D)}}catch(A){St(D,D.return,A)}if(D===C){Ae=null;break e}var w=D.sibling;if(w!==null){w.return=D.return,Ae=w;break e}Ae=D.return}}if(Ye=s,Hi(),In&&typeof In.onPostCommitFiberRoot=="function")try{In.onPostCommitFiberRoot(Cf,e)}catch{}i=!0}return i}finally{qe=r,nn.transition=t}}return!1}function Zy(e,t,r){t=ps(r,t),t=FT(e,t,1),e=Ii(e,t,1),t=lr(),e!==null&&(el(e,1,t),xr(e,t))}function St(e,t,r){if(e.tag===3)Zy(e,e,r);else for(;t!==null;){if(t.tag===3){Zy(t,e,r);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Oi===null||!Oi.has(i))){e=ps(r,e),e=NT(t,e,1),t=Ii(t,e,1),e=lr(),t!==null&&(el(t,1,e),xr(t,e));break}}t=t.return}}function YO(e,t,r){var i=e.pingCache;i!==null&&i.delete(t),t=lr(),e.pingedLanes|=e.suspendedLanes&r,Wt===e&&(Vt&r)===r&&(Ft===4||Ft===3&&(Vt&130023424)===Vt&&500>Dt()-bg?ca(e,0):kg|=r),xr(e,t)}function nS(e,t){t===0&&(e.mode&1?(t=uu,uu<<=1,!(uu&130023424)&&(uu=4194304)):t=1);var r=lr();e=qn(e,t),e!==null&&(el(e,t,r),xr(e,r))}function XO(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),nS(e,r)}function QO(e,t){var r=0;switch(e.tag){case 13:var i=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(me(314))}i!==null&&i.delete(t),nS(e,r)}var iS;iS=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Tr.current)_r=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return _r=!1,NO(e,t,r);_r=!!(e.flags&131072)}else _r=!1,vt&&t.flags&1048576&&oT(t,tf,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;ku(e,t),e=t.pendingProps;var s=ds(t,er.current);as(t,r),s=Rg(null,t,i,e,s,r);var f=Cg();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Sr(i)?(f=!0,qu(t)):f=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,xg(t),s.updater=bf,t.stateNode=s,s._reactInternals=t,lv(t,i,e,r),t=cv(null,t,i,!0,f,r)):(t.tag=0,vt&&f&&pg(t),or(null,t,s,r),t=t.child),t;case 16:i=t.elementType;e:{switch(ku(e,t),e=t.pendingProps,s=i._init,i=s(i._payload),t.type=i,s=t.tag=JO(i),e=hn(i,e),s){case 0:t=fv(null,t,i,e,r);break e;case 1:t=Wy(null,t,i,e,r);break e;case 11:t=By(null,t,i,e,r);break e;case 14:t=Ky(null,t,i,hn(i.type,e),r);break e}throw Error(me(306,i,""))}return t;case 0:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:hn(i,s),fv(e,t,i,s,r);case 1:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:hn(i,s),Wy(e,t,i,s,r);case 3:e:{if(WT(t),e===null)throw Error(me(387));i=t.pendingProps,f=t.memoizedState,s=f.element,cT(e,t),af(t,i,null,r);var C=t.memoizedState;if(i=C.element,f.isDehydrated)if(f={element:i,isDehydrated:!1,cache:C.cache,pendingSuspenseBoundaries:C.pendingSuspenseBoundaries,transitions:C.transitions},t.updateQueue.baseState=f,t.memoizedState=f,t.flags&256){s=ps(Error(me(423)),t),t=Gy(e,t,i,r,s);break e}else if(i!==s){s=ps(Error(me(424)),t),t=Gy(e,t,i,r,s);break e}else for(br=Ci(t.stateNode.containerInfo.firstChild),Nr=t,vt=!0,gn=null,r=gT(t,null,i,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(hs(),i===s){t=ei(e,t,r);break e}or(e,t,i,r)}t=t.child}return t;case 5:return pT(t),e===null&&av(t),i=t.type,s=t.pendingProps,f=e!==null?e.memoizedProps:null,C=s.children,ev(i,s)?C=null:f!==null&&ev(i,f)&&(t.flags|=32),KT(e,t),or(e,t,C,r),t.child;case 6:return e===null&&av(t),null;case 13:return GT(e,t,r);case 4:return Lg(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=vs(t,null,i,r):or(e,t,i,r),t.child;case 11:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:hn(i,s),By(e,t,i,s,r);case 7:return or(e,t,t.pendingProps,r),t.child;case 8:return or(e,t,t.pendingProps.children,r),t.child;case 12:return or(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(i=t.type._context,s=t.pendingProps,f=t.memoizedProps,C=s.value,at(rf,i._currentValue),i._currentValue=C,f!==null)if(Tn(f.value,C)){if(f.children===s.children&&!Tr.current){t=ei(e,t,r);break e}}else for(f=t.child,f!==null&&(f.return=t);f!==null;){var D=f.dependencies;if(D!==null){C=f.child;for(var o=D.firstContext;o!==null;){if(o.context===i){if(f.tag===1){o=Xn(-1,r&-r),o.tag=2;var M=f.updateQueue;if(M!==null){M=M.shared;var I=M.pending;I===null?o.next=o:(o.next=I.next,I.next=o),M.pending=o}}f.lanes|=r,o=f.alternate,o!==null&&(o.lanes|=r),sv(f.return,r,t),D.lanes|=r;break}o=o.next}}else if(f.tag===10)C=f.type===t.type?null:f.child;else if(f.tag===18){if(C=f.return,C===null)throw Error(me(341));C.lanes|=r,D=C.alternate,D!==null&&(D.lanes|=r),sv(C,r,t),C=f.sibling}else C=f.child;if(C!==null)C.return=f;else for(C=f;C!==null;){if(C===t){C=null;break}if(f=C.sibling,f!==null){f.return=C.return,C=f;break}C=C.return}f=C}or(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,i=t.pendingProps.children,as(t,r),s=an(s),i=i(s),t.flags|=1,or(e,t,i,r),t.child;case 14:return i=t.type,s=hn(i,t.pendingProps),s=hn(i.type,s),Ky(e,t,i,s,r);case 15:return UT(e,t,t.type,t.pendingProps,r);case 17:return i=t.type,s=t.pendingProps,s=t.elementType===i?s:hn(i,s),ku(e,t),t.tag=1,Sr(i)?(e=!0,qu(t)):e=!1,as(t,r),hT(t,i,s),lv(t,i,s,r),cv(null,t,i,!0,e,r);case 19:return $T(e,t,r);case 22:return BT(e,t,r)}throw Error(me(156,t.tag))};function aS(e,t){return O_(e,t)}function ZO(e,t,r,i){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rn(e,t,r,i){return new ZO(e,t,r,i)}function Bg(e){return e=e.prototype,!(!e||!e.isReactComponent)}function JO(e){if(typeof e=="function")return Bg(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ig)return 11;if(e===ag)return 14}return 2}function Mi(e,t){var r=e.alternate;return r===null?(r=rn(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Nu(e,t,r,i,s,f){var C=2;if(i=e,typeof e=="function")Bg(e)&&(C=1);else if(typeof e=="string")C=5;else e:switch(e){case $a:return da(r.children,s,f,t);case ng:C=8,s|=8;break;case wh:return e=rn(12,r,t,s|2),e.elementType=wh,e.lanes=f,e;case Mh:return e=rn(13,r,t,s),e.elementType=Mh,e.lanes=f,e;case kh:return e=rn(19,r,t,s),e.elementType=kh,e.lanes=f,e;case v_:return Bf(r,s,f,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case d_:C=10;break e;case h_:C=9;break e;case ig:C=11;break e;case ag:C=14;break e;case pi:C=16,i=null;break e}throw Error(me(130,e==null?e:typeof e,""))}return t=rn(C,r,t,s),t.elementType=e,t.type=i,t.lanes=f,t}function da(e,t,r,i){return e=rn(7,e,i,t),e.lanes=r,e}function Bf(e,t,r,i){return e=rn(22,e,i,t),e.elementType=v_,e.lanes=r,e.stateNode={isHidden:!1},e}function fh(e,t,r){return e=rn(6,e,null,t),e.lanes=r,e}function ch(e,t,r){return t=rn(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function qO(e,t,r,i,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jd(0),this.expirationTimes=jd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jd(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Kg(e,t,r,i,s,f,C,D,o){return e=new qO(e,t,r,D,o),t===1?(t=1,f===!0&&(t|=8)):t=0,f=rn(3,null,null,t),e.current=f,f.stateNode=e,f.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},xg(f),e}function ew(e,t,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ga,key:i==null?null:""+i,children:e,containerInfo:t,implementation:r}}function sS(e){if(!e)return Bi;e=e._reactInternals;e:{if(Sa(e)!==e||e.tag!==1)throw Error(me(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Sr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(me(171))}if(e.tag===1){var r=e.type;if(Sr(r))return aT(e,r,t)}return t}function oS(e,t,r,i,s,f,C,D,o){return e=Kg(r,i,!0,e,s,f,C,D,o),e.context=sS(null),r=e.current,i=lr(),s=wi(r),f=Xn(i,s),f.callback=t??null,Ii(r,f,s),e.current.lanes=s,el(e,s,i),xr(e,i),e}function Kf(e,t,r,i){var s=t.current,f=lr(),C=wi(s);return r=sS(r),t.context===null?t.context=r:t.pendingContext=r,t=Xn(f,C),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=Ii(s,t,C),e!==null&&(_n(e,s,C,f),Ou(e,s,C)),C}function hf(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Jy(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Wg(e,t){Jy(e,t),(e=e.alternate)&&Jy(e,t)}function tw(){return null}var lS=typeof reportError=="function"?reportError:function(e){console.error(e)};function Gg(e){this._internalRoot=e}Wf.prototype.render=Gg.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(me(409));Kf(e,t,null,null)};Wf.prototype.unmount=Gg.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ma(function(){Kf(null,e,null,null)}),t[Jn]=null}};function Wf(e){this._internalRoot=e}Wf.prototype.unstable_scheduleHydration=function(e){if(e){var t=U_();e={blockedOn:null,target:e,priority:t};for(var r=0;r<yi.length&&t!==0&&t<yi[r].priority;r++);yi.splice(r,0,e),r===0&&K_(e)}};function $g(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Gf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function qy(){}function rw(e,t,r,i,s){if(s){if(typeof i=="function"){var f=i;i=function(){var M=hf(C);f.call(M)}}var C=oS(t,i,e,0,null,!1,!1,"",qy);return e._reactRootContainer=C,e[Jn]=C.current,wo(e.nodeType===8?e.parentNode:e),ma(),C}for(;s=e.lastChild;)e.removeChild(s);if(typeof i=="function"){var D=i;i=function(){var M=hf(o);D.call(M)}}var o=Kg(e,0,!1,null,null,!1,!1,"",qy);return e._reactRootContainer=o,e[Jn]=o.current,wo(e.nodeType===8?e.parentNode:e),ma(function(){Kf(t,o,r,i)}),o}function $f(e,t,r,i,s){var f=r._reactRootContainer;if(f){var C=f;if(typeof s=="function"){var D=s;s=function(){var o=hf(C);D.call(o)}}Kf(t,C,e,s)}else C=rw(r,t,e,s,i);return hf(C)}F_=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=no(t.pendingLanes);r!==0&&(lg(t,r|1),xr(t,Dt()),!(Ye&6)&&(ms=Dt()+500,Hi()))}break;case 13:ma(function(){var i=qn(e,1);if(i!==null){var s=lr();_n(i,e,1,s)}}),Wg(e,1)}};ug=function(e){if(e.tag===13){var t=qn(e,134217728);if(t!==null){var r=lr();_n(t,e,134217728,r)}Wg(e,134217728)}};N_=function(e){if(e.tag===13){var t=wi(e),r=qn(e,t);if(r!==null){var i=lr();_n(r,e,t,i)}Wg(e,t)}};U_=function(){return qe};B_=function(e,t){var r=qe;try{return qe=e,t()}finally{qe=r}};Hh=function(e,t,r){switch(t){case"input":if(Nh(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var i=r[t];if(i!==e&&i.form===e.form){var s=Mf(i);if(!s)throw Error(me(90));p_(i),Nh(i,s)}}}break;case"textarea":y_(e,r);break;case"select":t=r.value,t!=null&&ts(e,!!r.multiple,t,!1)}};A_=Fg;P_=ma;var nw={usingClientEntryPoint:!1,Events:[rl,za,Mf,x_,L_,Fg]},Zs={findFiberByHostInstance:la,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},iw={bundleType:Zs.bundleType,version:Zs.version,rendererPackageName:Zs.rendererPackageName,rendererConfig:Zs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ri.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=C_(e),e===null?null:e.stateNode},findFiberByHostInstance:Zs.findFiberByHostInstance||tw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _u=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_u.isDisabled&&_u.supportsFiber)try{Cf=_u.inject(iw),In=_u}catch{}}Kr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nw;Kr.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$g(t))throw Error(me(200));return ew(e,t,null,r)};Kr.createRoot=function(e,t){if(!$g(e))throw Error(me(299));var r=!1,i="",s=lS;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Kg(e,1,!1,null,null,r,!1,i,s),e[Jn]=t.current,wo(e.nodeType===8?e.parentNode:e),new Gg(t)};Kr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(me(188)):(e=Object.keys(e).join(","),Error(me(268,e)));return e=C_(t),e=e===null?null:e.stateNode,e};Kr.flushSync=function(e){return ma(e)};Kr.hydrate=function(e,t,r){if(!Gf(t))throw Error(me(200));return $f(null,e,t,!0,r)};Kr.hydrateRoot=function(e,t,r){if(!$g(e))throw Error(me(405));var i=r!=null&&r.hydratedSources||null,s=!1,f="",C=lS;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onRecoverableError!==void 0&&(C=r.onRecoverableError)),t=oS(t,null,e,1,r??null,s,!1,f,C),e[Jn]=t.current,wo(e),i)for(e=0;e<i.length;e++)r=i[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new Wf(t)};Kr.render=function(e,t,r){if(!Gf(t))throw Error(me(200));return $f(null,e,t,!1,r)};Kr.unmountComponentAtNode=function(e){if(!Gf(e))throw Error(me(40));return e._reactRootContainer?(ma(function(){$f(null,null,e,!1,function(){e._reactRootContainer=null,e[Jn]=null})}),!0):!1};Kr.unstable_batchedUpdates=Fg;Kr.unstable_renderSubtreeIntoContainer=function(e,t,r,i){if(!Gf(r))throw Error(me(200));if(e==null||e._reactInternals===void 0)throw Error(me(38));return $f(e,t,r,!1,i)};Kr.version="18.2.0-next-9e3b772b8-20220608";(function(e){function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(r){console.error(r)}}t(),e.exports=Kr})(tI);var uS,eE=xo;uS=eE.createRoot,eE.hydrateRoot;var xv={},aw={get exports(){return xv},set exports(e){xv=e}},fS={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ys=oe;function sw(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ow=typeof Object.is=="function"?Object.is:sw,lw=ys.useState,uw=ys.useEffect,fw=ys.useLayoutEffect,cw=ys.useDebugValue;function dw(e,t){var r=t(),i=lw({inst:{value:r,getSnapshot:t}}),s=i[0].inst,f=i[1];return fw(function(){s.value=r,s.getSnapshot=t,dh(s)&&f({inst:s})},[e,r,t]),uw(function(){return dh(s)&&f({inst:s}),e(function(){dh(s)&&f({inst:s})})},[e]),cw(r),r}function dh(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!ow(e,r)}catch{return!0}}function hw(e,t){return t()}var vw=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?hw:dw;fS.useSyncExternalStore=ys.useSyncExternalStore!==void 0?ys.useSyncExternalStore:vw;(function(e){e.exports=fS})(aw);var Lv={},gw={get exports(){return Lv},set exports(e){Lv=e}},cS={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hf=oe,pw=xv;function mw(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var yw=typeof Object.is=="function"?Object.is:mw,Ew=pw.useSyncExternalStore,_w=Hf.useRef,Tw=Hf.useEffect,Sw=Hf.useMemo,xw=Hf.useDebugValue;cS.useSyncExternalStoreWithSelector=function(e,t,r,i,s){var f=_w(null);if(f.current===null){var C={hasValue:!1,value:null};f.current=C}else C=f.current;f=Sw(function(){function o(W){if(!M){if(M=!0,I=W,W=i(W),s!==void 0&&C.hasValue){var F=C.value;if(s(F,W))return K=F}return K=W}if(F=K,yw(I,W))return F;var k=i(W);return s!==void 0&&s(F,k)?F:(I=W,K=k)}var M=!1,I,K,b=r===void 0?null:r;return[function(){return o(t())},b===null?void 0:function(){return o(b())}]},[t,r,i,s]);var D=Ew(e,f[0],f[1]);return Tw(function(){C.hasValue=!0,C.value=D},[D]),xw(D),D};(function(e){e.exports=cS})(gw);function Lw(e){e()}let dS=Lw;const Aw=e=>dS=e,Pw=()=>dS,Ki=oe.createContext(null);function hS(){return oe.useContext(Ki)}const Dw=()=>{throw new Error("uSES not initialized!")};let vS=Dw;const Rw=e=>{vS=e},Cw=(e,t)=>e===t;function Iw(e=Ki){const t=e===Ki?hS:()=>oe.useContext(e);return function(i,s=Cw){const{store:f,subscription:C,getServerState:D}=t(),o=vS(C.addNestedSub,f.getState,D||f.getState,i,s);return oe.useDebugValue(o),o}}const Ow=Iw();var Av={},ww={get exports(){return Av},set exports(e){Av=e}},et={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gt=typeof Symbol=="function"&&Symbol.for,Hg=Gt?Symbol.for("react.element"):60103,jg=Gt?Symbol.for("react.portal"):60106,jf=Gt?Symbol.for("react.fragment"):60107,Vf=Gt?Symbol.for("react.strict_mode"):60108,zf=Gt?Symbol.for("react.profiler"):60114,Yf=Gt?Symbol.for("react.provider"):60109,Xf=Gt?Symbol.for("react.context"):60110,Vg=Gt?Symbol.for("react.async_mode"):60111,Qf=Gt?Symbol.for("react.concurrent_mode"):60111,Zf=Gt?Symbol.for("react.forward_ref"):60112,Jf=Gt?Symbol.for("react.suspense"):60113,Mw=Gt?Symbol.for("react.suspense_list"):60120,qf=Gt?Symbol.for("react.memo"):60115,ec=Gt?Symbol.for("react.lazy"):60116,kw=Gt?Symbol.for("react.block"):60121,bw=Gt?Symbol.for("react.fundamental"):60117,Fw=Gt?Symbol.for("react.responder"):60118,Nw=Gt?Symbol.for("react.scope"):60119;function Gr(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Hg:switch(e=e.type,e){case Vg:case Qf:case jf:case zf:case Vf:case Jf:return e;default:switch(e=e&&e.$$typeof,e){case Xf:case Zf:case ec:case qf:case Yf:return e;default:return t}}case jg:return t}}}function gS(e){return Gr(e)===Qf}et.AsyncMode=Vg;et.ConcurrentMode=Qf;et.ContextConsumer=Xf;et.ContextProvider=Yf;et.Element=Hg;et.ForwardRef=Zf;et.Fragment=jf;et.Lazy=ec;et.Memo=qf;et.Portal=jg;et.Profiler=zf;et.StrictMode=Vf;et.Suspense=Jf;et.isAsyncMode=function(e){return gS(e)||Gr(e)===Vg};et.isConcurrentMode=gS;et.isContextConsumer=function(e){return Gr(e)===Xf};et.isContextProvider=function(e){return Gr(e)===Yf};et.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Hg};et.isForwardRef=function(e){return Gr(e)===Zf};et.isFragment=function(e){return Gr(e)===jf};et.isLazy=function(e){return Gr(e)===ec};et.isMemo=function(e){return Gr(e)===qf};et.isPortal=function(e){return Gr(e)===jg};et.isProfiler=function(e){return Gr(e)===zf};et.isStrictMode=function(e){return Gr(e)===Vf};et.isSuspense=function(e){return Gr(e)===Jf};et.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===jf||e===Qf||e===zf||e===Vf||e===Jf||e===Mw||typeof e=="object"&&e!==null&&(e.$$typeof===ec||e.$$typeof===qf||e.$$typeof===Yf||e.$$typeof===Xf||e.$$typeof===Zf||e.$$typeof===bw||e.$$typeof===Fw||e.$$typeof===Nw||e.$$typeof===kw)};et.typeOf=Gr;(function(e){e.exports=et})(ww);var pS=Av,Uw={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Bw={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},mS={};mS[pS.ForwardRef]=Uw;mS[pS.Memo]=Bw;var tE={},Kw={get exports(){return tE},set exports(e){tE=e}},tt={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zg=Symbol.for("react.element"),Yg=Symbol.for("react.portal"),tc=Symbol.for("react.fragment"),rc=Symbol.for("react.strict_mode"),nc=Symbol.for("react.profiler"),ic=Symbol.for("react.provider"),ac=Symbol.for("react.context"),Ww=Symbol.for("react.server_context"),sc=Symbol.for("react.forward_ref"),oc=Symbol.for("react.suspense"),lc=Symbol.for("react.suspense_list"),uc=Symbol.for("react.memo"),fc=Symbol.for("react.lazy"),Gw=Symbol.for("react.offscreen"),yS;yS=Symbol.for("react.module.reference");function on(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case zg:switch(e=e.type,e){case tc:case nc:case rc:case oc:case lc:return e;default:switch(e=e&&e.$$typeof,e){case Ww:case ac:case sc:case fc:case uc:case ic:return e;default:return t}}case Yg:return t}}}tt.ContextConsumer=ac;tt.ContextProvider=ic;tt.Element=zg;tt.ForwardRef=sc;tt.Fragment=tc;tt.Lazy=fc;tt.Memo=uc;tt.Portal=Yg;tt.Profiler=nc;tt.StrictMode=rc;tt.Suspense=oc;tt.SuspenseList=lc;tt.isAsyncMode=function(){return!1};tt.isConcurrentMode=function(){return!1};tt.isContextConsumer=function(e){return on(e)===ac};tt.isContextProvider=function(e){return on(e)===ic};tt.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===zg};tt.isForwardRef=function(e){return on(e)===sc};tt.isFragment=function(e){return on(e)===tc};tt.isLazy=function(e){return on(e)===fc};tt.isMemo=function(e){return on(e)===uc};tt.isPortal=function(e){return on(e)===Yg};tt.isProfiler=function(e){return on(e)===nc};tt.isStrictMode=function(e){return on(e)===rc};tt.isSuspense=function(e){return on(e)===oc};tt.isSuspenseList=function(e){return on(e)===lc};tt.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===tc||e===nc||e===rc||e===oc||e===lc||e===Gw||typeof e=="object"&&e!==null&&(e.$$typeof===fc||e.$$typeof===uc||e.$$typeof===ic||e.$$typeof===ac||e.$$typeof===sc||e.$$typeof===yS||e.getModuleId!==void 0)};tt.typeOf=on;(function(e){e.exports=tt})(Kw);function $w(){const e=Pw();let t=null,r=null;return{clear(){t=null,r=null},notify(){e(()=>{let i=t;for(;i;)i.callback(),i=i.next})},get(){let i=[],s=t;for(;s;)i.push(s),s=s.next;return i},subscribe(i){let s=!0,f=r={callback:i,next:null,prev:r};return f.prev?f.prev.next=f:t=f,function(){!s||t===null||(s=!1,f.next?f.next.prev=f.prev:r=f.prev,f.prev?f.prev.next=f.next:t=f.next)}}}}const rE={notify(){},get:()=>[]};function Hw(e,t){let r,i=rE;function s(K){return o(),i.subscribe(K)}function f(){i.notify()}function C(){I.onStateChange&&I.onStateChange()}function D(){return Boolean(r)}function o(){r||(r=t?t.addNestedSub(C):e.subscribe(C),i=$w())}function M(){r&&(r(),r=void 0,i.clear(),i=rE)}const I={addNestedSub:s,notifyNestedSubs:f,handleChangeWrapper:C,isSubscribed:D,trySubscribe:o,tryUnsubscribe:M,getListeners:()=>i};return I}const jw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Vw=jw?oe.useLayoutEffect:oe.useEffect;function zw({store:e,context:t,children:r,serverState:i}){const s=oe.useMemo(()=>{const D=Hw(e);return{store:e,subscription:D,getServerState:i?()=>i:void 0}},[e,i]),f=oe.useMemo(()=>e.getState(),[e]);Vw(()=>{const{subscription:D}=s;return D.onStateChange=D.notifyNestedSubs,D.trySubscribe(),f!==e.getState()&&D.notifyNestedSubs(),()=>{D.tryUnsubscribe(),D.onStateChange=void 0}},[s,f]);const C=t||Ki;return o_.createElement(C.Provider,{value:s},r)}function ES(e=Ki){const t=e===Ki?hS:()=>oe.useContext(e);return function(){const{store:i}=t();return i}}const Yw=ES();function Xw(e=Ki){const t=e===Ki?Yw:ES(e);return function(){return t().dispatch}}const Qw=Xw();Rw(Lv.useSyncExternalStoreWithSelector);Aw(xo.unstable_batchedUpdates);/**
 * @remix-run/router v1.4.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wo(){return Wo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Wo.apply(this,arguments)}var xi;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(xi||(xi={}));const nE="popstate";function Zw(e){e===void 0&&(e={});function t(s,f){let{pathname:C="/",search:D="",hash:o=""}=xa(s.location.hash.substr(1));return Pv("",{pathname:C,search:D,hash:o},f.state&&f.state.usr||null,f.state&&f.state.key||"default")}function r(s,f){let C=s.document.querySelector("base"),D="";if(C&&C.getAttribute("href")){let o=s.location.href,M=o.indexOf("#");D=M===-1?o:o.slice(0,M)}return D+"#"+(typeof f=="string"?f:vf(f))}function i(s,f){cc(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(f)+")")}return qw(t,r,i,e)}function Ot(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function cc(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Jw(){return Math.random().toString(36).substr(2,8)}function iE(e,t){return{usr:e.state,key:e.key,idx:t}}function Pv(e,t,r,i){return r===void 0&&(r=null),Wo({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?xa(t):t,{state:r,key:t&&t.key||i||Jw()})}function vf(e){let{pathname:t="/",search:r="",hash:i=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function xa(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}function qw(e,t,r,i){i===void 0&&(i={});let{window:s=document.defaultView,v5Compat:f=!1}=i,C=s.history,D=xi.Pop,o=null,M=I();M==null&&(M=0,C.replaceState(Wo({},C.state,{idx:M}),""));function I(){return(C.state||{idx:null}).idx}function K(){D=xi.Pop;let N=I(),m=N==null?null:N-M;M=N,o&&o({action:D,location:k.location,delta:m})}function b(N,m){D=xi.Push;let p=Pv(k.location,N,m);r&&r(p,N),M=I()+1;let u=iE(p,M),w=k.createHref(p);try{C.pushState(u,"",w)}catch{s.location.assign(w)}f&&o&&o({action:D,location:k.location,delta:1})}function W(N,m){D=xi.Replace;let p=Pv(k.location,N,m);r&&r(p,N),M=I();let u=iE(p,M),w=k.createHref(p);C.replaceState(u,"",w),f&&o&&o({action:D,location:k.location,delta:0})}function F(N){let m=s.location.origin!=="null"?s.location.origin:s.location.href,p=typeof N=="string"?N:vf(N);return Ot(m,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,m)}let k={get action(){return D},get location(){return e(s,C)},listen(N){if(o)throw new Error("A history only accepts one active listener");return s.addEventListener(nE,K),o=N,()=>{s.removeEventListener(nE,K),o=null}},createHref(N){return t(s,N)},createURL:F,encodeLocation(N){let m=F(N);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:b,replace:W,go(N){return C.go(N)}};return k}var aE;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(aE||(aE={}));function eM(e,t,r){r===void 0&&(r="/");let i=typeof t=="string"?xa(t):t,s=Xg(i.pathname||"/",r);if(s==null)return null;let f=_S(e);tM(f);let C=null;for(let D=0;C==null&&D<f.length;++D)C=fM(f[D],hM(s));return C}function _S(e,t,r,i){t===void 0&&(t=[]),r===void 0&&(r=[]),i===void 0&&(i="");let s=(f,C,D)=>{let o={relativePath:D===void 0?f.path||"":D,caseSensitive:f.caseSensitive===!0,childrenIndex:C,route:f};o.relativePath.startsWith("/")&&(Ot(o.relativePath.startsWith(i),'Absolute route path "'+o.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),o.relativePath=o.relativePath.slice(i.length));let M=ki([i,o.relativePath]),I=r.concat(o);f.children&&f.children.length>0&&(Ot(f.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+M+'".')),_S(f.children,t,I,M)),!(f.path==null&&!f.index)&&t.push({path:M,score:lM(M,f.index),routesMeta:I})};return e.forEach((f,C)=>{var D;if(f.path===""||!((D=f.path)!=null&&D.includes("?")))s(f,C);else for(let o of TS(f.path))s(f,C,o)}),t}function TS(e){let t=e.split("/");if(t.length===0)return[];let[r,...i]=t,s=r.endsWith("?"),f=r.replace(/\?$/,"");if(i.length===0)return s?[f,""]:[f];let C=TS(i.join("/")),D=[];return D.push(...C.map(o=>o===""?f:[f,o].join("/"))),s&&D.push(...C),D.map(o=>e.startsWith("/")&&o===""?"/":o)}function tM(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:uM(t.routesMeta.map(i=>i.childrenIndex),r.routesMeta.map(i=>i.childrenIndex)))}const rM=/^:\w+$/,nM=3,iM=2,aM=1,sM=10,oM=-2,sE=e=>e==="*";function lM(e,t){let r=e.split("/"),i=r.length;return r.some(sE)&&(i+=oM),t&&(i+=iM),r.filter(s=>!sE(s)).reduce((s,f)=>s+(rM.test(f)?nM:f===""?aM:sM),i)}function uM(e,t){return e.length===t.length&&e.slice(0,-1).every((i,s)=>i===t[s])?e[e.length-1]-t[t.length-1]:0}function fM(e,t){let{routesMeta:r}=e,i={},s="/",f=[];for(let C=0;C<r.length;++C){let D=r[C],o=C===r.length-1,M=s==="/"?t:t.slice(s.length)||"/",I=cM({path:D.relativePath,caseSensitive:D.caseSensitive,end:o},M);if(!I)return null;Object.assign(i,I.params);let K=D.route;f.push({params:i,pathname:ki([s,I.pathname]),pathnameBase:mM(ki([s,I.pathnameBase])),route:K}),I.pathnameBase!=="/"&&(s=ki([s,I.pathnameBase]))}return f}function cM(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,i]=dM(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let f=s[0],C=f.replace(/(.)\/+$/,"$1"),D=s.slice(1);return{params:i.reduce((M,I,K)=>{if(I==="*"){let b=D[K]||"";C=f.slice(0,f.length-b.length).replace(/(.)\/+$/,"$1")}return M[I]=vM(D[K]||"",I),M},{}),pathname:f,pathnameBase:C,pattern:e}}function dM(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),cc(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let i=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(C,D)=>(i.push(D),"/([^\\/]+)"));return e.endsWith("*")?(i.push("*"),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),i]}function hM(e){try{return decodeURI(e)}catch(t){return cc(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function vM(e,t){try{return decodeURIComponent(e)}catch(r){return cc(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+r+").")),e}}function Xg(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,i=e.charAt(r);return i&&i!=="/"?null:e.slice(r)||"/"}function gM(e,t){t===void 0&&(t="/");let{pathname:r,search:i="",hash:s=""}=typeof e=="string"?xa(e):e;return{pathname:r?r.startsWith("/")?r:pM(r,t):t,search:yM(i),hash:EM(s)}}function pM(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function hh(e,t,r,i){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function SS(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function xS(e,t,r,i){i===void 0&&(i=!1);let s;typeof e=="string"?s=xa(e):(s=Wo({},e),Ot(!s.pathname||!s.pathname.includes("?"),hh("?","pathname","search",s)),Ot(!s.pathname||!s.pathname.includes("#"),hh("#","pathname","hash",s)),Ot(!s.search||!s.search.includes("#"),hh("#","search","hash",s)));let f=e===""||s.pathname==="",C=f?"/":s.pathname,D;if(i||C==null)D=r;else{let K=t.length-1;if(C.startsWith("..")){let b=C.split("/");for(;b[0]==="..";)b.shift(),K-=1;s.pathname=b.join("/")}D=K>=0?t[K]:"/"}let o=gM(s,D),M=C&&C!=="/"&&C.endsWith("/"),I=(f||C===".")&&r.endsWith("/");return!o.pathname.endsWith("/")&&(M||I)&&(o.pathname+="/"),o}const ki=e=>e.join("/").replace(/\/\/+/g,"/"),mM=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),yM=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,EM=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function _M(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const TM=["post","put","patch","delete"];[...TM];/**
 * React Router v6.9.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function SM(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}const xM=typeof Object.is=="function"?Object.is:SM,{useState:LM,useEffect:AM,useLayoutEffect:PM,useDebugValue:DM}=Ch;function RM(e,t,r){const i=t(),[{inst:s},f]=LM({inst:{value:i,getSnapshot:t}});return PM(()=>{s.value=i,s.getSnapshot=t,vh(s)&&f({inst:s})},[e,i,t]),AM(()=>(vh(s)&&f({inst:s}),e(()=>{vh(s)&&f({inst:s})})),[e]),DM(i),i}function vh(e){const t=e.getSnapshot,r=e.value;try{const i=t();return!xM(r,i)}catch{return!0}}function CM(e,t,r){return t()}const IM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",OM=!IM,wM=OM?CM:RM;"useSyncExternalStore"in Ch&&(e=>e.useSyncExternalStore)(Ch);const LS=oe.createContext(null),Qg=oe.createContext(null),il=oe.createContext(null),dc=oe.createContext(null),ji=oe.createContext({outlet:null,matches:[]}),AS=oe.createContext(null);function Dv(){return Dv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Dv.apply(this,arguments)}function MM(e,t){let{relative:r}=t===void 0?{}:t;xs()||Ot(!1);let{basename:i,navigator:s}=oe.useContext(il),{hash:f,pathname:C,search:D}=PS(e,{relative:r}),o=C;return i!=="/"&&(o=C==="/"?i:ki([i,C])),s.createHref({pathname:o,search:D,hash:f})}function xs(){return oe.useContext(dc)!=null}function Ls(){return xs()||Ot(!1),oe.useContext(dc).location}function al(){xs()||Ot(!1);let{basename:e,navigator:t}=oe.useContext(il),{matches:r}=oe.useContext(ji),{pathname:i}=Ls(),s=JSON.stringify(SS(r).map(D=>D.pathnameBase)),f=oe.useRef(!1);return oe.useEffect(()=>{f.current=!0}),oe.useCallback(function(D,o){if(o===void 0&&(o={}),!f.current)return;if(typeof D=="number"){t.go(D);return}let M=xS(D,JSON.parse(s),i,o.relative==="path");e!=="/"&&(M.pathname=M.pathname==="/"?e:ki([e,M.pathname])),(o.replace?t.replace:t.push)(M,o.state,o)},[e,t,s,i])}const kM=oe.createContext(null);function bM(e){let t=oe.useContext(ji).outlet;return t&&oe.createElement(kM.Provider,{value:e},t)}function FM(){let{matches:e}=oe.useContext(ji),t=e[e.length-1];return t?t.params:{}}function PS(e,t){let{relative:r}=t===void 0?{}:t,{matches:i}=oe.useContext(ji),{pathname:s}=Ls(),f=JSON.stringify(SS(i).map(C=>C.pathnameBase));return oe.useMemo(()=>xS(e,JSON.parse(f),s,r==="path"),[e,f,s,r])}function NM(e,t){xs()||Ot(!1);let{navigator:r}=oe.useContext(il),i=oe.useContext(Qg),{matches:s}=oe.useContext(ji),f=s[s.length-1],C=f?f.params:{};f&&f.pathname;let D=f?f.pathnameBase:"/";f&&f.route;let o=Ls(),M;if(t){var I;let k=typeof t=="string"?xa(t):t;D==="/"||(I=k.pathname)!=null&&I.startsWith(D)||Ot(!1),M=k}else M=o;let K=M.pathname||"/",b=D==="/"?K:K.slice(D.length)||"/",W=eM(e,{pathname:b}),F=WM(W&&W.map(k=>Object.assign({},k,{params:Object.assign({},C,k.params),pathname:ki([D,r.encodeLocation?r.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?D:ki([D,r.encodeLocation?r.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),s,i||void 0);return t&&F?oe.createElement(dc.Provider,{value:{location:Dv({pathname:"/",search:"",hash:"",state:null,key:"default"},M),navigationType:xi.Pop}},F):F}function UM(){let e=jM(),t=_M(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},f=null;return oe.createElement(oe.Fragment,null,oe.createElement("h2",null,"Unexpected Application Error!"),oe.createElement("h3",{style:{fontStyle:"italic"}},t),r?oe.createElement("pre",{style:s},r):null,f)}class BM extends oe.Component{constructor(t){super(t),this.state={location:t.location,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location?{error:t.error,location:t.location}:{error:t.error||r.error,location:r.location}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error?oe.createElement(ji.Provider,{value:this.props.routeContext},oe.createElement(AS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function KM(e){let{routeContext:t,match:r,children:i}=e,s=oe.useContext(LS);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),oe.createElement(ji.Provider,{value:t},i)}function WM(e,t,r){if(t===void 0&&(t=[]),e==null)if(r!=null&&r.errors)e=r.matches;else return null;let i=e,s=r==null?void 0:r.errors;if(s!=null){let f=i.findIndex(C=>C.route.id&&(s==null?void 0:s[C.route.id]));f>=0||Ot(!1),i=i.slice(0,Math.min(i.length,f+1))}return i.reduceRight((f,C,D)=>{let o=C.route.id?s==null?void 0:s[C.route.id]:null,M=null;r&&(C.route.ErrorBoundary?M=oe.createElement(C.route.ErrorBoundary,null):C.route.errorElement?M=C.route.errorElement:M=oe.createElement(UM,null));let I=t.concat(i.slice(0,D+1)),K=()=>{let b=f;return o?b=M:C.route.Component?b=oe.createElement(C.route.Component,null):C.route.element&&(b=C.route.element),oe.createElement(KM,{match:C,routeContext:{outlet:f,matches:I},children:b})};return r&&(C.route.ErrorBoundary||C.route.errorElement||D===0)?oe.createElement(BM,{location:r.location,component:M,error:o,children:K(),routeContext:{outlet:null,matches:I}}):K()},null)}var oE;(function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator"})(oE||(oE={}));var gf;(function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"})(gf||(gf={}));function GM(e){let t=oe.useContext(Qg);return t||Ot(!1),t}function $M(e){let t=oe.useContext(ji);return t||Ot(!1),t}function HM(e){let t=$M(),r=t.matches[t.matches.length-1];return r.route.id||Ot(!1),r.route.id}function jM(){var e;let t=oe.useContext(AS),r=GM(gf.UseRouteError),i=HM(gf.UseRouteError);return t||((e=r.errors)==null?void 0:e[i])}function VM(e){let{to:t,replace:r,state:i,relative:s}=e;xs()||Ot(!1);let f=oe.useContext(Qg),C=al();return oe.useEffect(()=>{f&&f.navigation.state!=="idle"||C(t,{replace:r,state:i,relative:s})}),null}function zM(e){return bM(e.context)}function Wa(e){Ot(!1)}function YM(e){let{basename:t="/",children:r=null,location:i,navigationType:s=xi.Pop,navigator:f,static:C=!1}=e;xs()&&Ot(!1);let D=t.replace(/^\/*/,"/"),o=oe.useMemo(()=>({basename:D,navigator:f,static:C}),[D,f,C]);typeof i=="string"&&(i=xa(i));let{pathname:M="/",search:I="",hash:K="",state:b=null,key:W="default"}=i,F=oe.useMemo(()=>{let k=Xg(M,D);return k==null?null:{location:{pathname:k,search:I,hash:K,state:b,key:W},navigationType:s}},[D,M,I,K,b,W,s]);return F==null?null:oe.createElement(il.Provider,{value:o},oe.createElement(dc.Provider,{children:r,value:F}))}function XM(e){let{children:t,location:r}=e,i=oe.useContext(LS),s=i&&!t?i.router.routes:Rv(t);return NM(s,r)}var lE;(function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"})(lE||(lE={}));new Promise(()=>{});function Rv(e,t){t===void 0&&(t=[]);let r=[];return oe.Children.forEach(e,(i,s)=>{if(!oe.isValidElement(i))return;if(i.type===oe.Fragment){r.push.apply(r,Rv(i.props.children,t));return}i.type!==Wa&&Ot(!1),!i.props.index||!i.props.children||Ot(!1);let f=[...t,s],C={id:i.props.id||f.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(C.children=Rv(i.props.children,f)),r.push(C)}),r}/**
 * React Router DOM v6.9.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cv(){return Cv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Cv.apply(this,arguments)}function QM(e,t){if(e==null)return{};var r={},i=Object.keys(e),s,f;for(f=0;f<i.length;f++)s=i[f],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function ZM(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function JM(e,t){return e.button===0&&(!t||t==="_self")&&!ZM(e)}function Iv(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,r)=>{let i=e[r];return t.concat(Array.isArray(i)?i.map(s=>[r,s]):[[r,i]])},[]))}function qM(e,t){let r=Iv(e);if(t)for(let i of t.keys())r.has(i)||t.getAll(i).forEach(s=>{r.append(i,s)});return r}const ek=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function tk(e){let{basename:t,children:r,window:i}=e,s=oe.useRef();s.current==null&&(s.current=Zw({window:i,v5Compat:!0}));let f=s.current,[C,D]=oe.useState({action:f.action,location:f.location});return oe.useLayoutEffect(()=>f.listen(D),[f]),oe.createElement(YM,{basename:t,children:r,location:C.location,navigationType:C.action,navigator:f})}const rk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",nk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,sl=oe.forwardRef(function(t,r){let{onClick:i,relative:s,reloadDocument:f,replace:C,state:D,target:o,to:M,preventScrollReset:I}=t,K=QM(t,ek),{basename:b}=oe.useContext(il),W,F=!1;if(typeof M=="string"&&nk.test(M)&&(W=M,rk)){let p=new URL(window.location.href),u=M.startsWith("//")?new URL(p.protocol+M):new URL(M),w=Xg(u.pathname,b);u.origin===p.origin&&w!=null?M=w+u.search+u.hash:F=!0}let k=MM(M,{relative:s}),N=ik(M,{replace:C,state:D,target:o,preventScrollReset:I,relative:s});function m(p){i&&i(p),p.defaultPrevented||N(p)}return oe.createElement("a",Cv({},K,{href:W||k,onClick:F||f?i:m,ref:r,target:o}))});var uE;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(uE||(uE={}));var fE;(function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(fE||(fE={}));function ik(e,t){let{target:r,replace:i,state:s,preventScrollReset:f,relative:C}=t===void 0?{}:t,D=al(),o=Ls(),M=PS(e,{relative:C});return oe.useCallback(I=>{if(JM(I,r)){I.preventDefault();let K=i!==void 0?i:vf(o)===vf(M);D(e,{replace:K,state:s,preventScrollReset:f,relative:C})}},[o,D,M,i,s,r,e,f,C])}function Zg(e){let t=oe.useRef(Iv(e)),r=oe.useRef(!1),i=Ls(),s=oe.useMemo(()=>qM(i.search,r.current?null:t.current),[i.search]),f=al(),C=oe.useCallback((D,o)=>{const M=Iv(typeof D=="function"?D(s):D);r.current=!0,f("?"+M,o)},[f,s]);return[s,C]}var Ov={},ak={get exports(){return Ov},set exports(e){Ov=e}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function r(){for(var i=[],s=0;s<arguments.length;s++){var f=arguments[s];if(f){var C=typeof f;if(C==="string"||C==="number")i.push(f);else if(Array.isArray(f)){if(f.length){var D=r.apply(null,f);D&&i.push(D)}}else if(C==="object"){if(f.toString!==Object.prototype.toString&&!f.toString.toString().includes("[native code]")){i.push(f.toString());continue}for(var o in f)t.call(f,o)&&f[o]&&i.push(o)}}}return i.join(" ")}e.exports?(r.default=r,e.exports=r):window.classNames=r})()})(ak);const Kt=Ov,hc=()=>Qw(),tr=Ow;function DS(e,t){const[r,i]=oe.useState(()=>{if(typeof window>"u")return t;try{const f=window.localStorage.getItem(e);return f?JSON.parse(f):t}catch{return t}});return[f=>{const C=f instanceof Function?f(r):f;i(C),typeof window<"u"&&window.localStorage.setItem(e,JSON.stringify(C))}]}function sk(){const[e,t]=oe.useState({width:0,height:0});return oe.useEffect(()=>{function r(){t({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",r),r(),()=>window.removeEventListener("resize",r)},[]),e}function mn(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map(function(s){return"'"+s+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Wi(e){return!!e&&!!e[ht]}function ti(e){var t;return!!e&&(function(r){if(!r||typeof r!="object")return!1;var i=Object.getPrototypeOf(r);if(i===null)return!0;var s=Object.hasOwnProperty.call(i,"constructor")&&i.constructor;return s===Object||typeof s=="function"&&Function.toString.call(s)===gk}(e)||Array.isArray(e)||!!e[mE]||!!(!((t=e.constructor)===null||t===void 0)&&t[mE])||Jg(e)||qg(e))}function ya(e,t,r){r===void 0&&(r=!1),As(e)===0?(r?Object.keys:ls)(e).forEach(function(i){r&&typeof i=="symbol"||t(i,e[i],e)}):e.forEach(function(i,s){return t(s,i,e)})}function As(e){var t=e[ht];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:Jg(e)?2:qg(e)?3:0}function os(e,t){return As(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function ok(e,t){return As(e)===2?e.get(t):e[t]}function RS(e,t,r){var i=As(e);i===2?e.set(t,r):i===3?e.add(r):e[t]=r}function CS(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function Jg(e){return hk&&e instanceof Map}function qg(e){return vk&&e instanceof Set}function aa(e){return e.o||e.t}function ep(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=OS(e);delete t[ht];for(var r=ls(t),i=0;i<r.length;i++){var s=r[i],f=t[s];f.writable===!1&&(f.writable=!0,f.configurable=!0),(f.get||f.set)&&(t[s]={configurable:!0,writable:!0,enumerable:f.enumerable,value:e[s]})}return Object.create(Object.getPrototypeOf(e),t)}function tp(e,t){return t===void 0&&(t=!1),rp(e)||Wi(e)||!ti(e)||(As(e)>1&&(e.set=e.add=e.clear=e.delete=lk),Object.freeze(e),t&&ya(e,function(r,i){return tp(i,!0)},!0)),e}function lk(){mn(2)}function rp(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function wn(e){var t=bv[e];return t||mn(18,e),t}function uk(e,t){bv[e]||(bv[e]=t)}function wv(){return Go}function gh(e,t){t&&(wn("Patches"),e.u=[],e.s=[],e.v=t)}function pf(e){Mv(e),e.p.forEach(fk),e.p=null}function Mv(e){e===Go&&(Go=e.l)}function cE(e){return Go={p:[],l:Go,h:e,m:!0,_:0}}function fk(e){var t=e[ht];t.i===0||t.i===1?t.j():t.O=!0}function ph(e,t){t._=t.p.length;var r=t.p[0],i=e!==void 0&&e!==r;return t.h.g||wn("ES5").S(t,e,i),i?(r[ht].P&&(pf(t),mn(4)),ti(e)&&(e=mf(t,e),t.l||yf(t,e)),t.u&&wn("Patches").M(r[ht].t,e,t.u,t.s)):e=mf(t,r,[]),pf(t),t.u&&t.v(t.u,t.s),e!==IS?e:void 0}function mf(e,t,r){if(rp(t))return t;var i=t[ht];if(!i)return ya(t,function(D,o){return dE(e,i,t,D,o,r)},!0),t;if(i.A!==e)return t;if(!i.P)return yf(e,i.t,!0),i.t;if(!i.I){i.I=!0,i.A._--;var s=i.i===4||i.i===5?i.o=ep(i.k):i.o,f=s,C=!1;i.i===3&&(f=new Set(s),s.clear(),C=!0),ya(f,function(D,o){return dE(e,i,s,D,o,r,C)}),yf(e,s,!1),r&&e.u&&wn("Patches").N(i,r,e.u,e.s)}return i.o}function dE(e,t,r,i,s,f,C){if(Wi(s)){var D=mf(e,s,f&&t&&t.i!==3&&!os(t.R,i)?f.concat(i):void 0);if(RS(r,i,D),!Wi(D))return;e.m=!1}else C&&r.add(s);if(ti(s)&&!rp(s)){if(!e.h.D&&e._<1)return;mf(e,s),t&&t.A.l||yf(e,s)}}function yf(e,t,r){r===void 0&&(r=!1),!e.l&&e.h.D&&e.m&&tp(t,r)}function mh(e,t){var r=e[ht];return(r?aa(r):e)[t]}function hE(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var i=Object.getOwnPropertyDescriptor(r,t);if(i)return i;r=Object.getPrototypeOf(r)}}function _i(e){e.P||(e.P=!0,e.l&&_i(e.l))}function yh(e){e.o||(e.o=ep(e.t))}function kv(e,t,r){var i=Jg(t)?wn("MapSet").F(t,r):qg(t)?wn("MapSet").T(t,r):e.g?function(s,f){var C=Array.isArray(s),D={i:C?1:0,A:f?f.A:wv(),P:!1,I:!1,R:{},l:f,t:s,k:null,o:null,j:null,C:!1},o=D,M=$o;C&&(o=[D],M=ao);var I=Proxy.revocable(o,M),K=I.revoke,b=I.proxy;return D.k=b,D.j=K,b}(t,r):wn("ES5").J(t,r);return(r?r.A:wv()).p.push(i),i}function ck(e){return Wi(e)||mn(22,e),function t(r){if(!ti(r))return r;var i,s=r[ht],f=As(r);if(s){if(!s.P&&(s.i<4||!wn("ES5").K(s)))return s.t;s.I=!0,i=vE(r,f),s.I=!1}else i=vE(r,f);return ya(i,function(C,D){s&&ok(s.t,C)===D||RS(i,C,t(D))}),f===3?new Set(i):i}(e)}function vE(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return ep(e)}function dk(){function e(f,C){var D=s[f];return D?D.enumerable=C:s[f]=D={configurable:!0,enumerable:C,get:function(){var o=this[ht];return $o.get(o,f)},set:function(o){var M=this[ht];$o.set(M,f,o)}},D}function t(f){for(var C=f.length-1;C>=0;C--){var D=f[C][ht];if(!D.P)switch(D.i){case 5:i(D)&&_i(D);break;case 4:r(D)&&_i(D)}}}function r(f){for(var C=f.t,D=f.k,o=ls(D),M=o.length-1;M>=0;M--){var I=o[M];if(I!==ht){var K=C[I];if(K===void 0&&!os(C,I))return!0;var b=D[I],W=b&&b[ht];if(W?W.t!==K:!CS(b,K))return!0}}var F=!!C[ht];return o.length!==ls(C).length+(F?0:1)}function i(f){var C=f.k;if(C.length!==f.t.length)return!0;var D=Object.getOwnPropertyDescriptor(C,C.length-1);if(D&&!D.get)return!0;for(var o=0;o<C.length;o++)if(!C.hasOwnProperty(o))return!0;return!1}var s={};uk("ES5",{J:function(f,C){var D=Array.isArray(f),o=function(I,K){if(I){for(var b=Array(K.length),W=0;W<K.length;W++)Object.defineProperty(b,""+W,e(W,!0));return b}var F=OS(K);delete F[ht];for(var k=ls(F),N=0;N<k.length;N++){var m=k[N];F[m]=e(m,I||!!F[m].enumerable)}return Object.create(Object.getPrototypeOf(K),F)}(D,f),M={i:D?5:4,A:C?C.A:wv(),P:!1,I:!1,R:{},l:C,t:f,k:o,o:null,O:!1,C:!1};return Object.defineProperty(o,ht,{value:M,writable:!0}),o},S:function(f,C,D){D?Wi(C)&&C[ht].A===f&&t(f.p):(f.u&&function o(M){if(M&&typeof M=="object"){var I=M[ht];if(I){var K=I.t,b=I.k,W=I.R,F=I.i;if(F===4)ya(b,function(u){u!==ht&&(K[u]!==void 0||os(K,u)?W[u]||o(b[u]):(W[u]=!0,_i(I)))}),ya(K,function(u){b[u]!==void 0||os(b,u)||(W[u]=!1,_i(I))});else if(F===5){if(i(I)&&(_i(I),W.length=!0),b.length<K.length)for(var k=b.length;k<K.length;k++)W[k]=!1;else for(var N=K.length;N<b.length;N++)W[N]=!0;for(var m=Math.min(b.length,K.length),p=0;p<m;p++)b.hasOwnProperty(p)||(W[p]=!0),W[p]===void 0&&o(b[p])}}}}(f.p[0]),t(f.p))},K:function(f){return f.i===4?r(f):i(f)}})}var gE,Go,np=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",hk=typeof Map<"u",vk=typeof Set<"u",pE=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",IS=np?Symbol.for("immer-nothing"):((gE={})["immer-nothing"]=!0,gE),mE=np?Symbol.for("immer-draftable"):"__$immer_draftable",ht=np?Symbol.for("immer-state"):"__$immer_state",gk=""+Object.prototype.constructor,ls=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,OS=Object.getOwnPropertyDescriptors||function(e){var t={};return ls(e).forEach(function(r){t[r]=Object.getOwnPropertyDescriptor(e,r)}),t},bv={},$o={get:function(e,t){if(t===ht)return e;var r=aa(e);if(!os(r,t))return function(s,f,C){var D,o=hE(f,C);return o?"value"in o?o.value:(D=o.get)===null||D===void 0?void 0:D.call(s.k):void 0}(e,r,t);var i=r[t];return e.I||!ti(i)?i:i===mh(e.t,t)?(yh(e),e.o[t]=kv(e.A.h,i,e)):i},has:function(e,t){return t in aa(e)},ownKeys:function(e){return Reflect.ownKeys(aa(e))},set:function(e,t,r){var i=hE(aa(e),t);if(i!=null&&i.set)return i.set.call(e.k,r),!0;if(!e.P){var s=mh(aa(e),t),f=s==null?void 0:s[ht];if(f&&f.t===r)return e.o[t]=r,e.R[t]=!1,!0;if(CS(r,s)&&(r!==void 0||os(e.t,t)))return!0;yh(e),_i(e)}return e.o[t]===r&&(r!==void 0||t in e.o)||Number.isNaN(r)&&Number.isNaN(e.o[t])||(e.o[t]=r,e.R[t]=!0),!0},deleteProperty:function(e,t){return mh(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,yh(e),_i(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=aa(e),i=Reflect.getOwnPropertyDescriptor(r,t);return i&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:i.enumerable,value:r[t]}},defineProperty:function(){mn(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){mn(12)}},ao={};ya($o,function(e,t){ao[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),ao.deleteProperty=function(e,t){return ao.set.call(this,e,t,void 0)},ao.set=function(e,t,r){return $o.set.call(this,e[0],t,r,e[0])};var pk=function(){function e(r){var i=this;this.g=pE,this.D=!0,this.produce=function(s,f,C){if(typeof s=="function"&&typeof f!="function"){var D=f;f=s;var o=i;return function(k){var N=this;k===void 0&&(k=D);for(var m=arguments.length,p=Array(m>1?m-1:0),u=1;u<m;u++)p[u-1]=arguments[u];return o.produce(k,function(w){var A;return(A=f).call.apply(A,[N,w].concat(p))})}}var M;if(typeof f!="function"&&mn(6),C!==void 0&&typeof C!="function"&&mn(7),ti(s)){var I=cE(i),K=kv(i,s,void 0),b=!0;try{M=f(K),b=!1}finally{b?pf(I):Mv(I)}return typeof Promise<"u"&&M instanceof Promise?M.then(function(k){return gh(I,C),ph(k,I)},function(k){throw pf(I),k}):(gh(I,C),ph(M,I))}if(!s||typeof s!="object"){if((M=f(s))===void 0&&(M=s),M===IS&&(M=void 0),i.D&&tp(M,!0),C){var W=[],F=[];wn("Patches").M(s,M,W,F),C(W,F)}return M}mn(21,s)},this.produceWithPatches=function(s,f){if(typeof s=="function")return function(M){for(var I=arguments.length,K=Array(I>1?I-1:0),b=1;b<I;b++)K[b-1]=arguments[b];return i.produceWithPatches(M,function(W){return s.apply(void 0,[W].concat(K))})};var C,D,o=i.produce(s,f,function(M,I){C=M,D=I});return typeof Promise<"u"&&o instanceof Promise?o.then(function(M){return[M,C,D]}):[o,C,D]},typeof(r==null?void 0:r.useProxies)=="boolean"&&this.setUseProxies(r.useProxies),typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var t=e.prototype;return t.createDraft=function(r){ti(r)||mn(8),Wi(r)&&(r=ck(r));var i=cE(this),s=kv(this,r,void 0);return s[ht].C=!0,Mv(i),s},t.finishDraft=function(r,i){var s=r&&r[ht],f=s.A;return gh(f,i),ph(void 0,f)},t.setAutoFreeze=function(r){this.D=r},t.setUseProxies=function(r){r&&!pE&&mn(20),this.g=r},t.applyPatches=function(r,i){var s;for(s=i.length-1;s>=0;s--){var f=i[s];if(f.path.length===0&&f.op==="replace"){r=f.value;break}}s>-1&&(i=i.slice(s+1));var C=wn("Patches").$;return Wi(r)?C(r,i):this.produce(r,function(D){return C(D,i)})},e}(),Br=new pk,wS=Br.produce;Br.produceWithPatches.bind(Br);Br.setAutoFreeze.bind(Br);Br.setUseProxies.bind(Br);Br.applyPatches.bind(Br);Br.createDraft.bind(Br);Br.finishDraft.bind(Br);function Ho(e){return Ho=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ho(e)}function mk(e,t){if(Ho(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(Ho(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yk(e){var t=mk(e,"string");return Ho(t)==="symbol"?t:String(t)}function Ek(e,t,r){return t=yk(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,i)}return r}function EE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yE(Object(r),!0).forEach(function(i){Ek(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yE(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function Jt(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var _E=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Eh=function(){return Math.random().toString(36).substring(7).split("").join(".")},Ef={INIT:"@@redux/INIT"+Eh(),REPLACE:"@@redux/REPLACE"+Eh(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Eh()}};function _k(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function MS(e,t,r){var i;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Jt(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Jt(1));return r(MS)(e,t)}if(typeof e!="function")throw new Error(Jt(2));var s=e,f=t,C=[],D=C,o=!1;function M(){D===C&&(D=C.slice())}function I(){if(o)throw new Error(Jt(3));return f}function K(k){if(typeof k!="function")throw new Error(Jt(4));if(o)throw new Error(Jt(5));var N=!0;return M(),D.push(k),function(){if(N){if(o)throw new Error(Jt(6));N=!1,M();var p=D.indexOf(k);D.splice(p,1),C=null}}}function b(k){if(!_k(k))throw new Error(Jt(7));if(typeof k.type>"u")throw new Error(Jt(8));if(o)throw new Error(Jt(9));try{o=!0,f=s(f,k)}finally{o=!1}for(var N=C=D,m=0;m<N.length;m++){var p=N[m];p()}return k}function W(k){if(typeof k!="function")throw new Error(Jt(10));s=k,b({type:Ef.REPLACE})}function F(){var k,N=K;return k={subscribe:function(p){if(typeof p!="object"||p===null)throw new Error(Jt(11));function u(){p.next&&p.next(I())}u();var w=N(u);return{unsubscribe:w}}},k[_E]=function(){return this},k}return b({type:Ef.INIT}),i={dispatch:b,subscribe:K,getState:I,replaceReducer:W},i[_E]=F,i}function Tk(e){Object.keys(e).forEach(function(t){var r=e[t],i=r(void 0,{type:Ef.INIT});if(typeof i>"u")throw new Error(Jt(12));if(typeof r(void 0,{type:Ef.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Jt(13))})}function Sk(e){for(var t=Object.keys(e),r={},i=0;i<t.length;i++){var s=t[i];typeof e[s]=="function"&&(r[s]=e[s])}var f=Object.keys(r),C;try{Tk(r)}catch(D){C=D}return function(o,M){if(o===void 0&&(o={}),C)throw C;for(var I=!1,K={},b=0;b<f.length;b++){var W=f[b],F=r[W],k=o[W],N=F(k,M);if(typeof N>"u")throw M&&M.type,new Error(Jt(14));K[W]=N,I=I||N!==k}return I=I||f.length!==Object.keys(o).length,I?K:o}}function _f(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length===0?function(i){return i}:t.length===1?t[0]:t.reduce(function(i,s){return function(){return i(s.apply(void 0,arguments))}})}function xk(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(i){return function(){var s=i.apply(void 0,arguments),f=function(){throw new Error(Jt(15))},C={getState:s.getState,dispatch:function(){return f.apply(void 0,arguments)}},D=t.map(function(o){return o(C)});return f=_f.apply(void 0,D)(s.dispatch),EE(EE({},s),{},{dispatch:f})}}}function kS(e){var t=function(i){var s=i.dispatch,f=i.getState;return function(C){return function(D){return typeof D=="function"?D(s,f,e):C(D)}}};return t}var bS=kS();bS.withExtraArgument=kS;const TE=bS;var Lk=globalThis&&globalThis.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var f in s)Object.prototype.hasOwnProperty.call(s,f)&&(i[f]=s[f])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function i(){this.constructor=t}t.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}}(),Ak=globalThis&&globalThis.__generator||function(e,t){var r={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},i,s,f,C;return C={next:D(0),throw:D(1),return:D(2)},typeof Symbol=="function"&&(C[Symbol.iterator]=function(){return this}),C;function D(M){return function(I){return o([M,I])}}function o(M){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,s&&(f=M[0]&2?s.return:M[0]?s.throw||((f=s.return)&&f.call(s),0):s.next)&&!(f=f.call(s,M[1])).done)return f;switch(s=0,f&&(M=[M[0]&2,f.value]),M[0]){case 0:case 1:f=M;break;case 4:return r.label++,{value:M[1],done:!1};case 5:r.label++,s=M[1],M=[0];continue;case 7:M=r.ops.pop(),r.trys.pop();continue;default:if(f=r.trys,!(f=f.length>0&&f[f.length-1])&&(M[0]===6||M[0]===2)){r=0;continue}if(M[0]===3&&(!f||M[1]>f[0]&&M[1]<f[3])){r.label=M[1];break}if(M[0]===6&&r.label<f[1]){r.label=f[1],f=M;break}if(f&&r.label<f[2]){r.label=f[2],r.ops.push(M);break}f[2]&&r.ops.pop(),r.trys.pop();continue}M=t.call(e,r)}catch(I){M=[6,I],s=0}finally{i=f=0}if(M[0]&5)throw M[1];return{value:M[0]?M[1]:void 0,done:!0}}},Tf=globalThis&&globalThis.__spreadArray||function(e,t){for(var r=0,i=t.length,s=e.length;r<i;r++,s++)e[s]=t[r];return e},Pk=Object.defineProperty,Dk=Object.defineProperties,Rk=Object.getOwnPropertyDescriptors,SE=Object.getOwnPropertySymbols,Ck=Object.prototype.hasOwnProperty,Ik=Object.prototype.propertyIsEnumerable,xE=function(e,t,r){return t in e?Pk(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r},bi=function(e,t){for(var r in t||(t={}))Ck.call(t,r)&&xE(e,r,t[r]);if(SE)for(var i=0,s=SE(t);i<s.length;i++){var r=s[i];Ik.call(t,r)&&xE(e,r,t[r])}return e},_h=function(e,t){return Dk(e,Rk(t))},Ok=function(e,t,r){return new Promise(function(i,s){var f=function(o){try{D(r.next(o))}catch(M){s(M)}},C=function(o){try{D(r.throw(o))}catch(M){s(M)}},D=function(o){return o.done?i(o.value):Promise.resolve(o.value).then(f,C)};D((r=r.apply(e,t)).next())})},wk=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?_f:_f.apply(null,arguments)};function Mk(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var r=t;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return t===r}var kk=function(e){Lk(t,e);function t(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var s=e.apply(this,r)||this;return Object.setPrototypeOf(s,t.prototype),s}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return e.prototype.concat.apply(this,r)},t.prototype.prepend=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return r.length===1&&Array.isArray(r[0])?new(t.bind.apply(t,Tf([void 0],r[0].concat(this)))):new(t.bind.apply(t,Tf([void 0],r.concat(this))))},t}(Array);function Fv(e){return ti(e)?wS(e,function(){}):e}function bk(e){return typeof e=="boolean"}function Fk(){return function(t){return Nk(t)}}function Nk(e){e===void 0&&(e={});var t=e.thunk,r=t===void 0?!0:t;e.immutableCheck,e.serializableCheck;var i=new kk;return r&&(bk(r)?i.push(TE):i.push(TE.withExtraArgument(r.extraArgument))),i}var Uk=!0;function Bk(e){var t=Fk(),r=e||{},i=r.reducer,s=i===void 0?void 0:i,f=r.middleware,C=f===void 0?t():f,D=r.devTools,o=D===void 0?!0:D,M=r.preloadedState,I=M===void 0?void 0:M,K=r.enhancers,b=K===void 0?void 0:K,W;if(typeof s=="function")W=s;else if(Mk(s))W=Sk(s);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var F=C;typeof F=="function"&&(F=F(t));var k=xk.apply(void 0,F),N=_f;o&&(N=wk(bi({trace:!Uk},typeof o=="object"&&o)));var m=[k];Array.isArray(b)?m=Tf([k],b):typeof b=="function"&&(m=b(m));var p=N.apply(void 0,m);return MS(W,I,p)}function Fi(e,t){function r(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];if(t){var f=t.apply(void 0,i);if(!f)throw new Error("prepareAction did not return an object");return bi(bi({type:e,payload:f.payload},"meta"in f&&{meta:f.meta}),"error"in f&&{error:f.error})}return{type:e,payload:i[0]}}return r.toString=function(){return""+e},r.type=e,r.match=function(i){return i.type===e},r}function FS(e){var t={},r=[],i,s={addCase:function(f,C){var D=typeof f=="string"?f:f.type;if(D in t)throw new Error("addCase cannot be called with two reducers for the same action type");return t[D]=C,s},addMatcher:function(f,C){return r.push({matcher:f,reducer:C}),s},addDefaultCase:function(f){return i=f,s}};return e(s),[t,r,i]}function Kk(e){return typeof e=="function"}function Wk(e,t,r,i){r===void 0&&(r=[]);var s=typeof t=="function"?FS(t):[t,r,i],f=s[0],C=s[1],D=s[2],o;if(Kk(e))o=function(){return Fv(e())};else{var M=Fv(e);o=function(){return M}}function I(K,b){K===void 0&&(K=o());var W=Tf([f[b.type]],C.filter(function(F){var k=F.matcher;return k(b)}).map(function(F){var k=F.reducer;return k}));return W.filter(function(F){return!!F}).length===0&&(W=[D]),W.reduce(function(F,k){if(k)if(Wi(F)){var N=F,m=k(N,b);return m===void 0?F:m}else{if(ti(F))return wS(F,function(p){return k(p,b)});var m=k(F,b);if(m===void 0){if(F===null)return F;throw Error("A case reducer on a non-draftable value must not return undefined")}return m}return F},K)}return I.getInitialState=o,I}function Gk(e,t){return e+"/"+t}function ip(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");typeof process<"u";var r=typeof e.initialState=="function"?e.initialState:Fv(e.initialState),i=e.reducers||{},s=Object.keys(i),f={},C={},D={};s.forEach(function(I){var K=i[I],b=Gk(t,I),W,F;"reducer"in K?(W=K.reducer,F=K.prepare):W=K,f[I]=W,C[b]=W,D[I]=F?Fi(b,F):Fi(b)});function o(){var I=typeof e.extraReducers=="function"?FS(e.extraReducers):[e.extraReducers],K=I[0],b=K===void 0?{}:K,W=I[1],F=W===void 0?[]:W,k=I[2],N=k===void 0?void 0:k,m=bi(bi({},b),C);return Wk(r,function(p){for(var u in m)p.addCase(u,m[u]);for(var w=0,A=F;w<A.length;w++){var d=A[w];p.addMatcher(d.matcher,d.reducer)}N&&p.addDefaultCase(N)})}var M;return{name:t,reducer:function(I,K){return M||(M=o()),M(I,K)},actions:D,caseReducers:f,getInitialState:function(){return M||(M=o()),M.getInitialState()}}}var $k="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Hk=function(e){e===void 0&&(e=21);for(var t="",r=e;r--;)t+=$k[Math.random()*64|0];return t},jk=["name","message","stack","code"],Th=function(){function e(t,r){this.payload=t,this.meta=r}return e}(),LE=function(){function e(t,r){this.payload=t,this.meta=r}return e}(),Vk=function(e){if(typeof e=="object"&&e!==null){for(var t={},r=0,i=jk;r<i.length;r++){var s=i[r];typeof e[s]=="string"&&(t[s]=e[s])}return t}return{message:String(e)}},NS=function(){function e(t,r,i){var s=Fi(t+"/fulfilled",function(M,I,K,b){return{payload:M,meta:_h(bi({},b||{}),{arg:K,requestId:I,requestStatus:"fulfilled"})}}),f=Fi(t+"/pending",function(M,I,K){return{payload:void 0,meta:_h(bi({},K||{}),{arg:I,requestId:M,requestStatus:"pending"})}}),C=Fi(t+"/rejected",function(M,I,K,b,W){return{payload:b,error:(i&&i.serializeError||Vk)(M||"Rejected"),meta:_h(bi({},W||{}),{arg:K,requestId:I,rejectedWithValue:!!b,requestStatus:"rejected",aborted:(M==null?void 0:M.name)==="AbortError",condition:(M==null?void 0:M.name)==="ConditionError"})}}),D=typeof AbortController<"u"?AbortController:function(){function M(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return M.prototype.abort=function(){},M}();function o(M){return function(I,K,b){var W=i!=null&&i.idGenerator?i.idGenerator(M):Hk(),F=new D,k;function N(p){k=p,F.abort()}var m=function(){return Ok(this,null,function(){var p,u,w,A,d,v,h;return Ak(this,function(g){switch(g.label){case 0:return g.trys.push([0,4,,5]),A=(p=i==null?void 0:i.condition)==null?void 0:p.call(i,M,{getState:K,extra:b}),Yk(A)?[4,A]:[3,2];case 1:A=g.sent(),g.label=2;case 2:if(A===!1||F.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return d=new Promise(function(P,R){return F.signal.addEventListener("abort",function(){return R({name:"AbortError",message:k||"Aborted"})})}),I(f(W,M,(u=i==null?void 0:i.getPendingMeta)==null?void 0:u.call(i,{requestId:W,arg:M},{getState:K,extra:b}))),[4,Promise.race([d,Promise.resolve(r(M,{dispatch:I,getState:K,extra:b,requestId:W,signal:F.signal,abort:N,rejectWithValue:function(P,R){return new Th(P,R)},fulfillWithValue:function(P,R){return new LE(P,R)}})).then(function(P){if(P instanceof Th)throw P;return P instanceof LE?s(P.payload,W,M,P.meta):s(P,W,M)})])];case 3:return w=g.sent(),[3,5];case 4:return v=g.sent(),w=v instanceof Th?C(null,W,M,v.payload,v.meta):C(v,W,M),[3,5];case 5:return h=i&&!i.dispatchConditionRejection&&C.match(w)&&w.meta.condition,h||I(w),[2,w]}})})}();return Object.assign(m,{abort:N,requestId:W,arg:M,unwrap:function(){return m.then(zk)}})}}return Object.assign(o,{pending:f,rejected:C,fulfilled:s,typePrefix:t})}return e.withTypes=function(){return e},e}();function zk(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function Yk(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var ap="listenerMiddleware";Fi(ap+"/add");Fi(ap+"/removeAll");Fi(ap+"/remove");var AE;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);dk();const Xk="Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJkOTRlNjg4NS1kM2U5LTQwY2EtYTVjYy01MDRkNjZlZDVlN2QiLCJwbGF0Zm9ybSI6InN1YnNjcmlwdGlvbnMiLCJpYXQiOjE2Nzg3MDQ3NjIsImV4cCI6MTY3OTYwNDc2Mn0.Qw3LF39CDp27ZxoGzt5rikJM_OTx0eNaoyFFLxxrXUM",Qk="https://api.wisey.app/api/v1/core/preview-courses",Uu={logo:{big:"../../../images/icons/logo.svg",bigDark:"../../../images/icons/logo-dark.svg",small:"../../../images/icons/logo-small.svg"},social:{github:"https://github.com/dmytro-lebedchenko"}},PE={speedUpRate:.25,slowDownRate:.25},Nv=10;async function Zk(e,t="GET",r=null){const i={method:t,headers:{Authorization:Xk}};r&&(i.body=JSON.stringify(r),i.headers={"Content-Type":"application/json;"});const s=await fetch(`${Qk}${e}`,{...i});if(!s.ok)throw new Error;return s.json()}const US={get:e=>Zk(e)},Jk=async()=>{const{courses:e}=await US.get("");return e},qk=e=>US.get(`/${e}`),eb={courses:[],loaded:!1,hasError:!1},Bu=NS("courses/fetch",()=>Jk()),tb=ip({name:"courses",initialState:eb,reducers:{setCourses:(e,t)=>({...e,courses:t.payload})},extraReducers:e=>{e.addCase(Bu.pending,t=>({...t,loaded:!1,hasError:!1})),e.addCase(Bu.fulfilled,(t,r)=>({...t,courses:r.payload,loaded:!0,hasError:!1})),e.addCase(Bu.rejected,t=>({...t,loaded:!0,hasError:!0}))}}),rb=tb.reducer,BS=({type:e})=>_e(sl,{to:"/",children:_e("img",{src:(()=>{switch(e){case"big":return Uu.logo.big;case"big-dark":return Uu.logo.bigDark;default:case"small":return Uu.logo.small}})(),alt:"logo"})});var sp=ll(),ke=e=>ol(e,sp),op=ll();ke.write=e=>ol(e,op);var vc=ll();ke.onStart=e=>ol(e,vc);var lp=ll();ke.onFrame=e=>ol(e,lp);var up=ll();ke.onFinish=e=>ol(e,up);var us=[];ke.setTimeout=(e,t)=>{let r=ke.now()+t,i=()=>{let f=us.findIndex(C=>C.cancel==i);~f&&us.splice(f,1),Ai-=~f?1:0},s={time:r,handler:e,cancel:i};return us.splice(KS(r),0,s),Ai+=1,WS(),s};var KS=e=>~(~us.findIndex(t=>t.time>e)||~us.length);ke.cancel=e=>{vc.delete(e),lp.delete(e),up.delete(e),sp.delete(e),op.delete(e)};ke.sync=e=>{Uv=!0,ke.batchedUpdates(e),Uv=!1};ke.throttle=e=>{let t;function r(){try{e(...t)}finally{t=null}}function i(...s){t=s,ke.onStart(r)}return i.handler=e,i.cancel=()=>{vc.delete(r),t=null},i};var fp=typeof window<"u"?window.requestAnimationFrame:()=>{};ke.use=e=>fp=e;ke.now=typeof performance<"u"?()=>performance.now():Date.now;ke.batchedUpdates=e=>e();ke.catch=console.error;ke.frameLoop="always";ke.advance=()=>{ke.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):$S()};var Li=-1,Ai=0,Uv=!1;function ol(e,t){Uv?(t.delete(e),e(0)):(t.add(e),WS())}function WS(){Li<0&&(Li=0,ke.frameLoop!=="demand"&&fp(GS))}function nb(){Li=-1}function GS(){~Li&&(fp(GS),ke.batchedUpdates($S))}function $S(){let e=Li;Li=ke.now();let t=KS(Li);if(t&&(HS(us.splice(0,t),r=>r.handler()),Ai-=t),!Ai){nb();return}vc.flush(),sp.flush(e?Math.min(64,Li-e):16.667),lp.flush(),op.flush(),up.flush()}function ll(){let e=new Set,t=e;return{add(r){Ai+=t==e&&!e.has(r)?1:0,e.add(r)},delete(r){return Ai-=t==e&&e.has(r)?1:0,e.delete(r)},flush(r){t.size&&(e=new Set,Ai-=t.size,HS(t,i=>i(r)&&e.add(i)),Ai+=e.size,t=e)}}}function HS(e,t){e.forEach(r=>{try{t(r)}catch(i){ke.catch(i)}})}var ib=Object.defineProperty,ab=(e,t)=>{for(var r in t)ib(e,r,{get:t[r],enumerable:!0})},Sn={};ab(Sn,{assign:()=>ob,colors:()=>Ni,createStringInterpolator:()=>dp,skipAnimation:()=>VS,to:()=>jS,willAdvance:()=>hp});function Bv(){}var sb=(e,t,r)=>Object.defineProperty(e,t,{value:r,writable:!0,configurable:!0}),Ee={arr:Array.isArray,obj:e=>!!e&&e.constructor.name==="Object",fun:e=>typeof e=="function",str:e=>typeof e=="string",num:e=>typeof e=="number",und:e=>e===void 0};function jn(e,t){if(Ee.arr(e)){if(!Ee.arr(t)||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return e===t}var je=(e,t)=>e.forEach(t);function Mn(e,t,r){if(Ee.arr(e)){for(let i=0;i<e.length;i++)t.call(r,e[i],`${i}`);return}for(let i in e)e.hasOwnProperty(i)&&t.call(r,e[i],i)}var Fr=e=>Ee.und(e)?[]:Ee.arr(e)?e:[e];function mo(e,t){if(e.size){let r=Array.from(e);e.clear(),je(r,t)}}var so=(e,...t)=>mo(e,r=>r(...t)),cp=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),dp,jS,Ni=null,VS=!1,hp=Bv,ob=e=>{e.to&&(jS=e.to),e.now&&(ke.now=e.now),e.colors!==void 0&&(Ni=e.colors),e.skipAnimation!=null&&(VS=e.skipAnimation),e.createStringInterpolator&&(dp=e.createStringInterpolator),e.requestAnimationFrame&&ke.use(e.requestAnimationFrame),e.batchedUpdates&&(ke.batchedUpdates=e.batchedUpdates),e.willAdvance&&(hp=e.willAdvance),e.frameLoop&&(ke.frameLoop=e.frameLoop)},yo=new Set,tn=[],Sh=[],Sf=0,gc={get idle(){return!yo.size&&!tn.length},start(e){Sf>e.priority?(yo.add(e),ke.onStart(lb)):(zS(e),ke(Kv))},advance:Kv,sort(e){if(Sf)ke.onFrame(()=>gc.sort(e));else{let t=tn.indexOf(e);~t&&(tn.splice(t,1),YS(e))}},clear(){tn=[],yo.clear()}};function lb(){yo.forEach(zS),yo.clear(),ke(Kv)}function zS(e){tn.includes(e)||YS(e)}function YS(e){tn.splice(ub(tn,t=>t.priority>e.priority),0,e)}function Kv(e){let t=Sh;for(let r=0;r<tn.length;r++){let i=tn[r];Sf=i.priority,i.idle||(hp(i),i.advance(e),i.idle||t.push(i))}return Sf=0,Sh=tn,Sh.length=0,tn=t,tn.length>0}function ub(e,t){let r=e.findIndex(t);return r<0?e.length:r}var fb=(e,t,r)=>Math.min(Math.max(r,e),t),cb={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},yn="[-+]?\\d*\\.?\\d+",xf=yn+"%";function pc(...e){return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}var db=new RegExp("rgb"+pc(yn,yn,yn)),hb=new RegExp("rgba"+pc(yn,yn,yn,yn)),vb=new RegExp("hsl"+pc(yn,xf,xf)),gb=new RegExp("hsla"+pc(yn,xf,xf,yn)),pb=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,mb=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,yb=/^#([0-9a-fA-F]{6})$/,Eb=/^#([0-9a-fA-F]{8})$/;function _b(e){let t;return typeof e=="number"?e>>>0===e&&e>=0&&e<=4294967295?e:null:(t=yb.exec(e))?parseInt(t[1]+"ff",16)>>>0:Ni&&Ni[e]!==void 0?Ni[e]:(t=db.exec(e))?(Ba(t[1])<<24|Ba(t[2])<<16|Ba(t[3])<<8|255)>>>0:(t=hb.exec(e))?(Ba(t[1])<<24|Ba(t[2])<<16|Ba(t[3])<<8|CE(t[4]))>>>0:(t=pb.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=Eb.exec(e))?parseInt(t[1],16)>>>0:(t=mb.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=vb.exec(e))?(DE(RE(t[1]),Tu(t[2]),Tu(t[3]))|255)>>>0:(t=gb.exec(e))?(DE(RE(t[1]),Tu(t[2]),Tu(t[3]))|CE(t[4]))>>>0:null}function xh(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function DE(e,t,r){let i=r<.5?r*(1+t):r+t-r*t,s=2*r-i,f=xh(s,i,e+1/3),C=xh(s,i,e),D=xh(s,i,e-1/3);return Math.round(f*255)<<24|Math.round(C*255)<<16|Math.round(D*255)<<8}function Ba(e){let t=parseInt(e,10);return t<0?0:t>255?255:t}function RE(e){return(parseFloat(e)%360+360)%360/360}function CE(e){let t=parseFloat(e);return t<0?0:t>1?255:Math.round(t*255)}function Tu(e){let t=parseFloat(e);return t<0?0:t>100?1:t/100}function IE(e){let t=_b(e);if(t===null)return e;t=t||0;let r=(t&4278190080)>>>24,i=(t&16711680)>>>16,s=(t&65280)>>>8,f=(t&255)/255;return`rgba(${r}, ${i}, ${s}, ${f})`}var jo=(e,t,r)=>{if(Ee.fun(e))return e;if(Ee.arr(e))return jo({range:e,output:t,extrapolate:r});if(Ee.str(e.output[0]))return dp(e);let i=e,s=i.output,f=i.range||[0,1],C=i.extrapolateLeft||i.extrapolate||"extend",D=i.extrapolateRight||i.extrapolate||"extend",o=i.easing||(M=>M);return M=>{let I=Sb(M,f);return Tb(M,f[I],f[I+1],s[I],s[I+1],o,C,D,i.map)}};function Tb(e,t,r,i,s,f,C,D,o){let M=o?o(e):e;if(M<t){if(C==="identity")return M;C==="clamp"&&(M=t)}if(M>r){if(D==="identity")return M;D==="clamp"&&(M=r)}return i===s?i:t===r?e<=t?i:s:(t===-1/0?M=-M:r===1/0?M=M-t:M=(M-t)/(r-t),M=f(M),i===-1/0?M=-M:s===1/0?M=M+i:M=M*(s-i)+i,M)}function Sb(e,t){for(var r=1;r<t.length-1&&!(t[r]>=e);++r);return r-1}var xb=(e,t="end")=>r=>{r=t==="end"?Math.min(r,.999):Math.max(r,.001);let i=r*e,s=t==="end"?Math.floor(i):Math.ceil(i);return fb(0,1,s/e)},Lf=1.70158,Su=Lf*1.525,OE=Lf+1,wE=2*Math.PI/3,ME=2*Math.PI/4.5,xu=e=>e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375,Lb={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>1-(1-e)*(1-e),easeInOutQuad:e=>e<.5?2*e*e:1-Math.pow(-2*e+2,2)/2,easeInCubic:e=>e*e*e,easeOutCubic:e=>1-Math.pow(1-e,3),easeInOutCubic:e=>e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2,easeInQuart:e=>e*e*e*e,easeOutQuart:e=>1-Math.pow(1-e,4),easeInOutQuart:e=>e<.5?8*e*e*e*e:1-Math.pow(-2*e+2,4)/2,easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>1-Math.pow(1-e,5),easeInOutQuint:e=>e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2,easeInSine:e=>1-Math.cos(e*Math.PI/2),easeOutSine:e=>Math.sin(e*Math.PI/2),easeInOutSine:e=>-(Math.cos(Math.PI*e)-1)/2,easeInExpo:e=>e===0?0:Math.pow(2,10*e-10),easeOutExpo:e=>e===1?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>e===0?0:e===1?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2,easeInCirc:e=>1-Math.sqrt(1-Math.pow(e,2)),easeOutCirc:e=>Math.sqrt(1-Math.pow(e-1,2)),easeInOutCirc:e=>e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2,easeInBack:e=>OE*e*e*e-Lf*e*e,easeOutBack:e=>1+OE*Math.pow(e-1,3)+Lf*Math.pow(e-1,2),easeInOutBack:e=>e<.5?Math.pow(2*e,2)*((Su+1)*2*e-Su)/2:(Math.pow(2*e-2,2)*((Su+1)*(e*2-2)+Su)+2)/2,easeInElastic:e=>e===0?0:e===1?1:-Math.pow(2,10*e-10)*Math.sin((e*10-10.75)*wE),easeOutElastic:e=>e===0?0:e===1?1:Math.pow(2,-10*e)*Math.sin((e*10-.75)*wE)+1,easeInOutElastic:e=>e===0?0:e===1?1:e<.5?-(Math.pow(2,20*e-10)*Math.sin((20*e-11.125)*ME))/2:Math.pow(2,-20*e+10)*Math.sin((20*e-11.125)*ME)/2+1,easeInBounce:e=>1-xu(1-e),easeOutBounce:xu,easeInOutBounce:e=>e<.5?(1-xu(1-2*e))/2:(1+xu(2*e-1))/2,steps:xb},Es=Symbol.for("FluidValue.get"),Ea=Symbol.for("FluidValue.observers"),en=e=>!!(e&&e[Es]),yr=e=>e&&e[Es]?e[Es]():e,kE=e=>e[Ea]||null;function Ab(e,t){e.eventObserved?e.eventObserved(t):e(t)}function Vo(e,t){let r=e[Ea];r&&r.forEach(i=>{Ab(i,t)})}var qF,e2,JE,XS=(JE=class{constructor(e){Le(this,qF);Le(this,e2);if(!e&&!(e=this.get))throw Error("Unknown getter");Pb(this,e)}},qF=Es,e2=Ea,JE),Pb=(e,t)=>QS(e,Es,t);function Ps(e,t){if(e[Es]){let r=e[Ea];r||QS(e,Ea,r=new Set),r.has(t)||(r.add(t),e.observerAdded&&e.observerAdded(r.size,t))}return t}function zo(e,t){let r=e[Ea];if(r&&r.has(t)){let i=r.size-1;i?r.delete(t):e[Ea]=null,e.observerRemoved&&e.observerRemoved(i,t)}}var QS=(e,t,r)=>Object.defineProperty(e,t,{value:r,writable:!0,configurable:!0}),Ku=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Db=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,bE=new RegExp(`(${Ku.source})(%|[a-z]+)`,"i"),Rb=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,mc=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,ZS=e=>{let[t,r]=Cb(e);if(!t||cp())return e;let i=window.getComputedStyle(document.documentElement).getPropertyValue(t);return i?i.trim():r&&r.startsWith("--")?window.getComputedStyle(document.documentElement).getPropertyValue(r)||e:r&&mc.test(r)?ZS(r):r||e},Cb=e=>{let t=mc.exec(e);if(!t)return[,];let[,r,i]=t;return[r,i]},Lh,Ib=(e,t,r,i,s)=>`rgba(${Math.round(t)}, ${Math.round(r)}, ${Math.round(i)}, ${s})`,JS=e=>{Lh||(Lh=Ni?new RegExp(`(${Object.keys(Ni).join("|")})(?!\\w)`,"g"):/^\b$/);let t=e.output.map(s=>yr(s).replace(mc,ZS).replace(Db,IE).replace(Lh,IE)),r=t.map(s=>s.match(Ku).map(Number)),i=r[0].map((s,f)=>r.map(C=>{if(!(f in C))throw Error('The arity of each "output" value must be equal');return C[f]})).map(s=>jo({...e,output:s}));return s=>{var D;let f=!bE.test(t[0])&&((D=t.find(o=>bE.test(o)))==null?void 0:D.replace(Ku,"")),C=0;return t[0].replace(Ku,()=>`${i[C++](s)}${f||""}`).replace(Rb,Ib)}},vp="react-spring: ",qS=e=>{let t=e,r=!1;if(typeof t!="function")throw new TypeError(`${vp}once requires a function parameter`);return(...i)=>{r||(t(...i),r=!0)}},Ob=qS(console.warn);function wb(){Ob(`${vp}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var Mb=qS(console.warn);function kb(){Mb(`${vp}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function yc(e){return Ee.str(e)&&(e[0]=="#"||/\d/.test(e)||!cp()&&mc.test(e)||e in(Ni||{}))}var gp=cp()?oe.useEffect:oe.useLayoutEffect,bb=()=>{let e=oe.useRef(!1);return gp(()=>(e.current=!0,()=>{e.current=!1}),[]),e};function e1(){let e=oe.useState()[1],t=bb();return()=>{t.current&&e(Math.random())}}function Fb(e,t){let[r]=oe.useState(()=>({inputs:t,result:e()})),i=oe.useRef(),s=i.current,f=s;return f?t&&f.inputs&&Nb(t,f.inputs)||(f={inputs:t,result:e()}):f=r,oe.useEffect(()=>{i.current=f,s==r&&(r.inputs=r.result=void 0)},[f]),f.result}function Nb(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}var t1=e=>oe.useEffect(e,Ub),Ub=[];function FE(e){let t=oe.useRef();return oe.useEffect(()=>{t.current=e}),t.current}var Yo=Symbol.for("Animated:node"),Bb=e=>!!e&&e[Yo]===e,Rn=e=>e&&e[Yo],pp=(e,t)=>sb(e,Yo,t),Ec=e=>e&&e[Yo]&&e[Yo].getPayload(),r1=class{constructor(){Le(this,"payload");pp(this,this)}getPayload(){return this.payload||[]}},ul=class extends r1{constructor(t){super();Le(this,"done",!0);Le(this,"elapsedTime");Le(this,"lastPosition");Le(this,"lastVelocity");Le(this,"v0");Le(this,"durationProgress",0);this._value=t,Ee.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new ul(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,r){return Ee.num(t)&&(this.lastPosition=t,r&&(t=Math.round(t/r)*r,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){let{done:t}=this;this.done=!1,Ee.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},Xo=class extends ul{constructor(t){super(0);Le(this,"_string",null);Le(this,"_toString");this._toString=jo({output:[t,t]})}static create(t){return new Xo(t)}getValue(){return this._string??(this._string=this._toString(this._value))}setValue(t){if(Ee.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=jo({output:[this.getValue(),t]})),this._value=0,super.reset()}},Af={dependencies:null},_c=class extends r1{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){let t={};return Mn(this.source,(r,i)=>{Bb(r)?t[i]=r.getValue(e):en(r)?t[i]=yr(r):e||(t[i]=r)}),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&je(this.payload,e=>e.reset())}_makePayload(e){if(e){let t=new Set;return Mn(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){Af.dependencies&&en(e)&&Af.dependencies.add(e);let t=Ec(e);t&&je(t,r=>this.add(r))}},n1=class extends _c{constructor(t){super(t)}static create(t){return new n1(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){let r=this.getPayload();return t.length==r.length?r.map((i,s)=>i.setValue(t[s])).some(Boolean):(super.setValue(t.map(Kb)),!0)}};function Kb(e){return(yc(e)?Xo:ul).create(e)}function Wv(e){let t=Rn(e);return t?t.constructor:Ee.arr(e)?n1:yc(e)?Xo:ul}var NE=(e,t)=>{let r=!Ee.fun(e)||e.prototype&&e.prototype.isReactComponent;return oe.forwardRef((i,s)=>{let f=oe.useRef(null),C=r&&oe.useCallback(F=>{f.current=$b(s,F)},[s]),[D,o]=Gb(i,t),M=e1(),I=()=>{let F=f.current;r&&!F||(F?t.applyAnimatedValues(F,D.getValue(!0)):!1)===!1&&M()},K=new Wb(I,o),b=oe.useRef();gp(()=>(b.current=K,je(o,F=>Ps(F,K)),()=>{b.current&&(je(b.current.deps,F=>zo(F,b.current)),ke.cancel(b.current.update))})),oe.useEffect(I,[]),t1(()=>()=>{let F=b.current;je(F.deps,k=>zo(k,F))});let W=t.getComponentProps(D.getValue());return oe.createElement(e,{...W,ref:C})})},Wb=class{constructor(e,t){this.update=e,this.deps=t}eventObserved(e){e.type=="change"&&ke.write(this.update)}};function Gb(e,t){let r=new Set;return Af.dependencies=r,e.style&&(e={...e,style:t.createAnimatedStyle(e.style)}),e=new _c(e),Af.dependencies=null,[e,r]}function $b(e,t){return e&&(Ee.fun(e)?e(t):e.current=t),t}var UE=Symbol.for("AnimatedComponent"),Hb=(e,{applyAnimatedValues:t=()=>!1,createAnimatedStyle:r=s=>new _c(s),getComponentProps:i=s=>s}={})=>{let s={applyAnimatedValues:t,createAnimatedStyle:r,getComponentProps:i},f=C=>{let D=BE(C)||"Anonymous";return Ee.str(C)?C=f[C]||(f[C]=NE(C,s)):C=C[UE]||(C[UE]=NE(C,s)),C.displayName=`Animated(${D})`,C};return Mn(e,(C,D)=>{Ee.arr(e)&&(D=BE(C)),f[D]=f(C)}),{animated:f}},BE=e=>Ee.str(e)?e:e&&Ee.str(e.displayName)?e.displayName:Ee.fun(e)&&e.name||null;function sa(e,...t){return Ee.fun(e)?e(...t):e}var Eo=(e,t)=>e===!0||!!(t&&e&&(Ee.fun(e)?e(t):Fr(e).includes(t))),i1=(e,t)=>Ee.obj(e)?t&&e[t]:e,a1=(e,t)=>e.default===!0?e[t]:e.default?e.default[t]:void 0,jb=e=>e,mp=(e,t=jb)=>{let r=Vb;e.default&&e.default!==!0&&(e=e.default,r=Object.keys(e));let i={};for(let s of r){let f=t(e[s],s);Ee.und(f)||(i[s]=f)}return i},Vb=["config","onProps","onStart","onChange","onPause","onResume","onRest"],zb={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function Yb(e){let t={},r=0;if(Mn(e,(i,s)=>{zb[s]||(t[s]=i,r++)}),r)return t}function s1(e){let t=Yb(e);if(t){let r={to:t};return Mn(e,(i,s)=>s in t||(r[s]=i)),r}return{...e}}function Qo(e){return e=yr(e),Ee.arr(e)?e.map(Qo):yc(e)?Sn.createStringInterpolator({range:[0,1],output:[e,e]})(1):e}function Xb(e){for(let t in e)return!0;return!1}function Gv(e){return Ee.fun(e)||Ee.arr(e)&&Ee.obj(e[0])}function Qb(e,t){var r;(r=e.ref)==null||r.delete(e),t==null||t.delete(e)}function Zb(e,t){var r;t&&e.ref!==t&&((r=e.ref)==null||r.delete(e),t.add(e),e.ref=t)}var Jb={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},$v={...Jb.default,mass:1,damping:1,easing:Lb.linear,clamp:!1},qb=class{constructor(){Le(this,"tension");Le(this,"friction");Le(this,"frequency");Le(this,"damping");Le(this,"mass");Le(this,"velocity",0);Le(this,"restVelocity");Le(this,"precision");Le(this,"progress");Le(this,"duration");Le(this,"easing");Le(this,"clamp");Le(this,"bounce");Le(this,"decay");Le(this,"round");Object.assign(this,$v)}};function eF(e,t,r){r&&(r={...r},KE(r,t),t={...r,...t}),KE(e,t),Object.assign(e,t);for(let C in $v)e[C]==null&&(e[C]=$v[C]);let{frequency:i,damping:s}=e,{mass:f}=e;return Ee.und(i)||(i<.01&&(i=.01),s<0&&(s=0),e.tension=Math.pow(2*Math.PI/i,2)*f,e.friction=4*Math.PI*s*f/i),e}function KE(e,t){if(!Ee.und(t.decay))e.duration=void 0;else{let r=!Ee.und(t.tension)||!Ee.und(t.friction);(r||!Ee.und(t.frequency)||!Ee.und(t.damping)||!Ee.und(t.mass))&&(e.duration=void 0,e.decay=void 0),r&&(e.frequency=void 0)}}var WE=[],tF=class{constructor(){Le(this,"changed",!1);Le(this,"values",WE);Le(this,"toValues",null);Le(this,"fromValues",WE);Le(this,"to");Le(this,"from");Le(this,"config",new qb);Le(this,"immediate",!1)}};function o1(e,{key:t,props:r,defaultProps:i,state:s,actions:f}){return new Promise((C,D)=>{let o,M,I=Eo(r.cancel??(i==null?void 0:i.cancel),t);if(I)W();else{Ee.und(r.pause)||(s.paused=Eo(r.pause,t));let F=i==null?void 0:i.pause;F!==!0&&(F=s.paused||Eo(F,t)),o=sa(r.delay||0,t),F?(s.resumeQueue.add(b),f.pause()):(f.resume(),b())}function K(){s.resumeQueue.add(b),s.timeouts.delete(M),M.cancel(),o=M.time-ke.now()}function b(){o>0&&!Sn.skipAnimation?(s.delayed=!0,M=ke.setTimeout(W,o),s.pauseQueue.add(K),s.timeouts.add(M)):W()}function W(){s.delayed&&(s.delayed=!1),s.pauseQueue.delete(K),s.timeouts.delete(M),e<=(s.cancelId||0)&&(I=!0);try{f.start({...r,callId:e,cancel:I},C)}catch(F){D(F)}}})}var yp=(e,t)=>t.length==1?t[0]:t.some(r=>r.cancelled)?fs(e.get()):t.every(r=>r.noop)?l1(e.get()):pn(e.get(),t.every(r=>r.finished)),l1=e=>({value:e,noop:!0,finished:!0,cancelled:!1}),pn=(e,t,r=!1)=>({value:e,finished:t,cancelled:r}),fs=e=>({value:e,cancelled:!0,finished:!1});function u1(e,t,r,i){let{callId:s,parentId:f,onRest:C}=t,{asyncTo:D,promise:o}=r;return!f&&e===D&&!t.reset?o:r.promise=(async()=>{r.asyncId=s,r.asyncTo=e;let M=mp(t,(N,m)=>m==="onRest"?void 0:N),I,K,b=new Promise((N,m)=>(I=N,K=m)),W=N=>{let m=s<=(r.cancelId||0)&&fs(i)||s!==r.asyncId&&pn(i,!1);if(m)throw N.result=m,K(N),N},F=(N,m)=>{let p=new GE,u=new $E;return(async()=>{if(Sn.skipAnimation)throw Zo(r),u.result=pn(i,!1),K(u),u;W(p);let w=Ee.obj(N)?{...N}:{...m,to:N};w.parentId=s,Mn(M,(d,v)=>{Ee.und(w[v])&&(w[v]=d)});let A=await i.start(w);return W(p),r.paused&&await new Promise(d=>{r.resumeQueue.add(d)}),A})()},k;if(Sn.skipAnimation)return Zo(r),pn(i,!1);try{let N;Ee.arr(e)?N=(async m=>{for(let p of m)await F(p)})(e):N=Promise.resolve(e(F,i.stop.bind(i))),await Promise.all([N.then(I),b]),k=pn(i.get(),!0,!1)}catch(N){if(N instanceof GE)k=N.result;else if(N instanceof $E)k=N.result;else throw N}finally{s==r.asyncId&&(r.asyncId=f,r.asyncTo=f?D:void 0,r.promise=f?o:void 0)}return Ee.fun(C)&&ke.batchedUpdates(()=>{C(k,i,i.item)}),k})()}function Zo(e,t){mo(e.timeouts,r=>r.cancel()),e.pauseQueue.clear(),e.resumeQueue.clear(),e.asyncId=e.asyncTo=e.promise=void 0,t&&(e.cancelId=t)}var GE=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.");Le(this,"result")}},$E=class extends Error{constructor(){super("SkipAnimationSignal");Le(this,"result")}},Hv=e=>e instanceof Ep,rF=1,Ep=class extends XS{constructor(){super(...arguments);Le(this,"id",rF++);Le(this,"_priority",0)}get priority(){return this._priority}set priority(t){this._priority!=t&&(this._priority=t,this._onPriorityChange(t))}get(){let t=Rn(this);return t&&t.getValue()}to(...t){return Sn.to(this,t)}interpolate(...t){return wb(),Sn.to(this,t)}toJSON(){return this.get()}observerAdded(t){t==1&&this._attach()}observerRemoved(t){t==0&&this._detach()}_attach(){}_detach(){}_onChange(t,r=!1){Vo(this,{type:"change",parent:this,value:t,idle:r})}_onPriorityChange(t){this.idle||gc.sort(this),Vo(this,{type:"priority",parent:this,priority:t})}},_a=Symbol.for("SpringPhase"),f1=1,jv=2,Vv=4,Ah=e=>(e[_a]&f1)>0,gi=e=>(e[_a]&jv)>0,Js=e=>(e[_a]&Vv)>0,HE=(e,t)=>t?e[_a]|=jv|f1:e[_a]&=~jv,jE=(e,t)=>t?e[_a]|=Vv:e[_a]&=~Vv,nF=class extends Ep{constructor(t,r){super();Le(this,"key");Le(this,"animation",new tF);Le(this,"queue");Le(this,"defaultProps",{});Le(this,"_state",{paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set});Le(this,"_pendingCalls",new Set);Le(this,"_lastCallId",0);Le(this,"_lastToId",0);Le(this,"_memoizedDuration",0);if(!Ee.und(t)||!Ee.und(r)){let i=Ee.obj(t)?{...t}:{...r,from:t};Ee.und(i.default)&&(i.default=!0),this.start(i)}}get idle(){return!(gi(this)||this._state.asyncTo)||Js(this)}get goal(){return yr(this.animation.to)}get velocity(){let t=Rn(this);return t instanceof ul?t.lastVelocity||0:t.getPayload().map(r=>r.lastVelocity||0)}get hasAnimated(){return Ah(this)}get isAnimating(){return gi(this)}get isPaused(){return Js(this)}get isDelayed(){return this._state.delayed}advance(t){let r=!0,i=!1,s=this.animation,{toValues:f}=s,{config:C}=s,D=Ec(s.to);!D&&en(s.to)&&(f=Fr(yr(s.to))),s.values.forEach((I,K)=>{if(I.done)return;let b=I.constructor==Xo?1:D?D[K].lastPosition:f[K],W=s.immediate,F=b;if(!W){if(F=I.lastPosition,C.tension<=0){I.done=!0;return}let k=I.elapsedTime+=t,N=s.fromValues[K],m=I.v0!=null?I.v0:I.v0=Ee.arr(C.velocity)?C.velocity[K]:C.velocity,p,u=C.precision||(N==b?.005:Math.min(1,Math.abs(b-N)*.001));if(Ee.und(C.duration))if(C.decay){let w=C.decay===!0?.998:C.decay,A=Math.exp(-(1-w)*k);F=N+m/(1-w)*(1-A),W=Math.abs(I.lastPosition-F)<=u,p=m*A}else{p=I.lastVelocity==null?m:I.lastVelocity;let w=C.restVelocity||u/10,A=C.clamp?0:C.bounce,d=!Ee.und(A),v=N==b?I.v0>0:N<b,h,g=!1,P=1,R=Math.ceil(t/P);for(let y=0;y<R&&(h=Math.abs(p)>w,!(!h&&(W=Math.abs(b-F)<=u,W)));++y){d&&(g=F==b||F>b==v,g&&(p=-p*A,F=b));let L=-C.tension*1e-6*(F-b),U=-C.friction*.001*p,_=(L+U)/C.mass;p=p+_*P,F=F+p*P}}else{let w=1;C.duration>0&&(this._memoizedDuration!==C.duration&&(this._memoizedDuration=C.duration,I.durationProgress>0&&(I.elapsedTime=C.duration*I.durationProgress,k=I.elapsedTime+=t)),w=(C.progress||0)+k/this._memoizedDuration,w=w>1?1:w<0?0:w,I.durationProgress=w),F=N+C.easing(w)*(b-N),p=(F-I.lastPosition)/t,W=w==1}I.lastVelocity=p,Number.isNaN(F)&&(console.warn("Got NaN while animating:",this),W=!0)}D&&!D[K].done&&(W=!1),W?I.done=!0:r=!1,I.setValue(F,C.round)&&(i=!0)});let o=Rn(this),M=o.getValue();if(r){let I=yr(s.to);(M!==I||i)&&!C.decay?(o.setValue(I),this._onChange(I)):i&&C.decay&&this._onChange(M),this._stop()}else i&&this._onChange(M)}set(t){return ke.batchedUpdates(()=>{this._stop(),this._focus(t),this._set(t)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(gi(this)){let{to:t,config:r}=this.animation;ke.batchedUpdates(()=>{this._onStart(),r.decay||this._set(t,!1),this._stop()})}return this}update(t){return(this.queue||(this.queue=[])).push(t),this}start(t,r){let i;return Ee.und(t)?(i=this.queue||[],this.queue=[]):i=[Ee.obj(t)?t:{...r,to:t}],Promise.all(i.map(s=>this._update(s))).then(s=>yp(this,s))}stop(t){let{to:r}=this.animation;return this._focus(this.get()),Zo(this._state,t&&this._lastCallId),ke.batchedUpdates(()=>this._stop(r,t)),this}reset(){this._update({reset:!0})}eventObserved(t){t.type=="change"?this._start():t.type=="priority"&&(this.priority=t.priority+1)}_prepareNode(t){let r=this.key||"",{to:i,from:s}=t;i=Ee.obj(i)?i[r]:i,(i==null||Gv(i))&&(i=void 0),s=Ee.obj(s)?s[r]:s,s==null&&(s=void 0);let f={to:i,from:s};return Ah(this)||(t.reverse&&([i,s]=[s,i]),s=yr(s),Ee.und(s)?Rn(this)||this._set(i):this._set(s)),f}_update({...t},r){let{key:i,defaultProps:s}=this;t.default&&Object.assign(s,mp(t,(D,o)=>/^on/.test(o)?i1(D,i):D)),zE(this,t,"onProps"),eo(this,"onProps",t,this);let f=this._prepareNode(t);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");let C=this._state;return o1(++this._lastCallId,{key:i,props:t,defaultProps:s,state:C,actions:{pause:()=>{Js(this)||(jE(this,!0),so(C.pauseQueue),eo(this,"onPause",pn(this,qs(this,this.animation.to)),this))},resume:()=>{Js(this)&&(jE(this,!1),gi(this)&&this._resume(),so(C.resumeQueue),eo(this,"onResume",pn(this,qs(this,this.animation.to)),this))},start:this._merge.bind(this,f)}}).then(D=>{if(t.loop&&D.finished&&!(r&&D.noop)){let o=c1(t);if(o)return this._update(o,!0)}return D})}_merge(t,r,i){if(r.cancel)return this.stop(!0),i(fs(this));let s=!Ee.und(t.to),f=!Ee.und(t.from);if(s||f)if(r.callId>this._lastToId)this._lastToId=r.callId;else return i(fs(this));let{key:C,defaultProps:D,animation:o}=this,{to:M,from:I}=o,{to:K=M,from:b=I}=t;f&&!s&&(!r.default||Ee.und(K))&&(K=b),r.reverse&&([K,b]=[b,K]);let W=!jn(b,I);W&&(o.from=b),b=yr(b);let F=!jn(K,M);F&&this._focus(K);let k=Gv(r.to),{config:N}=o,{decay:m,velocity:p}=N;(s||f)&&(N.velocity=0),r.config&&!k&&eF(N,sa(r.config,C),r.config!==D.config?sa(D.config,C):void 0);let u=Rn(this);if(!u||Ee.und(K))return i(pn(this,!0));let w=Ee.und(r.reset)?f&&!r.default:!Ee.und(b)&&Eo(r.reset,C),A=w?b:this.get(),d=Qo(K),v=Ee.num(d)||Ee.arr(d)||yc(d),h=!k&&(!v||Eo(D.immediate||r.immediate,C));if(F){let y=Wv(K);if(y!==u.constructor)if(h)u=this._set(d);else throw Error(`Cannot animate between ${u.constructor.name} and ${y.name}, as the "to" prop suggests`)}let g=u.constructor,P=en(K),R=!1;if(!P){let y=w||!Ah(this)&&W;(F||y)&&(R=jn(Qo(A),d),P=!R),(!jn(o.immediate,h)&&!h||!jn(N.decay,m)||!jn(N.velocity,p))&&(P=!0)}if(R&&gi(this)&&(o.changed&&!w?P=!0:P||this._stop(M)),!k&&((P||en(M))&&(o.values=u.getPayload(),o.toValues=en(K)?null:g==Xo?[1]:Fr(d)),o.immediate!=h&&(o.immediate=h,!h&&!w&&this._set(M)),P)){let{onRest:y}=o;je(aF,U=>zE(this,r,U));let L=pn(this,qs(this,M));so(this._pendingCalls,L),this._pendingCalls.add(i),o.changed&&ke.batchedUpdates(()=>{var U;o.changed=!w,y==null||y(L,this),w?sa(D.onRest,L):(U=o.onStart)==null||U.call(o,L,this)})}w&&this._set(A),k?i(u1(r.to,r,this._state,this)):P?this._start():gi(this)&&!F?this._pendingCalls.add(i):i(l1(A))}_focus(t){let r=this.animation;t!==r.to&&(kE(this)&&this._detach(),r.to=t,kE(this)&&this._attach())}_attach(){let t=0,{to:r}=this.animation;en(r)&&(Ps(r,this),Hv(r)&&(t=r.priority+1)),this.priority=t}_detach(){let{to:t}=this.animation;en(t)&&zo(t,this)}_set(t,r=!0){let i=yr(t);if(!Ee.und(i)){let s=Rn(this);if(!s||!jn(i,s.getValue())){let f=Wv(i);!s||s.constructor!=f?pp(this,f.create(i)):s.setValue(i),s&&ke.batchedUpdates(()=>{this._onChange(i,r)})}}return Rn(this)}_onStart(){let t=this.animation;t.changed||(t.changed=!0,eo(this,"onStart",pn(this,qs(this,t.to)),this))}_onChange(t,r){r||(this._onStart(),sa(this.animation.onChange,t,this)),sa(this.defaultProps.onChange,t,this),super._onChange(t,r)}_start(){let t=this.animation;Rn(this).reset(yr(t.to)),t.immediate||(t.fromValues=t.values.map(r=>r.lastPosition)),gi(this)||(HE(this,!0),Js(this)||this._resume())}_resume(){Sn.skipAnimation?this.finish():gc.start(this)}_stop(t,r){if(gi(this)){HE(this,!1);let i=this.animation;je(i.values,f=>{f.done=!0}),i.toValues&&(i.onChange=i.onPause=i.onResume=void 0),Vo(this,{type:"idle",parent:this});let s=r?fs(this.get()):pn(this.get(),qs(this,t??i.to));so(this._pendingCalls,s),i.changed&&(i.changed=!1,eo(this,"onRest",s,this))}}};function qs(e,t){let r=Qo(t),i=Qo(e.get());return jn(i,r)}function c1(e,t=e.loop,r=e.to){let i=sa(t);if(i){let s=i!==!0&&s1(i),f=(s||e).reverse,C=!s||s.reset;return Jo({...e,loop:t,default:!1,pause:void 0,to:!f||Gv(r)?r:void 0,from:C?e.from:void 0,reset:C,...s})}}function Jo(e){let{to:t,from:r}=e=s1(e),i=new Set;return Ee.obj(t)&&VE(t,i),Ee.obj(r)&&VE(r,i),e.keys=i.size?Array.from(i):null,e}function iF(e){let t=Jo(e);return Ee.und(t.default)&&(t.default=mp(t)),t}function VE(e,t){Mn(e,(r,i)=>r!=null&&t.add(i))}var aF=["onStart","onRest","onChange","onPause","onResume"];function zE(e,t,r){e.animation[r]=t[r]!==a1(t,r)?i1(t[r],e.key):void 0}function eo(e,t,...r){var i,s,f,C;(s=(i=e.animation)[t])==null||s.call(i,...r),(C=(f=e.defaultProps)[t])==null||C.call(f,...r)}var sF=["onStart","onChange","onRest"],oF=1,lF=class{constructor(e,t){Le(this,"id",oF++);Le(this,"springs",{});Le(this,"queue",[]);Le(this,"ref");Le(this,"_flush");Le(this,"_initialProps");Le(this,"_lastAsyncId",0);Le(this,"_active",new Set);Le(this,"_changed",new Set);Le(this,"_started",!1);Le(this,"_item");Le(this,"_state",{paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set});Le(this,"_events",{onStart:new Map,onChange:new Map,onRest:new Map});this._onFrame=this._onFrame.bind(this),t&&(this._flush=t),e&&this.start({default:!0,...e})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(e=>e.idle&&!e.isDelayed&&!e.isPaused)}get item(){return this._item}set item(e){this._item=e}get(){let e={};return this.each((t,r)=>e[r]=t.get()),e}set(e){for(let t in e){let r=e[t];Ee.und(r)||this.springs[t].set(r)}}update(e){return e&&this.queue.push(Jo(e)),this}start(e){let{queue:t}=this;return e?t=Fr(e).map(Jo):this.queue=[],this._flush?this._flush(this,t):(p1(this,t),zv(this,t))}stop(e,t){if(e!==!!e&&(t=e),t){let r=this.springs;je(Fr(t),i=>r[i].stop(!!e))}else Zo(this._state,this._lastAsyncId),this.each(r=>r.stop(!!e));return this}pause(e){if(Ee.und(e))this.start({pause:!0});else{let t=this.springs;je(Fr(e),r=>t[r].pause())}return this}resume(e){if(Ee.und(e))this.start({pause:!1});else{let t=this.springs;je(Fr(e),r=>t[r].resume())}return this}each(e){Mn(this.springs,e)}_onFrame(){let{onStart:e,onChange:t,onRest:r}=this._events,i=this._active.size>0,s=this._changed.size>0;(i&&!this._started||s&&!this._started)&&(this._started=!0,mo(e,([D,o])=>{o.value=this.get(),D(o,this,this._item)}));let f=!i&&this._started,C=s||f&&r.size?this.get():null;s&&t.size&&mo(t,([D,o])=>{o.value=C,D(o,this,this._item)}),f&&(this._started=!1,mo(r,([D,o])=>{o.value=C,D(o,this,this._item)}))}eventObserved(e){if(e.type=="change")this._changed.add(e.parent),e.idle||this._active.add(e.parent);else if(e.type=="idle")this._active.delete(e.parent);else return;ke.onFrame(this._onFrame)}};function zv(e,t){return Promise.all(t.map(r=>d1(e,r))).then(r=>yp(e,r))}async function d1(e,t,r){let{keys:i,to:s,from:f,loop:C,onRest:D,onResolve:o}=t,M=Ee.obj(t.default)&&t.default;C&&(t.loop=!1),s===!1&&(t.to=null),f===!1&&(t.from=null);let I=Ee.arr(s)||Ee.fun(s)?s:void 0;I?(t.to=void 0,t.onRest=void 0,M&&(M.onRest=void 0)):je(sF,k=>{let N=t[k];if(Ee.fun(N)){let m=e._events[k];t[k]=({finished:p,cancelled:u})=>{let w=m.get(N);w?(p||(w.finished=!1),u&&(w.cancelled=!0)):m.set(N,{value:null,finished:p||!1,cancelled:u||!1})},M&&(M[k]=t[k])}});let K=e._state;t.pause===!K.paused?(K.paused=t.pause,so(t.pause?K.pauseQueue:K.resumeQueue)):K.paused&&(t.pause=!0);let b=(i||Object.keys(e.springs)).map(k=>e.springs[k].start(t)),W=t.cancel===!0||a1(t,"cancel")===!0;(I||W&&K.asyncId)&&b.push(o1(++e._lastAsyncId,{props:t,state:K,actions:{pause:Bv,resume:Bv,start(k,N){W?(Zo(K,e._lastAsyncId),N(fs(e))):(k.onRest=D,N(u1(I,k,K,e)))}}})),K.paused&&await new Promise(k=>{K.resumeQueue.add(k)});let F=yp(e,await Promise.all(b));if(C&&F.finished&&!(r&&F.noop)){let k=c1(t,C,s);if(k)return p1(e,[k]),d1(e,k,!0)}return o&&ke.batchedUpdates(()=>o(F,e,e.item)),F}function YE(e,t){let r={...e.springs};return t&&je(Fr(t),i=>{Ee.und(i.keys)&&(i=Jo(i)),Ee.obj(i.to)||(i={...i,to:void 0}),g1(r,i,s=>v1(s))}),h1(e,r),r}function h1(e,t){Mn(t,(r,i)=>{e.springs[i]||(e.springs[i]=r,Ps(r,e))})}function v1(e,t){let r=new nF;return r.key=e,t&&Ps(r,t),r}function g1(e,t,r){t.keys&&je(t.keys,i=>{(e[i]||(e[i]=r(i)))._prepareNode(t)})}function p1(e,t){je(t,r=>{g1(e.springs,r,i=>v1(i,e))})}var Tc=({children:e,...t})=>{let r=oe.useContext(Pf),i=t.pause||!!r.pause,s=t.immediate||!!r.immediate;t=Fb(()=>({pause:i,immediate:s}),[i,s]);let{Provider:f}=Pf;return oe.createElement(f,{value:t},e)},Pf=uF(Tc,{});Tc.Provider=Pf.Provider;Tc.Consumer=Pf.Consumer;function uF(e,t){return Object.assign(e,oe.createContext(t)),e.Provider._context=e,e.Consumer._context=e,e}var fF=()=>{let e=[],t=function(i){kb();let s=[];return je(e,(f,C)=>{if(Ee.und(i))s.push(f.start());else{let D=r(i,f,C);D&&s.push(f.start(D))}}),s};t.current=e,t.add=function(i){e.includes(i)||e.push(i)},t.delete=function(i){let s=e.indexOf(i);~s&&e.splice(s,1)},t.pause=function(){return je(e,i=>i.pause(...arguments)),this},t.resume=function(){return je(e,i=>i.resume(...arguments)),this},t.set=function(i){je(e,(s,f)=>{let C=Ee.fun(i)?i(f,s):i;C&&s.set(C)})},t.start=function(i){let s=[];return je(e,(f,C)=>{if(Ee.und(i))s.push(f.start());else{let D=this._getProps(i,f,C);D&&s.push(f.start(D))}}),s},t.stop=function(){return je(e,i=>i.stop(...arguments)),this},t.update=function(i){return je(e,(s,f)=>s.update(this._getProps(i,s,f))),this};let r=function(i,s,f){return Ee.fun(i)?i(f,s):i};return t._getProps=r,t};function cF(e,t,r){let i=Ee.fun(t)&&t;i&&!r&&(r=[]);let s=oe.useMemo(()=>i||arguments.length==3?fF():void 0,[]),f=oe.useRef(0),C=e1(),D=oe.useMemo(()=>({ctrls:[],queue:[],flush(m,p){let u=YE(m,p);return f.current>0&&!D.queue.length&&!Object.keys(u).some(w=>!m.springs[w])?zv(m,p):new Promise(w=>{h1(m,u),D.queue.push(()=>{w(zv(m,p))}),C()})}}),[]),o=oe.useRef([...D.ctrls]),M=[],I=FE(e)||0;oe.useMemo(()=>{je(o.current.slice(e,I),m=>{Qb(m,s),m.stop(!0)}),o.current.length=e,K(I,e)},[e]),oe.useMemo(()=>{K(0,Math.min(I,e))},r);function K(m,p){for(let u=m;u<p;u++){let w=o.current[u]||(o.current[u]=new lF(null,D.flush)),A=i?i(u,w):t[u];A&&(M[u]=iF(A))}}let b=o.current.map((m,p)=>YE(m,M[p])),W=oe.useContext(Tc),F=FE(W),k=W!==F&&Xb(W);gp(()=>{f.current++,D.ctrls=o.current;let{queue:m}=D;m.length&&(D.queue=[],je(m,p=>p())),je(o.current,(p,u)=>{s==null||s.add(p),k&&p.start({default:W});let w=M[u];w&&(Zb(p,w.ref),p.ref?p.queue.push(w):p.start(w))})}),t1(()=>()=>{je(D.ctrls,m=>m.stop(!0))});let N=b.map(m=>({...m}));return s?[N,s]:N}function Lu(e,t){let r=Ee.fun(e),[[i],s]=cF(1,r?e:[e],r?t||[]:t);return r||arguments.length==2?[i,s]:i}var dF=class extends Ep{constructor(t,r){super();Le(this,"key");Le(this,"idle",!0);Le(this,"calc");Le(this,"_active",new Set);this.source=t,this.calc=jo(...r);let i=this._get(),s=Wv(i);pp(this,s.create(i))}advance(t){let r=this._get(),i=this.get();jn(r,i)||(Rn(this).setValue(r),this._onChange(r,this.idle)),!this.idle&&XE(this._active)&&Ph(this)}_get(){let t=Ee.arr(this.source)?this.source.map(yr):Fr(yr(this.source));return this.calc(...t)}_start(){this.idle&&!XE(this._active)&&(this.idle=!1,je(Ec(this),t=>{t.done=!1}),Sn.skipAnimation?(ke.batchedUpdates(()=>this.advance()),Ph(this)):gc.start(this))}_attach(){let t=1;je(Fr(this.source),r=>{en(r)&&Ps(r,this),Hv(r)&&(r.idle||this._active.add(r),t=Math.max(t,r.priority+1))}),this.priority=t,this._start()}_detach(){je(Fr(this.source),t=>{en(t)&&zo(t,this)}),this._active.clear(),Ph(this)}eventObserved(t){t.type=="change"?t.idle?this.advance():(this._active.add(t.parent),this._start()):t.type=="idle"?this._active.delete(t.parent):t.type=="priority"&&(this.priority=Fr(this.source).reduce((r,i)=>Math.max(r,(Hv(i)?i.priority:0)+1),0))}};function hF(e){return e.idle!==!1}function XE(e){return!e.size||Array.from(e).every(hF)}function Ph(e){e.idle||(e.idle=!0,je(Ec(e),t=>{t.done=!0}),Vo(e,{type:"idle",parent:e}))}Sn.assign({createStringInterpolator:JS,to:(e,t)=>new dF(e,t)});var m1=/^--/;function vF(e,t){return t==null||typeof t=="boolean"||t===""?"":typeof t=="number"&&t!==0&&!m1.test(e)&&!(_o.hasOwnProperty(e)&&_o[e])?t+"px":(""+t).trim()}var QE={};function gF(e,t){if(!e.nodeType||!e.setAttribute)return!1;let r=e.nodeName==="filter"||e.parentNode&&e.parentNode.nodeName==="filter",{style:i,children:s,scrollTop:f,scrollLeft:C,viewBox:D,...o}=t,M=Object.values(o),I=Object.keys(o).map(K=>r||e.hasAttribute(K)?K:QE[K]||(QE[K]=K.replace(/([A-Z])/g,b=>"-"+b.toLowerCase())));s!==void 0&&(e.textContent=s);for(let K in i)if(i.hasOwnProperty(K)){let b=vF(K,i[K]);m1.test(K)?e.style.setProperty(K,b):e.style[K]=b}I.forEach((K,b)=>{e.setAttribute(K,M[b])}),f!==void 0&&(e.scrollTop=f),C!==void 0&&(e.scrollLeft=C),D!==void 0&&e.setAttribute("viewBox",D)}var _o={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pF=(e,t)=>e+t.charAt(0).toUpperCase()+t.substring(1),mF=["Webkit","Ms","Moz","O"];_o=Object.keys(_o).reduce((e,t)=>(mF.forEach(r=>e[pF(r,t)]=e[t]),e),_o);var yF=/^(matrix|translate|scale|rotate|skew)/,EF=/^(translate)/,_F=/^(rotate|skew)/,Dh=(e,t)=>Ee.num(e)&&e!==0?e+t:e,Wu=(e,t)=>Ee.arr(e)?e.every(r=>Wu(r,t)):Ee.num(e)?e===t:parseFloat(e)===t,TF=class extends _c{constructor({x:e,y:t,z:r,...i}){let s=[],f=[];(e||t||r)&&(s.push([e||0,t||0,r||0]),f.push(C=>[`translate3d(${C.map(D=>Dh(D,"px")).join(",")})`,Wu(C,0)])),Mn(i,(C,D)=>{if(D==="transform")s.push([C||""]),f.push(o=>[o,o===""]);else if(yF.test(D)){if(delete i[D],Ee.und(C))return;let o=EF.test(D)?"px":_F.test(D)?"deg":"";s.push(Fr(C)),f.push(D==="rotate3d"?([M,I,K,b])=>[`rotate3d(${M},${I},${K},${Dh(b,o)})`,Wu(b,0)]:M=>[`${D}(${M.map(I=>Dh(I,o)).join(",")})`,Wu(M,D.startsWith("scale")?1:0)])}}),s.length&&(i.transform=new SF(s,f)),super(i)}},SF=class extends XS{constructor(t,r){super();Le(this,"_value",null);this.inputs=t,this.transforms=r}get(){return this._value||(this._value=this._get())}_get(){let t="",r=!0;return je(this.inputs,(i,s)=>{let f=yr(i[0]),[C,D]=this.transforms[s](Ee.arr(f)?f:i.map(yr));t+=" "+C,r=r&&D}),r?"none":t}observerAdded(t){t==1&&je(this.inputs,r=>je(r,i=>en(i)&&Ps(i,this)))}observerRemoved(t){t==0&&je(this.inputs,r=>je(r,i=>en(i)&&zo(i,this)))}eventObserved(t){t.type=="change"&&(this._value=null),Vo(this,t)}},xF=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];Sn.assign({batchedUpdates:xo.unstable_batchedUpdates,createStringInterpolator:JS,colors:cb});var LF=Hb(xF,{applyAnimatedValues:gF,createAnimatedStyle:e=>new TF(e),getComponentProps:({scrollTop:e,scrollLeft:t,...r})=>r}),Au=LF.animated;function oa(){return oa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},oa.apply(this,arguments)}function AF(e,t){if(e==null)return{};var r={},i=Object.keys(e),s,f;for(f=0;f<i.length;f++)s=i[f],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}var Rh={dark:{circle:{r:9},mask:{cx:"50%",cy:"23%"},svg:{transform:"rotate(40deg)"},lines:{opacity:0}},light:{circle:{r:5},mask:{cx:"100%",cy:"0%"},svg:{transform:"rotate(90deg)"},lines:{opacity:1}},springConfig:{mass:4,tension:250,friction:35}},ZE=0,PF=function(t){var r=t.onChange,i=t.checked,s=i===void 0?!1:i,f=t.size,C=f===void 0?24:f,D=t.animationProperties,o=D===void 0?Rh:D,M=t.moonColor,I=M===void 0?"white":M,K=t.sunColor,b=K===void 0?"black":K,W=t.style,F=AF(t,["onChange","children","checked","size","animationProperties","moonColor","sunColor","style"]),k=oe.useState(0),N=k[0],m=k[1];oe.useEffect(function(){ZE+=1,m(ZE)},[m]);var p=oe.useMemo(function(){return o!==Rh?Object.assign(Rh,o):o},[o]),u=p[s?"dark":"light"],w=u.circle,A=u.svg,d=u.lines,v=u.mask,h=Lu(oa({},A,{config:o.springConfig})),g=Lu(oa({},w,{config:o.springConfig})),P=Lu(oa({},v,{config:o.springConfig})),R=Lu(oa({},d,{config:o.springConfig})),y=function(){return r(!s)},L="circle-mask-"+N;return oe.createElement(Au.svg,Object.assign({xmlns:"http://www.w3.org/2000/svg",width:C,height:C,viewBox:"0 0 24 24",color:s?I:b,fill:"none",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",stroke:"currentColor",onClick:y,style:oa({cursor:"pointer"},h,W)},F),oe.createElement("mask",{id:L},oe.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"white"}),oe.createElement(Au.circle,{style:P,r:"9",fill:"black"})),oe.createElement(Au.circle,{cx:"12",cy:"12",fill:s?I:b,style:g,mask:"url(#"+L+")"}),oe.createElement(Au.g,{stroke:"currentColor",style:R},oe.createElement("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),oe.createElement("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),oe.createElement("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),oe.createElement("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),oe.createElement("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),oe.createElement("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),oe.createElement("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),oe.createElement("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})))};const DF={isDarkMode:JSON.parse(localStorage.getItem("isDarkMode")||"false")},y1=ip({name:"theme",initialState:DF,reducers:{setTheme:(e,t)=>({...e,isDarkMode:t.payload})}}),RF=y1.reducer,{setTheme:CF}=y1.actions;const IF=()=>{const e=hc(),{isDarkMode:t}=tr(s=>s.theme),[r]=DS("isDarkMode",t);return _e("div",{className:"theme-toggler",children:_e(PF,{checked:t,onChange:()=>{e(CF(!t)),r(!t)},size:24})})};const OF=()=>{const{isDarkMode:e}=tr(t=>t.theme);return ut("header",{className:Kt("header",{"header--dark":e}),children:[_e(BS,{type:e?"big-dark":"big"}),_e(IF,{})]})};var _p=(e=>(e.GET_COURSES="Unable to get the courses",e.GET_COURSE_DETAILS="Unable to get the course's details",e))(_p||{}),Ct=(e=>(e.ARROW_LEFT="icon__arrow-left",e.ARROW_LEFT_DISABLED="icon__arrow-left--disabled",e.ARROW_LEFT_DARK="icon__arrow-left--dark",e.ARROW_RIGHT="icon__arrow-right",e.ARROW_RIGHT_DISABLED="icon__arrow-right--disabled",e.ARROW_RIGHT_DARK="icon__arrow-right--dark",e.ARROW_UP="icon__arrow-up",e.ARROW_UP_DISABLED="icon__arrow-up--disabled",e.ARROW_UP_DARK="icon__arrow-up--dark",e.PLAY="icon__play",e.PAUSE="icon__pause",e.BLOCKED="icon__blocked",e.STAR_EMPTY="icon__star-empty",e.STAR_EMPTY_DARK="icon__star-empty--dark",e.STAR_FILLED="icon__star-filled",e.STAR_FILLED_DARK="icon__star-filled--dark",e.STAR_HALF_FILLED="icon__star-half-filled",e.STAR_HALF_FILLED_DARK="icon__star-half-filled--dark",e))(Ct||{});const Qn=({type:e,addClassName:t})=>_e("span",{className:Kt("icon",e,t),"data-testid":e});const wF=()=>{const e=Ls(),{isDarkMode:t}=tr(i=>i.theme),r=()=>{window.scrollTo({top:0,left:0,behavior:"smooth"})};return ut(sl,{to:`${e.pathname}`,className:Kt("footer__button-top","button-top",{"button-top--dark":t}),type:"button","data-testid":"to-top-button",onClick:r,children:[_e("p",{className:"button-top__text",children:"Back to top"}),_e(Qn,{type:t?Ct.ARROW_UP_DARK:Ct.ARROW_UP,addClassName:Kt("button-top__icon",{"button-top__icon--dark":t})})]})};const MF=()=>{const{width:e}=sk(),{isDarkMode:t}=tr(i=>i.theme);return _e("footer",{className:"footer",children:ut("div",{className:"footer__container",children:[_e(BS,{type:(()=>{switch(!0){case(e>640&&!t):return"big";case(e>640&&t):return"big-dark";default:case e<640:return"small"}})()}),_e(sl,{to:Uu.social.github,className:Kt("footer__link",{"footer__link--dark":t}),target:"_blank",rel:"noreferrer",children:"Github"}),_e(wF,{})]})})};const kF=()=>{const e=hc(),{isDarkMode:t}=tr(r=>r.theme);return oe.useEffect(()=>{e(Bu())},[e]),ut("div",{className:Kt("App",{"App--dark":t}),children:[_e(OF,{}),_e("main",{children:_e("div",{className:"container",children:_e(zM,{})})}),_e(MF,{})]})},bF={selectedCourse:null,loaded:!1,hasError:!1},To=NS("selectedCourse/fetch",async e=>e?qk(e):null),FF=ip({name:"selectedCourse",initialState:bF,reducers:{setSelectedCourse:(e,t)=>({...e,selectedCourse:t.payload})},extraReducers:e=>{e.addCase(To.pending,t=>({...t,loaded:!1,hasError:!1})),e.addCase(To.fulfilled,(t,r)=>({...t,selectedCourse:r.payload??null,loaded:!0,hasError:!1})),e.addCase(To.rejected,t=>({...t,loaded:!0,hasError:!0}))}}),NF=FF.reducer,UF=Bk({reducer:{courses:rb,selectedCourse:NF,theme:RF}});const BF=()=>ut("div",{className:"not-found-page",children:[_e("h1",{className:"not-found-page__title",children:"Oh, no! Page is not found..."}),_e("span",{className:"not-found-page__image","data-testid":"not-found-image"})]});const E1=({error:e})=>{const{isDarkMode:t}=tr(r=>r.theme);return _e("h1",{className:Kt("error-notification",{"error-notification--dark":t}),"data-testid":"error-notification",children:`...${e}...`})};var Yv={},KF={get exports(){return Yv},set exports(e){Yv=e}};(function(e,t){typeof window<"u"&&function(i,s){e.exports=s()}(Ka,()=>(()=>{var r={"./src/config.ts":(C,D,o)=>{o.r(D),o.d(D,{enableStreamingMode:()=>E,hlsDefaultConfig:()=>_,mergeConfig:()=>c});var M=o("./src/controller/abr-controller.ts"),I=o("./src/controller/audio-stream-controller.ts"),K=o("./src/controller/audio-track-controller.ts"),b=o("./src/controller/subtitle-stream-controller.ts"),W=o("./src/controller/subtitle-track-controller.ts"),F=o("./src/controller/buffer-controller.ts"),k=o("./src/controller/timeline-controller.ts"),N=o("./src/controller/cap-level-controller.ts"),m=o("./src/controller/fps-controller.ts"),p=o("./src/controller/eme-controller.ts"),u=o("./src/controller/cmcd-controller.ts"),w=o("./src/utils/xhr-loader.ts"),A=o("./src/utils/fetch-loader.ts"),d=o("./src/utils/cues.ts"),v=o("./src/utils/mediakeys-helper.ts"),h=o("./src/utils/logger.ts");function g(){return g=Object.assign?Object.assign.bind():function(l){for(var x=1;x<arguments.length;x++){var B=arguments[x];for(var O in B)Object.prototype.hasOwnProperty.call(B,O)&&(l[O]=B[O])}return l},g.apply(this,arguments)}function P(l,x){var B=Object.keys(l);if(Object.getOwnPropertySymbols){var O=Object.getOwnPropertySymbols(l);x&&(O=O.filter(function($){return Object.getOwnPropertyDescriptor(l,$).enumerable})),B.push.apply(B,O)}return B}function R(l){for(var x=1;x<arguments.length;x++){var B=arguments[x]!=null?arguments[x]:{};x%2?P(Object(B),!0).forEach(function(O){y(l,O,B[O])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(B)):P(Object(B)).forEach(function(O){Object.defineProperty(l,O,Object.getOwnPropertyDescriptor(B,O))})}return l}function y(l,x,B){return x=L(x),x in l?Object.defineProperty(l,x,{value:B,enumerable:!0,configurable:!0,writable:!0}):l[x]=B,l}function L(l){var x=U(l,"string");return typeof x=="symbol"?x:String(x)}function U(l,x){if(typeof l!="object"||l===null)return l;var B=l[Symbol.toPrimitive];if(B!==void 0){var O=B.call(l,x||"default");if(typeof O!="object")return O;throw new TypeError("@@toPrimitive must return a primitive value.")}return(x==="string"?String:Number)(l)}var _=R(R({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:60*1e3*1e3,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:w.default,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:M.default,bufferController:F.default,capLevelController:N.default,fpsController:m.default,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:v.requestMediaKeySystemAccess,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0},S()),{},{subtitleStreamController:b.SubtitleStreamController,subtitleTrackController:W.default,timelineController:k.TimelineController,audioStreamController:I.default,audioTrackController:K.default,emeController:p.default,cmcdController:u.default});function S(){return{cueHandler:d.default,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function c(l,x){if((x.liveSyncDurationCount||x.liveMaxLatencyDurationCount)&&(x.liveSyncDuration||x.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(x.liveMaxLatencyDurationCount!==void 0&&(x.liveSyncDurationCount===void 0||x.liveMaxLatencyDurationCount<=x.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(x.liveMaxLatencyDuration!==void 0&&(x.liveSyncDuration===void 0||x.liveMaxLatencyDuration<=x.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');return g({},l,x)}function E(l){var x=l.loader;if(x!==A.default&&x!==w.default)h.logger.log("[config]: Custom loader detected, cannot enable progressive streaming"),l.progressive=!1;else{var B=(0,A.fetchSupported)();B&&(l.loader=A.default,l.progressive=!0,l.enableSoftwareAES=!0,h.logger.log("[config]: Progressive streaming enabled, using FetchLoader"))}}},"./src/controller/abr-controller.ts":(C,D,o)=>{o.r(D),o.d(D,{default:()=>w});var M=o("./src/polyfills/number.ts"),I=o("./src/utils/ewma-bandwidth-estimator.ts"),K=o("./src/events.ts"),b=o("./src/errors.ts"),W=o("./src/types/loader.ts"),F=o("./src/utils/logger.ts");function k(A,d){for(var v=0;v<d.length;v++){var h=d[v];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(A,m(h.key),h)}}function N(A,d,v){return d&&k(A.prototype,d),v&&k(A,v),Object.defineProperty(A,"prototype",{writable:!1}),A}function m(A){var d=p(A,"string");return typeof d=="symbol"?d:String(d)}function p(A,d){if(typeof A!="object"||A===null)return A;var v=A[Symbol.toPrimitive];if(v!==void 0){var h=v.call(A,d||"default");if(typeof h!="object")return h;throw new TypeError("@@toPrimitive must return a primitive value.")}return(d==="string"?String:Number)(A)}var u=function(){function A(v){this.hls=void 0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=void 0,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this.hls=v;var h=v.config;this.bwEstimator=new I.default(h.abrEwmaSlowVoD,h.abrEwmaFastVoD,h.abrEwmaDefaultEstimate),this.registerListeners()}var d=A.prototype;return d.registerListeners=function(){var h=this.hls;h.on(K.Events.FRAG_LOADING,this.onFragLoading,this),h.on(K.Events.FRAG_LOADED,this.onFragLoaded,this),h.on(K.Events.FRAG_BUFFERED,this.onFragBuffered,this),h.on(K.Events.LEVEL_LOADED,this.onLevelLoaded,this),h.on(K.Events.ERROR,this.onError,this)},d.unregisterListeners=function(){var h=this.hls;h.off(K.Events.FRAG_LOADING,this.onFragLoading,this),h.off(K.Events.FRAG_LOADED,this.onFragLoaded,this),h.off(K.Events.FRAG_BUFFERED,this.onFragBuffered,this),h.off(K.Events.LEVEL_LOADED,this.onLevelLoaded,this),h.off(K.Events.ERROR,this.onError,this)},d.destroy=function(){this.unregisterListeners(),this.clearTimer(),this.hls=this.onCheck=null,this.fragCurrent=this.partCurrent=null},d.onFragLoading=function(h,g){var P=g.frag;if(P.type===W.PlaylistLevelType.MAIN&&!this.timer){var R;this.fragCurrent=P,this.partCurrent=(R=g.part)!=null?R:null,this.timer=self.setInterval(this.onCheck,100)}},d.onLevelLoaded=function(h,g){var P=this.hls.config;g.details.live?this.bwEstimator.update(P.abrEwmaSlowLive,P.abrEwmaFastLive):this.bwEstimator.update(P.abrEwmaSlowVoD,P.abrEwmaFastVoD)},d._abandonRulesCheck=function(){var h=this.fragCurrent,g=this.partCurrent,P=this.hls,R=P.autoLevelEnabled,y=P.media;if(!(!h||!y)){var L=g?g.stats:h.stats,U=g?g.duration:h.duration;if(L.aborted||L.loaded&&L.loaded===L.total||h.level===0){this.clearTimer(),this._nextAutoLevel=-1;return}if(!(!R||y.paused||!y.playbackRate||!y.readyState)){var _=P.mainForwardBufferInfo;if(_!==null){var S=performance.now()-L.loading.start,c=Math.abs(y.playbackRate);if(!(S<=500*U/c)){var E=L.loaded&&L.loading.first,l=this.bwEstimator.getEstimate(),x=P.levels,B=P.minAutoLevel,O=x[h.level],$=L.total||Math.max(L.loaded,Math.round(U*O.maxBitrate/8)),H=E?L.loaded*1e3/S:0,j=H?($-L.loaded)/H:$*8/l,V=_.len/c;if(!(j<=V)){var z=Number.POSITIVE_INFINITY,X;for(X=h.level-1;X>B;X--){var J=x[X].maxBitrate;if(z=H?U*J/(8*.8*H):U*J/l,z<V)break}z>=j||(F.logger.warn("Fragment "+h.sn+(g?" part "+g.index:"")+" of level "+h.level+" is loading too slowly and will cause an underbuffer; aborting and switching to level "+X+`
      Current BW estimate: `+((0,M.isFiniteNumber)(l)?(l/1024).toFixed(3):"Unknown")+` Kb/s
      Estimated load time for current fragment: `+j.toFixed(3)+` s
      Estimated load time for the next fragment: `+z.toFixed(3)+` s
      Time to underbuffer: `+V.toFixed(3)+" s"),P.nextLoadLevel=X,E&&this.bwEstimator.sample(S,L.loaded),this.clearTimer(),(h.loader||h.keyLoader)&&(this.fragCurrent=this.partCurrent=null,h.abortRequests()),P.trigger(K.Events.FRAG_LOAD_EMERGENCY_ABORTED,{frag:h,part:g,stats:L}))}}}}}},d.onFragLoaded=function(h,g){var P=g.frag,R=g.part;if(P.type===W.PlaylistLevelType.MAIN&&(0,M.isFiniteNumber)(P.sn)){var y=R?R.stats:P.stats,L=R?R.duration:P.duration;if(this.clearTimer(),this.lastLoadedFragLevel=P.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var U=this.hls.levels[P.level],_=(U.loaded?U.loaded.bytes:0)+y.loaded,S=(U.loaded?U.loaded.duration:0)+L;U.loaded={bytes:_,duration:S},U.realBitrate=Math.round(8*_/S)}if(P.bitrateTest){var c={stats:y,frag:P,part:R,id:P.type};this.onFragBuffered(K.Events.FRAG_BUFFERED,c)}}},d.onFragBuffered=function(h,g){var P=g.frag,R=g.part,y=R?R.stats:P.stats;if(!y.aborted&&!(P.type!==W.PlaylistLevelType.MAIN||P.sn==="initSegment")){var L=y.parsing.end-y.loading.start;this.bwEstimator.sample(L,y.loaded),y.bwEstimate=this.bwEstimator.getEstimate(),P.bitrateTest?this.bitrateTestDelay=L/1e3:this.bitrateTestDelay=0}},d.onError=function(h,g){var P;if(((P=g.frag)===null||P===void 0?void 0:P.type)===W.PlaylistLevelType.MAIN){if(g.type===b.ErrorTypes.KEY_SYSTEM_ERROR){this.clearTimer();return}switch(g.details){case b.ErrorDetails.FRAG_LOAD_ERROR:case b.ErrorDetails.FRAG_LOAD_TIMEOUT:case b.ErrorDetails.KEY_LOAD_ERROR:case b.ErrorDetails.KEY_LOAD_TIMEOUT:this.clearTimer();break}}},d.clearTimer=function(){self.clearInterval(this.timer),this.timer=void 0},d.getNextABRAutoLevel=function(){var h=this.fragCurrent,g=this.partCurrent,P=this.hls,R=P.maxAutoLevel,y=P.config,L=P.minAutoLevel,U=P.media,_=g?g.duration:h?h.duration:0,S=U&&U.playbackRate!==0?Math.abs(U.playbackRate):1,c=this.bwEstimator?this.bwEstimator.getEstimate():y.abrEwmaDefaultEstimate,E=P.mainForwardBufferInfo,l=(E?E.len:0)/S,x=this.findBestLevel(c,L,R,l,y.abrBandWidthFactor,y.abrBandWidthUpFactor);if(x>=0)return x;F.logger.trace((l?"rebuffering expected":"buffer is empty")+", finding optimal quality level");var B=_?Math.min(_,y.maxStarvationDelay):y.maxStarvationDelay,O=y.abrBandWidthFactor,$=y.abrBandWidthUpFactor;if(!l){var H=this.bitrateTestDelay;if(H){var j=_?Math.min(_,y.maxLoadingDelay):y.maxLoadingDelay;B=j-H,F.logger.trace("bitrate test took "+Math.round(1e3*H)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*B)+" ms"),O=$=1}}return x=this.findBestLevel(c,L,R,l+B,O,$),Math.max(x,0)},d.findBestLevel=function(h,g,P,R,y,L){for(var U,_=this.fragCurrent,S=this.partCurrent,c=this.lastLoadedFragLevel,E=this.hls.levels,l=E[c],x=!!(l!=null&&(U=l.details)!==null&&U!==void 0&&U.live),B=l==null?void 0:l.codecSet,O=S?S.duration:_?_.duration:0,$=P;$>=g;$--){var H=E[$];if(!(!H||B&&H.codecSet!==B)){var j=H.details,V=(S?j==null?void 0:j.partTarget:j==null?void 0:j.averagetargetduration)||O,z=void 0;$<=c?z=y*h:z=L*h;var X=E[$].maxBitrate,J=X*V/z;if(F.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+$+"/"+Math.round(z)+"/"+X+"/"+V+"/"+R+"/"+J),z>X&&(J===0||!(0,M.isFiniteNumber)(J)||x&&!this.bitrateTestDelay||J<R))return $}}return-1},N(A,[{key:"nextAutoLevel",get:function(){var h=this._nextAutoLevel,g=this.bwEstimator;if(h!==-1&&!g.canEstimate())return h;var P=this.getNextABRAutoLevel();return h!==-1&&this.hls.levels[P].loadError?h:(h!==-1&&(P=Math.min(h,P)),P)},set:function(h){this._nextAutoLevel=h}}]),A}();const w=u},"./src/controller/audio-stream-controller.ts":(C,D,o)=>{o.r(D),o.d(D,{default:()=>y});var M=o("./src/polyfills/number.ts"),I=o("./src/controller/base-stream-controller.ts"),K=o("./src/events.ts"),b=o("./src/utils/buffer-helper.ts"),W=o("./src/controller/fragment-tracker.ts"),F=o("./src/types/level.ts"),k=o("./src/types/loader.ts"),N=o("./src/loader/fragment.ts"),m=o("./src/demux/chunk-cache.ts"),p=o("./src/demux/transmuxer-interface.ts"),u=o("./src/types/transmuxer.ts"),w=o("./src/controller/fragment-finders.ts"),A=o("./src/utils/discontinuities.ts"),d=o("./src/errors.ts");function v(){return v=Object.assign?Object.assign.bind():function(L){for(var U=1;U<arguments.length;U++){var _=arguments[U];for(var S in _)Object.prototype.hasOwnProperty.call(_,S)&&(L[S]=_[S])}return L},v.apply(this,arguments)}function h(L,U){L.prototype=Object.create(U.prototype),L.prototype.constructor=L,g(L,U)}function g(L,U){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(S,c){return S.__proto__=c,S},g(L,U)}var P=100,R=function(L){h(U,L);function U(S,c,E){var l;return l=L.call(this,S,c,E,"[audio-stream-controller]")||this,l.videoBuffer=null,l.videoTrackCC=-1,l.waitingVideoCC=-1,l.audioSwitch=!1,l.trackId=-1,l.waitingData=null,l.mainDetails=null,l.bufferFlushed=!1,l.cachedTrackLoadedData=null,l._registerListeners(),l}var _=U.prototype;return _.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},_._registerListeners=function(){var c=this.hls;c.on(K.Events.MEDIA_ATTACHED,this.onMediaAttached,this),c.on(K.Events.MEDIA_DETACHING,this.onMediaDetaching,this),c.on(K.Events.MANIFEST_LOADING,this.onManifestLoading,this),c.on(K.Events.LEVEL_LOADED,this.onLevelLoaded,this),c.on(K.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),c.on(K.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),c.on(K.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),c.on(K.Events.ERROR,this.onError,this),c.on(K.Events.BUFFER_RESET,this.onBufferReset,this),c.on(K.Events.BUFFER_CREATED,this.onBufferCreated,this),c.on(K.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),c.on(K.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),c.on(K.Events.FRAG_BUFFERED,this.onFragBuffered,this)},_._unregisterListeners=function(){var c=this.hls;c.off(K.Events.MEDIA_ATTACHED,this.onMediaAttached,this),c.off(K.Events.MEDIA_DETACHING,this.onMediaDetaching,this),c.off(K.Events.MANIFEST_LOADING,this.onManifestLoading,this),c.off(K.Events.LEVEL_LOADED,this.onLevelLoaded,this),c.off(K.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),c.off(K.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),c.off(K.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),c.off(K.Events.ERROR,this.onError,this),c.off(K.Events.BUFFER_RESET,this.onBufferReset,this),c.off(K.Events.BUFFER_CREATED,this.onBufferCreated,this),c.off(K.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),c.off(K.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),c.off(K.Events.FRAG_BUFFERED,this.onFragBuffered,this)},_.onInitPtsFound=function(c,E){var l=E.frag,x=E.id,B=E.initPTS;if(x==="main"){var O=l.cc;this.initPTS[l.cc]=B,this.log("InitPTS for cc: "+O+" found from main: "+B),this.videoTrackCC=O,this.state===I.State.WAITING_INIT_PTS&&this.tick()}},_.startLoad=function(c){if(!this.levels){this.startPosition=c,this.state=I.State.STOPPED;return}var E=this.lastCurrentTime;this.stopLoad(),this.setInterval(P),this.fragLoadError=0,E>0&&c===-1?(this.log("Override startPosition with lastCurrentTime @"+E.toFixed(3)),c=E,this.state=I.State.IDLE):(this.loadedmetadata=!1,this.state=I.State.WAITING_TRACK),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=c,this.tick()},_.doTick=function(){switch(this.state){case I.State.IDLE:this.doTickIdle();break;case I.State.WAITING_TRACK:{var c,E=this.levels,l=this.trackId,x=E==null||(c=E[l])===null||c===void 0?void 0:c.details;if(x){if(this.waitForCdnTuneIn(x))break;this.state=I.State.WAITING_INIT_PTS}break}case I.State.FRAG_LOADING_WAITING_RETRY:{var B,O=performance.now(),$=this.retryDate;(!$||O>=$||(B=this.media)!==null&&B!==void 0&&B.seeking)&&(this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(this.trackId),this.state=I.State.IDLE);break}case I.State.WAITING_INIT_PTS:{var H=this.waitingData;if(H){var j=H.frag,V=H.part,z=H.cache,X=H.complete;if(this.initPTS[j.cc]!==void 0){this.waitingData=null,this.waitingVideoCC=-1,this.state=I.State.FRAG_LOADING;var J=z.flush(),q={frag:j,part:V,payload:J,networkDetails:null};this._handleFragmentLoadProgress(q),X&&L.prototype._handleFragmentLoadComplete.call(this,q)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log("Waiting fragment cc ("+j.cc+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment();else{var ee=this.getLoadPosition(),ne=b.BufferHelper.bufferInfo(this.mediaBuffer,ee,this.config.maxBufferHole),ae=(0,w.fragmentWithinToleranceTest)(ne.end,this.config.maxFragLookUpTolerance,j);ae<0&&(this.log("Waiting fragment cc ("+j.cc+") @ "+j.start+" cancelled because another fragment at "+ne.end+" is needed"),this.clearWaitingFragment())}}else this.state=I.State.IDLE}}this.onTickEnd()},_.clearWaitingFragment=function(){var c=this.waitingData;c&&(this.fragmentTracker.removeFragment(c.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=I.State.IDLE)},_.resetLoadingState=function(){this.clearWaitingFragment(),L.prototype.resetLoadingState.call(this)},_.onTickEnd=function(){var c=this.media;!c||!c.readyState||(this.lastCurrentTime=c.currentTime)},_.doTickIdle=function(){var c=this.hls,E=this.levels,l=this.media,x=this.trackId,B=c.config;if(!(!E||!E[x])&&!(!l&&(this.startFragRequested||!B.startFragPrefetch))){var O=E[x],$=O.details;if(!$||$.live&&this.levelLastLoaded!==x||this.waitForCdnTuneIn($)){this.state=I.State.WAITING_TRACK;return}var H=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&H&&(this.bufferFlushed=!1,this.afterBufferFlushed(H,N.ElementaryStreamTypes.AUDIO,k.PlaylistLevelType.AUDIO));var j=this.getFwdBufferInfo(H,k.PlaylistLevelType.AUDIO);if(j!==null){var V=this.audioSwitch;if(!V&&this._streamEnded(j,$)){c.trigger(K.Events.BUFFER_EOS,{type:"audio"}),this.state=I.State.ENDED;return}var z=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,k.PlaylistLevelType.MAIN),X=j.len,J=this.getMaxBufferLength(z==null?void 0:z.len);if(!(X>=J&&!V)){var q=$.fragments,ee=q[0].start,ne=j.end;if(V&&l){var ae=this.getLoadPosition();ne=ae,$.PTSKnown&&ae<ee&&(j.end>ee||j.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),l.currentTime=ee+.05)}if(!(z&&ne>z.end+$.targetduration)&&!((!z||!z.len)&&j.len)){var fe=this.getNextFragment(ne,$);if(!fe){this.bufferFlushed=!0;return}this.loadFragment(fe,$,ne)}}}}},_.getMaxBufferLength=function(c){var E=L.prototype.getMaxBufferLength.call(this);return c?Math.max(E,c):E},_.onMediaDetaching=function(){this.videoBuffer=null,L.prototype.onMediaDetaching.call(this)},_.onAudioTracksUpdated=function(c,E){var l=E.audioTracks;this.resetTransmuxer(),this.levels=l.map(function(x){return new F.Level(x)})},_.onAudioTrackSwitching=function(c,E){var l=!!E.url;this.trackId=E.id;var x=this.fragCurrent;x&&x.abortRequests(),this.fragCurrent=null,this.clearWaitingFragment(),l?this.setInterval(P):this.resetTransmuxer(),l?(this.audioSwitch=!0,this.state=I.State.IDLE):this.state=I.State.STOPPED,this.tick()},_.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=!1},_.onLevelLoaded=function(c,E){this.mainDetails=E.details,this.cachedTrackLoadedData!==null&&(this.hls.trigger(K.Events.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)},_.onAudioTrackLoaded=function(c,E){var l;if(this.mainDetails==null){this.cachedTrackLoadedData=E;return}var x=this.levels,B=E.details,O=E.id;if(!x){this.warn("Audio tracks were reset while loading level "+O);return}this.log("Track "+O+" loaded ["+B.startSN+","+B.endSN+"],duration:"+B.totalduration);var $=x[O],H=0;if(B.live||(l=$.details)!==null&&l!==void 0&&l.live){var j=this.mainDetails;if(B.fragments[0]||(B.deltaUpdateFailed=!0),B.deltaUpdateFailed||!j)return;!$.details&&B.hasProgramDateTime&&j.hasProgramDateTime?((0,A.alignMediaPlaylistByPDT)(B,j),H=B.fragments[0].start):H=this.alignPlaylists(B,$.details)}$.details=B,this.levelLastLoaded=O,!this.startFragRequested&&(this.mainDetails||!B.live)&&this.setStartPosition($.details,H),this.state===I.State.WAITING_TRACK&&!this.waitForCdnTuneIn(B)&&(this.state=I.State.IDLE),this.tick()},_._handleFragmentLoadProgress=function(c){var E,l=c.frag,x=c.part,B=c.payload,O=this.config,$=this.trackId,H=this.levels;if(!H){this.warn("Audio tracks were reset while fragment load was in progress. Fragment "+l.sn+" of level "+l.level+" will not be buffered");return}var j=H[$];console.assert(j,"Audio track is defined on fragment load progress");var V=j.details;console.assert(V,"Audio track details are defined on fragment load progress");var z=O.defaultAudioCodec||j.audioCodec||"mp4a.40.2",X=this.transmuxer;X||(X=this.transmuxer=new p.default(this.hls,k.PlaylistLevelType.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));var J=this.initPTS[l.cc],q=(E=l.initSegment)===null||E===void 0?void 0:E.data;if(J!==void 0){var ee=!1,ne=x?x.index:-1,ae=ne!==-1,fe=new u.ChunkMetadata(l.level,l.sn,l.stats.chunkCount,B.byteLength,ne,ae);X.push(B,q,z,"",l,x,V.totalduration,ee,fe,J)}else{this.log("Unknown video PTS for cc "+l.cc+", waiting for video PTS before demuxing audio frag "+l.sn+" of ["+V.startSN+" ,"+V.endSN+"],track "+$);var ue=this.waitingData=this.waitingData||{frag:l,part:x,cache:new m.default,complete:!1},ce=ue.cache;ce.push(new Uint8Array(B)),this.waitingVideoCC=this.videoTrackCC,this.state=I.State.WAITING_INIT_PTS}},_._handleFragmentLoadComplete=function(c){if(this.waitingData){this.waitingData.complete=!0;return}L.prototype._handleFragmentLoadComplete.call(this,c)},_.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},_.onBufferCreated=function(c,E){var l=E.tracks.audio;l&&(this.mediaBuffer=l.buffer||null),E.tracks.video&&(this.videoBuffer=E.tracks.video.buffer||null)},_.onFragBuffered=function(c,E){var l=E.frag,x=E.part;if(l.type!==k.PlaylistLevelType.AUDIO){if(!this.loadedmetadata&&l.type===k.PlaylistLevelType.MAIN){var B;(B=this.videoBuffer||this.media)!==null&&B!==void 0&&B.buffered.length&&(this.loadedmetadata=!0)}return}if(this.fragContextChanged(l)){this.warn("Fragment "+l.sn+(x?" p: "+x.index:"")+" of level "+l.level+" finished buffering, but was aborted. state: "+this.state+", audioSwitch: "+this.audioSwitch);return}l.sn!=="initSegment"&&(this.fragPrevious=l,this.audioSwitch&&(this.audioSwitch=!1,this.hls.trigger(K.Events.AUDIO_TRACK_SWITCHED,{id:this.trackId}))),this.fragBufferedComplete(l,x)},_.onError=function(c,E){if(E.type===d.ErrorTypes.KEY_SYSTEM_ERROR){this.onFragmentOrKeyLoadError(k.PlaylistLevelType.AUDIO,E);return}switch(E.details){case d.ErrorDetails.FRAG_LOAD_ERROR:case d.ErrorDetails.FRAG_LOAD_TIMEOUT:case d.ErrorDetails.FRAG_PARSING_ERROR:case d.ErrorDetails.KEY_LOAD_ERROR:case d.ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(k.PlaylistLevelType.AUDIO,E);break;case d.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case d.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:this.state!==I.State.ERROR&&this.state!==I.State.STOPPED&&(this.state=E.fatal?I.State.ERROR:I.State.IDLE,this.warn(E.details+" while loading frag, switching to "+this.state+" state"));break;case d.ErrorDetails.BUFFER_FULL_ERROR:if(E.parent==="audio"&&(this.state===I.State.PARSING||this.state===I.State.PARSED)){var l=!0,x=this.getFwdBufferInfo(this.mediaBuffer,k.PlaylistLevelType.AUDIO);x&&x.len>.5&&(l=!this.reduceMaxBufferLength(x.len)),l&&(this.warn("Buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,L.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.resetLoadingState()}break}},_.onBufferFlushed=function(c,E){var l=E.type;l===N.ElementaryStreamTypes.AUDIO&&(this.bufferFlushed=!0,this.state===I.State.ENDED&&(this.state=I.State.IDLE))},_._handleTransmuxComplete=function(c){var E,l="audio",x=this.hls,B=c.remuxResult,O=c.chunkMeta,$=this.getCurrentContext(O);if(!$){this.warn("The loading context changed while buffering fragment "+O.sn+" of level "+O.level+". This chunk will not be buffered."),this.resetStartWhenNotLoaded(O.level);return}var H=$.frag,j=$.part,V=$.level.details,z=B.audio,X=B.text,J=B.id3,q=B.initSegment;if(!(this.fragContextChanged(H)||!V)){if(this.state=I.State.PARSING,this.audioSwitch&&z&&this.completeAudioSwitch(),q!=null&&q.tracks&&(this._bufferInitSegment(q.tracks,H,O),x.trigger(K.Events.FRAG_PARSING_INIT_SEGMENT,{frag:H,id:l,tracks:q.tracks})),z){var ee=z.startPTS,ne=z.endPTS,ae=z.startDTS,fe=z.endDTS;j&&(j.elementaryStreams[N.ElementaryStreamTypes.AUDIO]={startPTS:ee,endPTS:ne,startDTS:ae,endDTS:fe}),H.setElementaryStreamInfo(N.ElementaryStreamTypes.AUDIO,ee,ne,ae,fe),this.bufferFragmentData(z,H,j,O)}if(J!=null&&(E=J.samples)!==null&&E!==void 0&&E.length){var ue=v({id:l,frag:H,details:V},J);x.trigger(K.Events.FRAG_PARSING_METADATA,ue)}if(X){var ce=v({id:l,frag:H,details:V},X);x.trigger(K.Events.FRAG_PARSING_USERDATA,ce)}}},_._bufferInitSegment=function(c,E,l){if(this.state===I.State.PARSING){c.video&&delete c.video;var x=c.audio;if(x){x.levelCodec=x.codec,x.id="audio",this.log("Init audio buffer, container:"+x.container+", codecs[parsed]=["+x.codec+"]"),this.hls.trigger(K.Events.BUFFER_CODECS,c);var B=x.initSegment;if(B!=null&&B.byteLength){var O={type:"audio",frag:E,part:null,chunkMeta:l,parent:E.type,data:B};this.hls.trigger(K.Events.BUFFER_APPENDING,O)}this.tick()}}},_.loadFragment=function(c,E,l){var x=this.fragmentTracker.getState(c);this.fragCurrent=c,(this.audioSwitch||x===W.FragmentState.NOT_LOADED||x===W.FragmentState.PARTIAL)&&(c.sn==="initSegment"?this._loadInitSegment(c,E):E.live&&!(0,M.isFiniteNumber)(this.initPTS[c.cc])?(this.log("Waiting for video PTS in continuity counter "+c.cc+" of live stream before loading audio fragment "+c.sn+" of level "+this.trackId),this.state=I.State.WAITING_INIT_PTS):(this.startFragRequested=!0,L.prototype.loadFragment.call(this,c,E,l)))},_.completeAudioSwitch=function(){var c=this.hls,E=this.media,l=this.trackId;E&&(this.log("Switching audio track : flushing all audio"),L.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.audioSwitch=!1,c.trigger(K.Events.AUDIO_TRACK_SWITCHED,{id:l})},U}(I.default);const y=R},"./src/controller/audio-track-controller.ts":(C,D,o)=>{o.r(D),o.d(D,{default:()=>w});var M=o("./src/events.ts"),I=o("./src/errors.ts"),K=o("./src/controller/base-playlist-controller.ts"),b=o("./src/types/loader.ts");function W(A,d){for(var v=0;v<d.length;v++){var h=d[v];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(A,k(h.key),h)}}function F(A,d,v){return d&&W(A.prototype,d),v&&W(A,v),Object.defineProperty(A,"prototype",{writable:!1}),A}function k(A){var d=N(A,"string");return typeof d=="symbol"?d:String(d)}function N(A,d){if(typeof A!="object"||A===null)return A;var v=A[Symbol.toPrimitive];if(v!==void 0){var h=v.call(A,d||"default");if(typeof h!="object")return h;throw new TypeError("@@toPrimitive must return a primitive value.")}return(d==="string"?String:Number)(A)}function m(A,d){A.prototype=Object.create(d.prototype),A.prototype.constructor=A,p(A,d)}function p(A,d){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(h,g){return h.__proto__=g,h},p(A,d)}var u=function(A){m(d,A);function d(h){var g;return g=A.call(this,h,"[audio-track-controller]")||this,g.tracks=[],g.groupId=null,g.tracksInGroup=[],g.trackId=-1,g.trackName="",g.selectDefaultTrack=!0,g.registerListeners(),g}var v=d.prototype;return v.registerListeners=function(){var g=this.hls;g.on(M.Events.MANIFEST_LOADING,this.onManifestLoading,this),g.on(M.Events.MANIFEST_PARSED,this.onManifestParsed,this),g.on(M.Events.LEVEL_LOADING,this.onLevelLoading,this),g.on(M.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),g.on(M.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),g.on(M.Events.ERROR,this.onError,this)},v.unregisterListeners=function(){var g=this.hls;g.off(M.Events.MANIFEST_LOADING,this.onManifestLoading,this),g.off(M.Events.MANIFEST_PARSED,this.onManifestParsed,this),g.off(M.Events.LEVEL_LOADING,this.onLevelLoading,this),g.off(M.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),g.off(M.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),g.off(M.Events.ERROR,this.onError,this)},v.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,A.prototype.destroy.call(this)},v.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.trackName="",this.selectDefaultTrack=!0},v.onManifestParsed=function(g,P){this.tracks=P.audioTracks||[]},v.onAudioTrackLoaded=function(g,P){var R=P.id,y=P.details,L=this.tracksInGroup[R];if(!L){this.warn("Invalid audio track id "+R);return}var U=L.details;L.details=P.details,this.log("audioTrack "+R+" loaded ["+y.startSN+"-"+y.endSN+"]"),R===this.trackId&&(this.retryCount=0,this.playlistLoaded(R,P,U))},v.onLevelLoading=function(g,P){this.switchLevel(P.level)},v.onLevelSwitching=function(g,P){this.switchLevel(P.level)},v.switchLevel=function(g){var P=this.hls.levels[g];if(P!=null&&P.audioGroupIds){var R=P.audioGroupIds[P.urlId];if(this.groupId!==R){this.groupId=R;var y=this.tracks.filter(function(U){return!R||U.groupId===R});this.selectDefaultTrack&&!y.some(function(U){return U.default})&&(this.selectDefaultTrack=!1),this.tracksInGroup=y;var L={audioTracks:y};this.log("Updating audio tracks, "+y.length+' track(s) found in "'+R+'" group-id'),this.hls.trigger(M.Events.AUDIO_TRACKS_UPDATED,L),this.selectInitialTrack()}}},v.onError=function(g,P){A.prototype.onError.call(this,g,P),!(P.fatal||!P.context)&&P.context.type===b.PlaylistContextType.AUDIO_TRACK&&P.context.id===this.trackId&&P.context.groupId===this.groupId&&this.retryLoadingOrFail(P)},v.setAudioTrack=function(g){var P=this.tracksInGroup;if(g<0||g>=P.length){this.warn("Invalid id passed to audio-track controller");return}this.clearTimer();var R=P[this.trackId];this.log("Now switching to audio-track index "+g);var y=P[g],L=y.id,U=y.groupId,_=U===void 0?"":U,S=y.name,c=y.type,E=y.url;if(this.trackId=g,this.trackName=S,this.selectDefaultTrack=!1,this.hls.trigger(M.Events.AUDIO_TRACK_SWITCHING,{id:L,groupId:_,name:S,type:c,url:E}),!(y.details&&!y.details.live)){var l=this.switchParams(y.url,R==null?void 0:R.details);this.loadPlaylist(l)}},v.selectInitialTrack=function(){var g=this.tracksInGroup;console.assert(g.length,"Initial audio track should be selected when tracks are known");var P=this.trackName,R=this.findTrackId(P)||this.findTrackId();R!==-1?this.setAudioTrack(R):(this.warn("No track found for running audio group-ID: "+this.groupId),this.hls.trigger(M.Events.ERROR,{type:I.ErrorTypes.MEDIA_ERROR,details:I.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))},v.findTrackId=function(g){for(var P=this.tracksInGroup,R=0;R<P.length;R++){var y=P[R];if((!this.selectDefaultTrack||y.default)&&(!g||g===y.name))return y.id}return-1},v.loadPlaylist=function(g){A.prototype.loadPlaylist.call(this);var P=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(P)){var R=P.id,y=P.groupId,L=P.url;if(g)try{L=g.addDirectives(L)}catch(U){this.warn("Could not construct new URL with HLS Delivery Directives: "+U)}this.log("loading audio-track playlist for id: "+R),this.clearTimer(),this.hls.trigger(M.Events.AUDIO_TRACK_LOADING,{url:L,id:R,groupId:y,deliveryDirectives:g||null})}},F(d,[{key:"audioTracks",get:function(){return this.tracksInGroup}},{key:"audioTrack",get:function(){return this.trackId},set:function(g){this.selectDefaultTrack=!1,this.setAudioTrack(g)}}]),d}(K.default);const w=u},"./src/controller/base-playlist-controller.ts":(C,D,o)=>{o.r(D),o.d(D,{default:()=>W});var M=o("./src/types/level.ts"),I=o("./src/controller/level-helper.ts"),K=o("./src/utils/logger.ts"),b=o("./src/errors.ts"),W=function(){function F(N,m){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.retryCount=0,this.log=void 0,this.warn=void 0,this.log=K.logger.log.bind(K.logger,m+":"),this.warn=K.logger.warn.bind(K.logger,m+":"),this.hls=N}var k=F.prototype;return k.destroy=function(){this.clearTimer(),this.hls=this.log=this.warn=null},k.onError=function(m,p){p.fatal&&(p.type===b.ErrorTypes.NETWORK_ERROR||p.type===b.ErrorTypes.KEY_SYSTEM_ERROR)&&this.stopLoad()},k.clearTimer=function(){clearTimeout(this.timer),this.timer=-1},k.startLoad=function(){this.canLoad=!0,this.retryCount=0,this.requestScheduled=-1,this.loadPlaylist()},k.stopLoad=function(){this.canLoad=!1,this.clearTimer()},k.switchParams=function(m,p){var u=p==null?void 0:p.renditionReports;if(u)for(var w=0;w<u.length;w++){var A=u[w],d=void 0;try{d=new self.URL(A.URI,p.url).href}catch(P){K.logger.warn("Could not construct new URL for Rendition Report: "+P),d=A.URI||""}if(d===m.slice(-d.length)){var v=parseInt(A["LAST-MSN"])||(p==null?void 0:p.lastPartSn),h=parseInt(A["LAST-PART"])||(p==null?void 0:p.lastPartIndex);if(this.hls.config.lowLatencyMode){var g=Math.min(p.age-p.partTarget,p.targetduration);h>=0&&g>p.partTarget&&(h+=1)}return new M.HlsUrlParameters(v,h>=0?h:void 0,M.HlsSkip.No)}}},k.loadPlaylist=function(m){this.requestScheduled===-1&&(this.requestScheduled=self.performance.now())},k.shouldLoadTrack=function(m){return this.canLoad&&m&&!!m.url&&(!m.details||m.details.live)},k.playlistLoaded=function(m,p,u){var w=this,A=p.details,d=p.stats,v=self.performance.now(),h=d.loading.first?Math.max(0,v-d.loading.first):0;if(A.advancedDateTime=Date.now()-h,A.live||u!=null&&u.live){if(A.reloaded(u),u&&this.log("live playlist "+m+" "+(A.advanced?"REFRESHED "+A.lastPartSn+"-"+A.lastPartIndex:"MISSED")),u&&A.fragments.length>0&&(0,I.mergeDetails)(u,A),!this.canLoad||!A.live)return;var g,P=void 0,R=void 0;if(A.canBlockReload&&A.endSN&&A.advanced){var y=this.hls.config.lowLatencyMode,L=A.lastPartSn,U=A.endSN,_=A.lastPartIndex,S=_!==-1,c=L===U,E=y?0:_;S?(P=c?U+1:L,R=c?E:_+1):P=U+1;var l=A.age,x=l+A.ageHeader,B=Math.min(x-A.partTarget,A.targetduration*1.5);if(B>0){if(u&&B>u.tuneInGoal)this.warn("CDN Tune-in goal increased from: "+u.tuneInGoal+" to: "+B+" with playlist age: "+A.age),B=0;else{var O=Math.floor(B/A.targetduration);if(P+=O,R!==void 0){var $=Math.round(B%A.targetduration/A.partTarget);R+=$}this.log("CDN Tune-in age: "+A.ageHeader+"s last advanced "+l.toFixed(2)+"s goal: "+B+" skip sn "+O+" to part "+R)}A.tuneInGoal=B}if(g=this.getDeliveryDirectives(A,p.deliveryDirectives,P,R),y||!c){this.loadPlaylist(g);return}}else g=this.getDeliveryDirectives(A,p.deliveryDirectives,P,R);var H=this.hls.mainForwardBufferInfo,j=H?H.end-H.len:0,V=(A.edge-j)*1e3,z=(0,I.computeReloadInterval)(A,V);A.updated?v>this.requestScheduled+z&&(this.requestScheduled=d.loading.start):this.requestScheduled=-1,P!==void 0&&A.canBlockReload?this.requestScheduled=d.loading.first+z-(A.partTarget*1e3||1e3):this.requestScheduled=(this.requestScheduled===-1?v:this.requestScheduled)+z;var X=this.requestScheduled-v;X=Math.max(0,X),this.log("reload live playlist "+m+" in "+Math.round(X)+" ms"),this.timer=self.setTimeout(function(){return w.loadPlaylist(g)},X)}else this.clearTimer()},k.getDeliveryDirectives=function(m,p,u,w){var A=(0,M.getSkipValue)(m,u);return p!=null&&p.skip&&m.deltaUpdateFailed&&(u=p.msn,w=p.part,A=M.HlsSkip.No),new M.HlsUrlParameters(u,w,A)},k.retryLoadingOrFail=function(m){var p=this,u=this.hls.config,w=this.retryCount<u.levelLoadingMaxRetry;if(w){var A;if(this.requestScheduled=-1,this.retryCount++,m.details.indexOf("LoadTimeOut")>-1&&(A=m.context)!==null&&A!==void 0&&A.deliveryDirectives)this.warn("retry playlist loading #"+this.retryCount+' after "'+m.details+'"'),this.loadPlaylist();else{var d=Math.min(Math.pow(2,this.retryCount)*u.levelLoadingRetryDelay,u.levelLoadingMaxRetryTimeout);this.timer=self.setTimeout(function(){return p.loadPlaylist()},d),this.warn("retry playlist loading #"+this.retryCount+" in "+d+' ms after "'+m.details+'"')}}else this.warn('cannot recover from error "'+m.details+'"'),this.clearTimer(),m.fatal=!0;return w},F}()},"./src/controller/base-stream-controller.ts":(C,D,o)=>{o.r(D),o.d(D,{State:()=>S,default:()=>c});var M=o("./src/polyfills/number.ts"),I=o("./src/task-loop.ts"),K=o("./src/controller/fragment-tracker.ts"),b=o("./src/utils/buffer-helper.ts"),W=o("./src/utils/logger.ts"),F=o("./src/events.ts"),k=o("./src/errors.ts"),N=o("./src/types/transmuxer.ts"),m=o("./src/utils/mp4-tools.ts"),p=o("./src/utils/discontinuities.ts"),u=o("./src/controller/fragment-finders.ts"),w=o("./src/controller/level-helper.ts"),A=o("./src/loader/fragment-loader.ts"),d=o("./src/crypt/decrypter.ts"),v=o("./src/utils/time-ranges.ts"),h=o("./src/types/loader.ts");function g(E,l){for(var x=0;x<l.length;x++){var B=l[x];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(E,R(B.key),B)}}function P(E,l,x){return l&&g(E.prototype,l),x&&g(E,x),Object.defineProperty(E,"prototype",{writable:!1}),E}function R(E){var l=y(E,"string");return typeof l=="symbol"?l:String(l)}function y(E,l){if(typeof E!="object"||E===null)return E;var x=E[Symbol.toPrimitive];if(x!==void 0){var B=x.call(E,l||"default");if(typeof B!="object")return B;throw new TypeError("@@toPrimitive must return a primitive value.")}return(l==="string"?String:Number)(E)}function L(E){if(E===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E}function U(E,l){E.prototype=Object.create(l.prototype),E.prototype.constructor=E,_(E,l)}function _(E,l){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(B,O){return B.__proto__=O,B},_(E,l)}var S={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"},c=function(E){U(l,E);function l(B,O,$,H){var j;return j=E.call(this)||this,j.hls=void 0,j.fragPrevious=null,j.fragCurrent=null,j.fragmentTracker=void 0,j.transmuxer=null,j._state=S.STOPPED,j.media=null,j.mediaBuffer=null,j.config=void 0,j.bitrateTest=!1,j.lastCurrentTime=0,j.nextLoadPosition=0,j.startPosition=0,j.loadedmetadata=!1,j.fragLoadError=0,j.retryDate=0,j.levels=null,j.fragmentLoader=void 0,j.keyLoader=void 0,j.levelLastLoaded=null,j.startFragRequested=!1,j.decrypter=void 0,j.initPTS=[],j.onvseeking=null,j.onvended=null,j.logPrefix="",j.log=void 0,j.warn=void 0,j.logPrefix=H,j.log=W.logger.log.bind(W.logger,H+":"),j.warn=W.logger.warn.bind(W.logger,H+":"),j.hls=B,j.fragmentLoader=new A.default(B.config),j.keyLoader=$,j.fragmentTracker=O,j.config=B.config,j.decrypter=new d.default(B.config),B.on(F.Events.LEVEL_SWITCHING,j.onLevelSwitching,L(j)),j}var x=l.prototype;return x.doTick=function(){this.onTickEnd()},x.onTickEnd=function(){},x.startLoad=function(O){},x.stopLoad=function(){this.fragmentLoader.abort(),this.keyLoader.abort();var O=this.fragCurrent;O&&(O.abortRequests(),this.fragmentTracker.removeFragment(O)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=S.STOPPED},x._streamEnded=function(O,$){if($.live||O.nextStart||!O.end||!this.media)return!1;var H=$.partList;if(H!=null&&H.length){var j=H[H.length-1],V=b.BufferHelper.isBuffered(this.media,j.start+j.duration/2);return V}var z=$.fragments[$.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(z)},x.getLevelDetails=function(){if(this.levels&&this.levelLastLoaded!==null){var O;return(O=this.levels[this.levelLastLoaded])===null||O===void 0?void 0:O.details}},x.onMediaAttached=function(O,$){var H=this.media=this.mediaBuffer=$.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),H.addEventListener("seeking",this.onvseeking),H.addEventListener("ended",this.onvended);var j=this.config;this.levels&&j.autoStartLoad&&this.state===S.STOPPED&&this.startLoad(j.startPosition)},x.onMediaDetaching=function(){var O=this.media;O!=null&&O.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),O&&this.onvseeking&&this.onvended&&(O.removeEventListener("seeking",this.onvseeking),O.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},x.onMediaSeeking=function(){var O=this.config,$=this.fragCurrent,H=this.media,j=this.mediaBuffer,V=this.state,z=H?H.currentTime:0,X=b.BufferHelper.bufferInfo(j||H,z,O.maxBufferHole);if(this.log("media seeking to "+((0,M.isFiniteNumber)(z)?z.toFixed(3):z)+", state: "+V),this.state===S.ENDED)this.resetLoadingState();else if($){var J=O.maxFragLookUpTolerance,q=$.start-J,ee=$.start+$.duration+J;if(!X.len||ee<X.start||q>X.end){var ne=z>ee;(z<q||ne)&&(ne&&$.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),$.abortRequests()),this.resetLoadingState())}}H&&(this.lastCurrentTime=z),!this.loadedmetadata&&!X.len&&(this.nextLoadPosition=this.startPosition=z),this.tickImmediate()},x.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},x.onLevelSwitching=function(O,$){this.fragLoadError=0},x.onHandlerDestroying=function(){this.stopLoad(),E.prototype.onHandlerDestroying.call(this)},x.onHandlerDestroyed=function(){this.state=S.STOPPED,this.hls.off(F.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,E.prototype.onHandlerDestroyed.call(this)},x.loadFragment=function(O,$,H){this._loadFragForPlayback(O,$,H)},x._loadFragForPlayback=function(O,$,H){var j=this,V=function(X){if(j.fragContextChanged(O)){j.warn("Fragment "+O.sn+(X.part?" p: "+X.part.index:"")+" of level "+O.level+" was dropped during download."),j.fragmentTracker.removeFragment(O);return}O.stats.chunkCount++,j._handleFragmentLoadProgress(X)};this._doFragLoad(O,$,H,V).then(function(z){if(z){j.fragLoadError=0;var X=j.state;if(j.fragContextChanged(O)){(X===S.FRAG_LOADING||!j.fragCurrent&&X===S.PARSING)&&(j.fragmentTracker.removeFragment(O),j.state=S.IDLE);return}"payload"in z&&(j.log("Loaded fragment "+O.sn+" of level "+O.level),j.hls.trigger(F.Events.FRAG_LOADED,z)),j._handleFragmentLoadComplete(z)}}).catch(function(z){j.state===S.STOPPED||j.state===S.ERROR||(j.warn(z),j.resetFragmentLoading(O))})},x.flushMainBuffer=function(O,$,H){if(H===void 0&&(H=null),!!(O-$)){var j={startOffset:O,endOffset:$,type:H};this.fragLoadError=0,this.hls.trigger(F.Events.BUFFER_FLUSHING,j)}},x._loadInitSegment=function(O,$){var H=this;this._doFragLoad(O,$).then(function(j){if(!j||H.fragContextChanged(O)||!H.levels)throw new Error("init load aborted");return j}).then(function(j){var V=H.hls,z=j.payload,X=O.decryptdata;if(z&&z.byteLength>0&&X&&X.key&&X.iv&&X.method==="AES-128"){var J=self.performance.now();return H.decrypter.decrypt(new Uint8Array(z),X.key.buffer,X.iv.buffer).then(function(q){var ee=self.performance.now();return V.trigger(F.Events.FRAG_DECRYPTED,{frag:O,payload:q,stats:{tstart:J,tdecrypt:ee}}),j.payload=q,j})}return j}).then(function(j){var V=H.fragCurrent,z=H.hls,X=H.levels;if(!X)throw new Error("init load aborted, missing levels");var J=X[O.level].details;console.assert(J,"Level details are defined when init segment is loaded");var q=O.stats;H.state=S.IDLE,H.fragLoadError=0,O.data=new Uint8Array(j.payload),q.parsing.start=q.buffering.start=self.performance.now(),q.parsing.end=q.buffering.end=self.performance.now(),j.frag===V&&z.trigger(F.Events.FRAG_BUFFERED,{stats:q,frag:V,part:null,id:O.type}),H.tick()}).catch(function(j){H.state===S.STOPPED||H.state===S.ERROR||(H.warn(j),H.resetFragmentLoading(O))})},x.fragContextChanged=function(O){var $=this.fragCurrent;return!O||!$||O.level!==$.level||O.sn!==$.sn||O.urlId!==$.urlId},x.fragBufferedComplete=function(O,$){var H,j,V,z,X=this.mediaBuffer?this.mediaBuffer:this.media;this.log("Buffered "+O.type+" sn: "+O.sn+($?" part: "+$.index:"")+" of "+(this.logPrefix==="[stream-controller]"?"level":"track")+" "+O.level+" (frag:["+((H=O.startPTS)!=null?H:NaN).toFixed(3)+"-"+((j=O.endPTS)!=null?j:NaN).toFixed(3)+"] > buffer:"+(X?v.default.toString(b.BufferHelper.getBuffered(X)):"(detached)")+")"),this.state=S.IDLE,X&&(!this.loadedmetadata&&O.type==h.PlaylistLevelType.MAIN&&X.buffered.length&&((V=this.fragCurrent)===null||V===void 0?void 0:V.sn)===((z=this.fragPrevious)===null||z===void 0?void 0:z.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())},x.seekToStartPos=function(){},x._handleFragmentLoadComplete=function(O){var $=this.transmuxer;if($){var H=O.frag,j=O.part,V=O.partsLoaded,z=!V||V.length===0||V.some(function(J){return!J}),X=new N.ChunkMetadata(H.level,H.sn,H.stats.chunkCount+1,0,j?j.index:-1,!z);$.flush(X)}},x._handleFragmentLoadProgress=function(O){},x._doFragLoad=function(O,$,H,j){var V,z=this;if(H===void 0&&(H=null),!this.levels)throw new Error("frag load aborted, missing levels");var X=null;if(O.encrypted&&!((V=O.decryptdata)!==null&&V!==void 0&&V.key)?(this.log("Loading key for "+O.sn+" of ["+$.startSN+"-"+$.endSN+"], "+(this.logPrefix==="[stream-controller]"?"level":"track")+" "+O.level),this.state=S.KEY_LOADING,this.fragCurrent=O,X=this.keyLoader.load(O).then(function(ae){if(!z.fragContextChanged(ae.frag))return z.hls.trigger(F.Events.KEY_LOADED,ae),z.state===S.KEY_LOADING&&(z.state=S.IDLE),ae}),this.hls.trigger(F.Events.KEY_LOADING,{frag:O}),this.throwIfFragContextChanged("KEY_LOADING")):!O.encrypted&&$.encryptedFragments.length&&this.keyLoader.loadClear(O,$.encryptedFragments),H=Math.max(O.start,H||0),this.config.lowLatencyMode&&$){var J=$.partList;if(J&&j){H>O.end&&$.fragmentHint&&(O=$.fragmentHint);var q=this.getNextPart(J,O,H);if(q>-1){var ee=J[q];return this.log("Loading part sn: "+O.sn+" p: "+ee.index+" cc: "+O.cc+" of playlist ["+$.startSN+"-"+$.endSN+"] parts [0-"+q+"-"+(J.length-1)+"] "+(this.logPrefix==="[stream-controller]"?"level":"track")+": "+O.level+", target: "+parseFloat(H.toFixed(3))),this.nextLoadPosition=ee.start+ee.duration,this.state=S.FRAG_LOADING,this.hls.trigger(F.Events.FRAG_LOADING,{frag:O,part:J[q],targetBufferTime:H}),this.throwIfFragContextChanged("FRAG_LOADING parts"),X?X.then(function(ae){return!ae||z.fragContextChanged(ae.frag)?null:z.doFragPartsLoad(O,J,q,j)}).catch(function(ae){return z.handleFragLoadError(ae)}):this.doFragPartsLoad(O,J,q,j).catch(function(ae){return z.handleFragLoadError(ae)})}else if(!O.url||this.loadedEndOfParts(J,H))return Promise.resolve(null)}}this.log("Loading fragment "+O.sn+" cc: "+O.cc+" "+($?"of ["+$.startSN+"-"+$.endSN+"] ":"")+(this.logPrefix==="[stream-controller]"?"level":"track")+": "+O.level+", target: "+parseFloat(H.toFixed(3))),(0,M.isFiniteNumber)(O.sn)&&!this.bitrateTest&&(this.nextLoadPosition=O.start+O.duration),this.state=S.FRAG_LOADING,this.hls.trigger(F.Events.FRAG_LOADING,{frag:O,targetBufferTime:H}),this.throwIfFragContextChanged("FRAG_LOADING");var ne=this.config.progressive;return ne&&X?X.then(function(ae){return!ae||z.fragContextChanged(ae==null?void 0:ae.frag)?null:z.fragmentLoader.load(O,j)}).catch(function(ae){return z.handleFragLoadError(ae)}):Promise.all([this.fragmentLoader.load(O,ne?j:void 0),X]).then(function(ae){var fe=ae[0];return!ne&&fe&&j&&j(fe),fe}).catch(function(ae){return z.handleFragLoadError(ae)})},x.throwIfFragContextChanged=function(O){if(this.fragCurrent===null)throw new Error("frag load aborted, context changed in "+O)},x.doFragPartsLoad=function(O,$,H,j){var V=this;return new Promise(function(z,X){var J=[],q=function ee(ne){var ae=$[ne];V.fragmentLoader.loadPart(O,ae,j).then(function(fe){J[ae.index]=fe;var ue=fe.part;V.hls.trigger(F.Events.FRAG_LOADED,fe);var ce=$[ne+1];if(ce&&ce.fragment===O)ee(ne+1);else return z({frag:O,part:ue,partsLoaded:J})}).catch(X)};q(H)})},x.handleFragLoadError=function(O){if("data"in O){var $=O.data;O.data&&$.details===k.ErrorDetails.INTERNAL_ABORTED?this.handleFragLoadAborted($.frag,$.part):this.hls.trigger(F.Events.ERROR,$)}else this.hls.trigger(F.Events.ERROR,{type:k.ErrorTypes.OTHER_ERROR,details:k.ErrorDetails.INTERNAL_EXCEPTION,err:O,fatal:!0});return null},x._handleTransmuxerFlush=function(O){var $=this.getCurrentContext(O);if(!$||this.state!==S.PARSING){!this.fragCurrent&&this.state!==S.STOPPED&&this.state!==S.ERROR&&(this.state=S.IDLE);return}var H=$.frag,j=$.part,V=$.level,z=self.performance.now();H.stats.parsing.end=z,j&&(j.stats.parsing.end=z),this.updateLevelTiming(H,j,V,O.partial)},x.getCurrentContext=function(O){var $=this.levels,H=O.level,j=O.sn,V=O.part;if(!$||!$[H])return this.warn("Levels object was unset while buffering fragment "+j+" of level "+H+". The current chunk will not be buffered."),null;var z=$[H],X=V>-1?(0,w.getPartWith)(z,j,V):null,J=X?X.fragment:(0,w.getFragmentWithSN)(z,j,this.fragCurrent);return J?{frag:J,part:X,level:z}:null},x.bufferFragmentData=function(O,$,H,j){if(!(!O||this.state!==S.PARSING)){var V=O.data1,z=O.data2,X=V;if(V&&z&&(X=(0,m.appendUint8Array)(V,z)),!(!X||!X.length)){var J={type:O.type,frag:$,part:H,chunkMeta:j,parent:$.type,data:X};this.hls.trigger(F.Events.BUFFER_APPENDING,J),O.dropped&&O.independent&&!H&&this.flushBufferGap($)}}},x.flushBufferGap=function(O){var $=this.media;if($){if(!b.BufferHelper.isBuffered($,$.currentTime)){this.flushMainBuffer(0,O.start);return}var H=$.currentTime,j=b.BufferHelper.bufferInfo($,H,0),V=O.duration,z=Math.min(this.config.maxFragLookUpTolerance*2,V*.25),X=Math.max(Math.min(O.start-z,j.end-z),H+z);O.start-X>z&&this.flushMainBuffer(X,O.start)}},x.getFwdBufferInfo=function(O,$){var H=this.config,j=this.getLoadPosition();if(!(0,M.isFiniteNumber)(j))return null;var V=b.BufferHelper.bufferInfo(O,j,H.maxBufferHole);if(V.len===0&&V.nextStart!==void 0){var z=this.fragmentTracker.getBufferedFrag(j,$);if(z&&V.nextStart<z.end)return b.BufferHelper.bufferInfo(O,j,Math.max(V.nextStart,H.maxBufferHole))}return V},x.getMaxBufferLength=function(O){var $=this.config,H;return O?H=Math.max(8*$.maxBufferSize/O,$.maxBufferLength):H=$.maxBufferLength,Math.min(H,$.maxMaxBufferLength)},x.reduceMaxBufferLength=function(O){var $=this.config,H=O||$.maxBufferLength;return $.maxMaxBufferLength>=H?($.maxMaxBufferLength/=2,this.warn("Reduce max buffer length to "+$.maxMaxBufferLength+"s"),!0):!1},x.getNextFragment=function(O,$){var H=$.fragments,j=H.length;if(!j)return null;var V=this.config,z=H[0].start,X;if($.live){var J=V.initialLiveManifestSize;if(j<J)return this.warn("Not enough fragments to start playback (have: "+j+", need: "+J+")"),null;!$.PTSKnown&&!this.startFragRequested&&this.startPosition===-1&&(X=this.getInitialLiveFragment($,H),this.startPosition=X?this.hls.liveSyncPosition||X.start:O)}else O<=z&&(X=H[0]);if(!X){var q=V.lowLatencyMode?$.partEnd:$.fragmentEnd;X=this.getFragmentAtPosition(O,q,$)}return this.mapToInitFragWhenRequired(X)},x.mapToInitFragWhenRequired=function(O){return O!=null&&O.initSegment&&!(O!=null&&O.initSegment.data)&&!this.bitrateTest?O.initSegment:O},x.getNextPart=function(O,$,H){for(var j=-1,V=!1,z=!0,X=0,J=O.length;X<J;X++){var q=O[X];if(z=z&&!q.independent,j>-1&&H<q.start)break;var ee=q.loaded;ee?j=-1:(V||q.independent||z)&&q.fragment===$&&(j=X),V=ee}return j},x.loadedEndOfParts=function(O,$){var H=O[O.length-1];return H&&$>H.start&&H.loaded},x.getInitialLiveFragment=function(O,$){var H=this.fragPrevious,j=null;if(H){if(O.hasProgramDateTime&&(this.log("Live playlist, switching playlist, load frag with same PDT: "+H.programDateTime),j=(0,u.findFragmentByPDT)($,H.endProgramDateTime,this.config.maxFragLookUpTolerance)),!j){var V=H.sn+1;if(V>=O.startSN&&V<=O.endSN){var z=$[V-O.startSN];H.cc===z.cc&&(j=z,this.log("Live playlist, switching playlist, load frag with next SN: "+j.sn))}j||(j=(0,u.findFragWithCC)($,H.cc),j&&this.log("Live playlist, switching playlist, load frag with same CC: "+j.sn))}}else{var X=this.hls.liveSyncPosition;X!==null&&(j=this.getFragmentAtPosition(X,this.bitrateTest?O.fragmentEnd:O.edge,O))}return j},x.getFragmentAtPosition=function(O,$,H){var j=this.config,V=this.fragPrevious,z=H.fragments,X=H.endSN,J=H.fragmentHint,q=j.maxFragLookUpTolerance,ee=!!(j.lowLatencyMode&&H.partList&&J);ee&&J&&!this.bitrateTest&&(z=z.concat(J),X=J.sn);var ne;if(O<$){var ae=O>$-q?0:q;ne=(0,u.findFragmentByPTS)(V,z,O,ae)}else ne=z[z.length-1];if(ne){var fe=ne.sn-H.startSN;if(this.fragmentTracker.getState(ne)===K.FragmentState.OK&&(V=ne),V&&ne.sn===V.sn&&!ee){var ue=V&&ne.level===V.level;if(ue){var ce=z[fe+1];ne.sn<X&&this.fragmentTracker.getState(ce)!==K.FragmentState.OK?(this.log("SN "+ne.sn+" just loaded, load next one: "+ce.sn),ne=ce):ne=null}}}return ne},x.synchronizeToLiveEdge=function(O){var $=this.config,H=this.media;if(H){var j=this.hls.liveSyncPosition,V=H.currentTime,z=O.fragments[0].start,X=O.edge,J=V>=z-$.maxFragLookUpTolerance&&V<=X;if(j!==null&&H.duration>j&&(V<j||!J)){var q=$.liveMaxLatencyDuration!==void 0?$.liveMaxLatencyDuration:$.liveMaxLatencyDurationCount*O.targetduration;(!J&&H.readyState<4||V<X-q)&&(this.loadedmetadata||(this.nextLoadPosition=j),H.readyState&&(this.warn("Playback: "+V.toFixed(3)+" is located too far from the end of live sliding playlist: "+X+", reset currentTime to : "+j.toFixed(3)),H.currentTime=j))}}},x.alignPlaylists=function(O,$){var H=this.levels,j=this.levelLastLoaded,V=this.fragPrevious,z=j!==null?H[j]:null,X=O.fragments.length;if(!X)return this.warn("No fragments in live playlist"),0;var J=O.fragments[0].start,q=!$,ee=O.alignedSliding&&(0,M.isFiniteNumber)(J);if(q||!ee&&!J){(0,p.alignStream)(V,z,O);var ne=O.fragments[0].start;return this.log("Live playlist sliding: "+ne.toFixed(2)+" start-sn: "+($?$.startSN:"na")+"->"+O.startSN+" prev-sn: "+(V?V.sn:"na")+" fragments: "+X),ne}return J},x.waitForCdnTuneIn=function(O){var $=3;return O.live&&O.canBlockReload&&O.partTarget&&O.tuneInGoal>Math.max(O.partHoldBack,O.partTarget*$)},x.setStartPosition=function(O,$){var H=this.startPosition;if(H<$&&(H=-1),H===-1||this.lastCurrentTime===-1){var j=O.startTimeOffset;(0,M.isFiniteNumber)(j)?(H=$+j,j<0&&(H+=O.totalduration),H=Math.min(Math.max($,H),$+O.totalduration),this.log("Start time offset "+j+" found in playlist, adjust startPosition to "+H),this.startPosition=H):O.live?H=this.hls.liveSyncPosition||$:this.startPosition=H=0,this.lastCurrentTime=H}this.nextLoadPosition=H},x.getLoadPosition=function(){var O=this.media,$=0;return this.loadedmetadata&&O?$=O.currentTime:this.nextLoadPosition&&($=this.nextLoadPosition),$},x.handleFragLoadAborted=function(O,$){this.transmuxer&&O.sn!=="initSegment"&&O.stats.aborted&&(this.warn("Fragment "+O.sn+($?" part"+$.index:"")+" of level "+O.level+" was aborted"),this.resetFragmentLoading(O))},x.resetFragmentLoading=function(O){(!this.fragCurrent||!this.fragContextChanged(O)&&this.state!==S.FRAG_LOADING_WAITING_RETRY)&&(this.state=S.IDLE)},x.onFragmentOrKeyLoadError=function(O,$){if($.fatal){this.stopLoad(),this.state=S.ERROR;return}var H=this.config;if($.chunkMeta){var j=this.getCurrentContext($.chunkMeta);j&&($.frag=j.frag,$.levelRetry=!0,this.fragLoadError=H.fragLoadingMaxRetry)}var V=$.frag;if(!(!V||V.type!==O)){var z=this.fragCurrent;if(console.assert(z&&V.sn===z.sn&&V.level===z.level&&V.urlId===z.urlId,"Frag load error must match current frag to retry"),this.fragLoadError+1<=H.fragLoadingMaxRetry){this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition);var X=Math.min(Math.pow(2,this.fragLoadError)*H.fragLoadingRetryDelay,H.fragLoadingMaxRetryTimeout);this.warn("Fragment "+V.sn+" of "+O+" "+V.level+" failed to load, retrying in "+X+"ms"),this.retryDate=self.performance.now()+X,this.fragLoadError++,this.state=S.FRAG_LOADING_WAITING_RETRY}else $.levelRetry?(O===h.PlaylistLevelType.AUDIO&&(this.fragCurrent=null),this.fragLoadError=0,this.state=S.IDLE):(W.logger.error($.details+" reaches max retry, redispatch as fatal ..."),$.fatal=!0,this.hls.stopLoad(),this.state=S.ERROR)}},x.afterBufferFlushed=function(O,$,H){if(O){var j=b.BufferHelper.getBuffered(O);this.fragmentTracker.detectEvictedFragments($,j,H),this.state===S.ENDED&&this.resetLoadingState()}},x.resetLoadingState=function(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state=S.IDLE},x.resetStartWhenNotLoaded=function(O){if(!this.loadedmetadata){this.startFragRequested=!1;var $=this.levels?this.levels[O].details:null;$!=null&&$.live?(this.startPosition=-1,this.setStartPosition($,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}},x.updateLevelTiming=function(O,$,H,j){var V=this,z=H.details;console.assert(!!z,"level.details must be defined");var X=Object.keys(O.elementaryStreams).reduce(function(J,q){var ee=O.elementaryStreams[q];if(ee){var ne=ee.endPTS-ee.startPTS;if(ne<=0)return V.warn("Could not parse fragment "+O.sn+" "+q+" duration reliably ("+ne+")"),J||!1;var ae=j?0:(0,w.updateFragPTSDTS)(z,O,ee.startPTS,ee.endPTS,ee.startDTS,ee.endDTS);return V.hls.trigger(F.Events.LEVEL_PTS_UPDATED,{details:z,level:H,drift:ae,type:q,frag:O,start:ee.startPTS,end:ee.endPTS}),!0}return J},!1);X||(this.warn("Found no media in fragment "+O.sn+" of level "+H.id+" resetting transmuxer to fallback to playlist timing"),this.resetTransmuxer()),this.state=S.PARSED,this.hls.trigger(F.Events.FRAG_PARSED,{frag:O,part:$})},x.resetTransmuxer=function(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)},P(l,[{key:"state",get:function(){return this._state},set:function(O){var $=this._state;$!==O&&(this._state=O,this.log($+"->"+O))}}]),l}(I.default)},"./src/controller/buffer-controller.ts":(C,D,o)=>{o.r(D),o.d(D,{default:()=>u});var M=o("./src/polyfills/number.ts"),I=o("./src/events.ts"),K=o("./src/utils/logger.ts"),b=o("./src/errors.ts"),W=o("./src/utils/buffer-helper.ts"),F=o("./src/utils/mediasource-helper.ts"),k=o("./src/loader/fragment.ts"),N=o("./src/controller/buffer-operation-queue.ts"),m=(0,F.getMediaSource)(),p=/([ha]vc.)(?:\.[^.,]+)+/,u=function(){function w(d){var v=this;this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendError=0,this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this._onMediaSourceOpen=function(){var h=v.media,g=v.mediaSource;K.logger.log("[buffer-controller]: Media source opened"),h&&(h.removeEventListener("emptied",v._onMediaEmptied),v.updateMediaElementDuration(),v.hls.trigger(I.Events.MEDIA_ATTACHED,{media:h})),g&&g.removeEventListener("sourceopen",v._onMediaSourceOpen),v.checkPendingTracks()},this._onMediaSourceClose=function(){K.logger.log("[buffer-controller]: Media source closed")},this._onMediaSourceEnded=function(){K.logger.log("[buffer-controller]: Media source ended")},this._onMediaEmptied=function(){var h=v.media,g=v._objectUrl;h&&h.src!==g&&K.logger.error("Media element src was set while attaching MediaSource ("+g+" > "+h.src+")")},this.hls=d,this._initSourceBuffer(),this.registerListeners()}var A=w.prototype;return A.hasSourceTypes=function(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0},A.destroy=function(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null},A.registerListeners=function(){var v=this.hls;v.on(I.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),v.on(I.Events.MEDIA_DETACHING,this.onMediaDetaching,this),v.on(I.Events.MANIFEST_PARSED,this.onManifestParsed,this),v.on(I.Events.BUFFER_RESET,this.onBufferReset,this),v.on(I.Events.BUFFER_APPENDING,this.onBufferAppending,this),v.on(I.Events.BUFFER_CODECS,this.onBufferCodecs,this),v.on(I.Events.BUFFER_EOS,this.onBufferEos,this),v.on(I.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),v.on(I.Events.LEVEL_UPDATED,this.onLevelUpdated,this),v.on(I.Events.FRAG_PARSED,this.onFragParsed,this),v.on(I.Events.FRAG_CHANGED,this.onFragChanged,this)},A.unregisterListeners=function(){var v=this.hls;v.off(I.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),v.off(I.Events.MEDIA_DETACHING,this.onMediaDetaching,this),v.off(I.Events.MANIFEST_PARSED,this.onManifestParsed,this),v.off(I.Events.BUFFER_RESET,this.onBufferReset,this),v.off(I.Events.BUFFER_APPENDING,this.onBufferAppending,this),v.off(I.Events.BUFFER_CODECS,this.onBufferCodecs,this),v.off(I.Events.BUFFER_EOS,this.onBufferEos,this),v.off(I.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),v.off(I.Events.LEVEL_UPDATED,this.onLevelUpdated,this),v.off(I.Events.FRAG_PARSED,this.onFragParsed,this),v.off(I.Events.FRAG_CHANGED,this.onFragChanged,this)},A._initSourceBuffer=function(){this.sourceBuffer={},this.operationQueue=new N.default(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.lastMpegAudioChunk=null},A.onManifestParsed=function(v,h){var g=2;(h.audio&&!h.video||!h.altAudio)&&(g=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=g,this.details=null,K.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},A.onMediaAttaching=function(v,h){var g=this.media=h.media;if(g&&m){var P=this.mediaSource=new m;P.addEventListener("sourceopen",this._onMediaSourceOpen),P.addEventListener("sourceended",this._onMediaSourceEnded),P.addEventListener("sourceclose",this._onMediaSourceClose),g.src=self.URL.createObjectURL(P),this._objectUrl=g.src,g.addEventListener("emptied",this._onMediaEmptied)}},A.onMediaDetaching=function(){var v=this.media,h=this.mediaSource,g=this._objectUrl;if(h){if(K.logger.log("[buffer-controller]: media source detaching"),h.readyState==="open")try{h.endOfStream()}catch(P){K.logger.warn("[buffer-controller]: onMediaDetaching: "+P.message+" while calling endOfStream")}this.onBufferReset(),h.removeEventListener("sourceopen",this._onMediaSourceOpen),h.removeEventListener("sourceended",this._onMediaSourceEnded),h.removeEventListener("sourceclose",this._onMediaSourceClose),v&&(v.removeEventListener("emptied",this._onMediaEmptied),g&&self.URL.revokeObjectURL(g),v.src===g?(v.removeAttribute("src"),v.load()):K.logger.warn("[buffer-controller]: media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(I.Events.MEDIA_DETACHED,void 0)},A.onBufferReset=function(){var v=this;this.getSourceBufferTypes().forEach(function(h){var g=v.sourceBuffer[h];try{g&&(v.removeBufferListeners(h),v.mediaSource&&v.mediaSource.removeSourceBuffer(g),v.sourceBuffer[h]=void 0)}catch(P){K.logger.warn("[buffer-controller]: Failed to reset the "+h+" buffer",P)}}),this._initSourceBuffer()},A.onBufferCodecs=function(v,h){var g=this,P=this.getSourceBufferTypes().length;Object.keys(h).forEach(function(R){if(P){var y=g.tracks[R];if(y&&typeof y.buffer.changeType=="function"){var L=h[R],U=L.id,_=L.codec,S=L.levelCodec,c=L.container,E=L.metadata,l=(y.levelCodec||y.codec).replace(p,"$1"),x=(S||_).replace(p,"$1");if(l!==x){var B=c+";codecs="+(S||_);g.appendChangeType(R,B),K.logger.log("[buffer-controller]: switching codec "+l+" to "+x),g.tracks[R]={buffer:y.buffer,codec:_,container:c,levelCodec:S,metadata:E,id:U}}}}else g.pendingTracks[R]=h[R]}),!P&&(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&this.mediaSource.readyState==="open"&&this.checkPendingTracks())},A.appendChangeType=function(v,h){var g=this,P=this.operationQueue,R={execute:function(){var L=g.sourceBuffer[v];L&&(K.logger.log("[buffer-controller]: changing "+v+" sourceBuffer type to "+h),L.changeType(h)),P.shiftAndExecuteNext(v)},onStart:function(){},onComplete:function(){},onError:function(L){K.logger.warn("[buffer-controller]: Failed to change "+v+" SourceBuffer type",L)}};P.append(R,v)},A.onBufferAppending=function(v,h){var g=this,P=this.hls,R=this.operationQueue,y=this.tracks,L=h.data,U=h.type,_=h.frag,S=h.part,c=h.chunkMeta,E=c.buffering[U],l=self.performance.now();E.start=l;var x=_.stats.buffering,B=S?S.stats.buffering:null;x.start===0&&(x.start=l),B&&B.start===0&&(B.start=l);var O=y.audio,$=!1;U==="audio"&&(O==null?void 0:O.container)==="audio/mpeg"&&($=!this.lastMpegAudioChunk||c.id===1||this.lastMpegAudioChunk.sn!==c.sn,this.lastMpegAudioChunk=c);var H=_.start,j={execute:function(){if(E.executeStart=self.performance.now(),$){var z=g.sourceBuffer[U];if(z){var X=H-z.timestampOffset;Math.abs(X)>=.1&&(K.logger.log("[buffer-controller]: Updating audio SourceBuffer timestampOffset to "+H+" (delta: "+X+") sn: "+_.sn+")"),z.timestampOffset=H)}}g.appendExecutor(L,U)},onStart:function(){},onComplete:function(){var z=self.performance.now();E.executeEnd=E.end=z,x.first===0&&(x.first=z),B&&B.first===0&&(B.first=z);var X=g.sourceBuffer,J={};for(var q in X)J[q]=W.BufferHelper.getBuffered(X[q]);g.appendError=0,g.hls.trigger(I.Events.BUFFER_APPENDED,{type:U,frag:_,part:S,chunkMeta:c,parent:_.type,timeRanges:J})},onError:function(z){K.logger.error("[buffer-controller]: Error encountered while trying to append to the "+U+" SourceBuffer",z);var X={type:b.ErrorTypes.MEDIA_ERROR,parent:_.type,details:b.ErrorDetails.BUFFER_APPEND_ERROR,err:z,fatal:!1};z.code===DOMException.QUOTA_EXCEEDED_ERR?X.details=b.ErrorDetails.BUFFER_FULL_ERROR:(g.appendError++,X.details=b.ErrorDetails.BUFFER_APPEND_ERROR,g.appendError>P.config.appendErrorMaxRetry&&(K.logger.error("[buffer-controller]: Failed "+P.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),X.fatal=!0,P.stopLoad())),P.trigger(I.Events.ERROR,X)}};R.append(j,U)},A.onBufferFlushing=function(v,h){var g=this,P=this.operationQueue,R=function(L){return{execute:g.removeExecutor.bind(g,L,h.startOffset,h.endOffset),onStart:function(){},onComplete:function(){g.hls.trigger(I.Events.BUFFER_FLUSHED,{type:L})},onError:function(_){K.logger.warn("[buffer-controller]: Failed to remove from "+L+" SourceBuffer",_)}}};h.type?P.append(R(h.type),h.type):this.getSourceBufferTypes().forEach(function(y){P.append(R(y),y)})},A.onFragParsed=function(v,h){var g=this,P=h.frag,R=h.part,y=[],L=R?R.elementaryStreams:P.elementaryStreams;L[k.ElementaryStreamTypes.AUDIOVIDEO]?y.push("audiovideo"):(L[k.ElementaryStreamTypes.AUDIO]&&y.push("audio"),L[k.ElementaryStreamTypes.VIDEO]&&y.push("video"));var U=function(){var S=self.performance.now();P.stats.buffering.end=S,R&&(R.stats.buffering.end=S);var c=R?R.stats:P.stats;g.hls.trigger(I.Events.FRAG_BUFFERED,{frag:P,part:R,stats:c,id:P.type})};y.length===0&&K.logger.warn("Fragments must have at least one ElementaryStreamType set. type: "+P.type+" level: "+P.level+" sn: "+P.sn),this.blockBuffers(U,y)},A.onFragChanged=function(v,h){this.flushBackBuffer()},A.onBufferEos=function(v,h){var g=this,P=this.getSourceBufferTypes().reduce(function(R,y){var L=g.sourceBuffer[y];return L&&(!h.type||h.type===y)&&(L.ending=!0,L.ended||(L.ended=!0,K.logger.log("[buffer-controller]: "+y+" sourceBuffer now EOS"))),R&&!!(!L||L.ended)},!0);P&&(K.logger.log("[buffer-controller]: Queueing mediaSource.endOfStream()"),this.blockBuffers(function(){g.getSourceBufferTypes().forEach(function(y){var L=g.sourceBuffer[y];L&&(L.ending=!1)});var R=g.mediaSource;if(!R||R.readyState!=="open"){R&&K.logger.info("[buffer-controller]: Could not call mediaSource.endOfStream(). mediaSource.readyState: "+R.readyState);return}K.logger.log("[buffer-controller]: Calling mediaSource.endOfStream()"),R.endOfStream()}))},A.onLevelUpdated=function(v,h){var g=h.details;g.fragments.length&&(this.details=g,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())},A.flushBackBuffer=function(){var v=this.hls,h=this.details,g=this.media,P=this.sourceBuffer;if(!(!g||h===null)){var R=this.getSourceBufferTypes();if(R.length){var y=h.live&&v.config.liveBackBufferLength!==null?v.config.liveBackBufferLength:v.config.backBufferLength;if(!(!(0,M.isFiniteNumber)(y)||y<0)){var L=g.currentTime,U=h.levelTargetDuration,_=Math.max(y,U),S=Math.floor(L/U)*U-_;R.forEach(function(c){var E=P[c];if(E){var l=W.BufferHelper.getBuffered(E);if(l.length>0&&S>l.start(0)){if(v.trigger(I.Events.BACK_BUFFER_REACHED,{bufferEnd:S}),h.live)v.trigger(I.Events.LIVE_BACK_BUFFER_REACHED,{bufferEnd:S});else if(E.ended&&l.end(l.length-1)-L<U*2){K.logger.info("[buffer-controller]: Cannot flush "+c+" back buffer while SourceBuffer is in ended state");return}v.trigger(I.Events.BUFFER_FLUSHING,{startOffset:0,endOffset:S,type:c})}}})}}}},A.updateMediaElementDuration=function(){if(!(!this.details||!this.media||!this.mediaSource||this.mediaSource.readyState!=="open")){var v=this.details,h=this.hls,g=this.media,P=this.mediaSource,R=v.fragments[0].start+v.totalduration,y=g.duration,L=(0,M.isFiniteNumber)(P.duration)?P.duration:0;v.live&&h.config.liveDurationInfinity?(K.logger.log("[buffer-controller]: Media Source duration is set to Infinity"),P.duration=1/0,this.updateSeekableRange(v)):(R>L&&R>y||!(0,M.isFiniteNumber)(y))&&(K.logger.log("[buffer-controller]: Updating Media Source duration to "+R.toFixed(3)),P.duration=R)}},A.updateSeekableRange=function(v){var h=this.mediaSource,g=v.fragments,P=g.length;if(P&&v.live&&h!==null&&h!==void 0&&h.setLiveSeekableRange){var R=Math.max(0,g[0].start),y=Math.max(R,R+v.totalduration);h.setLiveSeekableRange(R,y)}},A.checkPendingTracks=function(){var v=this.bufferCodecEventsExpected,h=this.operationQueue,g=this.pendingTracks,P=Object.keys(g).length;if(P&&!v||P===2){this.createSourceBuffers(g),this.pendingTracks={};var R=this.getSourceBufferTypes();if(R.length===0){this.hls.trigger(I.Events.ERROR,{type:b.ErrorTypes.MEDIA_ERROR,details:b.ErrorDetails.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,reason:"could not create source buffer for media codec(s)"});return}R.forEach(function(y){h.executeNext(y)})}},A.createSourceBuffers=function(v){var h=this.sourceBuffer,g=this.mediaSource;if(!g)throw Error("createSourceBuffers called when mediaSource was null");var P=0;for(var R in v)if(!h[R]){var y=v[R];if(!y)throw Error("source buffer exists for track "+R+", however track does not");var L=y.levelCodec||y.codec,U=y.container+";codecs="+L;K.logger.log("[buffer-controller]: creating sourceBuffer("+U+")");try{var _=h[R]=g.addSourceBuffer(U),S=R;this.addBufferListener(S,"updatestart",this._onSBUpdateStart),this.addBufferListener(S,"updateend",this._onSBUpdateEnd),this.addBufferListener(S,"error",this._onSBUpdateError),this.tracks[R]={buffer:_,codec:L,container:y.container,levelCodec:y.levelCodec,metadata:y.metadata,id:y.id},P++}catch(c){K.logger.error("[buffer-controller]: error while trying to add sourceBuffer: "+c.message),this.hls.trigger(I.Events.ERROR,{type:b.ErrorTypes.MEDIA_ERROR,details:b.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:c,mimeType:U})}}P&&this.hls.trigger(I.Events.BUFFER_CREATED,{tracks:this.tracks})},A._onSBUpdateStart=function(v){var h=this.operationQueue,g=h.current(v);g.onStart()},A._onSBUpdateEnd=function(v){var h=this.operationQueue,g=h.current(v);g.onComplete(),h.shiftAndExecuteNext(v)},A._onSBUpdateError=function(v,h){K.logger.error("[buffer-controller]: "+v+" SourceBuffer error",h),this.hls.trigger(I.Events.ERROR,{type:b.ErrorTypes.MEDIA_ERROR,details:b.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1});var g=this.operationQueue.current(v);g&&g.onError(h)},A.removeExecutor=function(v,h,g){var P=this.media,R=this.mediaSource,y=this.operationQueue,L=this.sourceBuffer,U=L[v];if(!P||!R||!U){K.logger.warn("[buffer-controller]: Attempting to remove from the "+v+" SourceBuffer, but it does not exist"),y.shiftAndExecuteNext(v);return}var _=(0,M.isFiniteNumber)(P.duration)?P.duration:1/0,S=(0,M.isFiniteNumber)(R.duration)?R.duration:1/0,c=Math.max(0,h),E=Math.min(g,_,S);E>c&&!U.ending?(U.ended=!1,K.logger.log("[buffer-controller]: Removing ["+c+","+E+"] from the "+v+" SourceBuffer"),console.assert(!U.updating,v+" sourceBuffer must not be updating"),U.remove(c,E)):y.shiftAndExecuteNext(v)},A.appendExecutor=function(v,h){var g=this.operationQueue,P=this.sourceBuffer,R=P[h];if(!R){K.logger.warn("[buffer-controller]: Attempting to append to the "+h+" SourceBuffer, but it does not exist"),g.shiftAndExecuteNext(h);return}R.ended=!1,console.assert(!R.updating,h+" sourceBuffer must not be updating"),R.appendBuffer(v)},A.blockBuffers=function(v,h){var g=this;if(h===void 0&&(h=this.getSourceBufferTypes()),!h.length){K.logger.log("[buffer-controller]: Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(v);return}var P=this.operationQueue,R=h.map(function(y){return P.appendBlocker(y)});Promise.all(R).then(function(){v(),h.forEach(function(y){var L=g.sourceBuffer[y];(!L||!L.updating)&&P.shiftAndExecuteNext(y)})})},A.getSourceBufferTypes=function(){return Object.keys(this.sourceBuffer)},A.addBufferListener=function(v,h,g){var P=this.sourceBuffer[v];if(P){var R=g.bind(this,v);this.listeners[v].push({event:h,listener:R}),P.addEventListener(h,R)}},A.removeBufferListeners=function(v){var h=this.sourceBuffer[v];h&&this.listeners[v].forEach(function(g){h.removeEventListener(g.event,g.listener)})},w}()},"./src/controller/buffer-operation-queue.ts":(C,D,o)=>{o.r(D),o.d(D,{default:()=>I});var M=o("./src/utils/logger.ts"),I=function(){function K(W){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=W}var b=K.prototype;return b.append=function(F,k){var N=this.queues[k];N.push(F),N.length===1&&this.buffers[k]&&this.executeNext(k)},b.insertAbort=function(F,k){var N=this.queues[k];N.unshift(F),this.executeNext(k)},b.appendBlocker=function(F){var k,N=new Promise(function(p){k=p}),m={execute:k,onStart:function(){},onComplete:function(){},onError:function(){}};return this.append(m,F),N},b.executeNext=function(F){var k=this.buffers,N=this.queues,m=k[F],p=N[F];if(p.length){var u=p[0];try{u.execute()}catch(w){M.logger.warn("[buffer-operation-queue]: Unhandled exception executing the current operation"),u.onError(w),(!m||!m.updating)&&(p.shift(),this.executeNext(F))}}},b.shiftAndExecuteNext=function(F){this.queues[F].shift(),this.executeNext(F)},b.current=function(F){return this.queues[F][0]},K}()},"./src/controller/cap-level-controller.ts":(C,D,o)=>{o.r(D),o.d(D,{default:()=>k});var M=o("./src/events.ts");function I(N,m){for(var p=0;p<m.length;p++){var u=m[p];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(N,b(u.key),u)}}function K(N,m,p){return m&&I(N.prototype,m),p&&I(N,p),Object.defineProperty(N,"prototype",{writable:!1}),N}function b(N){var m=W(N,"string");return typeof m=="symbol"?m:String(m)}function W(N,m){if(typeof N!="object"||N===null)return N;var p=N[Symbol.toPrimitive];if(p!==void 0){var u=p.call(N,m||"default");if(typeof u!="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(m==="string"?String:Number)(N)}var F=function(){function N(p){this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.hls=void 0,this.streamController=void 0,this.clientRect=void 0,this.hls=p,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}var m=N.prototype;return m.setStreamController=function(u){this.streamController=u},m.destroy=function(){this.unregisterListener(),this.hls.config.capLevelToPlayerSize&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null},m.registerListeners=function(){var u=this.hls;u.on(M.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),u.on(M.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),u.on(M.Events.MANIFEST_PARSED,this.onManifestParsed,this),u.on(M.Events.BUFFER_CODECS,this.onBufferCodecs,this),u.on(M.Events.MEDIA_DETACHING,this.onMediaDetaching,this)},m.unregisterListener=function(){var u=this.hls;u.off(M.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),u.off(M.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),u.off(M.Events.MANIFEST_PARSED,this.onManifestParsed,this),u.off(M.Events.BUFFER_CODECS,this.onBufferCodecs,this),u.off(M.Events.MEDIA_DETACHING,this.onMediaDetaching,this)},m.onFpsDropLevelCapping=function(u,w){N.isLevelAllowed(w.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(w.droppedLevel)},m.onMediaAttaching=function(u,w){this.media=w.media instanceof HTMLVideoElement?w.media:null,this.clientRect=null},m.onManifestParsed=function(u,w){var A=this.hls;this.restrictedLevels=[],this.firstLevel=w.firstLevel,A.config.capLevelToPlayerSize&&w.video&&this.startCapping()},m.onBufferCodecs=function(u,w){var A=this.hls;A.config.capLevelToPlayerSize&&w.video&&this.startCapping()},m.onMediaDetaching=function(){this.stopCapping()},m.detectPlayerSize=function(){if(this.media&&this.mediaHeight>0&&this.mediaWidth>0){var u=this.hls.levels;if(u.length){var w=this.hls;w.autoLevelCapping=this.getMaxLevel(u.length-1),w.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=w.autoLevelCapping}}},m.getMaxLevel=function(u){var w=this,A=this.hls.levels;if(!A.length)return-1;var d=A.filter(function(v,h){return N.isLevelAllowed(h,w.restrictedLevels)&&h<=u});return this.clientRect=null,N.getMaxLevelByMediaSize(d,this.mediaWidth,this.mediaHeight)},m.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},m.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)},m.getDimensions=function(){if(this.clientRect)return this.clientRect;var u=this.media,w={width:0,height:0};if(u){var A=u.getBoundingClientRect();w.width=A.width,w.height=A.height,!w.width&&!w.height&&(w.width=A.right-A.left||u.width||0,w.height=A.bottom-A.top||u.height||0)}return this.clientRect=w,w},N.isLevelAllowed=function(u,w){return w===void 0&&(w=[]),w.indexOf(u)===-1},N.getMaxLevelByMediaSize=function(u,w,A){if(!u||!u.length)return-1;for(var d=function(R,y){return y?R.width!==y.width||R.height!==y.height:!0},v=u.length-1,h=0;h<u.length;h+=1){var g=u[h];if((g.width>=w||g.height>=A)&&d(g,u[h+1])){v=h;break}}return v},K(N,[{key:"mediaWidth",get:function(){return this.getDimensions().width*this.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*this.contentScaleFactor}},{key:"contentScaleFactor",get:function(){var u=1;if(!this.hls.config.ignoreDevicePixelRatio)try{u=self.devicePixelRatio}catch{}return u}}]),N}();const k=F},"./src/controller/cmcd-controller.ts":(C,D,o)=>{o.r(D),o.d(D,{default:()=>A});var M=o("./src/events.ts"),I=o("./src/types/cmcd.ts"),K=o("./src/utils/buffer-helper.ts"),b=o("./src/utils/logger.ts");function W(d,v){for(var h=0;h<v.length;h++){var g=v[h];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(d,k(g.key),g)}}function F(d,v,h){return v&&W(d.prototype,v),h&&W(d,h),Object.defineProperty(d,"prototype",{writable:!1}),d}function k(d){var v=N(d,"string");return typeof v=="symbol"?v:String(v)}function N(d,v){if(typeof d!="object"||d===null)return d;var h=d[Symbol.toPrimitive];if(h!==void 0){var g=h.call(d,v||"default");if(typeof g!="object")return g;throw new TypeError("@@toPrimitive must return a primitive value.")}return(v==="string"?String:Number)(d)}function m(d,v){var h=typeof Symbol<"u"&&d[Symbol.iterator]||d["@@iterator"];if(h)return(h=h.call(d)).next.bind(h);if(Array.isArray(d)||(h=p(d))||v&&d&&typeof d.length=="number"){h&&(d=h);var g=0;return function(){return g>=d.length?{done:!0}:{done:!1,value:d[g++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function p(d,v){if(d){if(typeof d=="string")return u(d,v);var h=Object.prototype.toString.call(d).slice(8,-1);if(h==="Object"&&d.constructor&&(h=d.constructor.name),h==="Map"||h==="Set")return Array.from(d);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return u(d,v)}}function u(d,v){(v==null||v>d.length)&&(v=d.length);for(var h=0,g=new Array(v);h<v;h++)g[h]=d[h];return g}function w(){return w=Object.assign?Object.assign.bind():function(d){for(var v=1;v<arguments.length;v++){var h=arguments[v];for(var g in h)Object.prototype.hasOwnProperty.call(h,g)&&(d[g]=h[g])}return d},w.apply(this,arguments)}var A=function(){function d(h){var g=this;this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=function(){g.initialized&&(g.starved=!0),g.buffering=!0},this.onPlaying=function(){g.initialized||(g.initialized=!0),g.buffering=!1},this.applyPlaylistData=function(y){try{g.apply(y,{ot:I.CMCDObjectType.MANIFEST,su:!g.initialized})}catch(L){b.logger.warn("Could not generate manifest CMCD data.",L)}},this.applyFragmentData=function(y){try{var L=y.frag,U=g.hls.levels[L.level],_=g.getObjectType(L),S={d:L.duration*1e3,ot:_};(_===I.CMCDObjectType.VIDEO||_===I.CMCDObjectType.AUDIO||_==I.CMCDObjectType.MUXED)&&(S.br=U.bitrate/1e3,S.tb=g.getTopBandwidth(_)/1e3,S.bl=g.getBufferLength(_)),g.apply(y,S)}catch(c){b.logger.warn("Could not generate segment CMCD data.",c)}},this.hls=h;var P=this.config=h.config,R=P.cmcd;R!=null&&(P.pLoader=this.createPlaylistLoader(),P.fLoader=this.createFragmentLoader(),this.sid=R.sessionId||d.uuid(),this.cid=R.contentId,this.useHeaders=R.useHeaders===!0,this.registerListeners())}var v=d.prototype;return v.registerListeners=function(){var g=this.hls;g.on(M.Events.MEDIA_ATTACHED,this.onMediaAttached,this),g.on(M.Events.MEDIA_DETACHED,this.onMediaDetached,this),g.on(M.Events.BUFFER_CREATED,this.onBufferCreated,this)},v.unregisterListeners=function(){var g=this.hls;g.off(M.Events.MEDIA_ATTACHED,this.onMediaAttached,this),g.off(M.Events.MEDIA_DETACHED,this.onMediaDetached,this),g.off(M.Events.BUFFER_CREATED,this.onBufferCreated,this),this.onMediaDetached()},v.destroy=function(){this.unregisterListeners(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null},v.onMediaAttached=function(g,P){this.media=P.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)},v.onMediaDetached=function(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)},v.onBufferCreated=function(g,P){var R,y;this.audioBuffer=(R=P.tracks.audio)===null||R===void 0?void 0:R.buffer,this.videoBuffer=(y=P.tracks.video)===null||y===void 0?void 0:y.buffer},v.createData=function(){var g;return{v:I.CMCDVersion,sf:I.CMCDStreamingFormat.HLS,sid:this.sid,cid:this.cid,pr:(g=this.media)===null||g===void 0?void 0:g.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}},v.apply=function(g,P){P===void 0&&(P={}),w(P,this.createData());var R=P.ot===I.CMCDObjectType.INIT||P.ot===I.CMCDObjectType.VIDEO||P.ot===I.CMCDObjectType.MUXED;if(this.starved&&R&&(P.bs=!0,P.su=!0,this.starved=!1),P.su==null&&(P.su=this.buffering),this.useHeaders){var y=d.toHeaders(P);if(!Object.keys(y).length)return;g.headers||(g.headers={}),w(g.headers,y)}else{var L=d.toQuery(P);if(!L)return;g.url=d.appendQueryToUri(g.url,L)}},v.getObjectType=function(g){var P=g.type;if(P==="subtitle")return I.CMCDObjectType.TIMED_TEXT;if(g.sn==="initSegment")return I.CMCDObjectType.INIT;if(P==="audio")return I.CMCDObjectType.AUDIO;if(P==="main")return this.hls.audioTracks.length?I.CMCDObjectType.VIDEO:I.CMCDObjectType.MUXED},v.getTopBandwidth=function(g){var P=0,R,y=this.hls;if(g===I.CMCDObjectType.AUDIO)R=y.audioTracks;else{var L=y.maxAutoLevel,U=L>-1?L+1:y.levels.length;R=y.levels.slice(0,U)}for(var _=m(R),S;!(S=_()).done;){var c=S.value;c.bitrate>P&&(P=c.bitrate)}return P>0?P:NaN},v.getBufferLength=function(g){var P=this.hls.media,R=g===I.CMCDObjectType.AUDIO?this.audioBuffer:this.videoBuffer;if(!R||!P)return NaN;var y=K.BufferHelper.bufferInfo(R,P.currentTime,this.config.maxBufferHole);return y.len*1e3},v.createPlaylistLoader=function(){var g=this.config.pLoader,P=this.applyPlaylistData,R=g||this.config.loader;return function(){function y(U){this.loader=void 0,this.loader=new R(U)}var L=y.prototype;return L.destroy=function(){this.loader.destroy()},L.abort=function(){this.loader.abort()},L.load=function(_,S,c){P(_),this.loader.load(_,S,c)},F(y,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),y}()},v.createFragmentLoader=function(){var g=this.config.fLoader,P=this.applyFragmentData,R=g||this.config.loader;return function(){function y(U){this.loader=void 0,this.loader=new R(U)}var L=y.prototype;return L.destroy=function(){this.loader.destroy()},L.abort=function(){this.loader.abort()},L.load=function(_,S,c){P(_),this.loader.load(_,S,c)},F(y,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),y}()},d.uuid=function(){var g=URL.createObjectURL(new Blob),P=g.toString();return URL.revokeObjectURL(g),P.slice(P.lastIndexOf("/")+1)},d.serialize=function(g){for(var P=[],R=function(j){return!Number.isNaN(j)&&j!=null&&j!==""&&j!==!1},y=function(j){return Math.round(j)},L=function(j){return y(j/100)*100},U=function(j){return encodeURIComponent(j)},_={br:y,d:y,bl:L,dl:L,mtp:L,nor:U,rtp:L,tb:y},S=Object.keys(g||{}).sort(),c=m(S),E;!(E=c()).done;){var l=E.value,x=g[l];if(R(x)&&!(l==="v"&&x===1)&&!(l=="pr"&&x===1)){var B=_[l];B&&(x=B(x));var O=typeof x,$=void 0;l==="ot"||l==="sf"||l==="st"?$=l+"="+x:O==="boolean"?$=l:O==="number"?$=l+"="+x:$=l+"="+JSON.stringify(x),P.push($)}}return P.join(",")},d.toHeaders=function(g){for(var P=Object.keys(g),R={},y=["Object","Request","Session","Status"],L=[{},{},{},{}],U={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3},_=0,S=P;_<S.length;_++){var c=S[_],E=U[c]!=null?U[c]:1;L[E][c]=g[c]}for(var l=0;l<L.length;l++){var x=d.serialize(L[l]);x&&(R["CMCD-"+y[l]]=x)}return R},d.toQuery=function(g){return"CMCD="+encodeURIComponent(d.serialize(g))},d.appendQueryToUri=function(g,P){if(!P)return g;var R=g.includes("?")?"&":"?";return""+g+R+P},d}()},"./src/controller/eme-controller.ts":(C,D,o)=>{o.r(D),o.d(D,{default:()=>_});var M=o("./src/events.ts"),I=o("./src/errors.ts"),K=o("./src/utils/logger.ts"),b=o("./src/utils/mediakeys-helper.ts"),W=o("./src/utils/keysystem-util.ts"),F=o("./src/utils/numeric-encoding-utils.ts"),k=o("./src/loader/level-key.ts"),N=o("./src/utils/hex.ts"),m=o("./src/utils/mp4-tools.ts"),p=o("./node_modules/eventemitter3/index.js"),u=o.n(p);function w(S,c){S.prototype=Object.create(c.prototype),S.prototype.constructor=S,g(S,c)}function A(S){var c=typeof Map=="function"?new Map:void 0;return A=function(l){if(l===null||!h(l))return l;if(typeof l!="function")throw new TypeError("Super expression must either be null or a function");if(typeof c<"u"){if(c.has(l))return c.get(l);c.set(l,x)}function x(){return d(l,arguments,P(this).constructor)}return x.prototype=Object.create(l.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),g(x,l)},A(S)}function d(S,c,E){return v()?d=Reflect.construct.bind():d=function(x,B,O){var $=[null];$.push.apply($,B);var H=Function.bind.apply(x,$),j=new H;return O&&g(j,O.prototype),j},d.apply(null,arguments)}function v(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function h(S){return Function.toString.call(S).indexOf("[native code]")!==-1}function g(S,c){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(l,x){return l.__proto__=x,l},g(S,c)}function P(S){return P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(E){return E.__proto__||Object.getPrototypeOf(E)},P(S)}var R=3,y="[eme]",L=function(){function S(E){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=S.CDMCleanupPromise?[S.CDMCleanupPromise]:[],this.onMediaEncrypted=this._onMediaEncrypted.bind(this),this.onWaitingForKey=this._onWaitingForKey.bind(this),this.debug=K.logger.debug.bind(K.logger,y),this.log=K.logger.log.bind(K.logger,y),this.warn=K.logger.warn.bind(K.logger,y),this.error=K.logger.error.bind(K.logger,y),this.hls=E,this.config=E.config,this.registerListeners()}var c=S.prototype;return c.destroy=function(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.onMediaEncrypted=this.onWaitingForKey=this.keyIdToKeySessionPromise=null},c.registerListeners=function(){this.hls.on(M.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(M.Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(M.Events.MANIFEST_LOADED,this.onManifestLoaded,this)},c.unregisterListeners=function(){this.hls.off(M.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(M.Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(M.Events.MANIFEST_LOADED,this.onManifestLoaded,this)},c.getLicenseServerUrl=function(l){var x=this.config,B=x.drmSystems,O=x.widevineLicenseUrl,$=B[l];if($)return $.licenseUrl;if(l===b.KeySystems.WIDEVINE&&O)return O;throw new Error('no license server URL configured for key-system "'+l+'"')},c.getServerCertificateUrl=function(l){var x=this.config.drmSystems,B=x[l];if(B)return B.serverCertificateUrl;this.log('No Server Certificate in config.drmSystems["'+l+'"]')},c.attemptKeySystemAccess=function(l){var x=this,B=this.hls.levels,O=function(V,z,X){return!!V&&X.indexOf(V)===z},$=B.map(function(j){return j.audioCodec}).filter(O),H=B.map(function(j){return j.videoCodec}).filter(O);return $.length+H.length===0&&H.push("avc1.42e01e"),new Promise(function(j,V){var z=function X(J){var q=J.shift();x.getMediaKeysPromise(q,$,H).then(function(ee){return j({keySystem:q,mediaKeys:ee})}).catch(function(ee){J.length?X(J):ee instanceof U?V(ee):V(new U({type:I.ErrorTypes.KEY_SYSTEM_ERROR,details:I.ErrorDetails.KEY_SYSTEM_NO_ACCESS,error:ee,fatal:!0},ee.message))})};z(l)})},c.requestMediaKeySystemAccess=function(l,x){var B=this.config.requestMediaKeySystemAccessFunc;if(typeof B!="function"){var O="Configured requestMediaKeySystemAccess is not a function "+B;return b.requestMediaKeySystemAccess===null&&self.location.protocol==="http:"&&(O="navigator.requestMediaKeySystemAccess is not available over insecure protocol "+location.protocol),Promise.reject(new Error(O))}return B(l,x)},c.getMediaKeysPromise=function(l,x,B){var O=this,$=(0,b.getSupportedMediaKeySystemConfigurations)(l,x,B,this.config.drmSystemOptions),H=this.keySystemAccessPromises[l],j=H==null?void 0:H.keySystemAccess;if(!j){this.log('Requesting encrypted media "'+l+'" key-system access with config: '+JSON.stringify($)),j=this.requestMediaKeySystemAccess(l,$);var V=this.keySystemAccessPromises[l]={keySystemAccess:j};return j.catch(function(z){O.log('Failed to obtain access to key-system "'+l+'": '+z)}),j.then(function(z){O.log('Access for key-system "'+z.keySystem+'" obtained');var X=O.fetchServerCertificate(l);return O.log('Create media-keys for "'+l+'"'),V.mediaKeys=z.createMediaKeys().then(function(J){return O.log('Media-keys created for "'+l+'"'),X.then(function(q){return q?O.setMediaKeysServerCertificate(J,l,q):J})}),V.mediaKeys.catch(function(J){O.error('Failed to create media-keys for "'+l+'"}: '+J)}),V.mediaKeys})}return j.then(function(){return H.mediaKeys})},c.createMediaKeySessionContext=function(l){var x=l.decryptdata,B=l.keySystem,O=l.mediaKeys;console.assert(!!O,"mediaKeys is defined"),this.log('Creating key-system session "'+B+'" keyId: '+N.default.hexDump(x.keyId||[]));var $=O.createSession(),H={decryptdata:x,keySystem:B,mediaKeys:O,mediaKeysSession:$,keyStatus:"status-pending"};return this.mediaKeySessions.push(H),H},c.renewKeySession=function(l){var x=l.decryptdata;if(x.pssh){var B=this.createMediaKeySessionContext(l),O=this.getKeyIdString(x),$="cenc";this.keyIdToKeySessionPromise[O]=this.generateRequestWithPreferredKeySession(B,$,x.pssh,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(l)},c.getKeyIdString=function(l){if(!l)throw new Error("Could not read keyId of undefined decryptdata");if(l.keyId===null)throw new Error("keyId is null");return N.default.hexDump(l.keyId)},c.updateKeySession=function(l,x){var B,O=l.mediaKeysSession;return this.log('Updating key-session "'+O.sessionId+'" for keyID '+N.default.hexDump(((B=l.decryptdata)===null||B===void 0?void 0:B.keyId)||[])+`
      } (data length: `+(x&&x.byteLength)+")"),O.update(x)},c.selectKeySystemFormat=function(l){var x=Object.keys(l.levelkeys||{});return this.keyFormatPromise||(this.log("Selecting key-system from fragment (sn: "+l.sn+" "+l.type+": "+l.level+") key formats "+x.join(", ")),this.keyFormatPromise=this.getKeyFormatPromise(x)),this.keyFormatPromise},c.getKeyFormatPromise=function(l){var x=this;return new Promise(function(B,O){var $=(0,b.getKeySystemsForConfig)(x.config),H=l.map(b.keySystemFormatToKeySystemDomain).filter(function(j){return!!j&&$.indexOf(j)!==-1});return x.getKeySystemSelectionPromise(H).then(function(j){var V=j.keySystem,z=(0,b.keySystemDomainToKeySystemFormat)(V);z?B(z):O(new Error('Unable to find format for key-system "'+V+'"'))}).catch(O)})},c.loadKey=function(l){var x=this,B=l.keyInfo.decryptdata,O=this.getKeyIdString(B),$="(keyId: "+O+' format: "'+B.keyFormat+'" method: '+B.method+" uri: "+B.uri+")";this.log("Starting session for key "+$);var H=this.keyIdToKeySessionPromise[O];return H||(H=this.keyIdToKeySessionPromise[O]=this.getKeySystemForKeyPromise(B).then(function(j){var V=j.keySystem,z=j.mediaKeys;return x.throwIfDestroyed(),x.log("Handle encrypted media sn: "+l.frag.sn+" "+l.frag.type+": "+l.frag.level+" using key "+$),x.attemptSetMediaKeys(V,z).then(function(){x.throwIfDestroyed();var X=x.createMediaKeySessionContext({keySystem:V,mediaKeys:z,decryptdata:B}),J="cenc";return x.generateRequestWithPreferredKeySession(X,J,B.pssh,"playlist-key")})}),H.catch(function(j){return x.handleError(j)})),H},c.throwIfDestroyed=function(l){if(!this.hls)throw new Error("invalid state")},c.handleError=function(l){this.hls&&(this.error(l.message),l instanceof U?this.hls.trigger(M.Events.ERROR,l.data):this.hls.trigger(M.Events.ERROR,{type:I.ErrorTypes.KEY_SYSTEM_ERROR,details:I.ErrorDetails.KEY_SYSTEM_NO_KEYS,error:l,fatal:!0}))},c.getKeySystemForKeyPromise=function(l){var x=this.getKeyIdString(l),B=this.keyIdToKeySessionPromise[x];if(!B){var O=(0,b.keySystemFormatToKeySystemDomain)(l.keyFormat),$=O?[O]:(0,b.getKeySystemsForConfig)(this.config);return this.attemptKeySystemAccess($)}return B},c.getKeySystemSelectionPromise=function(l){if(l.length||(l=(0,b.getKeySystemsForConfig)(this.config)),l.length===0)throw new U({type:I.ErrorTypes.KEY_SYSTEM_ERROR,details:I.ErrorDetails.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},"Missing key-system license configuration options "+JSON.stringify({drmSystems:this.config.drmSystems}));return this.attemptKeySystemAccess(l)},c._onMediaEncrypted=function(l){var x=this,B=l.initDataType,O=l.initData;if(this.debug('"'+l.type+'" event: init data type: "'+B+'"'),O!==null){var $,H;if(B==="sinf"&&this.config.drmSystems[b.KeySystems.FAIRPLAY]){var j=(0,m.bin2str)(new Uint8Array(O));try{var V=(0,F.base64Decode)(JSON.parse(j).sinf),z=(0,m.parseSinf)(new Uint8Array(V));if(!z)return;$=z.subarray(8,24),H=b.KeySystems.FAIRPLAY}catch{this.warn('Failed to parse sinf "encrypted" event message initData');return}}else{var X=(0,m.parsePssh)(O);if(X===null)return;X.version===0&&X.systemId===b.KeySystemIds.WIDEVINE&&X.data&&($=X.data.subarray(8,24)),H=(0,b.keySystemIdToKeySystemDomain)(X.systemId)}if(!(!H||!$)){for(var J=N.default.hexDump($),q=this.keyIdToKeySessionPromise,ee=this.mediaKeySessions,ne=q[J],ae=function(ye){var Pe=ee[ye],Te=Pe.decryptdata;if(Te.pssh||!Te.keyId)return"continue";var ge=N.default.hexDump(Te.keyId);if(J===ge||Te.uri.replace(/-/g,"").indexOf(J)!==-1)return ne=q[ge],delete q[ge],Te.pssh=new Uint8Array(O),Te.keyId=$,ne=q[J]=ne.then(function(){return x.generateRequestWithPreferredKeySession(Pe,B,O,"encrypted-event-key-match")}),"break"},fe=0;fe<ee.length;fe++){var ue=ae(fe);if(ue!=="continue"&&ue==="break")break}ne||(ne=q[J]=this.getKeySystemSelectionPromise([H]).then(function(ce){var ye,Pe=ce.keySystem,Te=ce.mediaKeys;x.throwIfDestroyed();var ge=new k.LevelKey("ISO-23001-7",J,(ye=(0,b.keySystemDomainToKeySystemFormat)(Pe))!=null?ye:"");return ge.pssh=new Uint8Array(O),ge.keyId=$,x.attemptSetMediaKeys(Pe,Te).then(function(){x.throwIfDestroyed();var De=x.createMediaKeySessionContext({decryptdata:ge,keySystem:Pe,mediaKeys:Te});return x.generateRequestWithPreferredKeySession(De,B,O,"encrypted-event-no-match")})})),ne.catch(function(ce){return x.handleError(ce)})}}},c._onWaitingForKey=function(l){this.log('"'+l.type+'" event')},c.attemptSetMediaKeys=function(l,x){var B=this,O=this.setMediaKeysQueue.slice();this.log('Setting media-keys for "'+l+'"');var $=Promise.all(O).then(function(){if(!B.media)throw new Error("Attempted to set mediaKeys without media element attached");return B.media.setMediaKeys(x)});return this.setMediaKeysQueue.push($),$.then(function(){B.log('Media-keys set for "'+l+'"'),O.push($),B.setMediaKeysQueue=B.setMediaKeysQueue.filter(function(H){return O.indexOf(H)===-1})})},c.generateRequestWithPreferredKeySession=function(l,x,B,O){var $,H,j=this,V=($=this.config.drmSystems)===null||$===void 0||(H=$[l.keySystem])===null||H===void 0?void 0:H.generateRequest;if(V)try{var z=V.call(this.hls,x,B,l);if(!z)throw new Error("Invalid response from configured generateRequest filter");x=z.initDataType,B=l.decryptdata.pssh=z.initData?new Uint8Array(z.initData):null}catch(ne){var X;if(this.warn(ne.message),(X=this.hls)!==null&&X!==void 0&&X.config.debug)throw ne}if(B===null)return this.log('Skipping key-session request for "'+O+'" (no initData)'),Promise.resolve(l);var J=this.getKeyIdString(l.decryptdata);this.log('Generating key-session request for "'+O+'": '+J+" (init data type: "+x+" length: "+(B?B.byteLength:null)+")");var q=new(u());l.mediaKeysSession.onmessage=function(ne){var ae=l.mediaKeysSession;if(!ae){q.emit("error",new Error("invalid state"));return}var fe=ne.messageType,ue=ne.message;j.log('"'+fe+'" message event for session "'+ae.sessionId+'" message size: '+ue.byteLength),fe==="license-request"||fe==="license-renewal"?j.renewLicense(l,ue).catch(function(ce){j.handleError(ce),q.emit("error",ce)}):fe==="license-release"?l.keySystem===b.KeySystems.FAIRPLAY&&(j.updateKeySession(l,(0,W.strToUtf8array)("acknowledged")),j.removeSession(l)):j.warn('unhandled media key message type "'+fe+'"')},l.mediaKeysSession.onkeystatuseschange=function(ne){var ae=l.mediaKeysSession;if(!ae){q.emit("error",new Error("invalid state"));return}j.onKeyStatusChange(l);var fe=l.keyStatus;q.emit("keyStatus",fe),fe==="expired"&&(j.warn(l.keySystem+" expired for key "+J),j.renewKeySession(l))};var ee=new Promise(function(ne,ae){q.on("error",ae),q.on("keyStatus",function(fe){fe.startsWith("usable")?ne():fe==="output-restricted"?ae(new U({type:I.ErrorTypes.KEY_SYSTEM_ERROR,details:I.ErrorDetails.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):fe==="internal-error"?ae(new U({type:I.ErrorTypes.KEY_SYSTEM_ERROR,details:I.ErrorDetails.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},'key status changed to "'+fe+'"')):fe==="expired"?ae(new Error("key expired while generating request")):j.warn('unhandled key status change "'+fe+'"')})});return l.mediaKeysSession.generateRequest(x,B).then(function(){var ne;j.log('Request generated for key-session "'+((ne=l.mediaKeysSession)===null||ne===void 0?void 0:ne.sessionId)+'" keyId: '+J)}).catch(function(ne){throw new U({type:I.ErrorTypes.KEY_SYSTEM_ERROR,details:I.ErrorDetails.KEY_SYSTEM_NO_SESSION,error:ne,fatal:!1},"Error generating key-session request: "+ne)}).then(function(){return ee}).catch(function(ne){throw q.removeAllListeners(),j.removeSession(l),ne}).then(function(){return q.removeAllListeners(),l})},c.onKeyStatusChange=function(l){var x=this;l.mediaKeysSession.keyStatuses.forEach(function(B,O){x.log('key status change "'+B+'" for keyStatuses keyId: '+N.default.hexDump("buffer"in O?new Uint8Array(O.buffer,O.byteOffset,O.byteLength):new Uint8Array(O))+" session keyId: "+N.default.hexDump(new Uint8Array(l.decryptdata.keyId||[]))+" uri: "+l.decryptdata.uri),l.keyStatus=B})},c.fetchServerCertificate=function(l){var x=this;return new Promise(function(B,O){var $=x.getServerCertificateUrl(l);if(!$)return B();x.log('Fetching serverCertificate for "'+l+'"');var H=new XMLHttpRequest;H.open("GET",$,!0),H.responseType="arraybuffer",H.onreadystatechange=function(){H.readyState===XMLHttpRequest.DONE&&(H.status===200?B(H.response):O(new U({type:I.ErrorTypes.KEY_SYSTEM_ERROR,details:I.ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:H},'"'+l+'" certificate request XHR failed ('+$+"). Status: "+H.status+" ("+H.statusText+")")))},H.send()})},c.setMediaKeysServerCertificate=function(l,x,B){var O=this;return new Promise(function($,H){l.setServerCertificate(B).then(function(j){O.log("setServerCertificate "+(j?"success":"not supported by CDM")+" ("+(B==null?void 0:B.byteLength)+') on "'+x+'"'),$(l)}).catch(function(j){H(new U({type:I.ErrorTypes.KEY_SYSTEM_ERROR,details:I.ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:j,fatal:!0},j.message))})})},c.renewLicense=function(l,x){var B=this;return this.requestLicense(l,new Uint8Array(x)).then(function(O){return B.updateKeySession(l,new Uint8Array(O)).catch(function($){throw new U({type:I.ErrorTypes.KEY_SYSTEM_ERROR,details:I.ErrorDetails.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:$,fatal:!0},$.message)})})},c.setupLicenseXHR=function(l,x,B,O){var $=this,H=this.config.licenseXhrSetup;return H?Promise.resolve().then(function(){if(!B.decryptdata)throw new Error("Key removed");return H.call($.hls,l,x,B,O)}).catch(function(j){if(!B.decryptdata)throw j;return l.open("POST",x,!0),H.call($.hls,l,x,B,O)}).then(function(j){l.readyState||l.open("POST",x,!0);var V=j||O;return{xhr:l,licenseChallenge:V}}):(l.open("POST",x,!0),Promise.resolve({xhr:l,licenseChallenge:O}))},c.requestLicense=function(l,x){var B=this;return new Promise(function(O,$){var H=B.getLicenseServerUrl(l.keySystem);B.log("Sending license request to URL: "+H);var j=new XMLHttpRequest;j.responseType="arraybuffer",j.onreadystatechange=function(){if(!B.hls||!l.mediaKeysSession)return $(new Error("invalid state"));if(j.readyState===4)if(j.status===200){B._requestLicenseFailureCount=0;var V=j.response;B.log("License received "+(V instanceof ArrayBuffer?V.byteLength:V));var z=B.config.licenseResponseCallback;if(z)try{V=z.call(B.hls,j,H,l)}catch(J){B.error(J)}O(V)}else if(B._requestLicenseFailureCount++,B._requestLicenseFailureCount>R||j.status>=400&&j.status<500)$(new U({type:I.ErrorTypes.KEY_SYSTEM_ERROR,details:I.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:j},"License Request XHR failed ("+H+"). Status: "+j.status+" ("+j.statusText+")"));else{var X=R-B._requestLicenseFailureCount+1;B.warn("Retrying license request, "+X+" attempts left"),B.requestLicense(l,x).then(O,$)}},l.licenseXhr&&l.licenseXhr.readyState!==XMLHttpRequest.DONE&&l.licenseXhr.abort(),l.licenseXhr=j,B.setupLicenseXHR(j,H,l,x).then(function(V){var z=V.xhr,X=V.licenseChallenge;z.send(X)})})},c.onMediaAttached=function(l,x){if(this.config.emeEnabled){var B=x.media;this.media=B,B.addEventListener("encrypted",this.onMediaEncrypted),B.addEventListener("waitingforkey",this.onWaitingForKey)}},c.onMediaDetached=function(){var l=this,x=this.media,B=this.mediaKeySessions;x&&(x.removeEventListener("encrypted",this.onMediaEncrypted),x.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},k.LevelKey.clearKeyUriToKeyIdMap();var O=B.length;S.CDMCleanupPromise=Promise.all(B.map(function($){return l.removeSession($)}).concat(x==null?void 0:x.setMediaKeys(null).catch(function($){l.log("Could not clear media keys: "+$+". media.src: "+(x==null?void 0:x.src))}))).then(function(){O&&(l.log("finished closing key sessions and clearing media keys"),B.length=0)}).catch(function($){l.log("Could not close sessions and clear media keys: "+$+". media.src: "+(x==null?void 0:x.src))})},c.onManifestLoaded=function(l,x){var B=x.sessionKeys;if(!(!B||!this.config.emeEnabled)&&!this.keyFormatPromise){var O=B.reduce(function($,H){return $.indexOf(H.keyFormat)===-1&&$.push(H.keyFormat),$},[]);this.log("Selecting key-system from session-keys "+O.join(", ")),this.keyFormatPromise=this.getKeyFormatPromise(O)}},c.removeSession=function(l){var x=this,B=l.mediaKeysSession,O=l.licenseXhr;if(B){this.log("Remove licenses and keys and close session "+B.sessionId),B.onmessage=null,B.onkeystatuseschange=null,O&&O.readyState!==XMLHttpRequest.DONE&&O.abort(),l.mediaKeysSession=l.decryptdata=l.licenseXhr=void 0;var $=this.mediaKeySessions.indexOf(l);return $>-1&&this.mediaKeySessions.splice($,1),B.remove().catch(function(H){x.log("Could not remove session: "+H)}).then(function(){return B.close()}).catch(function(H){x.log("Could not close session: "+H)})}},S}();L.CDMCleanupPromise=void 0;var U=function(S){w(c,S);function c(E,l){var x;return x=S.call(this,l)||this,x.data=void 0,x.data=E,E.err=E.error,x}return c}(A(Error));const _=L},"./src/controller/fps-controller.ts":(C,D,o)=>{o.r(D),o.d(D,{default:()=>b});var M=o("./src/events.ts"),I=o("./src/utils/logger.ts"),K=function(){function W(k){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=k,this.registerListeners()}var F=W.prototype;return F.setStreamController=function(N){this.streamController=N},F.registerListeners=function(){this.hls.on(M.Events.MEDIA_ATTACHING,this.onMediaAttaching,this)},F.unregisterListeners=function(){this.hls.off(M.Events.MEDIA_ATTACHING,this.onMediaAttaching)},F.destroy=function(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null},F.onMediaAttaching=function(N,m){var p=this.hls.config;if(p.capLevelOnFPSDrop){var u=m.media instanceof self.HTMLVideoElement?m.media:null;this.media=u,u&&typeof u.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),p.fpsDroppedMonitoringPeriod)}},F.checkFPS=function(N,m,p){var u=performance.now();if(m){if(this.lastTime){var w=u-this.lastTime,A=p-this.lastDroppedFrames,d=m-this.lastDecodedFrames,v=1e3*A/w,h=this.hls;if(h.trigger(M.Events.FPS_DROP,{currentDropped:A,currentDecoded:d,totalDroppedFrames:p}),v>0&&A>h.config.fpsDroppedMonitoringThreshold*d){var g=h.currentLevel;I.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+g),g>0&&(h.autoLevelCapping===-1||h.autoLevelCapping>=g)&&(g=g-1,h.trigger(M.Events.FPS_DROP_LEVEL_CAPPING,{level:g,droppedLevel:h.currentLevel}),h.autoLevelCapping=g,this.streamController.nextLevelSwitch())}}this.lastTime=u,this.lastDroppedFrames=p,this.lastDecodedFrames=m}},F.checkFPSInterval=function(){var N=this.media;if(N)if(this.isVideoPlaybackQualityAvailable){var m=N.getVideoPlaybackQuality();this.checkFPS(N,m.totalVideoFrames,m.droppedVideoFrames)}else this.checkFPS(N,N.webkitDecodedFrameCount,N.webkitDroppedFrameCount)},W}();const b=K},"./src/controller/fragment-finders.ts":(C,D,o)=>{o.r(D),o.d(D,{findFragWithCC:()=>k,findFragmentByPDT:()=>K,findFragmentByPTS:()=>b,fragmentWithinToleranceTest:()=>W,pdtWithinToleranceTest:()=>F});var M=o("./src/polyfills/number.ts"),I=o("./src/utils/binary-search.ts");function K(N,m,p){if(m===null||!Array.isArray(N)||!N.length||!(0,M.isFiniteNumber)(m))return null;var u=N[0].programDateTime;if(m<(u||0))return null;var w=N[N.length-1].endProgramDateTime;if(m>=(w||0))return null;p=p||0;for(var A=0;A<N.length;++A){var d=N[A];if(F(m,p,d))return d}return null}function b(N,m,p,u){p===void 0&&(p=0),u===void 0&&(u=0);var w=null;if(N?w=m[N.sn-m[0].sn+1]||null:p===0&&m[0].start===0&&(w=m[0]),w&&W(p,u,w)===0)return w;var A=I.default.search(m,W.bind(null,p,u));return A&&(A!==N||!w)?A:w}function W(N,m,p){if(N===void 0&&(N=0),m===void 0&&(m=0),p.start<=N&&p.start+p.duration>N)return 0;var u=Math.min(m,p.duration+(p.deltaPTS?p.deltaPTS:0));return p.start+p.duration-u<=N?1:p.start-u>N&&p.start?-1:0}function F(N,m,p){var u=Math.min(m,p.duration+(p.deltaPTS?p.deltaPTS:0))*1e3,w=p.endProgramDateTime||0;return w-u>N}function k(N,m){return I.default.search(N,function(p){return p.cc<m?1:p.cc>m?-1:0})}},"./src/controller/fragment-tracker.ts":(C,D,o)=>{o.r(D),o.d(D,{FragmentState:()=>K,FragmentTracker:()=>b});var M=o("./src/events.ts"),I=o("./src/types/loader.ts"),K;(function(k){k.NOT_LOADED="NOT_LOADED",k.APPENDING="APPENDING",k.PARTIAL="PARTIAL",k.OK="OK"})(K||(K={}));var b=function(){function k(m){this.activeFragment=null,this.activeParts=null,this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hls=m,this._registerListeners()}var N=k.prototype;return N._registerListeners=function(){var p=this.hls;p.on(M.Events.BUFFER_APPENDED,this.onBufferAppended,this),p.on(M.Events.FRAG_BUFFERED,this.onFragBuffered,this),p.on(M.Events.FRAG_LOADED,this.onFragLoaded,this)},N._unregisterListeners=function(){var p=this.hls;p.off(M.Events.BUFFER_APPENDED,this.onBufferAppended,this),p.off(M.Events.FRAG_BUFFERED,this.onFragBuffered,this),p.off(M.Events.FRAG_LOADED,this.onFragLoaded,this)},N.destroy=function(){this._unregisterListeners(),this.fragments=this.endListFragments=this.timeRanges=this.activeFragment=this.activeParts=null},N.getAppendedFrag=function(p,u){if(u===I.PlaylistLevelType.MAIN){var w=this.activeFragment,A=this.activeParts;if(!w)return null;if(A)for(var d=A.length;d--;){var v=A[d],h=v?v.end:w.appendedPTS;if(v.start<=p&&h!==void 0&&p<=h)return d>9&&(this.activeParts=A.slice(d-9)),v}else if(w.start<=p&&w.appendedPTS!==void 0&&p<=w.appendedPTS)return w}return this.getBufferedFrag(p,u)},N.getBufferedFrag=function(p,u){for(var w=this.fragments,A=Object.keys(w),d=A.length;d--;){var v=w[A[d]];if((v==null?void 0:v.body.type)===u&&v.buffered){var h=v.body;if(h.start<=p&&p<=h.end)return h}}return null},N.detectEvictedFragments=function(p,u,w){var A=this;this.timeRanges&&(this.timeRanges[p]=u),Object.keys(this.fragments).forEach(function(d){var v=A.fragments[d];if(v){if(!v.buffered&&!v.loaded){v.body.type===w&&A.removeFragment(v.body);return}var h=v.range[p];h&&h.time.some(function(g){var P=!A.isTimeBuffered(g.startPTS,g.endPTS,u);return P&&A.removeFragment(v.body),P})}})},N.detectPartialFragments=function(p){var u=this,w=this.timeRanges,A=p.frag,d=p.part;if(!(!w||A.sn==="initSegment")){var v=F(A),h=this.fragments[v];h&&(Object.keys(w).forEach(function(g){var P=A.elementaryStreams[g];if(P){var R=w[g],y=d!==null||P.partial===!0;h.range[g]=u.getBufferedTimes(A,d,y,R)}}),h.loaded=null,Object.keys(h.range).length?(h.buffered=!0,h.body.endList&&(this.endListFragments[h.body.type]=h)):this.removeFragment(h.body))}},N.fragBuffered=function(p){var u=F(p),w=this.fragments[u];w&&(w.loaded=null,w.buffered=!0)},N.getBufferedTimes=function(p,u,w,A){for(var d={time:[],partial:w},v=u?u.start:p.start,h=u?u.end:p.end,g=p.minEndPTS||h,P=p.maxStartPTS||v,R=0;R<A.length;R++){var y=A.start(R)-this.bufferPadding,L=A.end(R)+this.bufferPadding;if(P>=y&&g<=L){d.time.push({startPTS:Math.max(v,A.start(R)),endPTS:Math.min(h,A.end(R))});break}else if(v<L&&h>y)d.partial=!0,d.time.push({startPTS:Math.max(v,A.start(R)),endPTS:Math.min(h,A.end(R))});else if(h<=y)break}return d},N.getPartialFragment=function(p){var u=null,w,A,d,v=0,h=this.bufferPadding,g=this.fragments;return Object.keys(g).forEach(function(P){var R=g[P];R&&W(R)&&(A=R.body.start-h,d=R.body.end+h,p>=A&&p<=d&&(w=Math.min(p-A,d-p),v<=w&&(u=R.body,v=w)))}),u},N.isEndListAppended=function(p){var u=this.endListFragments[p];return u!==void 0&&(u.buffered||W(u))},N.getState=function(p){var u=F(p),w=this.fragments[u];return w?w.buffered?W(w)?K.PARTIAL:K.OK:K.APPENDING:K.NOT_LOADED},N.isTimeBuffered=function(p,u,w){for(var A,d,v=0;v<w.length;v++){if(A=w.start(v)-this.bufferPadding,d=w.end(v)+this.bufferPadding,p>=A&&u<=d)return!0;if(u<=A)return!1}return!1},N.onFragLoaded=function(p,u){var w=u.frag,A=u.part;if(!(w.sn==="initSegment"||w.bitrateTest||A)){var d=F(w);this.fragments[d]={body:w,loaded:u,buffered:!1,range:Object.create(null)}}},N.onBufferAppended=function(p,u){var w=this,A=u.frag,d=u.part,v=u.timeRanges;if(A.type===I.PlaylistLevelType.MAIN)if(this.activeFragment!==A&&(this.activeFragment=A,A.appendedPTS=void 0),d){var h=this.activeParts;h||(this.activeParts=h=[]),h.push(d)}else this.activeParts=null;this.timeRanges=v,Object.keys(v).forEach(function(g){var P=v[g];if(w.detectEvictedFragments(g,P),!d&&A.type===I.PlaylistLevelType.MAIN){var R=A.elementaryStreams[g];if(!R)return;for(var y=0;y<P.length;y++){var L=P.end(y);L<=R.endPTS&&L>R.startPTS?A.appendedPTS=Math.max(L,A.appendedPTS||0):A.appendedPTS=R.endPTS}}})},N.onFragBuffered=function(p,u){this.detectPartialFragments(u)},N.hasFragment=function(p){var u=F(p);return!!this.fragments[u]},N.removeFragmentsInRange=function(p,u,w){var A=this;Object.keys(this.fragments).forEach(function(d){var v=A.fragments[d];if(v&&v.buffered){var h=v.body;h.type===w&&h.start<u&&h.end>p&&A.removeFragment(h)}})},N.removeFragment=function(p){var u=F(p);p.stats.loaded=0,p.clearElementaryStreamInfo(),p.appendedPTS=void 0,delete this.fragments[u],p.endList&&delete this.endListFragments[p.type]},N.removeAllFragments=function(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activeFragment=null,this.activeParts=null},k}();function W(k){var N,m;return k.buffered&&(((N=k.range.video)===null||N===void 0?void 0:N.partial)||((m=k.range.audio)===null||m===void 0?void 0:m.partial))}function F(k){return k.type+"_"+k.level+"_"+k.urlId+"_"+k.sn}},"./src/controller/gap-controller.ts":(C,D,o)=>{o.r(D),o.d(D,{MAX_START_GAP_JUMP:()=>F,SKIP_BUFFER_HOLE_STEP_SECONDS:()=>k,SKIP_BUFFER_RANGE_START:()=>N,STALL_MINIMUM_DURATION_MS:()=>W,default:()=>m});var M=o("./src/utils/buffer-helper.ts"),I=o("./src/errors.ts"),K=o("./src/events.ts"),b=o("./src/utils/logger.ts"),W=250,F=2,k=.1,N=.05,m=function(){function p(w,A,d,v){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=w,this.media=A,this.fragmentTracker=d,this.hls=v}var u=p.prototype;return u.destroy=function(){this.media=null,this.hls=this.fragmentTracker=null},u.poll=function(A,d){var v=this.config,h=this.media,g=this.stalled;if(h!==null){var P=h.currentTime,R=h.seeking,y=this.seeking&&!R,L=!this.seeking&&R;if(this.seeking=R,P!==A){if(this.moved=!0,g!==null){if(this.stallReported){var U=self.performance.now()-g;b.logger.warn("playback not stuck anymore @"+P+", after "+Math.round(U)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}return}if((L||y)&&(this.stalled=null),!(h.paused&&!R||h.ended||h.playbackRate===0||!M.BufferHelper.getBuffered(h).length)){var _=M.BufferHelper.bufferInfo(h,P,0),S=_.len>0,c=_.nextStart||0;if(!(!S&&!c)){if(R){var E=_.len>F,l=!c||d&&d.start<=P||c-P>F&&!this.fragmentTracker.getPartialFragment(P);if(E||l)return;this.moved=!1}if(!this.moved&&this.stalled!==null){var x,B=Math.max(c,_.start||0)-P,O=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,$=O==null||(x=O.details)===null||x===void 0?void 0:x.live,H=$?O.details.targetduration*2:F;if(B>0&&B<=H){this._trySkipBufferHole(null);return}}var j=self.performance.now();if(g===null){this.stalled=j;return}var V=j-g;if(!(!R&&V>=W&&(this._reportStall(_),!this.media))){var z=M.BufferHelper.bufferInfo(h,P,v.maxBufferHole);this._tryFixBufferStall(z,V)}}}}},u._tryFixBufferStall=function(A,d){var v=this.config,h=this.fragmentTracker,g=this.media;if(g!==null){var P=g.currentTime,R=h.getPartialFragment(P);if(R){var y=this._trySkipBufferHole(R);if(y||!this.media)return}A.len>v.maxBufferHole&&d>v.highBufferWatchdogPeriod*1e3&&(b.logger.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}},u._reportStall=function(A){var d=this.hls,v=this.media,h=this.stallReported;!h&&v&&(this.stallReported=!0,b.logger.warn("Playback stalling at @"+v.currentTime+" due to low buffer ("+JSON.stringify(A)+")"),d.trigger(K.Events.ERROR,{type:I.ErrorTypes.MEDIA_ERROR,details:I.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:A.len}))},u._trySkipBufferHole=function(A){var d=this.config,v=this.hls,h=this.media;if(h===null)return 0;for(var g=h.currentTime,P=0,R=M.BufferHelper.getBuffered(h),y=0;y<R.length;y++){var L=R.start(y);if(g+d.maxBufferHole>=P&&g<L){var U=Math.max(L+N,h.currentTime+k);return b.logger.warn("skipping hole, adjusting currentTime from "+g+" to "+U),this.moved=!0,this.stalled=null,h.currentTime=U,A&&v.trigger(K.Events.ERROR,{type:I.ErrorTypes.MEDIA_ERROR,details:I.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+g+" to "+U,frag:A}),U}P=R.end(y)}return 0},u._tryNudgeBuffer=function(){var A=this.config,d=this.hls,v=this.media,h=this.nudgeRetry;if(v!==null){var g=v.currentTime;if(this.nudgeRetry++,h<A.nudgeMaxRetry){var P=g+(h+1)*A.nudgeOffset;b.logger.warn("Nudging 'currentTime' from "+g+" to "+P),v.currentTime=P,d.trigger(K.Events.ERROR,{type:I.ErrorTypes.MEDIA_ERROR,details:I.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else b.logger.error("Playhead still not moving while enough data buffered @"+g+" after "+A.nudgeMaxRetry+" nudges"),d.trigger(K.Events.ERROR,{type:I.ErrorTypes.MEDIA_ERROR,details:I.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})}},p}()},"./src/controller/id3-track-controller.ts":(C,D,o)=>{o.r(D),o.d(D,{default:()=>A});var M=o("./src/polyfills/number.ts"),I=o("./src/events.ts"),K=o("./src/utils/texttrack-utils.ts"),b=o("./src/demux/id3.ts"),W=o("./src/loader/date-range.ts"),F=o("./src/types/demuxer.ts"),k=.25;function N(){return self.WebKitDataCue||self.VTTCue||self.TextTrackCue}var m=function(){var d=N();try{new d(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY}();function p(d,v){return d.getTime()/1e3-v}function u(d){return Uint8Array.from(d.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}var w=function(){function d(h){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=h,this._registerListeners()}var v=d.prototype;return v.destroy=function(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null},v._registerListeners=function(){var g=this.hls;g.on(I.Events.MEDIA_ATTACHED,this.onMediaAttached,this),g.on(I.Events.MEDIA_DETACHING,this.onMediaDetaching,this),g.on(I.Events.MANIFEST_LOADING,this.onManifestLoading,this),g.on(I.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),g.on(I.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),g.on(I.Events.LEVEL_UPDATED,this.onLevelUpdated,this)},v._unregisterListeners=function(){var g=this.hls;g.off(I.Events.MEDIA_ATTACHED,this.onMediaAttached,this),g.off(I.Events.MEDIA_DETACHING,this.onMediaDetaching,this),g.off(I.Events.MANIFEST_LOADING,this.onManifestLoading,this),g.off(I.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),g.off(I.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),g.off(I.Events.LEVEL_UPDATED,this.onLevelUpdated,this)},v.onMediaAttached=function(g,P){this.media=P.media},v.onMediaDetaching=function(){this.id3Track&&((0,K.clearCurrentCues)(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})},v.onManifestLoading=function(){this.dateRangeCuesAppended={}},v.createTrack=function(g){var P=this.getID3Track(g.textTracks);return P.mode="hidden",P},v.getID3Track=function(g){if(this.media){for(var P=0;P<g.length;P++){var R=g[P];if(R.kind==="metadata"&&R.label==="id3")return(0,K.sendAddTrackEvent)(R,this.media),R}return this.media.addTextTrack("metadata","id3")}},v.onFragParsingMetadata=function(g,P){if(this.media){var R=this.hls.config,y=R.enableEmsgMetadataCues,L=R.enableID3MetadataCues;if(!(!y&&!L)){var U=P.samples;this.id3Track||(this.id3Track=this.createTrack(this.media));for(var _=N(),S=0;S<U.length;S++){var c=U[S].type;if(!(c===F.MetadataSchema.emsg&&!y||!L)){var E=b.getID3Frames(U[S].data);if(E){var l=U[S].pts,x=l+U[S].duration;x>m&&(x=m);var B=x-l;B<=0&&(x=l+k);for(var O=0;O<E.length;O++){var $=E[O];if(!b.isTimeStampFrame($)){this.updateId3CueEnds(l);var H=new _(l,x,"");H.value=$,c&&(H.type=c),this.id3Track.addCue(H)}}}}}}}},v.updateId3CueEnds=function(g){var P,R=(P=this.id3Track)===null||P===void 0?void 0:P.cues;if(R)for(var y=R.length;y--;){var L=R[y];L.startTime<g&&L.endTime===m&&(L.endTime=g)}},v.onBufferFlushing=function(g,P){var R=P.startOffset,y=P.endOffset,L=P.type,U=this.id3Track,_=this.hls;if(_){var S=_.config,c=S.enableEmsgMetadataCues,E=S.enableID3MetadataCues;if(U&&(c||E)){var l;L==="audio"?l=function(B){return B.type===F.MetadataSchema.audioId3&&E}:L==="video"?l=function(B){return B.type===F.MetadataSchema.emsg&&c}:l=function(B){return B.type===F.MetadataSchema.audioId3&&E||B.type===F.MetadataSchema.emsg&&c},(0,K.removeCuesInRange)(U,R,y,l)}}},v.onLevelUpdated=function(g,P){var R=this,y=P.details;if(!(!this.media||!y.hasProgramDateTime||!this.hls.config.enableDateRangeMetadataCues)){var L=this.dateRangeCuesAppended,U=this.id3Track,_=y.dateRanges,S=Object.keys(_);if(U)for(var c=Object.keys(L).filter(function(j){return!S.includes(j)}),E=function(V){var z=c[V];Object.keys(L[z].cues).forEach(function(X){U.removeCue(L[z].cues[X])}),delete L[z]},l=c.length;l--;)E(l);var x=y.fragments[y.fragments.length-1];if(!(S.length===0||!(0,M.isFiniteNumber)(x==null?void 0:x.programDateTime))){this.id3Track||(this.id3Track=this.createTrack(this.media));for(var B=x.programDateTime/1e3-x.start,O=N(),$=function(V){var z=S[V],X=_[z],J=L[z],q=(J==null?void 0:J.cues)||{},ee=(J==null?void 0:J.durationKnown)||!1,ne=p(X.startDate,B),ae=m,fe=X.endDate;if(fe)ae=p(fe,B),ee=!0;else if(X.endOnNext&&!ee){var ue=S.reduce(function(De,be){var Ue=_[be];return Ue.class===X.class&&Ue.id!==be&&Ue.startDate>X.startDate&&De.push(Ue),De},[]).sort(function(De,be){return De.startDate.getTime()-be.startDate.getTime()})[0];ue&&(ae=p(ue.startDate,B),ee=!0)}for(var ce=Object.keys(X.attr),ye=0;ye<ce.length;ye++){var Pe=ce[ye];if(!(Pe===W.DateRangeAttribute.ID||Pe===W.DateRangeAttribute.CLASS||Pe===W.DateRangeAttribute.START_DATE||Pe===W.DateRangeAttribute.DURATION||Pe===W.DateRangeAttribute.END_DATE||Pe===W.DateRangeAttribute.END_ON_NEXT)){var Te=q[Pe];if(Te)ee&&!J.durationKnown&&(Te.endTime=ae);else{var ge=X.attr[Pe];Te=new O(ne,ae,""),(Pe===W.DateRangeAttribute.SCTE35_OUT||Pe===W.DateRangeAttribute.SCTE35_IN)&&(ge=u(ge)),Te.value={key:Pe,data:ge},Te.type=F.MetadataSchema.dateRange,R.id3Track.addCue(Te),q[Pe]=Te}}}L[z]={cues:q,dateRange:X,durationKnown:ee}},H=0;H<S.length;H++)$(H)}}},d}();const A=w},"./src/controller/latency-controller.ts":(C,D,o)=>{o.r(D),o.d(D,{default:()=>N});var M=o("./src/errors.ts"),I=o("./src/events.ts"),K=o("./src/utils/logger.ts");function b(m,p){for(var u=0;u<p.length;u++){var w=p[u];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(m,F(w.key),w)}}function W(m,p,u){return p&&b(m.prototype,p),u&&b(m,u),Object.defineProperty(m,"prototype",{writable:!1}),m}function F(m){var p=k(m,"string");return typeof p=="symbol"?p:String(p)}function k(m,p){if(typeof m!="object"||m===null)return m;var u=m[Symbol.toPrimitive];if(u!==void 0){var w=u.call(m,p||"default");if(typeof w!="object")return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return(p==="string"?String:Number)(m)}var N=function(){function m(u){var w=this;this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=function(){return w.timeupdate()},this.hls=u,this.config=u.config,this.registerListeners()}var p=m.prototype;return p.destroy=function(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null},p.registerListeners=function(){this.hls.on(I.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(I.Events.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(I.Events.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(I.Events.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(I.Events.ERROR,this.onError,this)},p.unregisterListeners=function(){this.hls.off(I.Events.MEDIA_ATTACHED,this.onMediaAttached),this.hls.off(I.Events.MEDIA_DETACHING,this.onMediaDetaching),this.hls.off(I.Events.MANIFEST_LOADING,this.onManifestLoading),this.hls.off(I.Events.LEVEL_UPDATED,this.onLevelUpdated),this.hls.off(I.Events.ERROR,this.onError)},p.onMediaAttached=function(w,A){this.media=A.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)},p.onMediaDetaching=function(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)},p.onManifestLoading=function(){this.levelDetails=null,this._latency=null,this.stallCount=0},p.onLevelUpdated=function(w,A){var d=A.details;this.levelDetails=d,d.advanced&&this.timeupdate(),!d.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)},p.onError=function(w,A){A.details===M.ErrorDetails.BUFFER_STALLED_ERROR&&(this.stallCount++,K.logger.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))},p.timeupdate=function(){var w=this.media,A=this.levelDetails;if(!(!w||!A)){this.currentTime=w.currentTime;var d=this.computeLatency();if(d!==null){this._latency=d;var v=this.config,h=v.lowLatencyMode,g=v.maxLiveSyncPlaybackRate;if(!(!h||g===1)){var P=this.targetLatency;if(P!==null){var R=d-P,y=Math.min(this.maxLatency,P+A.targetduration),L=R<y;if(A.live&&L&&R>.05&&this.forwardBufferLength>1){var U=Math.min(2,Math.max(1,g)),_=Math.round(2/(1+Math.exp(-.75*R-this.edgeStalled))*20)/20;w.playbackRate=Math.min(U,Math.max(1,_))}else w.playbackRate!==1&&w.playbackRate!==0&&(w.playbackRate=1)}}}}},p.estimateLiveEdge=function(){var w=this.levelDetails;return w===null?null:w.edge+w.age},p.computeLatency=function(){var w=this.estimateLiveEdge();return w===null?null:w-this.currentTime},W(m,[{key:"latency",get:function(){return this._latency||0}},{key:"maxLatency",get:function(){var w=this.config,A=this.levelDetails;return w.liveMaxLatencyDuration!==void 0?w.liveMaxLatencyDuration:A?w.liveMaxLatencyDurationCount*A.targetduration:0}},{key:"targetLatency",get:function(){var w=this.levelDetails;if(w===null)return null;var A=w.holdBack,d=w.partHoldBack,v=w.targetduration,h=this.config,g=h.liveSyncDuration,P=h.liveSyncDurationCount,R=h.lowLatencyMode,y=this.hls.userConfig,L=R&&d||A;(y.liveSyncDuration||y.liveSyncDurationCount||L===0)&&(L=g!==void 0?g:P*v);var U=v,_=1;return L+Math.min(this.stallCount*_,U)}},{key:"liveSyncPosition",get:function(){var w=this.estimateLiveEdge(),A=this.targetLatency,d=this.levelDetails;if(w===null||A===null||d===null)return null;var v=d.edge,h=w-A-this.edgeStalled,g=v-d.totalduration,P=v-(this.config.lowLatencyMode&&d.partTarget||d.targetduration);return Math.min(Math.max(g,h),P)}},{key:"drift",get:function(){var w=this.levelDetails;return w===null?1:w.drift}},{key:"edgeStalled",get:function(){var w=this.levelDetails;if(w===null)return 0;var A=(this.config.lowLatencyMode&&w.partTarget||w.targetduration)*3;return Math.max(w.age-A,0)}},{key:"forwardBufferLength",get:function(){var w=this.media,A=this.levelDetails;if(!w||!A)return 0;var d=w.buffered.length;return(d?w.buffered.end(d-1):A.edge)-this.currentTime}}]),m}()},"./src/controller/level-controller.ts":(C,D,o)=>{o.r(D),o.d(D,{default:()=>h});var M=o("./src/types/level.ts"),I=o("./src/events.ts"),K=o("./src/errors.ts"),b=o("./src/utils/codecs.ts"),W=o("./src/controller/level-helper.ts"),F=o("./src/controller/base-playlist-controller.ts"),k=o("./src/types/loader.ts");function N(){return N=Object.assign?Object.assign.bind():function(g){for(var P=1;P<arguments.length;P++){var R=arguments[P];for(var y in R)Object.prototype.hasOwnProperty.call(R,y)&&(g[y]=R[y])}return g},N.apply(this,arguments)}function m(g,P){for(var R=0;R<P.length;R++){var y=P[R];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(g,u(y.key),y)}}function p(g,P,R){return P&&m(g.prototype,P),R&&m(g,R),Object.defineProperty(g,"prototype",{writable:!1}),g}function u(g){var P=w(g,"string");return typeof P=="symbol"?P:String(P)}function w(g,P){if(typeof g!="object"||g===null)return g;var R=g[Symbol.toPrimitive];if(R!==void 0){var y=R.call(g,P||"default");if(typeof y!="object")return y;throw new TypeError("@@toPrimitive must return a primitive value.")}return(P==="string"?String:Number)(g)}function A(g,P){g.prototype=Object.create(P.prototype),g.prototype.constructor=g,d(g,P)}function d(g,P){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(y,L){return y.__proto__=L,y},d(g,P)}var v=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),h=function(g){A(P,g);function P(y){var L;return L=g.call(this,y,"[level-controller]")||this,L._levels=[],L._firstLevel=-1,L._startLevel=void 0,L.currentLevelIndex=-1,L.manualLevelIndex=-1,L.onParsedComplete=void 0,L._registerListeners(),L}var R=P.prototype;return R._registerListeners=function(){var L=this.hls;L.on(I.Events.MANIFEST_LOADED,this.onManifestLoaded,this),L.on(I.Events.LEVEL_LOADED,this.onLevelLoaded,this),L.on(I.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),L.on(I.Events.FRAG_LOADED,this.onFragLoaded,this),L.on(I.Events.ERROR,this.onError,this)},R._unregisterListeners=function(){var L=this.hls;L.off(I.Events.MANIFEST_LOADED,this.onManifestLoaded,this),L.off(I.Events.LEVEL_LOADED,this.onLevelLoaded,this),L.off(I.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),L.off(I.Events.FRAG_LOADED,this.onFragLoaded,this),L.off(I.Events.ERROR,this.onError,this)},R.destroy=function(){this._unregisterListeners(),this.manualLevelIndex=-1,this._levels.length=0,g.prototype.destroy.call(this)},R.startLoad=function(){var L=this._levels;L.forEach(function(U){U.loadError=0}),g.prototype.startLoad.call(this)},R.onManifestLoaded=function(L,U){var _=[],S=[],c=[],E,l={},x,B=!1,O=!1,$=!1;if(U.levels.forEach(function(z){var X=z.attrs;B=B||!!(z.width&&z.height),O=O||!!z.videoCodec,$=$||!!z.audioCodec,v&&z.audioCodec&&z.audioCodec.indexOf("mp4a.40.34")!==-1&&(z.audioCodec=void 0);var J=z.bitrate+"-"+z.attrs.RESOLUTION+"-"+z.attrs.CODECS;x=l[J],x?x.url.push(z.url):(x=new M.Level(z),l[J]=x,_.push(x)),X&&(X.AUDIO&&(0,W.addGroupId)(x,"audio",X.AUDIO),X.SUBTITLES&&(0,W.addGroupId)(x,"text",X.SUBTITLES))}),(B||O)&&$&&(_=_.filter(function(z){var X=z.videoCodec,J=z.width,q=z.height;return!!X||!!(J&&q)})),_=_.filter(function(z){var X=z.audioCodec,J=z.videoCodec;return(!X||(0,b.isCodecSupportedInMp4)(X,"audio"))&&(!J||(0,b.isCodecSupportedInMp4)(J,"video"))}),U.audioTracks&&(S=U.audioTracks.filter(function(z){return!z.audioCodec||(0,b.isCodecSupportedInMp4)(z.audioCodec,"audio")}),(0,W.assignTrackIdsByGroup)(S)),U.subtitles&&(c=U.subtitles,(0,W.assignTrackIdsByGroup)(c)),_.length>0){E=_[0].bitrate,_.sort(function(z,X){return z.attrs["HDCP-LEVEL"]!==X.attrs["HDCP-LEVEL"]?(z.attrs["HDCP-LEVEL"]||"")>(X.attrs["HDCP-LEVEL"]||"")?1:-1:z.bitrate!==X.bitrate?z.bitrate-X.bitrate:z.attrs.SCORE!==X.attrs.SCORE?z.attrs.decimalFloatingPoint("SCORE")-X.attrs.decimalFloatingPoint("SCORE"):B&&z.height!==X.height?z.height-X.height:0}),this._levels=_;for(var H=0;H<_.length;H++)if(_[H].bitrate===E){this._firstLevel=H,this.log("manifest loaded, "+_.length+" level(s) found, first bitrate: "+E);break}var j=$&&!O,V={levels:_,audioTracks:S,subtitleTracks:c,sessionData:U.sessionData,sessionKeys:U.sessionKeys,firstLevel:this._firstLevel,stats:U.stats,audio:$,video:O,altAudio:!j&&S.some(function(z){return!!z.url})};this.hls.trigger(I.Events.MANIFEST_PARSED,V),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}else this.hls.trigger(I.Events.ERROR,{type:K.ErrorTypes.MEDIA_ERROR,details:K.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:U.url,reason:"no level with compatible codecs found in manifest"})},R.onError=function(L,U){var _,S;if(g.prototype.onError.call(this,L,U),!U.fatal){var c=U.context,E=this._levels[this.currentLevelIndex];if(c&&(c.type===k.PlaylistContextType.AUDIO_TRACK&&E.audioGroupIds&&c.groupId===E.audioGroupIds[E.urlId]||c.type===k.PlaylistContextType.SUBTITLE_TRACK&&E.textGroupIds&&c.groupId===E.textGroupIds[E.urlId])){this.redundantFailover(this.currentLevelIndex);return}var l=!1,x=!0,B;switch(U.details){case K.ErrorDetails.FRAG_LOAD_ERROR:case K.ErrorDetails.FRAG_LOAD_TIMEOUT:case K.ErrorDetails.KEY_LOAD_ERROR:case K.ErrorDetails.KEY_LOAD_TIMEOUT:if(U.frag){var O=U.frag.type===k.PlaylistLevelType.MAIN?U.frag.level:this.currentLevelIndex,$=this._levels[O];$?($.fragmentError++,$.fragmentError>this.hls.config.fragLoadingMaxRetry&&(B=O)):B=O}break;case K.ErrorDetails.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{var H=E.attrs["HDCP-LEVEL"];H&&(this.hls.maxHdcpLevel=M.HdcpLevels[M.HdcpLevels.indexOf(H)-1],this.warn('Restricting playback to HDCP-LEVEL of "'+this.hls.maxHdcpLevel+'" or lower'))}case K.ErrorDetails.FRAG_PARSING_ERROR:case K.ErrorDetails.KEY_SYSTEM_NO_SESSION:B=((_=U.frag)===null||_===void 0?void 0:_.type)===k.PlaylistLevelType.MAIN?U.frag.level:this.currentLevelIndex,U.levelRetry=!1;break;case K.ErrorDetails.LEVEL_LOAD_ERROR:case K.ErrorDetails.LEVEL_LOAD_TIMEOUT:c&&(c.deliveryDirectives&&(x=!1),B=c.level),l=!0;break;case K.ErrorDetails.REMUX_ALLOC_ERROR:B=(S=U.level)!=null?S:this.currentLevelIndex,l=!0;break}B!==void 0&&this.recoverLevel(U,B,l,x)}},R.recoverLevel=function(L,U,_,S){var c=L.details,E=this._levels[U];if(E.loadError++,_){var l=this.retryLoadingOrFail(L);if(l)L.levelRetry=!0;else{this.currentLevelIndex=-1;return}}if(S){var x=E.url.length;if(x>1&&E.loadError<x)L.levelRetry=!0,this.redundantFailover(U);else if(this.manualLevelIndex===-1){for(var B=-1,O=this._levels,$=O.length;$--;){var H=($+this.currentLevelIndex)%O.length;if(H!==this.currentLevelIndex&&O[H].loadError===0){B=H;break}}B>-1&&this.currentLevelIndex!==B?(this.warn(c+": switch to "+B),L.levelRetry=!0,this.hls.nextAutoLevel=B):L.levelRetry===!1&&(L.fatal=!0)}}},R.redundantFailover=function(L){var U=this._levels[L],_=U.url.length;if(_>1){var S=(U.urlId+1)%_;this.warn("Switching to redundant URL-id "+S),this._levels.forEach(function(c){c.urlId=S}),this.level=L}},R.onFragLoaded=function(L,U){var _=U.frag;if(_!==void 0&&_.type===k.PlaylistLevelType.MAIN){var S=this._levels[_.level];S!==void 0&&(S.fragmentError=0,S.loadError=0)}},R.onLevelLoaded=function(L,U){var _,S=U.level,c=U.details,E=this._levels[S];if(!E){var l;this.warn("Invalid level index "+S),(l=U.deliveryDirectives)!==null&&l!==void 0&&l.skip&&(c.deltaUpdateFailed=!0);return}S===this.currentLevelIndex?(E.fragmentError===0&&(E.loadError=0,this.retryCount=0),this.playlistLoaded(S,U,E.details)):(_=U.deliveryDirectives)!==null&&_!==void 0&&_.skip&&(c.deltaUpdateFailed=!0)},R.onAudioTrackSwitched=function(L,U){var _=this.hls.levels[this.currentLevelIndex];if(_&&_.audioGroupIds){for(var S=-1,c=this.hls.audioTracks[U.id].groupId,E=0;E<_.audioGroupIds.length;E++)if(_.audioGroupIds[E]===c){S=E;break}S!==_.urlId&&(_.urlId=S,this.startLoad())}},R.loadPlaylist=function(L){g.prototype.loadPlaylist.call(this);var U=this.currentLevelIndex,_=this._levels[U];if(this.canLoad&&_&&_.url.length>0){var S=_.urlId,c=_.url[S];if(L)try{c=L.addDirectives(c)}catch(E){this.warn("Could not construct new URL with HLS Delivery Directives: "+E)}this.log("Attempt loading level index "+U+((L==null?void 0:L.msn)!==void 0?" at sn "+L.msn+" part "+L.part:"")+" with URL-id "+S+" "+c),this.clearTimer(),this.hls.trigger(I.Events.LEVEL_LOADING,{url:c,level:U,id:S,deliveryDirectives:L||null})}},R.removeLevel=function(L,U){var _=function(E,l){return l!==U},S=this._levels.filter(function(c,E){return E!==L?!0:c.url.length>1&&U!==void 0?(c.url=c.url.filter(_),c.audioGroupIds&&(c.audioGroupIds=c.audioGroupIds.filter(_)),c.textGroupIds&&(c.textGroupIds=c.textGroupIds.filter(_)),c.urlId=0,!0):!1}).map(function(c,E){var l=c.details;return l!=null&&l.fragments&&l.fragments.forEach(function(x){x.level=E}),c});this._levels=S,this.hls.trigger(I.Events.LEVELS_UPDATED,{levels:S})},p(P,[{key:"levels",get:function(){return this._levels.length===0?null:this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(L){var U,_=this._levels;if(_.length!==0&&!(this.currentLevelIndex===L&&(U=_[L])!==null&&U!==void 0&&U.details)){if(L<0||L>=_.length){var S=L<0;if(this.hls.trigger(I.Events.ERROR,{type:K.ErrorTypes.OTHER_ERROR,details:K.ErrorDetails.LEVEL_SWITCH_ERROR,level:L,fatal:S,reason:"invalid level idx"}),S)return;L=Math.min(L,_.length-1)}this.clearTimer();var c=this.currentLevelIndex,E=_[c],l=_[L];this.log("switching to level "+L+" from "+c),this.currentLevelIndex=L;var x=N({},l,{level:L,maxBitrate:l.maxBitrate,uri:l.uri,urlId:l.urlId});delete x._urlId,this.hls.trigger(I.Events.LEVEL_SWITCHING,x);var B=l.details;if(!B||B.live){var O=this.switchParams(l.uri,E==null?void 0:E.details);this.loadPlaylist(O)}}}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(L){this.manualLevelIndex=L,this._startLevel===void 0&&(this._startLevel=L),L!==-1&&(this.level=L)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(L){this._firstLevel=L}},{key:"startLevel",get:function(){if(this._startLevel===void 0){var L=this.hls.config.startLevel;return L!==void 0?L:this._firstLevel}else return this._startLevel},set:function(L){this._startLevel=L}},{key:"nextLoadLevel",get:function(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(L){this.level=L,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=L)}}]),P}(F.default)},"./src/controller/level-helper.ts":(C,D,o)=>{o.r(D),o.d(D,{addGroupId:()=>W,addSliding:()=>v,adjustSliding:()=>d,assignTrackIdsByGroup:()=>F,computeReloadInterval:()=>h,getFragmentWithSN:()=>g,getPartWith:()=>P,mapFragmentIntersection:()=>A,mapPartIntersection:()=>w,mergeDetails:()=>p,updateFragPTSDTS:()=>m,updatePTS:()=>k});var M=o("./src/polyfills/number.ts"),I=o("./src/utils/logger.ts"),K=o("./src/loader/date-range.ts");function b(){return b=Object.assign?Object.assign.bind():function(R){for(var y=1;y<arguments.length;y++){var L=arguments[y];for(var U in L)Object.prototype.hasOwnProperty.call(L,U)&&(R[U]=L[U])}return R},b.apply(this,arguments)}function W(R,y,L){switch(y){case"audio":R.audioGroupIds||(R.audioGroupIds=[]),R.audioGroupIds.push(L);break;case"text":R.textGroupIds||(R.textGroupIds=[]),R.textGroupIds.push(L);break}}function F(R){var y={};R.forEach(function(L){var U=L.groupId||"";L.id=y[U]=y[U]||0,y[U]++})}function k(R,y,L){var U=R[y],_=R[L];N(U,_)}function N(R,y){var L=y.startPTS;if((0,M.isFiniteNumber)(L)){var U=0,_;y.sn>R.sn?(U=L-R.start,_=R):(U=R.start-L,_=y),_.duration!==U&&(_.duration=U)}else if(y.sn>R.sn){var S=R.cc===y.cc;S&&R.minEndPTS?y.start=R.start+(R.minEndPTS-R.start):y.start=R.start+R.duration}else y.start=Math.max(R.start-y.duration,0)}function m(R,y,L,U,_,S){var c=U-L;c<=0&&(I.logger.warn("Fragment should have a positive duration",y),U=L+y.duration,S=_+y.duration);var E=L,l=U,x=y.startPTS,B=y.endPTS;if((0,M.isFiniteNumber)(x)){var O=Math.abs(x-L);(0,M.isFiniteNumber)(y.deltaPTS)?y.deltaPTS=Math.max(O,y.deltaPTS):y.deltaPTS=O,E=Math.max(L,x),L=Math.min(L,x),_=Math.min(_,y.startDTS),l=Math.min(U,B),U=Math.max(U,B),S=Math.max(S,y.endDTS)}y.duration=U-L;var $=L-y.start;y.start=y.startPTS=L,y.maxStartPTS=E,y.startDTS=_,y.endPTS=U,y.minEndPTS=l,y.endDTS=S;var H=y.sn;if(!R||H<R.startSN||H>R.endSN)return 0;var j,V=H-R.startSN,z=R.fragments;for(z[V]=y,j=V;j>0;j--)N(z[j],z[j-1]);for(j=V;j<z.length-1;j++)N(z[j],z[j+1]);return R.fragmentHint&&N(z[z.length-1],R.fragmentHint),R.PTSKnown=R.alignedSliding=!0,$}function p(R,y){for(var L=null,U=R.fragments,_=U.length-1;_>=0;_--){var S=U[_].initSegment;if(S){L=S;break}}R.fragmentHint&&delete R.fragmentHint.endPTS;var c=0,E;if(A(R,y,function(j,V){j.relurl&&(c=j.cc-V.cc),(0,M.isFiniteNumber)(j.startPTS)&&(0,M.isFiniteNumber)(j.endPTS)&&(V.start=V.startPTS=j.startPTS,V.startDTS=j.startDTS,V.appendedPTS=j.appendedPTS,V.maxStartPTS=j.maxStartPTS,V.endPTS=j.endPTS,V.endDTS=j.endDTS,V.minEndPTS=j.minEndPTS,V.duration=j.endPTS-j.startPTS,V.duration&&(E=V),y.PTSKnown=y.alignedSliding=!0),V.elementaryStreams=j.elementaryStreams,V.loader=j.loader,V.stats=j.stats,V.urlId=j.urlId,j.initSegment&&(V.initSegment=j.initSegment,L=j.initSegment)}),L){var l=y.fragmentHint?y.fragments.concat(y.fragmentHint):y.fragments;l.forEach(function(j){var V;(!j.initSegment||j.initSegment.relurl===((V=L)===null||V===void 0?void 0:V.relurl))&&(j.initSegment=L)})}if(y.skippedSegments)if(y.deltaUpdateFailed=y.fragments.some(function(j){return!j}),y.deltaUpdateFailed){I.logger.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(var x=y.skippedSegments;x--;)y.fragments.shift();y.startSN=y.fragments[0].sn,y.startCC=y.fragments[0].cc}else y.canSkipDateRanges&&(y.dateRanges=u(R.dateRanges,y.dateRanges,y.recentlyRemovedDateranges));var B=y.fragments;if(c){I.logger.warn("discontinuity sliding from playlist, take drift into account");for(var O=0;O<B.length;O++)B[O].cc+=c}y.skippedSegments&&(y.startCC=y.fragments[0].cc),w(R.partList,y.partList,function(j,V){V.elementaryStreams=j.elementaryStreams,V.stats=j.stats}),E?m(y,E,E.startPTS,E.endPTS,E.startDTS,E.endDTS):d(R,y),B.length&&(y.totalduration=y.edge-B[0].start),y.driftStartTime=R.driftStartTime,y.driftStart=R.driftStart;var $=y.advancedDateTime;if(y.advanced&&$){var H=y.edge;y.driftStart||(y.driftStartTime=$,y.driftStart=H),y.driftEndTime=$,y.driftEnd=H}else y.driftEndTime=R.driftEndTime,y.driftEnd=R.driftEnd,y.advancedDateTime=R.advancedDateTime}function u(R,y,L){var U=b({},R);return L&&L.forEach(function(_){delete U[_]}),Object.keys(y).forEach(function(_){var S=new K.DateRange(y[_].attr,U[_]);S.isValid?U[_]=S:I.logger.warn('Ignoring invalid Playlist Delta Update DATERANGE tag: "'+JSON.stringify(y[_].attr)+'"')}),U}function w(R,y,L){if(R&&y)for(var U=0,_=0,S=R.length;_<=S;_++){var c=R[_],E=y[_+U];c&&E&&c.index===E.index&&c.fragment.sn===E.fragment.sn?L(c,E):U--}}function A(R,y,L){for(var U=y.skippedSegments,_=Math.max(R.startSN,y.startSN)-y.startSN,S=(R.fragmentHint?1:0)+(U?y.endSN:Math.min(R.endSN,y.endSN))-y.startSN,c=y.startSN-R.startSN,E=y.fragmentHint?y.fragments.concat(y.fragmentHint):y.fragments,l=R.fragmentHint?R.fragments.concat(R.fragmentHint):R.fragments,x=_;x<=S;x++){var B=l[c+x],O=E[x];U&&!O&&x<U&&(O=y.fragments[x]=B),B&&O&&L(B,O)}}function d(R,y){var L=y.startSN+y.skippedSegments-R.startSN,U=R.fragments;L<0||L>=U.length||v(y,U[L].start)}function v(R,y){if(y){for(var L=R.fragments,U=R.skippedSegments;U<L.length;U++)L[U].start+=y;R.fragmentHint&&(R.fragmentHint.start+=y)}}function h(R,y){y===void 0&&(y=1/0);var L=1e3*R.targetduration;if(R.updated){var U=R.fragments,_=4;if(U.length&&L*_>y){var S=U[U.length-1].duration*1e3;S<L&&(L=S)}}else L/=2;return Math.round(L)}function g(R,y,L){if(!R||!R.details)return null;var U=R.details,_=U.fragments[y-U.startSN];return _||(_=U.fragmentHint,_&&_.sn===y)?_:y<U.startSN&&L&&L.sn===y?L:null}function P(R,y,L){if(!R||!R.details)return null;var U=R.details.partList;if(U)for(var _=U.length;_--;){var S=U[_];if(S.index===L&&S.fragment.sn===y)return S}return null}},"./src/controller/stream-controller.ts":(C,D,o)=>{o.r(D),o.d(D,{default:()=>y});var M=o("./src/polyfills/number.ts"),I=o("./src/controller/base-stream-controller.ts"),K=o("./src/is-supported.ts"),b=o("./src/events.ts"),W=o("./src/utils/buffer-helper.ts"),F=o("./src/controller/fragment-tracker.ts"),k=o("./src/types/loader.ts"),N=o("./src/loader/fragment.ts"),m=o("./src/demux/transmuxer-interface.ts"),p=o("./src/types/transmuxer.ts"),u=o("./src/controller/gap-controller.ts"),w=o("./src/errors.ts");function A(L,U){for(var _=0;_<U.length;_++){var S=U[_];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(L,v(S.key),S)}}function d(L,U,_){return U&&A(L.prototype,U),_&&A(L,_),Object.defineProperty(L,"prototype",{writable:!1}),L}function v(L){var U=h(L,"string");return typeof U=="symbol"?U:String(U)}function h(L,U){if(typeof L!="object"||L===null)return L;var _=L[Symbol.toPrimitive];if(_!==void 0){var S=_.call(L,U||"default");if(typeof S!="object")return S;throw new TypeError("@@toPrimitive must return a primitive value.")}return(U==="string"?String:Number)(L)}function g(L,U){L.prototype=Object.create(U.prototype),L.prototype.constructor=L,P(L,U)}function P(L,U){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(S,c){return S.__proto__=c,S},P(L,U)}var R=100,y=function(L){g(U,L);function U(S,c,E){var l;return l=L.call(this,S,c,E,"[stream-controller]")||this,l.audioCodecSwap=!1,l.gapController=null,l.level=-1,l._forceStartLoad=!1,l.altAudio=!1,l.audioOnly=!1,l.fragPlaying=null,l.onvplaying=null,l.onvseeked=null,l.fragLastKbps=0,l.couldBacktrack=!1,l.backtrackFragment=null,l.audioCodecSwitch=!1,l.videoBuffer=null,l._registerListeners(),l}var _=U.prototype;return _._registerListeners=function(){var c=this.hls;c.on(b.Events.MEDIA_ATTACHED,this.onMediaAttached,this),c.on(b.Events.MEDIA_DETACHING,this.onMediaDetaching,this),c.on(b.Events.MANIFEST_LOADING,this.onManifestLoading,this),c.on(b.Events.MANIFEST_PARSED,this.onManifestParsed,this),c.on(b.Events.LEVEL_LOADING,this.onLevelLoading,this),c.on(b.Events.LEVEL_LOADED,this.onLevelLoaded,this),c.on(b.Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),c.on(b.Events.ERROR,this.onError,this),c.on(b.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),c.on(b.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),c.on(b.Events.BUFFER_CREATED,this.onBufferCreated,this),c.on(b.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),c.on(b.Events.LEVELS_UPDATED,this.onLevelsUpdated,this),c.on(b.Events.FRAG_BUFFERED,this.onFragBuffered,this)},_._unregisterListeners=function(){var c=this.hls;c.off(b.Events.MEDIA_ATTACHED,this.onMediaAttached,this),c.off(b.Events.MEDIA_DETACHING,this.onMediaDetaching,this),c.off(b.Events.MANIFEST_LOADING,this.onManifestLoading,this),c.off(b.Events.MANIFEST_PARSED,this.onManifestParsed,this),c.off(b.Events.LEVEL_LOADED,this.onLevelLoaded,this),c.off(b.Events.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),c.off(b.Events.ERROR,this.onError,this),c.off(b.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),c.off(b.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),c.off(b.Events.BUFFER_CREATED,this.onBufferCreated,this),c.off(b.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),c.off(b.Events.LEVELS_UPDATED,this.onLevelsUpdated,this),c.off(b.Events.FRAG_BUFFERED,this.onFragBuffered,this)},_.onHandlerDestroying=function(){this._unregisterListeners(),this.onMediaDetaching()},_.startLoad=function(c){if(this.levels){var E=this.lastCurrentTime,l=this.hls;if(this.stopLoad(),this.setInterval(R),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var x=l.startLevel;x===-1&&(l.config.testBandwidth&&this.levels.length>1?(x=0,this.bitrateTest=!0):x=l.nextAutoLevel),this.level=l.nextLoadLevel=x,this.loadedmetadata=!1}E>0&&c===-1&&(this.log("Override startPosition with lastCurrentTime @"+E.toFixed(3)),c=E),this.state=I.State.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=c,this.tick()}else this._forceStartLoad=!0,this.state=I.State.STOPPED},_.stopLoad=function(){this._forceStartLoad=!1,L.prototype.stopLoad.call(this)},_.doTick=function(){switch(this.state){case I.State.IDLE:this.doTickIdle();break;case I.State.WAITING_LEVEL:{var c,E=this.levels,l=this.level,x=E==null||(c=E[l])===null||c===void 0?void 0:c.details;if(x&&(!x.live||this.levelLastLoaded===this.level)){if(this.waitForCdnTuneIn(x))break;this.state=I.State.IDLE;break}break}case I.State.FRAG_LOADING_WAITING_RETRY:{var B,O=self.performance.now(),$=this.retryDate;(!$||O>=$||(B=this.media)!==null&&B!==void 0&&B.seeking)&&(this.log("retryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(this.level),this.state=I.State.IDLE)}break}this.onTickEnd()},_.onTickEnd=function(){L.prototype.onTickEnd.call(this),this.checkBuffer(),this.checkFragmentChanged()},_.doTickIdle=function(){var c=this.hls,E=this.levelLastLoaded,l=this.levels,x=this.media,B=c.config,O=c.nextLoadLevel;if(!(E===null||!x&&(this.startFragRequested||!B.startFragPrefetch))&&!(this.altAudio&&this.audioOnly)&&!(!l||!l[O])){var $=l[O],H=this.getMainFwdBufferInfo();if(H!==null){var j=this.getLevelDetails();if(j&&this._streamEnded(H,j)){var V={};this.altAudio&&(V.type="video"),this.hls.trigger(b.Events.BUFFER_EOS,V),this.state=I.State.ENDED;return}this.level=c.nextLoadLevel=O;var z=$.details;if(!z||this.state===I.State.WAITING_LEVEL||z.live&&this.levelLastLoaded!==O){this.level=O,this.state=I.State.WAITING_LEVEL;return}var X=H.len,J=this.getMaxBufferLength($.maxBitrate);if(!(X>=J)){this.backtrackFragment&&this.backtrackFragment.start>H.end&&(this.backtrackFragment=null);var q=this.backtrackFragment?this.backtrackFragment.start:H.end,ee=this.getNextFragment(q,z);if(this.couldBacktrack&&!this.fragPrevious&&ee&&ee.sn!=="initSegment"&&this.fragmentTracker.getState(ee)!==F.FragmentState.OK){var ne,ae=((ne=this.backtrackFragment)!=null?ne:ee).sn,fe=ae-z.startSN,ue=z.fragments[fe-1];ue&&ee.cc===ue.cc&&(ee=ue,this.fragmentTracker.removeFragment(ue))}else this.backtrackFragment&&H.len&&(this.backtrackFragment=null);if(ee&&this.fragmentTracker.getState(ee)===F.FragmentState.OK&&this.nextLoadPosition>q){var ce=this.audioOnly&&!this.altAudio?N.ElementaryStreamTypes.AUDIO:N.ElementaryStreamTypes.VIDEO,ye=(ce===N.ElementaryStreamTypes.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;ye&&this.afterBufferFlushed(ye,ce,k.PlaylistLevelType.MAIN),ee=this.getNextFragment(this.nextLoadPosition,z)}ee&&(ee.initSegment&&!ee.initSegment.data&&!this.bitrateTest&&(ee=ee.initSegment),this.loadFragment(ee,z,q))}}}},_.loadFragment=function(c,E,l){var x,B=this.fragmentTracker.getState(c);this.fragCurrent=c,B===F.FragmentState.NOT_LOADED?c.sn==="initSegment"?this._loadInitSegment(c,E):this.bitrateTest?(this.log("Fragment "+c.sn+" of level "+c.level+" is being downloaded to test bitrate and will not be buffered"),this._loadBitrateTestFrag(c,E)):(this.startFragRequested=!0,L.prototype.loadFragment.call(this,c,E,l)):B===F.FragmentState.APPENDING?this.reduceMaxBufferLength(c.duration)&&this.fragmentTracker.removeFragment(c):((x=this.media)===null||x===void 0?void 0:x.buffered.length)===0&&this.fragmentTracker.removeAllFragments()},_.getAppendedFrag=function(c){var E=this.fragmentTracker.getAppendedFrag(c,k.PlaylistLevelType.MAIN);return E&&"fragment"in E?E.fragment:E},_.getBufferedFrag=function(c){return this.fragmentTracker.getBufferedFrag(c,k.PlaylistLevelType.MAIN)},_.followingBufferedFrag=function(c){return c?this.getBufferedFrag(c.end+.5):null},_.immediateLevelSwitch=function(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},_.nextLevelSwitch=function(){var c=this.levels,E=this.media;if(E!=null&&E.readyState){var l,x=this.getAppendedFrag(E.currentTime);if(x&&x.start>1&&this.flushMainBuffer(0,x.start-1),!E.paused&&c){var B=this.hls.nextLoadLevel,O=c[B],$=this.fragLastKbps;$&&this.fragCurrent?l=this.fragCurrent.duration*O.maxBitrate/(1e3*$)+1:l=0}else l=0;var H=this.getBufferedFrag(E.currentTime+l);if(H){var j=this.followingBufferedFrag(H);if(j){this.abortCurrentFrag();var V=j.maxStartPTS?j.maxStartPTS:j.start,z=j.duration,X=Math.max(H.end,V+Math.min(Math.max(z-this.config.maxFragLookUpTolerance,z*.5),z*.75));this.flushMainBuffer(X,Number.POSITIVE_INFINITY)}}}},_.abortCurrentFrag=function(){var c=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,c&&c.abortRequests(),this.state){case I.State.KEY_LOADING:case I.State.FRAG_LOADING:case I.State.FRAG_LOADING_WAITING_RETRY:case I.State.PARSING:case I.State.PARSED:this.state=I.State.IDLE;break}this.nextLoadPosition=this.getLoadPosition()},_.flushMainBuffer=function(c,E){L.prototype.flushMainBuffer.call(this,c,E,this.altAudio?"video":null)},_.onMediaAttached=function(c,E){L.prototype.onMediaAttached.call(this,c,E);var l=E.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),l.addEventListener("playing",this.onvplaying),l.addEventListener("seeked",this.onvseeked),this.gapController=new u.default(this.config,l,this.fragmentTracker,this.hls)},_.onMediaDetaching=function(){var c=this.media;c&&this.onvplaying&&this.onvseeked&&(c.removeEventListener("playing",this.onvplaying),c.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),L.prototype.onMediaDetaching.call(this)},_.onMediaPlaying=function(){this.tick()},_.onMediaSeeked=function(){var c=this.media,E=c?c.currentTime:null;(0,M.isFiniteNumber)(E)&&this.log("Media seeked to "+E.toFixed(3)),this.tick()},_.onManifestLoading=function(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(b.Events.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=0,this.fragPlaying=null,this.backtrackFragment=null},_.onManifestParsed=function(c,E){var l=!1,x=!1,B;E.levels.forEach(function(O){B=O.audioCodec,B&&(B.indexOf("mp4a.40.2")!==-1&&(l=!0),B.indexOf("mp4a.40.5")!==-1&&(x=!0))}),this.audioCodecSwitch=l&&x&&!(0,K.changeTypeSupported)(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=E.levels,this.startFragRequested=!1},_.onLevelLoading=function(c,E){var l=this.levels;if(!(!l||this.state!==I.State.IDLE)){var x=l[E.level];(!x.details||x.details.live&&this.levelLastLoaded!==E.level||this.waitForCdnTuneIn(x.details))&&(this.state=I.State.WAITING_LEVEL)}},_.onLevelLoaded=function(c,E){var l,x=this.levels,B=E.level,O=E.details,$=O.totalduration;if(!x){this.warn("Levels were reset while loading level "+B);return}this.log("Level "+B+" loaded ["+O.startSN+","+O.endSN+"], cc ["+O.startCC+", "+O.endCC+"] duration:"+$);var H=this.fragCurrent;H&&(this.state===I.State.FRAG_LOADING||this.state===I.State.FRAG_LOADING_WAITING_RETRY)&&H.level!==E.level&&H.loader&&(this.state=I.State.IDLE,this.backtrackFragment=null,H.abortRequests());var j=x[B],V=0;if(O.live||(l=j.details)!==null&&l!==void 0&&l.live){if(O.fragments[0]||(O.deltaUpdateFailed=!0),O.deltaUpdateFailed)return;V=this.alignPlaylists(O,j.details)}if(j.details=O,this.levelLastLoaded=B,this.hls.trigger(b.Events.LEVEL_UPDATED,{details:O,level:B}),this.state===I.State.WAITING_LEVEL){if(this.waitForCdnTuneIn(O))return;this.state=I.State.IDLE}this.startFragRequested?O.live&&this.synchronizeToLiveEdge(O):this.setStartPosition(O,V),this.tick()},_._handleFragmentLoadProgress=function(c){var E,l=c.frag,x=c.part,B=c.payload,O=this.levels;if(!O){this.warn("Levels were reset while fragment load was in progress. Fragment "+l.sn+" of level "+l.level+" will not be buffered");return}var $=O[l.level],H=$.details;if(!H){this.warn("Dropping fragment "+l.sn+" of level "+l.level+" after level details were reset");return}var j=$.videoCodec,V=H.PTSKnown||!H.live,z=(E=l.initSegment)===null||E===void 0?void 0:E.data,X=this._getAudioCodec($),J=this.transmuxer=this.transmuxer||new m.default(this.hls,k.PlaylistLevelType.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),q=x?x.index:-1,ee=q!==-1,ne=new p.ChunkMetadata(l.level,l.sn,l.stats.chunkCount,B.byteLength,q,ee),ae=this.initPTS[l.cc];J.push(B,z,X,j,l,x,H.totalduration,V,ne,ae)},_.onAudioTrackSwitching=function(c,E){var l=this.altAudio,x=!!E.url,B=E.id;if(!x){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var O=this.fragCurrent;O&&(this.log("Switching to main audio track, cancel main fragment load"),O.abortRequests()),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();var $=this.hls;l&&$.trigger(b.Events.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),$.trigger(b.Events.AUDIO_TRACK_SWITCHED,{id:B})}},_.onAudioTrackSwitched=function(c,E){var l=E.id,x=!!this.hls.audioTracks[l].url;if(x){var B=this.videoBuffer;B&&this.mediaBuffer!==B&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=B)}this.altAudio=x,this.tick()},_.onBufferCreated=function(c,E){var l=E.tracks,x,B,O=!1;for(var $ in l){var H=l[$];if(H.id==="main"){if(B=$,x=H,$==="video"){var j=l[$];j&&(this.videoBuffer=j.buffer)}}else O=!0}O&&x?(this.log("Alternate track found, use "+B+".buffered to schedule main fragment loading"),this.mediaBuffer=x.buffer):this.mediaBuffer=this.media},_.onFragBuffered=function(c,E){var l=E.frag,x=E.part;if(!(l&&l.type!==k.PlaylistLevelType.MAIN)){if(this.fragContextChanged(l)){this.warn("Fragment "+l.sn+(x?" p: "+x.index:"")+" of level "+l.level+" finished buffering, but was aborted. state: "+this.state),this.state===I.State.PARSED&&(this.state=I.State.IDLE);return}var B=x?x.stats:l.stats;this.fragLastKbps=Math.round(8*B.total/(B.buffering.end-B.loading.first)),l.sn!=="initSegment"&&(this.fragPrevious=l),this.fragBufferedComplete(l,x)}},_.onError=function(c,E){if(E.type===w.ErrorTypes.KEY_SYSTEM_ERROR){this.onFragmentOrKeyLoadError(k.PlaylistLevelType.MAIN,E);return}switch(E.details){case w.ErrorDetails.FRAG_LOAD_ERROR:case w.ErrorDetails.FRAG_LOAD_TIMEOUT:case w.ErrorDetails.FRAG_PARSING_ERROR:case w.ErrorDetails.KEY_LOAD_ERROR:case w.ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(k.PlaylistLevelType.MAIN,E);break;case w.ErrorDetails.LEVEL_LOAD_ERROR:case w.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==I.State.ERROR&&(E.fatal?(this.warn(""+E.details),this.state=I.State.ERROR):!E.levelRetry&&this.state===I.State.WAITING_LEVEL&&(this.state=I.State.IDLE));break;case w.ErrorDetails.BUFFER_FULL_ERROR:if(E.parent==="main"&&(this.state===I.State.PARSING||this.state===I.State.PARSED)){var l=!0,x=this.getFwdBufferInfo(this.media,k.PlaylistLevelType.MAIN);x&&x.len>.5&&(l=!this.reduceMaxBufferLength(x.len)),l&&(this.warn("buffer full error also media.currentTime is not buffered, flush main"),this.immediateLevelSwitch()),this.resetLoadingState()}break}},_.checkBuffer=function(){var c=this.media,E=this.gapController;if(!(!c||!E||!c.readyState)){if(this.loadedmetadata||!W.BufferHelper.getBuffered(c).length){var l=this.state!==I.State.IDLE?this.fragCurrent:null;E.poll(this.lastCurrentTime,l)}this.lastCurrentTime=c.currentTime}},_.onFragLoadEmergencyAborted=function(){this.state=I.State.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()},_.onBufferFlushed=function(c,E){var l=E.type;if(l!==N.ElementaryStreamTypes.AUDIO||this.audioOnly&&!this.altAudio){var x=(l===N.ElementaryStreamTypes.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(x,l,k.PlaylistLevelType.MAIN)}},_.onLevelsUpdated=function(c,E){this.levels=E.levels},_.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},_.seekToStartPos=function(){var c=this.media;if(c){var E=c.currentTime,l=this.startPosition;if(l>=0&&E<l){if(c.seeking){this.log("could not seek to "+l+", already seeking at "+E);return}var x=W.BufferHelper.getBuffered(c),B=x.length?x.start(0):0,O=B-l;O>0&&(O<this.config.maxBufferHole||O<this.config.maxFragLookUpTolerance)&&(this.log("adjusting start position by "+O+" to match buffer start"),l+=O,this.startPosition=l),this.log("seek to target start position "+l+" from current time "+E),c.currentTime=l}}},_._getAudioCodec=function(c){var E=this.config.defaultAudioCodec||c.audioCodec;return this.audioCodecSwap&&E&&(this.log("Swapping audio codec"),E.indexOf("mp4a.40.5")!==-1?E="mp4a.40.2":E="mp4a.40.5"),E},_._loadBitrateTestFrag=function(c,E){var l=this;c.bitrateTest=!0,this._doFragLoad(c,E).then(function(x){var B=l.hls;if(!(!x||l.fragContextChanged(c))){l.fragLoadError=0,l.state=I.State.IDLE,l.startFragRequested=!1,l.bitrateTest=!1;var O=c.stats;O.parsing.start=O.parsing.end=O.buffering.start=O.buffering.end=self.performance.now(),B.trigger(b.Events.FRAG_LOADED,x),c.bitrateTest=!1}})},_._handleTransmuxComplete=function(c){var E,l="main",x=this.hls,B=c.remuxResult,O=c.chunkMeta,$=this.getCurrentContext(O);if(!$){this.warn("The loading context changed while buffering fragment "+O.sn+" of level "+O.level+". This chunk will not be buffered."),this.resetStartWhenNotLoaded(O.level);return}var H=$.frag,j=$.part,V=$.level,z=B.video,X=B.text,J=B.id3,q=B.initSegment,ee=V.details,ne=this.altAudio?void 0:B.audio;if(!this.fragContextChanged(H)){if(this.state=I.State.PARSING,q){q.tracks&&(this._bufferInitSegment(V,q.tracks,H,O),x.trigger(b.Events.FRAG_PARSING_INIT_SEGMENT,{frag:H,id:l,tracks:q.tracks}));var ae=q.initPTS,fe=q.timescale;(0,M.isFiniteNumber)(ae)&&(this.initPTS[H.cc]=ae,x.trigger(b.Events.INIT_PTS_FOUND,{frag:H,id:l,initPTS:ae,timescale:fe}))}if(z&&B.independent!==!1){if(ee){var ue=z.startPTS,ce=z.endPTS,ye=z.startDTS,Pe=z.endDTS;if(j)j.elementaryStreams[z.type]={startPTS:ue,endPTS:ce,startDTS:ye,endDTS:Pe};else if(z.firstKeyFrame&&z.independent&&O.id===1&&(this.couldBacktrack=!0),z.dropped&&z.independent){var Te=this.getMainFwdBufferInfo(),ge=(Te?Te.end:this.getLoadPosition())+this.config.maxBufferHole,De=z.firstKeyFramePTS?z.firstKeyFramePTS:ue;if(ge<De-this.config.maxBufferHole){this.backtrack(H);return}H.setElementaryStreamInfo(z.type,H.start,ce,H.start,Pe,!0)}H.setElementaryStreamInfo(z.type,ue,ce,ye,Pe),this.backtrackFragment&&(this.backtrackFragment=H),this.bufferFragmentData(z,H,j,O)}}else if(B.independent===!1){this.backtrack(H);return}if(ne){var be=ne.startPTS,Ue=ne.endPTS,gt=ne.startDTS,Ve=ne.endDTS;j&&(j.elementaryStreams[N.ElementaryStreamTypes.AUDIO]={startPTS:be,endPTS:Ue,startDTS:gt,endDTS:Ve}),H.setElementaryStreamInfo(N.ElementaryStreamTypes.AUDIO,be,Ue,gt,Ve),this.bufferFragmentData(ne,H,j,O)}if(ee&&J!==null&&J!==void 0&&(E=J.samples)!==null&&E!==void 0&&E.length){var nt={id:l,frag:H,details:ee,samples:J.samples};x.trigger(b.Events.FRAG_PARSING_METADATA,nt)}if(ee&&X){var $e={id:l,frag:H,details:ee,samples:X.samples};x.trigger(b.Events.FRAG_PARSING_USERDATA,$e)}}},_._bufferInitSegment=function(c,E,l,x){var B=this;if(this.state===I.State.PARSING){this.audioOnly=!!E.audio&&!E.video,this.altAudio&&!this.audioOnly&&delete E.audio;var O=E.audio,$=E.video,H=E.audiovideo;if(O){var j=c.audioCodec,V=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(j&&(j.indexOf("mp4a.40.5")!==-1?j="mp4a.40.2":j="mp4a.40.5"),O.metadata.channelCount!==1&&V.indexOf("firefox")===-1&&(j="mp4a.40.5")),V.indexOf("android")!==-1&&O.container!=="audio/mpeg"&&(j="mp4a.40.2",this.log("Android: force audio codec to "+j)),c.audioCodec&&c.audioCodec!==j&&this.log('Swapping manifest audio codec "'+c.audioCodec+'" for "'+j+'"'),O.levelCodec=j,O.id="main",this.log("Init audio buffer, container:"+O.container+", codecs[selected/level/parsed]=["+(j||"")+"/"+(c.audioCodec||"")+"/"+O.codec+"]")}$&&($.levelCodec=c.videoCodec,$.id="main",this.log("Init video buffer, container:"+$.container+", codecs[level/parsed]=["+(c.videoCodec||"")+"/"+$.codec+"]")),H&&this.log("Init audiovideo buffer, container:"+H.container+", codecs[level/parsed]=["+(c.attrs.CODECS||"")+"/"+H.codec+"]"),this.hls.trigger(b.Events.BUFFER_CODECS,E),Object.keys(E).forEach(function(z){var X=E[z],J=X.initSegment;J!=null&&J.byteLength&&B.hls.trigger(b.Events.BUFFER_APPENDING,{type:z,data:J,frag:l,part:null,chunkMeta:x,parent:l.type})}),this.tick()}},_.getMainFwdBufferInfo=function(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,k.PlaylistLevelType.MAIN)},_.backtrack=function(c){this.couldBacktrack=!0,this.backtrackFragment=c,this.resetTransmuxer(),this.flushBufferGap(c),this.fragmentTracker.removeFragment(c),this.fragPrevious=null,this.nextLoadPosition=c.start,this.state=I.State.IDLE},_.checkFragmentChanged=function(){var c=this.media,E=null;if(c&&c.readyState>1&&c.seeking===!1){var l=c.currentTime;if(W.BufferHelper.isBuffered(c,l)?E=this.getAppendedFrag(l):W.BufferHelper.isBuffered(c,l+.1)&&(E=this.getAppendedFrag(l+.1)),E){this.backtrackFragment=null;var x=this.fragPlaying,B=E.level;(!x||E.sn!==x.sn||x.level!==B||E.urlId!==x.urlId)&&(this.fragPlaying=E,this.hls.trigger(b.Events.FRAG_CHANGED,{frag:E}),(!x||x.level!==B)&&this.hls.trigger(b.Events.LEVEL_SWITCHED,{level:B}))}}},d(U,[{key:"nextLevel",get:function(){var c=this.nextBufferedFrag;return c?c.level:-1}},{key:"currentFrag",get:function(){var c=this.media;return c?this.fragPlaying||this.getAppendedFrag(c.currentTime):null}},{key:"currentProgramDateTime",get:function(){var c=this.media;if(c){var E=c.currentTime,l=this.currentFrag;if(l&&(0,M.isFiniteNumber)(E)&&(0,M.isFiniteNumber)(l.programDateTime)){var x=l.programDateTime+(E-l.start)*1e3;return new Date(x)}}return null}},{key:"currentLevel",get:function(){var c=this.currentFrag;return c?c.level:-1}},{key:"nextBufferedFrag",get:function(){var c=this.currentFrag;return c?this.followingBufferedFrag(c):null}},{key:"forceStartLoad",get:function(){return this._forceStartLoad}}]),U}(I.default)},"./src/controller/subtitle-stream-controller.ts":(C,D,o)=>{o.r(D),o.d(D,{SubtitleStreamController:()=>g});var M=o("./src/events.ts"),I=o("./src/utils/buffer-helper.ts"),K=o("./src/controller/fragment-finders.ts"),b=o("./src/utils/discontinuities.ts"),W=o("./src/controller/level-helper.ts"),F=o("./src/controller/fragment-tracker.ts"),k=o("./src/controller/base-stream-controller.ts"),N=o("./src/types/loader.ts"),m=o("./src/types/level.ts");function p(R,y){for(var L=0;L<y.length;L++){var U=y[L];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(R,w(U.key),U)}}function u(R,y,L){return y&&p(R.prototype,y),L&&p(R,L),Object.defineProperty(R,"prototype",{writable:!1}),R}function w(R){var y=A(R,"string");return typeof y=="symbol"?y:String(y)}function A(R,y){if(typeof R!="object"||R===null)return R;var L=R[Symbol.toPrimitive];if(L!==void 0){var U=L.call(R,y||"default");if(typeof U!="object")return U;throw new TypeError("@@toPrimitive must return a primitive value.")}return(y==="string"?String:Number)(R)}function d(R,y){R.prototype=Object.create(y.prototype),R.prototype.constructor=R,v(R,y)}function v(R,y){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(U,_){return U.__proto__=_,U},v(R,y)}var h=500,g=function(R){d(y,R);function y(U,_,S){var c;return c=R.call(this,U,_,S,"[subtitle-stream-controller]")||this,c.levels=[],c.currentTrackId=-1,c.tracksBuffered=[],c.mainDetails=null,c._registerListeners(),c}var L=y.prototype;return L.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},L._registerListeners=function(){var _=this.hls;_.on(M.Events.MEDIA_ATTACHED,this.onMediaAttached,this),_.on(M.Events.MEDIA_DETACHING,this.onMediaDetaching,this),_.on(M.Events.MANIFEST_LOADING,this.onManifestLoading,this),_.on(M.Events.LEVEL_LOADED,this.onLevelLoaded,this),_.on(M.Events.ERROR,this.onError,this),_.on(M.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),_.on(M.Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),_.on(M.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),_.on(M.Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),_.on(M.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),_.on(M.Events.FRAG_BUFFERED,this.onFragBuffered,this)},L._unregisterListeners=function(){var _=this.hls;_.off(M.Events.MEDIA_ATTACHED,this.onMediaAttached,this),_.off(M.Events.MEDIA_DETACHING,this.onMediaDetaching,this),_.off(M.Events.MANIFEST_LOADING,this.onManifestLoading,this),_.off(M.Events.LEVEL_LOADED,this.onLevelLoaded,this),_.off(M.Events.ERROR,this.onError,this),_.off(M.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),_.off(M.Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),_.off(M.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),_.off(M.Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),_.off(M.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),_.off(M.Events.FRAG_BUFFERED,this.onFragBuffered,this)},L.startLoad=function(_){this.stopLoad(),this.state=k.State.IDLE,this.setInterval(h),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=_,this.tick()},L.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()},L.onLevelLoaded=function(_,S){this.mainDetails=S.details},L.onSubtitleFragProcessed=function(_,S){var c=S.frag,E=S.success;if(this.fragPrevious=c,this.state=k.State.IDLE,!!E){var l=this.tracksBuffered[this.currentTrackId];if(l){for(var x,B=c.start,O=0;O<l.length;O++)if(B>=l[O].start&&B<=l[O].end){x=l[O];break}var $=c.start+c.duration;x?x.end=$:(x={start:B,end:$},l.push(x)),this.fragmentTracker.fragBuffered(c)}}},L.onBufferFlushing=function(_,S){var c=S.startOffset,E=S.endOffset;if(c===0&&E!==Number.POSITIVE_INFINITY){var l=this.currentTrackId,x=this.levels;if(!x.length||!x[l]||!x[l].details)return;var B=x[l].details,O=B.targetduration,$=E-O;if($<=0)return;S.endOffsetSubtitles=Math.max(0,$),this.tracksBuffered.forEach(function(H){for(var j=0;j<H.length;){if(H[j].end<=$){H.shift();continue}else if(H[j].start<$)H[j].start=$;else break;j++}}),this.fragmentTracker.removeFragmentsInRange(c,$,N.PlaylistLevelType.SUBTITLE)}},L.onFragBuffered=function(_,S){if(!this.loadedmetadata&&S.frag.type===N.PlaylistLevelType.MAIN){var c;(c=this.media)!==null&&c!==void 0&&c.buffered.length&&(this.loadedmetadata=!0)}},L.onError=function(_,S){var c=S.frag;!c||c.type!==N.PlaylistLevelType.SUBTITLE||(this.fragCurrent&&this.fragCurrent.abortRequests(),this.state=k.State.IDLE)},L.onSubtitleTracksUpdated=function(_,S){var c=this,E=S.subtitleTracks;this.tracksBuffered=[],this.levels=E.map(function(l){return new m.Level(l)}),this.fragmentTracker.removeAllFragments(),this.fragPrevious=null,this.levels.forEach(function(l){c.tracksBuffered[l.id]=[]}),this.mediaBuffer=null},L.onSubtitleTrackSwitch=function(_,S){if(this.currentTrackId=S.id,!this.levels.length||this.currentTrackId===-1){this.clearInterval();return}var c=this.levels[this.currentTrackId];c!=null&&c.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,c&&this.setInterval(h)},L.onSubtitleTrackLoaded=function(_,S){var c,E=S.details,l=S.id,x=this.currentTrackId,B=this.levels;if(B.length){var O=B[x];if(!(l>=B.length||l!==x||!O)){this.mediaBuffer=this.mediaBufferTimeRanges;var $=0;if(E.live||(c=O.details)!==null&&c!==void 0&&c.live){var H=this.mainDetails;if(E.deltaUpdateFailed||!H)return;var j=H.fragments[0];O.details?($=this.alignPlaylists(E,O.details),$===0&&j&&($=j.start,(0,W.addSliding)(E,$))):E.hasProgramDateTime&&H.hasProgramDateTime?((0,b.alignMediaPlaylistByPDT)(E,H),$=E.fragments[0].start):j&&($=j.start,(0,W.addSliding)(E,$))}if(O.details=E,this.levelLastLoaded=l,!this.startFragRequested&&(this.mainDetails||!E.live)&&this.setStartPosition(O.details,$),this.tick(),E.live&&!this.fragCurrent&&this.media&&this.state===k.State.IDLE){var V=(0,K.findFragmentByPTS)(null,E.fragments,this.media.currentTime,0);V||(this.warn("Subtitle playlist not aligned with playback"),O.details=void 0)}}}},L._handleFragmentLoadComplete=function(_){var S=this,c=_.frag,E=_.payload,l=c.decryptdata,x=this.hls;if(!this.fragContextChanged(c)&&E&&E.byteLength>0&&l&&l.key&&l.iv&&l.method==="AES-128"){var B=performance.now();this.decrypter.decrypt(new Uint8Array(E),l.key.buffer,l.iv.buffer).then(function(O){var $=performance.now();x.trigger(M.Events.FRAG_DECRYPTED,{frag:c,payload:O,stats:{tstart:B,tdecrypt:$}})}).catch(function(O){S.warn(O.name+": "+O.message),S.state=k.State.IDLE})}},L.doTick=function(){if(!this.media){this.state=k.State.IDLE;return}if(this.state===k.State.IDLE){var _=this.currentTrackId,S=this.levels;if(!S.length||!S[_]||!S[_].details)return;var c=S[_].details,E=c.targetduration,l=this.config,x=this.getLoadPosition(),B=I.BufferHelper.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],x-E,l.maxBufferHole),O=B.end,$=B.len,H=this.getFwdBufferInfo(this.media,N.PlaylistLevelType.MAIN),j=this.getMaxBufferLength(H==null?void 0:H.len)+E;if($>j)return;console.assert(c,"Subtitle track details are defined on idle subtitle stream controller tick");var V=c.fragments,z=V.length,X=c.edge,J=null,q=this.fragPrevious;if(O<X){var ee=l.maxFragLookUpTolerance;J=(0,K.findFragmentByPTS)(q,V,Math.max(V[0].start,O),ee),!J&&q&&q.start<V[0].start&&(J=V[0])}else J=V[z-1];if(!J)return;J=this.mapToInitFragWhenRequired(J),this.fragmentTracker.getState(J)===F.FragmentState.NOT_LOADED&&this.loadFragment(J,c,O)}},L.getMaxBufferLength=function(_){var S=R.prototype.getMaxBufferLength.call(this);return _?Math.max(S,_):S},L.loadFragment=function(_,S,c){this.fragCurrent=_,_.sn==="initSegment"?this._loadInitSegment(_,S):(this.startFragRequested=!0,R.prototype.loadFragment.call(this,_,S,c))},u(y,[{key:"mediaBufferTimeRanges",get:function(){return new P(this.tracksBuffered[this.currentTrackId]||[])}}]),y}(k.default),P=function(y){this.buffered=void 0;var L=function(_,S,c){if(S=S>>>0,S>c-1)throw new DOMException("Failed to execute '"+_+"' on 'TimeRanges': The index provided ("+S+") is greater than the maximum bound ("+c+")");return y[S][_]};this.buffered={get length(){return y.length},end:function(_){return L("end",_,y.length)},start:function(_){return L("start",_,y.length)}}}},"./src/controller/subtitle-track-controller.ts":(C,D,o)=>{o.r(D),o.d(D,{default:()=>A});var M=o("./src/events.ts"),I=o("./src/utils/texttrack-utils.ts"),K=o("./src/controller/base-playlist-controller.ts"),b=o("./src/types/loader.ts");function W(d,v){for(var h=0;h<v.length;h++){var g=v[h];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(d,k(g.key),g)}}function F(d,v,h){return v&&W(d.prototype,v),h&&W(d,h),Object.defineProperty(d,"prototype",{writable:!1}),d}function k(d){var v=N(d,"string");return typeof v=="symbol"?v:String(v)}function N(d,v){if(typeof d!="object"||d===null)return d;var h=d[Symbol.toPrimitive];if(h!==void 0){var g=h.call(d,v||"default");if(typeof g!="object")return g;throw new TypeError("@@toPrimitive must return a primitive value.")}return(v==="string"?String:Number)(d)}function m(d,v){d.prototype=Object.create(v.prototype),d.prototype.constructor=d,p(d,v)}function p(d,v){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,P){return g.__proto__=P,g},p(d,v)}var u=function(d){m(v,d);function v(g){var P;return P=d.call(this,g,"[subtitle-track-controller]")||this,P.media=null,P.tracks=[],P.groupId=null,P.tracksInGroup=[],P.trackId=-1,P.selectDefaultTrack=!0,P.queuedDefaultTrack=-1,P.trackChangeListener=function(){return P.onTextTracksChanged()},P.asyncPollTrackChange=function(){return P.pollTrackChange(0)},P.useTextTrackPolling=!1,P.subtitlePollingInterval=-1,P._subtitleDisplay=!0,P.registerListeners(),P}var h=v.prototype;return h.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.trackChangeListener=this.asyncPollTrackChange=null,d.prototype.destroy.call(this)},h.registerListeners=function(){var P=this.hls;P.on(M.Events.MEDIA_ATTACHED,this.onMediaAttached,this),P.on(M.Events.MEDIA_DETACHING,this.onMediaDetaching,this),P.on(M.Events.MANIFEST_LOADING,this.onManifestLoading,this),P.on(M.Events.MANIFEST_PARSED,this.onManifestParsed,this),P.on(M.Events.LEVEL_LOADING,this.onLevelLoading,this),P.on(M.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),P.on(M.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),P.on(M.Events.ERROR,this.onError,this)},h.unregisterListeners=function(){var P=this.hls;P.off(M.Events.MEDIA_ATTACHED,this.onMediaAttached,this),P.off(M.Events.MEDIA_DETACHING,this.onMediaDetaching,this),P.off(M.Events.MANIFEST_LOADING,this.onManifestLoading,this),P.off(M.Events.MANIFEST_PARSED,this.onManifestParsed,this),P.off(M.Events.LEVEL_LOADING,this.onLevelLoading,this),P.off(M.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),P.off(M.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),P.off(M.Events.ERROR,this.onError,this)},h.onMediaAttached=function(P,R){this.media=R.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))},h.pollTrackChange=function(P){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.trackChangeListener,P)},h.onMediaDetaching=function(){if(this.media){self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId);var P=w(this.media.textTracks);P.forEach(function(R){(0,I.clearCurrentCues)(R)}),this.subtitleTrack=-1,this.media=null}},h.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0},h.onManifestParsed=function(P,R){this.tracks=R.subtitleTracks},h.onSubtitleTrackLoaded=function(P,R){var y=R.id,L=R.details,U=this.trackId,_=this.tracksInGroup[U];if(!_){this.warn("Invalid subtitle track id "+y);return}var S=_.details;_.details=R.details,this.log("subtitle track "+y+" loaded ["+L.startSN+"-"+L.endSN+"]"),y===this.trackId&&(this.retryCount=0,this.playlistLoaded(y,R,S))},h.onLevelLoading=function(P,R){this.switchLevel(R.level)},h.onLevelSwitching=function(P,R){this.switchLevel(R.level)},h.switchLevel=function(P){var R=this.hls.levels[P];if(R!=null&&R.textGroupIds){var y=R.textGroupIds[R.urlId];if(this.groupId!==y){var L=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0,U=this.tracks.filter(function(c){return!y||c.groupId===y});this.tracksInGroup=U;var _=this.findTrackId(L==null?void 0:L.name)||this.findTrackId();this.groupId=y;var S={subtitleTracks:U};this.log("Updating subtitle tracks, "+U.length+' track(s) found in "'+y+'" group-id'),this.hls.trigger(M.Events.SUBTITLE_TRACKS_UPDATED,S),_!==-1&&this.setSubtitleTrack(_,L)}}},h.findTrackId=function(P){for(var R=this.tracksInGroup,y=0;y<R.length;y++){var L=R[y];if((!this.selectDefaultTrack||L.default)&&(!P||P===L.name))return L.id}return-1},h.onError=function(P,R){d.prototype.onError.call(this,P,R),!(R.fatal||!R.context)&&R.context.type===b.PlaylistContextType.SUBTITLE_TRACK&&R.context.id===this.trackId&&R.context.groupId===this.groupId&&this.retryLoadingOrFail(R)},h.loadPlaylist=function(P){d.prototype.loadPlaylist.call(this);var R=this.tracksInGroup[this.trackId];if(this.shouldLoadTrack(R)){var y=R.id,L=R.groupId,U=R.url;if(P)try{U=P.addDirectives(U)}catch(_){this.warn("Could not construct new URL with HLS Delivery Directives: "+_)}this.log("Loading subtitle playlist for id "+y),this.hls.trigger(M.Events.SUBTITLE_TRACK_LOADING,{url:U,id:y,groupId:L,deliveryDirectives:P||null})}},h.toggleTrackModes=function(P){var R=this,y=this.media,L=this.trackId;if(y){var U=w(y.textTracks),_=U.filter(function(E){return E.groupId===R.groupId});if(P===-1)[].slice.call(U).forEach(function(E){E.mode="disabled"});else{var S=_[L];S&&(S.mode="disabled")}var c=_[P];c&&(c.mode=this.subtitleDisplay?"showing":"hidden")}},h.setSubtitleTrack=function(P,R){var y,L=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=P;return}if(this.trackId!==P&&this.toggleTrackModes(P),!(this.trackId===P&&(P===-1||(y=L[P])!==null&&y!==void 0&&y.details)||P<-1||P>=L.length)){this.clearTimer();var U=L[P];if(this.log("Switching to subtitle track "+P),this.trackId=P,U){var _=U.id,S=U.groupId,c=S===void 0?"":S,E=U.name,l=U.type,x=U.url;this.hls.trigger(M.Events.SUBTITLE_TRACK_SWITCH,{id:_,groupId:c,name:E,type:l,url:x});var B=this.switchParams(U.url,R==null?void 0:R.details);this.loadPlaylist(B)}else this.hls.trigger(M.Events.SUBTITLE_TRACK_SWITCH,{id:P})}},h.onTextTracksChanged=function(){if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!(!this.media||!this.hls.config.renderTextTracksNatively)){for(var P=-1,R=w(this.media.textTracks),y=0;y<R.length;y++)if(R[y].mode==="hidden")P=y;else if(R[y].mode==="showing"){P=y;break}this.subtitleTrack!==P&&(this.subtitleTrack=P)}},F(v,[{key:"subtitleDisplay",get:function(){return this._subtitleDisplay},set:function(P){this._subtitleDisplay=P,this.trackId>-1&&this.toggleTrackModes(this.trackId)}},{key:"subtitleTracks",get:function(){return this.tracksInGroup}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(P){this.selectDefaultTrack=!1;var R=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;this.setSubtitleTrack(P,R)}}]),v}(K.default);function w(d){for(var v=[],h=0;h<d.length;h++){var g=d[h];g.kind==="subtitles"&&g.label&&v.push(d[h])}return v}const A=u},"./src/controller/timeline-controller.ts":(C,D,o)=>{o.r(D),o.d(D,{TimelineController:()=>u});var M=o("./src/polyfills/number.ts"),I=o("./src/events.ts"),K=o("./src/utils/cea-608-parser.ts"),b=o("./src/utils/output-filter.ts"),W=o("./src/utils/webvtt-parser.ts"),F=o("./src/utils/texttrack-utils.ts"),k=o("./src/utils/imsc1-ttml-parser.ts"),N=o("./src/utils/mp4-tools.ts"),m=o("./src/types/loader.ts"),p=o("./src/utils/logger.ts"),u=function(){function v(g){if(this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.timescale=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=d(),this.captionsProperties=void 0,this.hls=g,this.config=g.config,this.Cues=g.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},this.config.enableCEA708Captions){var P=new b.default(this,"textTrack1"),R=new b.default(this,"textTrack2"),y=new b.default(this,"textTrack3"),L=new b.default(this,"textTrack4");this.cea608Parser1=new K.default(1,P,R),this.cea608Parser2=new K.default(3,y,L)}g.on(I.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),g.on(I.Events.MEDIA_DETACHING,this.onMediaDetaching,this),g.on(I.Events.MANIFEST_LOADING,this.onManifestLoading,this),g.on(I.Events.MANIFEST_LOADED,this.onManifestLoaded,this),g.on(I.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),g.on(I.Events.FRAG_LOADING,this.onFragLoading,this),g.on(I.Events.FRAG_LOADED,this.onFragLoaded,this),g.on(I.Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),g.on(I.Events.FRAG_DECRYPTED,this.onFragDecrypted,this),g.on(I.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),g.on(I.Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),g.on(I.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)}var h=v.prototype;return h.destroy=function(){var P=this.hls;P.off(I.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),P.off(I.Events.MEDIA_DETACHING,this.onMediaDetaching,this),P.off(I.Events.MANIFEST_LOADING,this.onManifestLoading,this),P.off(I.Events.MANIFEST_LOADED,this.onManifestLoaded,this),P.off(I.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),P.off(I.Events.FRAG_LOADING,this.onFragLoading,this),P.off(I.Events.FRAG_LOADED,this.onFragLoaded,this),P.off(I.Events.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),P.off(I.Events.FRAG_DECRYPTED,this.onFragDecrypted,this),P.off(I.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),P.off(I.Events.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),P.off(I.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.cea608Parser1=this.cea608Parser2=null},h.addCues=function(P,R,y,L,U){for(var _=!1,S=U.length;S--;){var c=U[S],E=A(c[0],c[1],R,y);if(E>=0&&(c[0]=Math.min(c[0],R),c[1]=Math.max(c[1],y),_=!0,E/(y-R)>.5))return}if(_||U.push([R,y]),this.config.renderTextTracksNatively){var l=this.captionsTracks[P];this.Cues.newCue(l,R,y,L)}else{var x=this.Cues.newCue(null,R,y,L);this.hls.trigger(I.Events.CUES_PARSED,{type:"captions",cues:x,track:P})}},h.onInitPtsFound=function(P,R){var y=this,L=R.frag,U=R.id,_=R.initPTS,S=R.timescale,c=this.unparsedVttFrags;U==="main"&&(this.initPTS[L.cc]=_,this.timescale[L.cc]=S),c.length&&(this.unparsedVttFrags=[],c.forEach(function(E){y.onFragLoaded(I.Events.FRAG_LOADED,E)}))},h.getExistingTrack=function(P){var R=this.media;if(R)for(var y=0;y<R.textTracks.length;y++){var L=R.textTracks[y];if(L[P])return L}return null},h.createCaptionsTrack=function(P){this.config.renderTextTracksNatively?this.createNativeTrack(P):this.createNonNativeTrack(P)},h.createNativeTrack=function(P){if(!this.captionsTracks[P]){var R=this.captionsProperties,y=this.captionsTracks,L=this.media,U=R[P],_=U.label,S=U.languageCode,c=this.getExistingTrack(P);if(c)y[P]=c,(0,F.clearCurrentCues)(y[P]),(0,F.sendAddTrackEvent)(y[P],L);else{var E=this.createTextTrack("captions",_,S);E&&(E[P]=!0,y[P]=E)}}},h.createNonNativeTrack=function(P){if(!this.nonNativeCaptionsTracks[P]){var R=this.captionsProperties[P];if(R){var y=R.label,L={_id:P,label:y,kind:"captions",default:R.media?!!R.media.default:!1,closedCaptions:R.media};this.nonNativeCaptionsTracks[P]=L,this.hls.trigger(I.Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[L]})}}},h.createTextTrack=function(P,R,y){var L=this.media;if(L)return L.addTextTrack(P,R,y)},h.onMediaAttaching=function(P,R){this.media=R.media,this._cleanTracks()},h.onMediaDetaching=function(){var P=this.captionsTracks;Object.keys(P).forEach(function(R){(0,F.clearCurrentCues)(P[R]),delete P[R]}),this.nonNativeCaptionsTracks={}},h.onManifestLoading=function(){this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=d(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.timescale=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())},h._cleanTracks=function(){var P=this.media;if(P){var R=P.textTracks;if(R)for(var y=0;y<R.length;y++)(0,F.clearCurrentCues)(R[y])}},h.onSubtitleTracksUpdated=function(P,R){var y=this;this.textTracks=[];var L=R.subtitleTracks||[],U=L.some(function(E){return E.textCodec===k.IMSC1_CODEC});if(this.config.enableWebVTT||U&&this.config.enableIMSC1){var _=this.tracks&&L&&this.tracks.length===L.length;if(this.tracks=L||[],this.config.renderTextTracksNatively){var S=this.media?this.media.textTracks:[];this.tracks.forEach(function(E,l){var x;if(l<S.length){for(var B=null,O=0;O<S.length;O++)if(w(S[O],E)){B=S[O];break}B&&(x=B)}if(x)(0,F.clearCurrentCues)(x);else{var $=y._captionsOrSubtitlesFromCharacteristics(E);x=y.createTextTrack($,E.name,E.lang),x&&(x.mode="disabled")}x&&(x.groupId=E.groupId,y.textTracks.push(x))})}else if(!_&&this.tracks&&this.tracks.length){var c=this.tracks.map(function(E){return{label:E.name,kind:E.type.toLowerCase(),default:E.default,subtitleTrack:E}});this.hls.trigger(I.Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:c})}}},h._captionsOrSubtitlesFromCharacteristics=function(P){var R;if((R=P.attrs)!==null&&R!==void 0&&R.CHARACTERISTICS){var y=/transcribes-spoken-dialog/gi.test(P.attrs.CHARACTERISTICS),L=/describes-music-and-sound/gi.test(P.attrs.CHARACTERISTICS);if(y&&L)return"captions"}return"subtitles"},h.onManifestLoaded=function(P,R){var y=this;this.config.enableCEA708Captions&&R.captions&&R.captions.forEach(function(L){var U=/(?:CC|SERVICE)([1-4])/.exec(L.instreamId);if(U){var _="textTrack"+U[1],S=y.captionsProperties[_];S&&(S.label=L.name,L.lang&&(S.languageCode=L.lang),S.media=L)}})},h.closedCaptionsForLevel=function(P){var R=this.hls.levels[P.level];return R==null?void 0:R.attrs["CLOSED-CAPTIONS"]},h.onFragLoading=function(P,R){var y=this.cea608Parser1,L=this.cea608Parser2,U=this.lastSn,_=this.lastPartIndex;if(!(!this.enabled||!(y&&L))&&R.frag.type===m.PlaylistLevelType.MAIN){var S,c,E=R.frag.sn,l=(S=R==null||(c=R.part)===null||c===void 0?void 0:c.index)!=null?S:-1;E===U+1||E===U&&l===_+1||(y.reset(),L.reset()),this.lastSn=E,this.lastPartIndex=l}},h.onFragLoaded=function(P,R){var y=R.frag,L=R.payload,U=this.initPTS,_=this.unparsedVttFrags;if(y.type===m.PlaylistLevelType.SUBTITLE)if(L.byteLength){if(!(0,M.isFiniteNumber)(U[y.cc])){_.push(R),U.length&&this.hls.trigger(I.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:y,error:new Error("Missing initial subtitle PTS")});return}var S=y.decryptdata,c="stats"in R;if(S==null||!S.encrypted||c){var E=this.tracks[y.level],l=this.vttCCs;l[y.cc]||(l[y.cc]={start:y.start,prevCC:this.prevCC,new:!0},this.prevCC=y.cc),E&&E.textCodec===k.IMSC1_CODEC?this._parseIMSC1(y,L):this._parseVTTs(y,L,l)}}else this.hls.trigger(I.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:y,error:new Error("Empty subtitle payload")})},h._parseIMSC1=function(P,R){var y=this,L=this.hls;(0,k.parseIMSC1)(R,this.initPTS[P.cc],this.timescale[P.cc],function(U){y._appendCues(U,P.level),L.trigger(I.Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:P})},function(U){p.logger.log("Failed to parse IMSC1: "+U),L.trigger(I.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:P,error:U})})},h._parseVTTs=function(P,R,y){var L,U=this,_=this.hls,S=(L=P.initSegment)!==null&&L!==void 0&&L.data?(0,N.appendUint8Array)(P.initSegment.data,new Uint8Array(R)):R;(0,W.parseWebVTT)(S,this.initPTS[P.cc],this.timescale[P.cc],y,P.cc,P.start,function(c){U._appendCues(c,P.level),_.trigger(I.Events.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:P})},function(c){U._fallbackToIMSC1(P,R),p.logger.log("Failed to parse VTT cue: "+c),_.trigger(I.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:P,error:c})})},h._fallbackToIMSC1=function(P,R){var y=this,L=this.tracks[P.level];L.textCodec||(0,k.parseIMSC1)(R,this.initPTS[P.cc],this.timescale[P.cc],function(){L.textCodec=k.IMSC1_CODEC,y._parseIMSC1(P,R)},function(){L.textCodec="wvtt"})},h._appendCues=function(P,R){var y=this.hls;if(this.config.renderTextTracksNatively){var L=this.textTracks[R];if(!L||L.mode==="disabled")return;P.forEach(function(S){return(0,F.addCueToTrack)(L,S)})}else{var U=this.tracks[R];if(!U)return;var _=U.default?"default":"subtitles"+R;y.trigger(I.Events.CUES_PARSED,{type:"subtitles",cues:P,track:_})}},h.onFragDecrypted=function(P,R){var y=R.frag;if(y.type===m.PlaylistLevelType.SUBTITLE){if(!(0,M.isFiniteNumber)(this.initPTS[y.cc])){this.unparsedVttFrags.push(R);return}this.onFragLoaded(I.Events.FRAG_LOADED,R)}},h.onSubtitleTracksCleared=function(){this.tracks=[],this.captionsTracks={}},h.onFragParsingUserdata=function(P,R){var y=this.cea608Parser1,L=this.cea608Parser2;if(!(!this.enabled||!(y&&L))){var U=R.frag,_=R.samples;if(!(U.type===m.PlaylistLevelType.MAIN&&this.closedCaptionsForLevel(U)==="NONE"))for(var S=0;S<_.length;S++){var c=_[S].bytes;if(c){var E=this.extractCea608Data(c);y.addData(_[S].pts,E[0]),L.addData(_[S].pts,E[1])}}}},h.onBufferFlushing=function(P,R){var y=R.startOffset,L=R.endOffset,U=R.endOffsetSubtitles,_=R.type,S=this.media;if(!(!S||S.currentTime<L)){if(!_||_==="video"){var c=this.captionsTracks;Object.keys(c).forEach(function(l){return(0,F.removeCuesInRange)(c[l],y,L)})}if(this.config.renderTextTracksNatively&&y===0&&U!==void 0){var E=this.textTracks;Object.keys(E).forEach(function(l){return(0,F.removeCuesInRange)(E[l],y,U)})}}},h.extractCea608Data=function(P){for(var R=[[],[]],y=P[0]&31,L=2,U=0;U<y;U++){var _=P[L++],S=127&P[L++],c=127&P[L++];if(!(S===0&&c===0)){var E=(4&_)!==0;if(E){var l=3&_;(l===0||l===1)&&(R[l].push(S),R[l].push(c))}}}return R},v}();function w(v,h){return v&&v.label===h.name&&!(v.textTrack1||v.textTrack2)}function A(v,h,g,P){return Math.min(h,P)-Math.max(v,g)}function d(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}},"./src/crypt/aes-crypto.ts":(C,D,o)=>{o.r(D),o.d(D,{default:()=>M});var M=function(){function I(b,W){this.subtle=void 0,this.aesIV=void 0,this.subtle=b,this.aesIV=W}var K=I.prototype;return K.decrypt=function(W,F){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},F,W)},I}()},"./src/crypt/aes-decryptor.ts":(C,D,o)=>{o.r(D),o.d(D,{default:()=>K,removePadding:()=>I});var M=o("./src/utils/typed-array.ts");function I(b){var W=b.byteLength,F=W&&new DataView(b.buffer).getUint8(W-1);return F?(0,M.sliceUint8)(b,0,W-F):b}var K=function(){function b(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}var W=b.prototype;return W.uint8ArrayToUint32Array_=function(k){for(var N=new DataView(k),m=new Uint32Array(4),p=0;p<4;p++)m[p]=N.getUint32(p*4);return m},W.initTable=function(){var k=this.sBox,N=this.invSBox,m=this.subMix,p=m[0],u=m[1],w=m[2],A=m[3],d=this.invSubMix,v=d[0],h=d[1],g=d[2],P=d[3],R=new Uint32Array(256),y=0,L=0,U=0;for(U=0;U<256;U++)U<128?R[U]=U<<1:R[U]=U<<1^283;for(U=0;U<256;U++){var _=L^L<<1^L<<2^L<<3^L<<4;_=_>>>8^_&255^99,k[y]=_,N[_]=y;var S=R[y],c=R[S],E=R[c],l=R[_]*257^_*16843008;p[y]=l<<24|l>>>8,u[y]=l<<16|l>>>16,w[y]=l<<8|l>>>24,A[y]=l,l=E*16843009^c*65537^S*257^y*16843008,v[_]=l<<24|l>>>8,h[_]=l<<16|l>>>16,g[_]=l<<8|l>>>24,P[_]=l,y?(y=S^R[R[R[E^S]]],L^=R[R[L]]):y=L=1}},W.expandKey=function(k){for(var N=this.uint8ArrayToUint32Array_(k),m=!0,p=0;p<N.length&&m;)m=N[p]===this.key[p],p++;if(!m){this.key=N;var u=this.keySize=N.length;if(u!==4&&u!==6&&u!==8)throw new Error("Invalid aes key size="+u);var w=this.ksRows=(u+6+1)*4,A,d,v=this.keySchedule=new Uint32Array(w),h=this.invKeySchedule=new Uint32Array(w),g=this.sBox,P=this.rcon,R=this.invSubMix,y=R[0],L=R[1],U=R[2],_=R[3],S,c;for(A=0;A<w;A++){if(A<u){S=v[A]=N[A];continue}c=S,A%u===0?(c=c<<8|c>>>24,c=g[c>>>24]<<24|g[c>>>16&255]<<16|g[c>>>8&255]<<8|g[c&255],c^=P[A/u|0]<<24):u>6&&A%u===4&&(c=g[c>>>24]<<24|g[c>>>16&255]<<16|g[c>>>8&255]<<8|g[c&255]),v[A]=S=(v[A-u]^c)>>>0}for(d=0;d<w;d++)A=w-d,d&3?c=v[A]:c=v[A-4],d<4||A<=4?h[d]=c:h[d]=y[g[c>>>24]]^L[g[c>>>16&255]]^U[g[c>>>8&255]]^_[g[c&255]],h[d]=h[d]>>>0}},W.networkToHostOrderSwap=function(k){return k<<24|(k&65280)<<8|(k&16711680)>>8|k>>>24},W.decrypt=function(k,N,m){for(var p=this.keySize+6,u=this.invKeySchedule,w=this.invSBox,A=this.invSubMix,d=A[0],v=A[1],h=A[2],g=A[3],P=this.uint8ArrayToUint32Array_(m),R=P[0],y=P[1],L=P[2],U=P[3],_=new Int32Array(k),S=new Int32Array(_.length),c,E,l,x,B,O,$,H,j,V,z,X,J,q,ee=this.networkToHostOrderSwap;N<_.length;){for(j=ee(_[N]),V=ee(_[N+1]),z=ee(_[N+2]),X=ee(_[N+3]),B=j^u[0],O=X^u[1],$=z^u[2],H=V^u[3],J=4,q=1;q<p;q++)c=d[B>>>24]^v[O>>16&255]^h[$>>8&255]^g[H&255]^u[J],E=d[O>>>24]^v[$>>16&255]^h[H>>8&255]^g[B&255]^u[J+1],l=d[$>>>24]^v[H>>16&255]^h[B>>8&255]^g[O&255]^u[J+2],x=d[H>>>24]^v[B>>16&255]^h[O>>8&255]^g[$&255]^u[J+3],B=c,O=E,$=l,H=x,J=J+4;c=w[B>>>24]<<24^w[O>>16&255]<<16^w[$>>8&255]<<8^w[H&255]^u[J],E=w[O>>>24]<<24^w[$>>16&255]<<16^w[H>>8&255]<<8^w[B&255]^u[J+1],l=w[$>>>24]<<24^w[H>>16&255]<<16^w[B>>8&255]<<8^w[O&255]^u[J+2],x=w[H>>>24]<<24^w[B>>16&255]<<16^w[O>>8&255]<<8^w[$&255]^u[J+3],S[N]=ee(c^R),S[N+1]=ee(x^y),S[N+2]=ee(l^L),S[N+3]=ee(E^U),R=j,y=V,L=z,U=X,N=N+4}return S.buffer},b}()},"./src/crypt/decrypter.ts":(C,D,o)=>{o.r(D),o.d(D,{default:()=>N});var M=o("./src/crypt/aes-crypto.ts"),I=o("./src/crypt/fast-aes-key.ts"),K=o("./src/crypt/aes-decryptor.ts"),b=o("./src/utils/logger.ts"),W=o("./src/utils/mp4-tools.ts"),F=o("./src/utils/typed-array.ts"),k=16,N=function(){function m(u,w){var A=w===void 0?{}:w,d=A.removePKCS7Padding,v=d===void 0?!0:d;if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=u.enableSoftwareAES,this.removePKCS7Padding=v,v)try{var h=self.crypto;h&&(this.subtle=h.subtle||h.webkitSubtle)}catch{}this.subtle===null&&(this.useSoftware=!0)}var p=m.prototype;return p.destroy=function(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null},p.isSync=function(){return this.useSoftware},p.flush=function(){var w=this.currentResult,A=this.remainderData;if(!w||A)return this.reset(),null;var d=new Uint8Array(w);return this.reset(),this.removePKCS7Padding?(0,K.removePadding)(d):d},p.reset=function(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)},p.decrypt=function(w,A,d){var v=this;return this.useSoftware?new Promise(function(h,g){v.softwareDecrypt(new Uint8Array(w),A,d);var P=v.flush();P?h(P.buffer):g(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(w),A,d)},p.softwareDecrypt=function(w,A,d){var v=this.currentIV,h=this.currentResult,g=this.remainderData;this.logOnce("JS AES decrypt"),g&&(w=(0,W.appendUint8Array)(g,w),this.remainderData=null);var P=this.getValidChunk(w);if(!P.length)return null;v&&(d=v);var R=this.softwareDecrypter;R||(R=this.softwareDecrypter=new K.default),R.expandKey(A);var y=h;return this.currentResult=R.decrypt(P.buffer,0,d),this.currentIV=(0,F.sliceUint8)(P,-16).buffer,y||null},p.webCryptoDecrypt=function(w,A,d){var v=this,h=this.subtle;return(this.key!==A||!this.fastAesKey)&&(this.key=A,this.fastAesKey=new I.default(h,A)),this.fastAesKey.expandKey().then(function(g){if(!h)return Promise.reject(new Error("web crypto not initialized"));v.logOnce("WebCrypto AES decrypt");var P=new M.default(h,new Uint8Array(d));return P.decrypt(w.buffer,g)}).catch(function(g){return b.logger.warn("[decrypter]: WebCrypto Error, disable WebCrypto API, "+g.name+": "+g.message),v.onWebCryptoError(w,A,d)})},p.onWebCryptoError=function(w,A,d){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(w,A,d);var v=this.flush();if(v)return v.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")},p.getValidChunk=function(w){var A=w,d=w.length-w.length%k;return d!==w.length&&(A=(0,F.sliceUint8)(w,0,d),this.remainderData=(0,F.sliceUint8)(w,d)),A},p.logOnce=function(w){this.logEnabled&&(b.logger.log("[decrypter]: "+w),this.logEnabled=!1)},m}()},"./src/crypt/fast-aes-key.ts":(C,D,o)=>{o.r(D),o.d(D,{default:()=>M});var M=function(){function I(b,W){this.subtle=void 0,this.key=void 0,this.subtle=b,this.key=W}var K=I.prototype;return K.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},I}()},"./src/demux/aacdemuxer.ts":(C,D,o)=>{o.r(D),o.d(D,{default:()=>N});var M=o("./src/demux/base-audio-demuxer.ts"),I=o("./src/demux/adts.ts"),K=o("./src/utils/logger.ts"),b=o("./src/demux/id3.ts");function W(m,p){m.prototype=Object.create(p.prototype),m.prototype.constructor=m,F(m,p)}function F(m,p){return F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(w,A){return w.__proto__=A,w},F(m,p)}var k=function(m){W(p,m);function p(w,A){var d;return d=m.call(this)||this,d.observer=void 0,d.config=void 0,d.observer=w,d.config=A,d}var u=p.prototype;return u.resetInitSegment=function(A,d,v,h){m.prototype.resetInitSegment.call(this,A,d,v,h),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:d,duration:h,inputTimeScale:9e4,dropped:0}},p.probe=function(A){if(!A)return!1;for(var d=b.getID3Data(A,0)||[],v=d.length,h=A.length;v<h;v++)if(I.probe(A,v))return K.logger.log("ADTS sync word found !"),!0;return!1},u.canParse=function(A,d){return I.canParse(A,d)},u.appendFrame=function(A,d,v){I.initTrackConfig(A,this.observer,d,v,A.manifestCodec);var h=I.appendFrame(A,d,v,this.basePTS,this.frameIndex);if(h&&h.missing===0)return h},p}(M.default);const N=k},"./src/demux/adts.ts":(C,D,o)=>{o.r(D),o.d(D,{appendFrame:()=>v,canGetFrameLength:()=>N,canParse:()=>p,getAudioConfig:()=>b,getFrameDuration:()=>A,getFullFrameLength:()=>k,getHeaderLength:()=>F,initTrackConfig:()=>w,isHeader:()=>m,isHeaderPattern:()=>W,parseFrameHeader:()=>d,probe:()=>u});var M=o("./src/utils/logger.ts"),I=o("./src/errors.ts"),K=o("./src/events.ts");function b(h,g,P,R){var y,L,U,_,S=navigator.userAgent.toLowerCase(),c=R,E=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];y=((g[P+2]&192)>>>6)+1;var l=(g[P+2]&60)>>>2;if(l>E.length-1){h.trigger(K.Events.ERROR,{type:I.ErrorTypes.MEDIA_ERROR,details:I.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+l});return}return U=(g[P+2]&1)<<2,U|=(g[P+3]&192)>>>6,M.logger.log("manifest codec:"+R+", ADTS type:"+y+", samplingIndex:"+l),/firefox/i.test(S)?l>=6?(y=5,_=new Array(4),L=l-3):(y=2,_=new Array(2),L=l):S.indexOf("android")!==-1?(y=2,_=new Array(2),L=l):(y=5,_=new Array(4),R&&(R.indexOf("mp4a.40.29")!==-1||R.indexOf("mp4a.40.5")!==-1)||!R&&l>=6?L=l-3:((R&&R.indexOf("mp4a.40.2")!==-1&&(l>=6&&U===1||/vivaldi/i.test(S))||!R&&U===1)&&(y=2,_=new Array(2)),L=l)),_[0]=y<<3,_[0]|=(l&14)>>1,_[1]|=(l&1)<<7,_[1]|=U<<3,y===5&&(_[1]|=(L&14)>>1,_[2]=(L&1)<<7,_[2]|=8,_[3]=0),{config:_,samplerate:E[l],channelCount:U,codec:"mp4a.40."+y,manifestCodec:c}}function W(h,g){return h[g]===255&&(h[g+1]&246)===240}function F(h,g){return h[g+1]&1?7:9}function k(h,g){return(h[g+3]&3)<<11|h[g+4]<<3|(h[g+5]&224)>>>5}function N(h,g){return g+5<h.length}function m(h,g){return g+1<h.length&&W(h,g)}function p(h,g){return N(h,g)&&W(h,g)&&k(h,g)<=h.length-g}function u(h,g){if(m(h,g)){var P=F(h,g);if(g+P>=h.length)return!1;var R=k(h,g);if(R<=P)return!1;var y=g+R;return y===h.length||m(h,y)}return!1}function w(h,g,P,R,y){if(!h.samplerate){var L=b(g,P,R,y);if(!L)return;h.config=L.config,h.samplerate=L.samplerate,h.channelCount=L.channelCount,h.codec=L.codec,h.manifestCodec=L.manifestCodec,M.logger.log("parsed codec:"+h.codec+", rate:"+L.samplerate+", channels:"+L.channelCount)}}function A(h){return 9216e4/h}function d(h,g){var P=F(h,g);if(g+P<=h.length){var R=k(h,g)-P;if(R>0)return{headerLength:P,frameLength:R}}}function v(h,g,P,R,y){var L=A(h.samplerate),U=R+y*L,_=d(g,P),S;if(_){var c=_.frameLength,E=_.headerLength,l=E+c,x=Math.max(0,P+l-g.length);x?(S=new Uint8Array(l-E),S.set(g.subarray(P+E,g.length),0)):S=g.subarray(P+E,P+l);var B={unit:S,pts:U};return x||h.samples.push(B),{sample:B,length:l,missing:x}}var O=g.length-P;S=new Uint8Array(O),S.set(g.subarray(P,g.length),0);var $={unit:S,pts:U};return{sample:$,length:O,missing:-1}}},"./src/demux/base-audio-demuxer.ts":(C,D,o)=>{o.r(D),o.d(D,{default:()=>m,initPTSFn:()=>N});var M=o("./src/polyfills/number.ts"),I=o("./src/demux/id3.ts"),K=o("./src/types/demuxer.ts"),b=o("./src/demux/dummy-demuxed-track.ts"),W=o("./src/utils/mp4-tools.ts"),F=o("./src/utils/typed-array.ts"),k=function(){function p(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}var u=p.prototype;return u.resetInitSegment=function(A,d,v,h){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}},u.resetTimeStamp=function(A){this.initPTS=A,this.resetContiguity()},u.resetContiguity=function(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0},u.canParse=function(A,d){return!1},u.appendFrame=function(A,d,v){},u.demux=function(A,d){this.cachedData&&(A=(0,W.appendUint8Array)(this.cachedData,A),this.cachedData=null);var v=I.getID3Data(A,0),h=v?v.length:0,g,P=this._audioTrack,R=this._id3Track,y=v?I.getTimeStamp(v):void 0,L=A.length;for((this.basePTS===null||this.frameIndex===0&&(0,M.isFiniteNumber)(y))&&(this.basePTS=N(y,d,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),v&&v.length>0&&R.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:v,type:K.MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY});h<L;){if(this.canParse(A,h)){var U=this.appendFrame(P,A,h);U?(this.frameIndex++,this.lastPTS=U.sample.pts,h+=U.length,g=h):h=L}else I.canParse(A,h)?(v=I.getID3Data(A,h),R.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:v,type:K.MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY}),h+=v.length,g=h):h++;if(h===L&&g!==L){var _=(0,F.sliceUint8)(A,g);this.cachedData?this.cachedData=(0,W.appendUint8Array)(this.cachedData,_):this.cachedData=_}}return{audioTrack:P,videoTrack:(0,b.dummyTrack)(),id3Track:R,textTrack:(0,b.dummyTrack)()}},u.demuxSampleAes=function(A,d,v){return Promise.reject(new Error("["+this+"] This demuxer does not support Sample-AES decryption"))},u.flush=function(A){var d=this.cachedData;return d&&(this.cachedData=null,this.demux(d,0)),{audioTrack:this._audioTrack,videoTrack:(0,b.dummyTrack)(),id3Track:this._id3Track,textTrack:(0,b.dummyTrack)()}},u.destroy=function(){},p}(),N=function(u,w,A){return(0,M.isFiniteNumber)(u)?u*90:w*9e4+(A||0)};const m=k},"./src/demux/chunk-cache.ts":(C,D,o)=>{o.r(D),o.d(D,{default:()=>M});var M=function(){function K(){this.chunks=[],this.dataLength=0}var b=K.prototype;return b.push=function(F){this.chunks.push(F),this.dataLength+=F.length},b.flush=function(){var F=this.chunks,k=this.dataLength,N;if(F.length)F.length===1?N=F[0]:N=I(F,k);else return new Uint8Array(0);return this.reset(),N},b.reset=function(){this.chunks.length=0,this.dataLength=0},K}();function I(K,b){for(var W=new Uint8Array(b),F=0,k=0;k<K.length;k++){var N=K[k];W.set(N,F),F+=N.length}return W}},"./src/demux/dummy-demuxed-track.ts":(C,D,o)=>{o.r(D),o.d(D,{dummyTrack:()=>M});function M(I,K){return I===void 0&&(I=""),K===void 0&&(K=9e4),{type:I,id:-1,pid:-1,inputTimeScale:K,sequenceNumber:-1,samples:[],dropped:0}}},"./src/demux/exp-golomb.ts":(C,D,o)=>{o.r(D),o.d(D,{default:()=>K});var M=o("./src/utils/logger.ts"),I=function(){function b(F){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=F,this.bytesAvailable=F.byteLength,this.word=0,this.bitsAvailable=0}var W=b.prototype;return W.loadWord=function(){var k=this.data,N=this.bytesAvailable,m=k.byteLength-N,p=new Uint8Array(4),u=Math.min(4,N);if(u===0)throw new Error("no bytes available");p.set(k.subarray(m,m+u)),this.word=new DataView(p.buffer).getUint32(0),this.bitsAvailable=u*8,this.bytesAvailable-=u},W.skipBits=function(k){var N;k=Math.min(k,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>k?(this.word<<=k,this.bitsAvailable-=k):(k-=this.bitsAvailable,N=k>>3,k-=N<<3,this.bytesAvailable-=N,this.loadWord(),this.word<<=k,this.bitsAvailable-=k)},W.readBits=function(k){var N=Math.min(this.bitsAvailable,k),m=this.word>>>32-N;if(k>32&&M.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=N,this.bitsAvailable>0)this.word<<=N;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return N=k-N,N>0&&this.bitsAvailable?m<<N|this.readBits(N):m},W.skipLZ=function(){var k;for(k=0;k<this.bitsAvailable;++k)if(this.word&2147483648>>>k)return this.word<<=k,this.bitsAvailable-=k,k;return this.loadWord(),k+this.skipLZ()},W.skipUEG=function(){this.skipBits(1+this.skipLZ())},W.skipEG=function(){this.skipBits(1+this.skipLZ())},W.readUEG=function(){var k=this.skipLZ();return this.readBits(k+1)-1},W.readEG=function(){var k=this.readUEG();return 1&k?1+k>>>1:-1*(k>>>1)},W.readBoolean=function(){return this.readBits(1)===1},W.readUByte=function(){return this.readBits(8)},W.readUShort=function(){return this.readBits(16)},W.readUInt=function(){return this.readBits(32)},W.skipScalingList=function(k){for(var N=8,m=8,p,u=0;u<k;u++)m!==0&&(p=this.readEG(),m=(N+p+256)%256),N=m===0?N:m},W.readSPS=function(){var k=0,N=0,m=0,p=0,u,w,A,d=this.readUByte.bind(this),v=this.readBits.bind(this),h=this.readUEG.bind(this),g=this.readBoolean.bind(this),P=this.skipBits.bind(this),R=this.skipEG.bind(this),y=this.skipUEG.bind(this),L=this.skipScalingList.bind(this);d();var U=d();if(v(5),P(3),d(),y(),U===100||U===110||U===122||U===244||U===44||U===83||U===86||U===118||U===128){var _=h();if(_===3&&P(1),y(),y(),P(1),g())for(w=_!==3?8:12,A=0;A<w;A++)g()&&(A<6?L(16):L(64))}y();var S=h();if(S===0)h();else if(S===1)for(P(1),R(),R(),u=h(),A=0;A<u;A++)R();y(),P(1);var c=h(),E=h(),l=v(1);l===0&&P(1),P(1),g()&&(k=h(),N=h(),m=h(),p=h());var x=[1,1];if(g()&&g()){var B=d();switch(B){case 1:x=[1,1];break;case 2:x=[12,11];break;case 3:x=[10,11];break;case 4:x=[16,11];break;case 5:x=[40,33];break;case 6:x=[24,11];break;case 7:x=[20,11];break;case 8:x=[32,11];break;case 9:x=[80,33];break;case 10:x=[18,11];break;case 11:x=[15,11];break;case 12:x=[64,33];break;case 13:x=[160,99];break;case 14:x=[4,3];break;case 15:x=[3,2];break;case 16:x=[2,1];break;case 255:{x=[d()<<8|d(),d()<<8|d()];break}}}return{width:Math.ceil((c+1)*16-k*2-N*2),height:(2-l)*(E+1)*16-(l?2:4)*(m+p),pixelRatio:x}},W.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},b}();const K=I},"./src/demux/id3.ts":(C,D,o)=>{o.r(D),o.d(D,{canParse:()=>W,decodeFrame:()=>p,getID3Data:()=>K,getID3Frames:()=>m,getTimeStamp:()=>F,isFooter:()=>I,isHeader:()=>M,isTimeStampFrame:()=>k,testables:()=>h,utf8ArrayToStr:()=>v});var M=function(y,L){return L+10<=y.length&&y[L]===73&&y[L+1]===68&&y[L+2]===51&&y[L+3]<255&&y[L+4]<255&&y[L+6]<128&&y[L+7]<128&&y[L+8]<128&&y[L+9]<128},I=function(y,L){return L+10<=y.length&&y[L]===51&&y[L+1]===68&&y[L+2]===73&&y[L+3]<255&&y[L+4]<255&&y[L+6]<128&&y[L+7]<128&&y[L+8]<128&&y[L+9]<128},K=function(y,L){for(var U=L,_=0;M(y,L);){_+=10;var S=b(y,L+6);_+=S,I(y,L+10)&&(_+=10),L+=_}if(_>0)return y.subarray(U,U+_)},b=function(y,L){var U=0;return U=(y[L]&127)<<21,U|=(y[L+1]&127)<<14,U|=(y[L+2]&127)<<7,U|=y[L+3]&127,U},W=function(y,L){return M(y,L)&&b(y,L+6)+10<=y.length-L},F=function(y){for(var L=m(y),U=0;U<L.length;U++){var _=L[U];if(k(_))return d(_)}},k=function(y){return y&&y.key==="PRIV"&&y.info==="com.apple.streaming.transportStreamTimestamp"},N=function(y){var L=String.fromCharCode(y[0],y[1],y[2],y[3]),U=b(y,4),_=10;return{type:L,size:U,data:y.subarray(_,_+U)}},m=function(y){for(var L=0,U=[];M(y,L);){var _=b(y,L+6);L+=10;for(var S=L+_;L+8<S;){var c=N(y.subarray(L)),E=p(c);E&&U.push(E),L+=c.size+10}I(y,L)&&(L+=10)}return U},p=function(y){return y.type==="PRIV"?u(y):y.type[0]==="W"?A(y):w(y)},u=function(y){if(!(y.size<2)){var L=v(y.data,!0),U=new Uint8Array(y.data.subarray(L.length+1));return{key:y.type,info:L,data:U.buffer}}},w=function(y){if(!(y.size<2)){if(y.type==="TXXX"){var L=1,U=v(y.data.subarray(L),!0);L+=U.length+1;var _=v(y.data.subarray(L));return{key:y.type,info:U,data:_}}var S=v(y.data.subarray(1));return{key:y.type,data:S}}},A=function(y){if(y.type==="WXXX"){if(y.size<2)return;var L=1,U=v(y.data.subarray(L),!0);L+=U.length+1;var _=v(y.data.subarray(L));return{key:y.type,info:U,data:_}}var S=v(y.data);return{key:y.type,data:S}},d=function(y){if(y.data.byteLength===8){var L=new Uint8Array(y.data),U=L[3]&1,_=(L[4]<<23)+(L[5]<<15)+(L[6]<<7)+L[7];return _/=45,U&&(_+=4772185884e-2),Math.round(_)}},v=function(y,L){L===void 0&&(L=!1);var U=P();if(U){var _=U.decode(y);if(L){var S=_.indexOf("\0");return S!==-1?_.substring(0,S):_}return _.replace(/\0/g,"")}for(var c=y.length,E,l,x,B="",O=0;O<c;){if(E=y[O++],E===0&&L)return B;if(E===0||E===3)continue;switch(E>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:B+=String.fromCharCode(E);break;case 12:case 13:l=y[O++],B+=String.fromCharCode((E&31)<<6|l&63);break;case 14:l=y[O++],x=y[O++],B+=String.fromCharCode((E&15)<<12|(l&63)<<6|(x&63)<<0);break}}return B},h={decodeTextFrame:w},g;function P(){return!g&&typeof self.TextDecoder<"u"&&(g=new self.TextDecoder("utf-8")),g}},"./src/demux/mp3demuxer.ts":(C,D,o)=>{o.r(D),o.d(D,{default:()=>N});var M=o("./src/demux/base-audio-demuxer.ts"),I=o("./src/demux/id3.ts"),K=o("./src/utils/logger.ts"),b=o("./src/demux/mpegaudio.ts");function W(m,p){m.prototype=Object.create(p.prototype),m.prototype.constructor=m,F(m,p)}function F(m,p){return F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(w,A){return w.__proto__=A,w},F(m,p)}var k=function(m){W(p,m);function p(){return m.apply(this,arguments)||this}var u=p.prototype;return u.resetInitSegment=function(A,d,v,h){m.prototype.resetInitSegment.call(this,A,d,v,h),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:d,duration:h,inputTimeScale:9e4,dropped:0}},p.probe=function(A){if(!A)return!1;for(var d=I.getID3Data(A,0)||[],v=d.length,h=A.length;v<h;v++)if(b.probe(A,v))return K.logger.log("MPEG Audio sync word found !"),!0;return!1},u.canParse=function(A,d){return b.canParse(A,d)},u.appendFrame=function(A,d,v){if(this.basePTS!==null)return b.appendFrame(A,d,v,this.basePTS,this.frameIndex)},p}(M.default);const N=k},"./src/demux/mp4demuxer.ts":(C,D,o)=>{o.r(D),o.d(D,{default:()=>k});var M=o("./src/polyfills/number.ts"),I=o("./src/types/demuxer.ts"),K=o("./src/utils/mp4-tools.ts"),b=o("./src/demux/dummy-demuxed-track.ts"),W=/\/emsg[-/]ID3/i,F=function(){function N(p,u){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=u}var m=N.prototype;return m.resetTimeStamp=function(){},m.resetInitSegment=function(u,w,A,d){var v=this.videoTrack=(0,b.dummyTrack)("video",1),h=this.audioTrack=(0,b.dummyTrack)("audio",1),g=this.txtTrack=(0,b.dummyTrack)("text",1);if(this.id3Track=(0,b.dummyTrack)("id3",1),this.timeOffset=0,!(!u||!u.byteLength)){var P=(0,K.parseInitSegment)(u);if(P.video){var R=P.video,y=R.id,L=R.timescale,U=R.codec;v.id=y,v.timescale=g.timescale=L,v.codec=U}if(P.audio){var _=P.audio,S=_.id,c=_.timescale,E=_.codec;h.id=S,h.timescale=c,h.codec=E}g.id=K.RemuxerTrackIdConfig.text,v.sampleDuration=0,v.duration=h.duration=d}},m.resetContiguity=function(){},N.probe=function(u){return u=u.length>16384?u.subarray(0,16384):u,(0,K.findBox)(u,["moof"]).length>0},m.demux=function(u,w){this.timeOffset=w;var A=u,d=this.videoTrack,v=this.txtTrack;if(this.config.progressive){this.remainderData&&(A=(0,K.appendUint8Array)(this.remainderData,u));var h=(0,K.segmentValidRange)(A);this.remainderData=h.remainder,d.samples=h.valid||new Uint8Array}else d.samples=A;var g=this.extractID3Track(d,w);return v.samples=(0,K.parseSamples)(w,d),{videoTrack:d,audioTrack:this.audioTrack,id3Track:g,textTrack:this.txtTrack}},m.flush=function(){var u=this.timeOffset,w=this.videoTrack,A=this.txtTrack;w.samples=this.remainderData||new Uint8Array,this.remainderData=null;var d=this.extractID3Track(w,this.timeOffset);return A.samples=(0,K.parseSamples)(u,w),{videoTrack:w,audioTrack:(0,b.dummyTrack)(),id3Track:d,textTrack:(0,b.dummyTrack)()}},m.extractID3Track=function(u,w){var A=this.id3Track;if(u.samples.length){var d=(0,K.findBox)(u.samples,["emsg"]);d&&d.forEach(function(v){var h=(0,K.parseEmsg)(v);if(W.test(h.schemeIdUri)){var g=(0,M.isFiniteNumber)(h.presentationTime)?h.presentationTime/h.timeScale:w+h.presentationTimeDelta/h.timeScale,P=h.eventDuration===4294967295?Number.POSITIVE_INFINITY:h.eventDuration/h.timeScale;P<=.001&&(P=Number.POSITIVE_INFINITY);var R=h.payload;A.samples.push({data:R,len:R.byteLength,dts:g,pts:g,type:I.MetadataSchema.emsg,duration:P})}})}return A},m.demuxSampleAes=function(u,w,A){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))},m.destroy=function(){},N}();const k=F},"./src/demux/mpegaudio.ts":(C,D,o)=>{o.r(D),o.d(D,{appendFrame:()=>F,canParse:()=>p,isHeader:()=>m,isHeaderPattern:()=>N,parseHeader:()=>k,probe:()=>u});var M=null,I=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],K=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],b=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],W=[0,1,1,4];function F(w,A,d,v,h){if(!(d+24>A.length)){var g=k(A,d);if(g&&d+g.frameLength<=A.length){var P=g.samplesPerFrame*9e4/g.sampleRate,R=v+h*P,y={unit:A.subarray(d,d+g.frameLength),pts:R,dts:R};return w.config=[],w.channelCount=g.channelCount,w.samplerate=g.sampleRate,w.samples.push(y),{sample:y,length:g.frameLength,missing:0}}}}function k(w,A){var d=w[A+1]>>3&3,v=w[A+1]>>1&3,h=w[A+2]>>4&15,g=w[A+2]>>2&3;if(d!==1&&h!==0&&h!==15&&g!==3){var P=w[A+2]>>1&1,R=w[A+3]>>6,y=d===3?3-v:v===3?3:4,L=I[y*14+h-1]*1e3,U=d===3?0:d===2?1:2,_=K[U*3+g],S=R===3?1:2,c=b[d][v],E=W[v],l=c*8*E,x=Math.floor(c*L/_+P)*E;if(M===null){var B=navigator.userAgent||"",O=B.match(/Chrome\/(\d+)/i);M=O?parseInt(O[1]):0}var $=!!M&&M<=87;return $&&v===2&&L>=224e3&&R===0&&(w[A+3]=w[A+3]|128),{sampleRate:_,channelCount:S,frameLength:x,samplesPerFrame:l}}}function N(w,A){return w[A]===255&&(w[A+1]&224)===224&&(w[A+1]&6)!==0}function m(w,A){return A+1<w.length&&N(w,A)}function p(w,A){var d=4;return N(w,A)&&d<=w.length-A}function u(w,A){if(A+1<w.length&&N(w,A)){var d=4,v=k(w,A),h=d;v!=null&&v.frameLength&&(h=v.frameLength);var g=A+h;return g===w.length||m(w,g)}return!1}},"./src/demux/sample-aes.ts":(C,D,o)=>{o.r(D),o.d(D,{default:()=>b});var M=o("./src/crypt/decrypter.ts"),I=o("./src/utils/mp4-tools.ts"),K=function(){function W(k,N,m){this.keyData=void 0,this.decrypter=void 0,this.keyData=m,this.decrypter=new M.default(N,{removePKCS7Padding:!1})}var F=W.prototype;return F.decryptBuffer=function(N){return this.decrypter.decrypt(N,this.keyData.key.buffer,this.keyData.iv.buffer)},F.decryptAacSample=function(N,m,p){var u=this,w=N[m].unit;if(!(w.length<=16)){var A=w.subarray(16,w.length-w.length%16),d=A.buffer.slice(A.byteOffset,A.byteOffset+A.length);this.decryptBuffer(d).then(function(v){var h=new Uint8Array(v);w.set(h,16),u.decrypter.isSync()||u.decryptAacSamples(N,m+1,p)})}},F.decryptAacSamples=function(N,m,p){for(;;m++){if(m>=N.length){p();return}if(!(N[m].unit.length<32)&&(this.decryptAacSample(N,m,p),!this.decrypter.isSync()))return}},F.getAvcEncryptedData=function(N){for(var m=Math.floor((N.length-48)/160)*16+16,p=new Int8Array(m),u=0,w=32;w<N.length-16;w+=160,u+=16)p.set(N.subarray(w,w+16),u);return p},F.getAvcDecryptedUnit=function(N,m){for(var p=new Uint8Array(m),u=0,w=32;w<N.length-16;w+=160,u+=16)N.set(p.subarray(u,u+16),w);return N},F.decryptAvcSample=function(N,m,p,u,w){var A=this,d=(0,I.discardEPB)(w.data),v=this.getAvcEncryptedData(d);this.decryptBuffer(v.buffer).then(function(h){w.data=A.getAvcDecryptedUnit(d,h),A.decrypter.isSync()||A.decryptAvcSamples(N,m,p+1,u)})},F.decryptAvcSamples=function(N,m,p,u){if(N instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;m++,p=0){if(m>=N.length){u();return}for(var w=N[m].units;!(p>=w.length);p++){var A=w[p];if(!(A.data.length<=48||A.type!==1&&A.type!==5)&&(this.decryptAvcSample(N,m,p,u,A),!this.decrypter.isSync()))return}}},W}();const b=K},"./src/demux/transmuxer-interface.ts":(C,D,o)=>{o.r(D),o.d(D,{default:()=>m});var M=o("./src/demux/webworkify-webpack.js"),I=o("./src/events.ts"),K=o("./src/demux/transmuxer.ts"),b=o("./src/utils/logger.ts"),W=o("./src/errors.ts"),F=o("./src/utils/mediasource-helper.ts"),k=o("./node_modules/eventemitter3/index.js"),N=(0,F.getMediaSource)()||{isTypeSupported:function(){return!1}},m=function(){function p(w,A,d,v){var h=this;this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.worker=void 0,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;var g=w.config;this.hls=w,this.id=A,this.useWorker=!!g.enableWorker,this.onTransmuxComplete=d,this.onFlush=v;var P=function(_,S){S=S||{},S.frag=h.frag,S.id=h.id,h.hls.trigger(_,S)};this.observer=new k.EventEmitter,this.observer.on(I.Events.FRAG_DECRYPTED,P),this.observer.on(I.Events.ERROR,P);var R={mp4:N.isTypeSupported("video/mp4"),mpeg:N.isTypeSupported("audio/mpeg"),mp3:N.isTypeSupported('audio/mp4; codecs="mp3"')},y=navigator.vendor;if(this.useWorker&&typeof Worker<"u"){b.logger.log("demuxing in webworker");var L;try{L=this.worker=(0,M.default)("./src/demux/transmuxer-worker.ts"),this.onwmsg=this.onWorkerMessage.bind(this),L.addEventListener("message",this.onwmsg),L.onerror=function(U){h.useWorker=!1,b.logger.warn("Exception in webworker, fallback to inline"),h.hls.trigger(I.Events.ERROR,{type:W.ErrorTypes.OTHER_ERROR,details:W.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:new Error(U.message+"  ("+U.filename+":"+U.lineno+")")})},L.postMessage({cmd:"init",typeSupported:R,vendor:y,id:A,config:JSON.stringify(g)})}catch(U){b.logger.warn("Error in worker:",U),b.logger.error("Error while initializing DemuxerWorker, fallback to inline"),L&&self.URL.revokeObjectURL(L.objectURL),this.transmuxer=new K.default(this.observer,R,g,y,A),this.worker=null}}else this.transmuxer=new K.default(this.observer,R,g,y,A)}var u=p.prototype;return u.destroy=function(){var A=this.worker;if(A)A.removeEventListener("message",this.onwmsg),A.terminate(),this.worker=null,this.onwmsg=void 0;else{var d=this.transmuxer;d&&(d.destroy(),this.transmuxer=null)}var v=this.observer;v&&v.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null},u.push=function(A,d,v,h,g,P,R,y,L,U){var _,S,c=this;L.transmuxing.start=self.performance.now();var E=this.transmuxer,l=this.worker,x=P?P.start:g.start,B=g.decryptdata,O=this.frag,$=!(O&&g.cc===O.cc),H=!(O&&L.level===O.level),j=O?L.sn-O.sn:-1,V=this.part?L.part-this.part.index:-1,z=j===0&&L.id>1&&L.id===(O==null?void 0:O.stats.chunkCount),X=!H&&(j===1||j===0&&(V===1||z&&V<=0)),J=self.performance.now();(H||j||g.stats.parsing.start===0)&&(g.stats.parsing.start=J),P&&(V||!X)&&(P.stats.parsing.start=J);var q=!(O&&((_=g.initSegment)===null||_===void 0?void 0:_.url)===((S=O.initSegment)===null||S===void 0?void 0:S.url)),ee=new K.TransmuxState($,X,y,H,x,q);if(!X||$||q){b.logger.log("[transmuxer-interface, "+g.type+"]: Starting new transmux session for sn: "+L.sn+" p: "+L.part+" level: "+L.level+" id: "+L.id+`
        discontinuity: `+$+`
        trackSwitch: `+H+`
        contiguous: `+X+`
        accurateTimeOffset: `+y+`
        timeOffset: `+x+`
        initSegmentChange: `+q);var ne=new K.TransmuxConfig(v,h,d,R,U);this.configureTransmuxer(ne)}if(this.frag=g,this.part=P,l)l.postMessage({cmd:"demux",data:A,decryptdata:B,chunkMeta:L,state:ee},A instanceof ArrayBuffer?[A]:[]);else if(E){var ae=E.push(A,B,L,ee);(0,K.isPromise)(ae)?(E.async=!0,ae.then(function(fe){c.handleTransmuxComplete(fe)}).catch(function(fe){c.transmuxerError(fe,L,"transmuxer-interface push error")})):(E.async=!1,this.handleTransmuxComplete(ae))}},u.flush=function(A){var d=this;A.transmuxing.start=self.performance.now();var v=this.transmuxer,h=this.worker;if(h)h.postMessage({cmd:"flush",chunkMeta:A});else if(v){var g=v.flush(A),P=(0,K.isPromise)(g);P||v.async?((0,K.isPromise)(g)||(g=Promise.resolve(g)),g.then(function(R){d.handleFlushResult(R,A)}).catch(function(R){d.transmuxerError(R,A,"transmuxer-interface flush error")})):this.handleFlushResult(g,A)}},u.transmuxerError=function(A,d,v){this.hls&&this.hls.trigger(I.Events.ERROR,{type:W.ErrorTypes.MEDIA_ERROR,details:W.ErrorDetails.FRAG_PARSING_ERROR,chunkMeta:d,fatal:!1,error:A,err:A,reason:v})},u.handleFlushResult=function(A,d){var v=this;A.forEach(function(h){v.handleTransmuxComplete(h)}),this.onFlush(d)},u.onWorkerMessage=function(A){var d=A.data,v=this.hls;switch(d.event){case"init":{self.URL.revokeObjectURL(this.worker.objectURL);break}case"transmuxComplete":{this.handleTransmuxComplete(d.data);break}case"flush":{this.onFlush(d.data);break}case"workerLog":b.logger[d.data.logType]&&b.logger[d.data.logType](d.data.message);break;default:{d.data=d.data||{},d.data.frag=this.frag,d.data.id=this.id,v.trigger(d.event,d.data);break}}},u.configureTransmuxer=function(A){var d=this.worker,v=this.transmuxer;d?d.postMessage({cmd:"configure",config:A}):v&&v.configure(A)},u.handleTransmuxComplete=function(A){A.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(A)},p}()},"./src/demux/transmuxer-worker.ts":(C,D,o)=>{o.r(D),o.d(D,{default:()=>F});var M=o("./src/demux/transmuxer.ts"),I=o("./src/events.ts"),K=o("./src/utils/logger.ts"),b=o("./node_modules/eventemitter3/index.js"),W=o("./src/errors.ts");function F(u){var w=new b.EventEmitter,A=function(h,g){u.postMessage({event:h,data:g})};w.on(I.Events.FRAG_DECRYPTED,A),w.on(I.Events.ERROR,A);var d=function(){var h=function(R){var y=function(U){A("workerLog",{logType:R,message:U})};K.logger[R]=y};for(var g in K.logger)h(g)};u.addEventListener("message",function(v){var h=v.data;switch(h.cmd){case"init":{var g=JSON.parse(h.config);u.transmuxer=new M.default(w,h.typeSupported,g,h.vendor,h.id),(0,K.enableLogs)(g.debug,h.id),d(),A("init",null);break}case"configure":{u.transmuxer.configure(h.config);break}case"demux":{var P=u.transmuxer.push(h.data,h.decryptdata,h.chunkMeta,h.state);(0,M.isPromise)(P)?(u.transmuxer.async=!0,P.then(function(U){k(u,U)}).catch(function(U){A(I.Events.ERROR,{type:W.ErrorTypes.MEDIA_ERROR,details:W.ErrorDetails.FRAG_PARSING_ERROR,chunkMeta:h.chunkMeta,fatal:!1,error:U,err:U,reason:"transmuxer-worker push error"})})):(u.transmuxer.async=!1,k(u,P));break}case"flush":{var R=h.chunkMeta,y=u.transmuxer.flush(R),L=(0,M.isPromise)(y);L||u.transmuxer.async?((0,M.isPromise)(y)||(y=Promise.resolve(y)),y.then(function(U){m(u,U,R)}).catch(function(U){A(I.Events.ERROR,{type:W.ErrorTypes.MEDIA_ERROR,details:W.ErrorDetails.FRAG_PARSING_ERROR,chunkMeta:h.chunkMeta,fatal:!1,error:U,err:U,reason:"transmuxer-worker flush error"})})):m(u,y,R);break}}})}function k(u,w){if(p(w.remuxResult))return!1;var A=[],d=w.remuxResult,v=d.audio,h=d.video;return v&&N(A,v),h&&N(A,h),u.postMessage({event:"transmuxComplete",data:w},A),!0}function N(u,w){w.data1&&u.push(w.data1.buffer),w.data2&&u.push(w.data2.buffer)}function m(u,w,A){var d=w.reduce(function(v,h){return k(u,h)||v},!1);d||u.postMessage({event:"transmuxComplete",data:w[0]}),u.postMessage({event:"flush",data:A})}function p(u){return!u.audio&&!u.video&&!u.text&&!u.id3&&!u.initSegment}},"./src/demux/transmuxer.ts":(C,D,o)=>{o.r(D),o.d(D,{TransmuxConfig:()=>g,TransmuxState:()=>P,default:()=>A,isPromise:()=>h});var M=o("./src/events.ts"),I=o("./src/errors.ts"),K=o("./src/crypt/decrypter.ts"),b=o("./src/demux/aacdemuxer.ts"),W=o("./src/demux/mp4demuxer.ts"),F=o("./src/demux/tsdemuxer.ts"),k=o("./src/demux/mp3demuxer.ts"),N=o("./src/remux/mp4-remuxer.ts"),m=o("./src/remux/passthrough-remuxer.ts"),p=o("./src/utils/logger.ts"),u;try{u=self.performance.now.bind(self.performance)}catch{p.logger.debug("Unable to use Performance API on this environment"),u=self.Date.now}var w=[{demux:W.default,remux:m.default},{demux:F.default,remux:N.default},{demux:b.default,remux:N.default},{demux:k.default,remux:N.default}],A=function(){function R(L,U,_,S,c){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=L,this.typeSupported=U,this.config=_,this.vendor=S,this.id=c}var y=R.prototype;return y.configure=function(U){this.transmuxConfig=U,this.decrypter&&this.decrypter.reset()},y.push=function(U,_,S,c){var E=this,l=S.transmuxing;l.executeStart=u();var x=new Uint8Array(U),B=this.currentTransmuxState,O=this.transmuxConfig;c&&(this.currentTransmuxState=c);var $=c||B,H=$.contiguous,j=$.discontinuity,V=$.trackSwitch,z=$.accurateTimeOffset,X=$.timeOffset,J=$.initSegmentChange,q=O.audioCodec,ee=O.videoCodec,ne=O.defaultInitPts,ae=O.duration,fe=O.initSegmentData,ue=d(x,_);if(ue&&ue.method==="AES-128"){var ce=this.getDecrypter();if(ce.isSync()){var ye=ce.softwareDecrypt(x,ue.key.buffer,ue.iv.buffer),Pe=S.part>-1;if(Pe&&(ye=ce.flush()),!ye)return l.executeEnd=u(),v(S);x=new Uint8Array(ye)}else return this.decryptionPromise=ce.webCryptoDecrypt(x,ue.key.buffer,ue.iv.buffer).then(function(be){var Ue=E.push(be,null,S);return E.decryptionPromise=null,Ue}),this.decryptionPromise}var Te=this.needsProbing(j,V);Te&&this.configureTransmuxer(x),(j||V||J||Te)&&this.resetInitSegment(fe,q,ee,ae,_),(j||J||Te)&&this.resetInitialTimestamp(ne),H||this.resetContiguity();var ge=this.transmux(x,ue,X,z,S),De=this.currentTransmuxState;return De.contiguous=!0,De.discontinuity=!1,De.trackSwitch=!1,l.executeEnd=u(),ge},y.flush=function(U){var _=this,S=U.transmuxing;S.executeStart=u();var c=this.decrypter,E=this.currentTransmuxState,l=this.decryptionPromise;if(l)return l.then(function(){return _.flush(U)});var x=[],B=E.timeOffset;if(c){var O=c.flush();O&&x.push(this.push(O,null,U))}var $=this.demuxer,H=this.remuxer;if(!$||!H)return this.observer.emit(M.Events.ERROR,M.Events.ERROR,{type:I.ErrorTypes.MEDIA_ERROR,details:I.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"}),S.executeEnd=u(),[v(U)];var j=$.flush(B);return h(j)?j.then(function(V){return _.flushRemux(x,V,U),x}):(this.flushRemux(x,j,U),x)},y.flushRemux=function(U,_,S){var c=_.audioTrack,E=_.videoTrack,l=_.id3Track,x=_.textTrack,B=this.currentTransmuxState,O=B.accurateTimeOffset,$=B.timeOffset;p.logger.log("[transmuxer.ts]: Flushed fragment "+S.sn+(S.part>-1?" p: "+S.part:"")+" of level "+S.level);var H=this.remuxer.remux(c,E,l,x,$,O,!0,this.id);U.push({remuxResult:H,chunkMeta:S}),S.transmuxing.executeEnd=u()},y.resetInitialTimestamp=function(U){var _=this.demuxer,S=this.remuxer;!_||!S||(_.resetTimeStamp(U),S.resetTimeStamp(U))},y.resetContiguity=function(){var U=this.demuxer,_=this.remuxer;!U||!_||(U.resetContiguity(),_.resetNextTimestamp())},y.resetInitSegment=function(U,_,S,c,E){var l=this.demuxer,x=this.remuxer;!l||!x||(l.resetInitSegment(U,_,S,c),x.resetInitSegment(U,_,S,E))},y.destroy=function(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)},y.transmux=function(U,_,S,c,E){var l;return _&&_.method==="SAMPLE-AES"?l=this.transmuxSampleAes(U,_,S,c,E):l=this.transmuxUnencrypted(U,S,c,E),l},y.transmuxUnencrypted=function(U,_,S,c){var E=this.demuxer.demux(U,_,!1,!this.config.progressive),l=E.audioTrack,x=E.videoTrack,B=E.id3Track,O=E.textTrack,$=this.remuxer.remux(l,x,B,O,_,S,!1,this.id);return{remuxResult:$,chunkMeta:c}},y.transmuxSampleAes=function(U,_,S,c,E){var l=this;return this.demuxer.demuxSampleAes(U,_,S).then(function(x){var B=l.remuxer.remux(x.audioTrack,x.videoTrack,x.id3Track,x.textTrack,S,c,!1,l.id);return{remuxResult:B,chunkMeta:E}})},y.configureTransmuxer=function(U){for(var _=this.config,S=this.observer,c=this.typeSupported,E=this.vendor,l,x=0,B=w.length;x<B;x++)if(w[x].demux.probe(U)){l=w[x];break}l||(p.logger.warn("Failed to find demuxer by probing frag, treating as mp4 passthrough"),l={demux:W.default,remux:m.default});var O=this.demuxer,$=this.remuxer,H=l.remux,j=l.demux;(!$||!($ instanceof H))&&(this.remuxer=new H(S,_,c,E)),(!O||!(O instanceof j))&&(this.demuxer=new j(S,_,c),this.probe=j.probe)},y.needsProbing=function(U,_){return!this.demuxer||!this.remuxer||U||_},y.getDecrypter=function(){var U=this.decrypter;return U||(U=this.decrypter=new K.default(this.config)),U},R}();function d(R,y){var L=null;return R.byteLength>0&&y!=null&&y.key!=null&&y.iv!==null&&y.method!=null&&(L=y),L}var v=function(y){return{remuxResult:{},chunkMeta:y}};function h(R){return"then"in R&&R.then instanceof Function}var g=function(y,L,U,_,S){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=y,this.videoCodec=L,this.initSegmentData=U,this.duration=_,this.defaultInitPts=S},P=function(y,L,U,_,S,c){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=y,this.contiguous=L,this.accurateTimeOffset=U,this.trackSwitch=_,this.timeOffset=S,this.initSegmentChange=c}},"./src/demux/tsdemuxer.ts":(C,D,o)=>{o.r(D),o.d(D,{default:()=>R});var M=o("./src/demux/adts.ts"),I=o("./src/demux/mpegaudio.ts"),K=o("./src/demux/exp-golomb.ts"),b=o("./src/demux/sample-aes.ts"),W=o("./src/events.ts"),F=o("./src/utils/mp4-tools.ts"),k=o("./src/utils/logger.ts"),N=o("./src/errors.ts"),m=o("./src/types/demuxer.ts");function p(){return p=Object.assign?Object.assign.bind():function(y){for(var L=1;L<arguments.length;L++){var U=arguments[L];for(var _ in U)Object.prototype.hasOwnProperty.call(U,_)&&(y[_]=U[_])}return y},p.apply(this,arguments)}var u=188,w=function(){function y(U,_,S){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._avcTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.observer=U,this.config=_,this.typeSupported=S}y.probe=function(_){var S=y.syncOffset(_);return S>0&&k.logger.warn("MPEG2-TS detected but first sync word found @ offset "+S),S!==-1},y.syncOffset=function(_){for(var S=_.length,c=Math.min(u*5,_.length-u)+1,E=0;E<c;){for(var l=!1,x=E;x<S&&_[x]===71;x+=u)if(!l&&d(_,x)===0&&(l=!0),l&&x+u>c)return E;E++}return-1},y.createTrack=function(_,S){return{container:_==="video"||_==="audio"?"video/mp2t":void 0,type:_,id:F.RemuxerTrackIdConfig[_],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:_==="audio"?S:void 0}};var L=y.prototype;return L.resetInitSegment=function(_,S,c,E){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=y.createTrack("video"),this._audioTrack=y.createTrack("audio",E),this._id3Track=y.createTrack("id3"),this._txtTrack=y.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.audioCodec=S,this.videoCodec=c,this._duration=E},L.resetTimeStamp=function(){},L.resetContiguity=function(){var _=this._audioTrack,S=this._avcTrack,c=this._id3Track;_&&(_.pesData=null),S&&(S.pesData=null),c&&(c.pesData=null),this.aacOverFlow=null,this.avcSample=null,this.remainderData=null},L.demux=function(_,S,c,E){c===void 0&&(c=!1),E===void 0&&(E=!1),c||(this.sampleAes=null);var l,x=this._avcTrack,B=this._audioTrack,O=this._id3Track,$=this._txtTrack,H=x.pid,j=x.pesData,V=B.pid,z=O.pid,X=B.pesData,J=O.pesData,q=null,ee=this.pmtParsed,ne=this._pmtId,ae=_.length;if(this.remainderData&&(_=(0,F.appendUint8Array)(this.remainderData,_),ae=_.length,this.remainderData=null),ae<u&&!E)return this.remainderData=_,{audioTrack:B,videoTrack:x,id3Track:O,textTrack:$};var fe=Math.max(0,y.syncOffset(_));ae-=(ae-fe)%u,ae<_.byteLength&&!E&&(this.remainderData=new Uint8Array(_.buffer,ae,_.buffer.byteLength-ae));for(var ue=0,ce=fe;ce<ae;ce+=u)if(_[ce]===71){var ye=!!(_[ce+1]&64),Pe=d(_,ce),Te=(_[ce+3]&48)>>4,ge=void 0;if(Te>1){if(ge=ce+5+_[ce+4],ge===ce+u)continue}else ge=ce+4;switch(Pe){case H:ye&&(j&&(l=g(j))&&this.parseAVCPES(x,$,l,!1),j={data:[],size:0}),j&&(j.data.push(_.subarray(ge,ce+u)),j.size+=ce+u-ge);break;case V:if(ye){if(X&&(l=g(X)))switch(B.segmentCodec){case"aac":this.parseAACPES(B,l);break;case"mp3":this.parseMPEGPES(B,l);break}X={data:[],size:0}}X&&(X.data.push(_.subarray(ge,ce+u)),X.size+=ce+u-ge);break;case z:ye&&(J&&(l=g(J))&&this.parseID3PES(O,l),J={data:[],size:0}),J&&(J.data.push(_.subarray(ge,ce+u)),J.size+=ce+u-ge);break;case 0:ye&&(ge+=_[ge]+1),ne=this._pmtId=v(_,ge);break;case ne:{ye&&(ge+=_[ge]+1);var De=h(_,ge,this.typeSupported,c);H=De.avc,H>0&&(x.pid=H),V=De.audio,V>0&&(B.pid=V,B.segmentCodec=De.segmentCodec),z=De.id3,z>0&&(O.pid=z),q!==null&&!ee&&(k.logger.warn("MPEG-TS PMT found at "+ce+" after unknown PID '"+q+"'. Backtracking to sync byte @"+fe+" to parse all TS packets."),q=null,ce=fe-188),ee=this.pmtParsed=!0;break}case 17:case 8191:break;default:q=Pe;break}}else ue++;ue>0&&this.observer.emit(W.Events.ERROR,W.Events.ERROR,{type:N.ErrorTypes.MEDIA_ERROR,details:N.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"Found "+ue+" TS packet/s that do not start with 0x47"}),x.pesData=j,B.pesData=X,O.pesData=J;var be={audioTrack:B,videoTrack:x,id3Track:O,textTrack:$};return E&&this.extractRemainingSamples(be),be},L.flush=function(){var _=this.remainderData;this.remainderData=null;var S;return _?S=this.demux(_,-1,!1,!0):S={videoTrack:this._avcTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(S),this.sampleAes?this.decrypt(S,this.sampleAes):S},L.extractRemainingSamples=function(_){var S=_.audioTrack,c=_.videoTrack,E=_.id3Track,l=_.textTrack,x=c.pesData,B=S.pesData,O=E.pesData,$;if(x&&($=g(x))?(this.parseAVCPES(c,l,$,!0),c.pesData=null):c.pesData=x,B&&($=g(B))){switch(S.segmentCodec){case"aac":this.parseAACPES(S,$);break;case"mp3":this.parseMPEGPES(S,$);break}S.pesData=null}else B!=null&&B.size&&k.logger.log("last AAC PES packet truncated,might overlap between fragments"),S.pesData=B;O&&($=g(O))?(this.parseID3PES(E,$),E.pesData=null):E.pesData=O},L.demuxSampleAes=function(_,S,c){var E=this.demux(_,c,!0,!this.config.progressive),l=this.sampleAes=new b.default(this.observer,this.config,S);return this.decrypt(E,l)},L.decrypt=function(_,S){return new Promise(function(c){var E=_.audioTrack,l=_.videoTrack;E.samples&&E.segmentCodec==="aac"?S.decryptAacSamples(E.samples,0,function(){l.samples?S.decryptAvcSamples(l.samples,0,0,function(){c(_)}):c(_)}):l.samples&&S.decryptAvcSamples(l.samples,0,0,function(){c(_)})})},L.destroy=function(){this._duration=0},L.parseAVCPES=function(_,S,c,E){var l=this,x=this.parseAVCNALu(_,c.data),B=this.avcSample,O,$=!1;c.data=null,B&&x.length&&!_.audFound&&(P(B,_),B=this.avcSample=A(!1,c.pts,c.dts,"")),x.forEach(function(H){switch(H.type){case 1:{O=!0,B||(B=l.avcSample=A(!0,c.pts,c.dts,"")),B.frame=!0;var j=H.data;if($&&j.length>4){var V=new K.default(j).readSliceType();(V===2||V===4||V===7||V===9)&&(B.key=!0)}break}case 5:O=!0,B||(B=l.avcSample=A(!0,c.pts,c.dts,"")),B.key=!0,B.frame=!0;break;case 6:{O=!0,(0,F.parseSEIMessageFromNALu)(H.data,1,c.pts,S.samples);break}case 7:if(O=!0,$=!0,!_.sps){var z=new K.default(H.data),X=z.readSPS();_.width=X.width,_.height=X.height,_.pixelRatio=X.pixelRatio,_.sps=[H.data],_.duration=l._duration;for(var J=H.data.subarray(1,4),q="avc1.",ee=0;ee<3;ee++){var ne=J[ee].toString(16);ne.length<2&&(ne="0"+ne),q+=ne}_.codec=q}break;case 8:O=!0,_.pps||(_.pps=[H.data]);break;case 9:O=!1,_.audFound=!0,B&&P(B,_),B=l.avcSample=A(!1,c.pts,c.dts,"");break;case 12:O=!0;break;default:O=!1,B&&(B.debug+="unknown NAL "+H.type+" ");break}if(B&&O){var ae=B.units;ae.push(H)}}),E&&B&&(P(B,_),this.avcSample=null)},L.getLastNalUnit=function(_){var S,c=this.avcSample,E;if((!c||c.units.length===0)&&(c=_[_.length-1]),(S=c)!==null&&S!==void 0&&S.units){var l=c.units;E=l[l.length-1]}return E},L.parseAVCNALu=function(_,S){var c=S.byteLength,E=_.naluState||0,l=E,x=[],B=0,O,$,H,j=-1,V=0;for(E===-1&&(j=0,V=S[0]&31,E=0,B=1);B<c;){if(O=S[B++],!E){E=O?0:1;continue}if(E===1){E=O?0:2;continue}if(!O)E=3;else if(O===1){if(j>=0){var z={data:S.subarray(j,B-E-1),type:V};x.push(z)}else{var X=this.getLastNalUnit(_.samples);if(X&&(l&&B<=4-l&&X.state&&(X.data=X.data.subarray(0,X.data.byteLength-l)),$=B-E-1,$>0)){var J=new Uint8Array(X.data.byteLength+$);J.set(X.data,0),J.set(S.subarray(0,$),X.data.byteLength),X.data=J,X.state=0}}B<c?(H=S[B]&31,j=B,V=H,E=0):E=-1}else E=0}if(j>=0&&E>=0){var q={data:S.subarray(j,c),type:V,state:E};x.push(q)}if(x.length===0){var ee=this.getLastNalUnit(_.samples);if(ee){var ne=new Uint8Array(ee.data.byteLength+S.byteLength);ne.set(ee.data,0),ne.set(S,ee.data.byteLength),ee.data=ne}}return _.naluState=E,x},L.parseAACPES=function(_,S){var c=0,E=this.aacOverFlow,l=S.data;if(E){this.aacOverFlow=null;var x=E.missing,B=E.sample.unit.byteLength;if(x===-1){var O=new Uint8Array(B+l.byteLength);O.set(E.sample.unit,0),O.set(l,B),l=O}else{var $=B-x;E.sample.unit.set(l.subarray(0,x),$),_.samples.push(E.sample),c=E.missing}}var H,j;for(H=c,j=l.length;H<j-1&&!M.isHeader(l,H);H++);if(H!==c){var V,z;if(H<j-1?(V="AAC PES did not start with ADTS header,offset:"+H,z=!1):(V="no ADTS header found in AAC PES",z=!0),k.logger.warn("parsing error:"+V),this.observer.emit(W.Events.ERROR,W.Events.ERROR,{type:N.ErrorTypes.MEDIA_ERROR,details:N.ErrorDetails.FRAG_PARSING_ERROR,fatal:z,reason:V}),z)return}M.initTrackConfig(_,this.observer,l,H,this.audioCodec);var X;if(S.pts!==void 0)X=S.pts;else if(E){var J=M.getFrameDuration(_.samplerate);X=E.sample.pts+J}else{k.logger.warn("[tsdemuxer]: AAC PES unknown PTS");return}for(var q=0,ee;H<j;)if(ee=M.appendFrame(_,l,H,X,q),H+=ee.length,ee.missing){this.aacOverFlow=ee;break}else for(q++;H<j-1&&!M.isHeader(l,H);H++);},L.parseMPEGPES=function(_,S){var c=S.data,E=c.length,l=0,x=0,B=S.pts;if(B===void 0){k.logger.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;x<E;)if(I.isHeader(c,x)){var O=I.appendFrame(_,c,x,B,l);if(O)x+=O.length,l++;else break}else x++},L.parseID3PES=function(_,S){if(S.pts===void 0){k.logger.warn("[tsdemuxer]: ID3 PES unknown PTS");return}var c=p({},S,{type:this._avcTrack?m.MetadataSchema.emsg:m.MetadataSchema.audioId3,duration:Number.POSITIVE_INFINITY});_.samples.push(c)},y}();function A(y,L,U,_){return{key:y,frame:!1,pts:L,dts:U,units:[],debug:_,length:0}}function d(y,L){return((y[L+1]&31)<<8)+y[L+2]}function v(y,L){return(y[L+10]&31)<<8|y[L+11]}function h(y,L,U,_){var S={audio:-1,avc:-1,id3:-1,segmentCodec:"aac"},c=(y[L+1]&15)<<8|y[L+2],E=L+3+c-4,l=(y[L+10]&15)<<8|y[L+11];for(L+=12+l;L<E;){var x=d(y,L);switch(y[L]){case 207:if(!_){k.logger.log("ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:S.audio===-1&&(S.audio=x);break;case 21:S.id3===-1&&(S.id3=x);break;case 219:if(!_){k.logger.log("H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:S.avc===-1&&(S.avc=x);break;case 3:case 4:U.mpeg!==!0&&U.mp3!==!0?k.logger.log("MPEG audio found, not supported in this browser"):S.audio===-1&&(S.audio=x,S.segmentCodec="mp3");break;case 36:k.logger.warn("Unsupported HEVC stream type found");break}L+=((y[L+3]&15)<<8|y[L+4])+5}return S}function g(y){var L=0,U,_,S,c,E,l=y.data;if(!y||y.size===0)return null;for(;l[0].length<19&&l.length>1;){var x=new Uint8Array(l[0].length+l[1].length);x.set(l[0]),x.set(l[1],l[0].length),l[0]=x,l.splice(1,1)}U=l[0];var B=(U[0]<<16)+(U[1]<<8)+U[2];if(B===1){if(_=(U[4]<<8)+U[5],_&&_>y.size-6)return null;var O=U[7];O&192&&(c=(U[9]&14)*536870912+(U[10]&255)*4194304+(U[11]&254)*16384+(U[12]&255)*128+(U[13]&254)/2,O&64?(E=(U[14]&14)*536870912+(U[15]&255)*4194304+(U[16]&254)*16384+(U[17]&255)*128+(U[18]&254)/2,c-E>54e5&&(k.logger.warn(Math.round((c-E)/9e4)+"s delta between PTS and DTS, align them"),c=E)):E=c),S=U[8];var $=S+9;if(y.size<=$)return null;y.size-=$;for(var H=new Uint8Array(y.size),j=0,V=l.length;j<V;j++){U=l[j];var z=U.byteLength;if($)if($>z){$-=z;continue}else U=U.subarray($),z-=$,$=0;H.set(U,L),L+=z}return _&&(_-=S+3),{data:H,pts:c,dts:E,len:_}}return null}function P(y,L){if(y.units.length&&y.frame){if(y.pts===void 0){var U=L.samples,_=U.length;if(_){var S=U[_-1];y.pts=S.pts,y.dts=S.dts}else{L.dropped++;return}}L.samples.push(y)}y.debug.length&&k.logger.log(y.pts+"/"+y.dts+":"+y.debug)}const R=w},"./src/demux/webworkify-webpack.js":(C,D,o)=>{o.r(D),o.d(D,{default:()=>u});var M=function(){var A=ENTRY_MODULE,d={},v=function g(P){var R=d[P];if(R!==void 0)return R.exports;var y=d[P]={exports:{}};return A[P].call(y.exports,y,y.exports,g),y.exports};v.m=A,function(){v.n=function(g){var P=g&&g.__esModule?function(){return g.default}:function(){return g};return v.d(P,{a:P}),P}}(),function(){v.d=function(g,P){for(var R in P)v.o(P,R)&&!v.o(g,R)&&Object.defineProperty(g,R,{enumerable:!0,get:P[R]})}}(),function(){v.o=function(g,P){return Object.prototype.hasOwnProperty.call(g,P)}}(),function(){v.r=function(g){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(g,"__esModule",{value:!0})}}();var h=v(ENTRY_MODULE);return h.default||h},I=M.toString().split("ENTRY_MODULE"),K="[\\.|\\-|\\+|\\w|/|@]+",b="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+K+").*?\\)";function W(w){return(w+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function F(w){return!isNaN(1*w)}function k(w,A,d){var v={};v[d]=[];var h=A.toString().replace(/^"[^"]+"/,"function"),g=h.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/)||h.match(/^\(\w+,\s*\w+,\s*(\w+)\)\s?\=\s?\>/);if(!g)return v;for(var P=g[1],R=new RegExp("(\\\\n|\\W)"+W(P)+b,"g"),y;y=R.exec(h);)y[3]!=="dll-reference"&&v[d].push(y[3]);for(R=new RegExp("\\("+W(P)+'\\("(dll-reference\\s('+K+'))"\\)\\)'+b,"g");y=R.exec(h);)w[y[2]]||(v[d].push(y[1]),w[y[2]]=o(y[1]).m),v[y[2]]=v[y[2]]||[],v[y[2]].push(y[4]);for(var L=Object.keys(v),U=0;U<L.length;U++)for(var _=0;_<v[L[U]].length;_++)F(v[L[U]][_])&&(v[L[U]][_]=1*v[L[U]][_]);return v}function N(w){var A=Object.keys(w);return A.reduce(function(d,v){return d||w[v].length>0},!1)}function m(w,A){for(var d={main:[A]},v={main:[]},h={main:{}};N(d);)for(var g=Object.keys(d),P=0;P<g.length;P++){var R=g[P],y=d[R],L=y.pop();if(h[R]=h[R]||{},!(h[R][L]||!w[R][L])){h[R][L]=!0,v[R]=v[R]||[],v[R].push(L);for(var U=k(w,w[R][L],R),_=Object.keys(U),S=0;S<_.length;S++)d[_[S]]=d[_[S]]||[],d[_[S]]=d[_[S]].concat(U[_[S]])}}return v}function p(w,A,d,v){var h=w[v].map(function(g){return'"'+g+'": '+A[v][g].toString().replace(/^"[^"]+"/,"function")}).join(",");return I[0]+"{"+h+"}"+I[1]+'"'+d+'"'+I[2]}function u(w,A){A=A||{};var d={main:o.m},v=A.all?{main:Object.keys(d.main)}:m(d,w),h="";Object.keys(v).filter(function(L){return L!=="main"}).forEach(function(L){for(var U=0;v[L][U];)U++;v[L].push(U),d[L][U]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",h=h+("var "+L+" = ("+p(v,d,U,modules)+`)();
`)}),h=h+("new (("+p(v,d,w,"main")+")())(self);");var g=new window.Blob([h],{type:"text/javascript"}),P=window.URL||window.webkitURL||window.mozURL||window.msURL,R=P.createObjectURL(g),y=new window.Worker(R);return y.objectURL=R,y}},"./src/errors.ts":(C,D,o)=>{o.r(D),o.d(D,{ErrorDetails:()=>I,ErrorTypes:()=>M});var M;(function(K){K.NETWORK_ERROR="networkError",K.MEDIA_ERROR="mediaError",K.KEY_SYSTEM_ERROR="keySystemError",K.MUX_ERROR="muxError",K.OTHER_ERROR="otherError"})(M||(M={}));var I;(function(K){K.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",K.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",K.KEY_SYSTEM_NO_SESSION="keySystemNoSession",K.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",K.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",K.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",K.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",K.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",K.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",K.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",K.MANIFEST_LOAD_ERROR="manifestLoadError",K.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",K.MANIFEST_PARSING_ERROR="manifestParsingError",K.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",K.LEVEL_EMPTY_ERROR="levelEmptyError",K.LEVEL_LOAD_ERROR="levelLoadError",K.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",K.LEVEL_SWITCH_ERROR="levelSwitchError",K.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",K.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",K.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",K.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",K.FRAG_LOAD_ERROR="fragLoadError",K.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",K.FRAG_DECRYPT_ERROR="fragDecryptError",K.FRAG_PARSING_ERROR="fragParsingError",K.REMUX_ALLOC_ERROR="remuxAllocError",K.KEY_LOAD_ERROR="keyLoadError",K.KEY_LOAD_TIMEOUT="keyLoadTimeOut",K.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",K.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",K.BUFFER_APPEND_ERROR="bufferAppendError",K.BUFFER_APPENDING_ERROR="bufferAppendingError",K.BUFFER_STALLED_ERROR="bufferStalledError",K.BUFFER_FULL_ERROR="bufferFullError",K.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",K.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",K.INTERNAL_EXCEPTION="internalException",K.INTERNAL_ABORTED="aborted",K.UNKNOWN="unknown"})(I||(I={}))},"./src/events.ts":(C,D,o)=>{o.r(D),o.d(D,{Events:()=>M});var M;(function(I){I.MEDIA_ATTACHING="hlsMediaAttaching",I.MEDIA_ATTACHED="hlsMediaAttached",I.MEDIA_DETACHING="hlsMediaDetaching",I.MEDIA_DETACHED="hlsMediaDetached",I.BUFFER_RESET="hlsBufferReset",I.BUFFER_CODECS="hlsBufferCodecs",I.BUFFER_CREATED="hlsBufferCreated",I.BUFFER_APPENDING="hlsBufferAppending",I.BUFFER_APPENDED="hlsBufferAppended",I.BUFFER_EOS="hlsBufferEos",I.BUFFER_FLUSHING="hlsBufferFlushing",I.BUFFER_FLUSHED="hlsBufferFlushed",I.MANIFEST_LOADING="hlsManifestLoading",I.MANIFEST_LOADED="hlsManifestLoaded",I.MANIFEST_PARSED="hlsManifestParsed",I.LEVEL_SWITCHING="hlsLevelSwitching",I.LEVEL_SWITCHED="hlsLevelSwitched",I.LEVEL_LOADING="hlsLevelLoading",I.LEVEL_LOADED="hlsLevelLoaded",I.LEVEL_UPDATED="hlsLevelUpdated",I.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",I.LEVELS_UPDATED="hlsLevelsUpdated",I.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",I.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",I.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",I.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",I.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",I.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",I.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",I.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",I.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",I.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",I.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",I.CUES_PARSED="hlsCuesParsed",I.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",I.INIT_PTS_FOUND="hlsInitPtsFound",I.FRAG_LOADING="hlsFragLoading",I.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",I.FRAG_LOADED="hlsFragLoaded",I.FRAG_DECRYPTED="hlsFragDecrypted",I.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",I.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",I.FRAG_PARSING_METADATA="hlsFragParsingMetadata",I.FRAG_PARSED="hlsFragParsed",I.FRAG_BUFFERED="hlsFragBuffered",I.FRAG_CHANGED="hlsFragChanged",I.FPS_DROP="hlsFpsDrop",I.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",I.ERROR="hlsError",I.DESTROYING="hlsDestroying",I.KEY_LOADING="hlsKeyLoading",I.KEY_LOADED="hlsKeyLoaded",I.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",I.BACK_BUFFER_REACHED="hlsBackBufferReached"})(M||(M={}))},"./src/hls.ts":(C,D,o)=>{o.r(D),o.d(D,{default:()=>y});var M=o("./node_modules/url-toolkit/src/url-toolkit.js"),I=o("./src/loader/playlist-loader.ts"),K=o("./src/controller/id3-track-controller.ts"),b=o("./src/controller/latency-controller.ts"),W=o("./src/controller/level-controller.ts"),F=o("./src/controller/fragment-tracker.ts"),k=o("./src/loader/key-loader.ts"),N=o("./src/controller/stream-controller.ts"),m=o("./src/is-supported.ts"),p=o("./src/utils/logger.ts"),u=o("./src/config.ts"),w=o("./node_modules/eventemitter3/index.js"),A=o("./src/events.ts"),d=o("./src/errors.ts"),v=o("./src/types/level.ts");function h(L,U){for(var _=0;_<U.length;_++){var S=U[_];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(L,P(S.key),S)}}function g(L,U,_){return U&&h(L.prototype,U),_&&h(L,_),Object.defineProperty(L,"prototype",{writable:!1}),L}function P(L){var U=R(L,"string");return typeof U=="symbol"?U:String(U)}function R(L,U){if(typeof L!="object"||L===null)return L;var _=L[Symbol.toPrimitive];if(_!==void 0){var S=_.call(L,U||"default");if(typeof S!="object")return S;throw new TypeError("@@toPrimitive must return a primitive value.")}return(U==="string"?String:Number)(L)}var y=function(){L.isSupported=function(){return(0,m.isSupported)()};function L(_){_===void 0&&(_={}),this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new w.EventEmitter,this._autoLevelCapping=void 0,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null;var S=this.config=(0,u.mergeConfig)(L.DefaultConfig,_);this.userConfig=_,(0,p.enableLogs)(S.debug,"Hls instance"),this._autoLevelCapping=-1,S.progressive&&(0,u.enableStreamingMode)(S);var c=S.abrController,E=S.bufferController,l=S.capLevelController,x=S.fpsController,B=this.abrController=new c(this),O=this.bufferController=new E(this),$=this.capLevelController=new l(this),H=new x(this),j=new I.default(this),V=new K.default(this),z=this.levelController=new W.default(this),X=new F.FragmentTracker(this),J=new k.default(this.config),q=this.streamController=new N.default(this,X,J);$.setStreamController(q),H.setStreamController(q);var ee=[j,z,q];this.networkControllers=ee;var ne=[B,O,$,H,V,X];this.audioTrackController=this.createController(S.audioTrackController,ee);var ae=S.audioStreamController;ae&&ee.push(new ae(this,X,J)),this.subtitleTrackController=this.createController(S.subtitleTrackController,ee);var fe=S.subtitleStreamController;fe&&ee.push(new fe(this,X,J)),this.createController(S.timelineController,ne),J.emeController=this.emeController=this.createController(S.emeController,ne),this.cmcdController=this.createController(S.cmcdController,ne),this.latencyController=this.createController(b.default,ne),this.coreComponents=ne}var U=L.prototype;return U.createController=function(S,c){if(S){var E=new S(this);return c&&c.push(E),E}return null},U.on=function(S,c,E){E===void 0&&(E=this),this._emitter.on(S,c,E)},U.once=function(S,c,E){E===void 0&&(E=this),this._emitter.once(S,c,E)},U.removeAllListeners=function(S){this._emitter.removeAllListeners(S)},U.off=function(S,c,E,l){E===void 0&&(E=this),this._emitter.off(S,c,E,l)},U.listeners=function(S){return this._emitter.listeners(S)},U.emit=function(S,c,E){return this._emitter.emit(S,c,E)},U.trigger=function(S,c){if(this.config.debug)return this.emit(S,S,c);try{return this.emit(S,S,c)}catch(E){p.logger.error("An internal error happened while handling event "+S+'. Error message: "'+E.message+'". Here is a stacktrace:',E),this.trigger(A.Events.ERROR,{type:d.ErrorTypes.OTHER_ERROR,details:d.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:S,error:E})}return!1},U.listenerCount=function(S){return this._emitter.listenerCount(S)},U.destroy=function(){p.logger.log("destroy"),this.trigger(A.Events.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach(function(S){return S.destroy()}),this.networkControllers.length=0,this.coreComponents.forEach(function(S){return S.destroy()}),this.coreComponents.length=0},U.attachMedia=function(S){p.logger.log("attachMedia"),this._media=S,this.trigger(A.Events.MEDIA_ATTACHING,{media:S})},U.detachMedia=function(){p.logger.log("detachMedia"),this.trigger(A.Events.MEDIA_DETACHING,void 0),this._media=null},U.loadSource=function(S){this.stopLoad();var c=this.media,E=this.url,l=this.url=M.buildAbsoluteURL(self.location.href,S,{alwaysNormalize:!0});p.logger.log("loadSource:"+l),c&&E&&E!==l&&this.bufferController.hasSourceTypes()&&(this.detachMedia(),this.attachMedia(c)),this.trigger(A.Events.MANIFEST_LOADING,{url:S})},U.startLoad=function(S){S===void 0&&(S=-1),p.logger.log("startLoad("+S+")"),this.networkControllers.forEach(function(c){c.startLoad(S)})},U.stopLoad=function(){p.logger.log("stopLoad"),this.networkControllers.forEach(function(S){S.stopLoad()})},U.swapAudioCodec=function(){p.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},U.recoverMediaError=function(){p.logger.log("recoverMediaError");var S=this._media;this.detachMedia(),S&&this.attachMedia(S)},U.removeLevel=function(S,c){c===void 0&&(c=0),this.levelController.removeLevel(S,c)},g(L,[{key:"levels",get:function(){var S=this.levelController.levels;return S||[]}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(S){p.logger.log("set currentLevel:"+S),this.loadLevel=S,this.abrController.clearTimer(),this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(S){p.logger.log("set nextLevel:"+S),this.levelController.manualLevel=S,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(S){p.logger.log("set loadLevel:"+S),this.levelController.manualLevel=S}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(S){this.levelController.nextLoadLevel=S}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(S){p.logger.log("set firstLevel:"+S),this.levelController.firstLevel=S}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(S){p.logger.log("set startLevel:"+S),S!==-1&&(S=Math.max(S,this.minAutoLevel)),this.levelController.startLevel=S}},{key:"capLevelToPlayerSize",get:function(){return this.config.capLevelToPlayerSize},set:function(S){var c=!!S;c!==this.config.capLevelToPlayerSize&&(c?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=c)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(S){this._autoLevelCapping!==S&&(p.logger.log("set autoLevelCapping:"+S),this._autoLevelCapping=S)}},{key:"bandwidthEstimate",get:function(){var S=this.abrController.bwEstimator;return S?S.getEstimate():NaN}},{key:"maxHdcpLevel",get:function(){return this._maxHdcpLevel},set:function(S){v.HdcpLevels.indexOf(S)>-1&&(this._maxHdcpLevel=S)}},{key:"autoLevelEnabled",get:function(){return this.levelController.manualLevel===-1}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){var S=this.levels,c=this.config.minAutoBitrate;if(!S)return 0;for(var E=S.length,l=0;l<E;l++)if(S[l].maxBitrate>=c)return l;return 0}},{key:"maxAutoLevel",get:function(){var S=this.levels,c=this.autoLevelCapping,E=this.maxHdcpLevel,l;if(c===-1&&S&&S.length?l=S.length-1:l=c,E)for(var x=l;x--;){var B=S[x].attrs["HDCP-LEVEL"];if(B&&B<=E)return x}return l}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(S){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,S)}},{key:"playingDate",get:function(){return this.streamController.currentProgramDateTime}},{key:"mainForwardBufferInfo",get:function(){return this.streamController.getMainFwdBufferInfo()}},{key:"audioTracks",get:function(){var S=this.audioTrackController;return S?S.audioTracks:[]}},{key:"audioTrack",get:function(){var S=this.audioTrackController;return S?S.audioTrack:-1},set:function(S){var c=this.audioTrackController;c&&(c.audioTrack=S)}},{key:"subtitleTracks",get:function(){var S=this.subtitleTrackController;return S?S.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var S=this.subtitleTrackController;return S?S.subtitleTrack:-1},set:function(S){var c=this.subtitleTrackController;c&&(c.subtitleTrack=S)}},{key:"media",get:function(){return this._media}},{key:"subtitleDisplay",get:function(){var S=this.subtitleTrackController;return S?S.subtitleDisplay:!1},set:function(S){var c=this.subtitleTrackController;c&&(c.subtitleDisplay=S)}},{key:"lowLatencyMode",get:function(){return this.config.lowLatencyMode},set:function(S){this.config.lowLatencyMode=S}},{key:"liveSyncPosition",get:function(){return this.latencyController.liveSyncPosition}},{key:"latency",get:function(){return this.latencyController.latency}},{key:"maxLatency",get:function(){return this.latencyController.maxLatency}},{key:"targetLatency",get:function(){return this.latencyController.targetLatency}},{key:"drift",get:function(){return this.latencyController.drift}},{key:"forceStartLoad",get:function(){return this.streamController.forceStartLoad}}],[{key:"version",get:function(){return"1.3.4"}},{key:"Events",get:function(){return A.Events}},{key:"ErrorTypes",get:function(){return d.ErrorTypes}},{key:"ErrorDetails",get:function(){return d.ErrorDetails}},{key:"DefaultConfig",get:function(){return L.defaultConfig?L.defaultConfig:u.hlsDefaultConfig},set:function(S){L.defaultConfig=S}}]),L}();y.defaultConfig=void 0},"./src/is-supported.ts":(C,D,o)=>{o.r(D),o.d(D,{changeTypeSupported:()=>b,isSupported:()=>K});var M=o("./src/utils/mediasource-helper.ts");function I(){return self.SourceBuffer||self.WebKitSourceBuffer}function K(){var W=(0,M.getMediaSource)();if(!W)return!1;var F=I(),k=W&&typeof W.isTypeSupported=="function"&&W.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),N=!F||F.prototype&&typeof F.prototype.appendBuffer=="function"&&typeof F.prototype.remove=="function";return!!k&&!!N}function b(){var W,F=I();return typeof(F==null||(W=F.prototype)===null||W===void 0?void 0:W.changeType)=="function"}},"./src/loader/date-range.ts":(C,D,o)=>{o.r(D),o.d(D,{DateRange:()=>p,DateRangeAttribute:()=>m});var M=o("./src/polyfills/number.ts"),I=o("./src/utils/attr-list.ts"),K=o("./src/utils/logger.ts");function b(){return b=Object.assign?Object.assign.bind():function(u){for(var w=1;w<arguments.length;w++){var A=arguments[w];for(var d in A)Object.prototype.hasOwnProperty.call(A,d)&&(u[d]=A[d])}return u},b.apply(this,arguments)}function W(u,w){for(var A=0;A<w.length;A++){var d=w[A];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(u,k(d.key),d)}}function F(u,w,A){return w&&W(u.prototype,w),A&&W(u,A),Object.defineProperty(u,"prototype",{writable:!1}),u}function k(u){var w=N(u,"string");return typeof w=="symbol"?w:String(w)}function N(u,w){if(typeof u!="object"||u===null)return u;var A=u[Symbol.toPrimitive];if(A!==void 0){var d=A.call(u,w||"default");if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(w==="string"?String:Number)(u)}var m;(function(u){u.ID="ID",u.CLASS="CLASS",u.START_DATE="START-DATE",u.DURATION="DURATION",u.END_DATE="END-DATE",u.END_ON_NEXT="END-ON-NEXT",u.PLANNED_DURATION="PLANNED-DURATION",u.SCTE35_OUT="SCTE35-OUT",u.SCTE35_IN="SCTE35-IN"})(m||(m={}));var p=function(){function u(w,A){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,A){var d=A.attr;for(var v in d)if(Object.prototype.hasOwnProperty.call(w,v)&&w[v]!==d[v]){K.logger.warn('DATERANGE tag attribute: "'+v+'" does not match for tags with ID: "'+w.ID+'"'),this._badValueForSameId=v;break}w=b(new I.AttrList({}),d,w)}if(this.attr=w,this._startDate=new Date(w[m.START_DATE]),m.END_DATE in this.attr){var h=new Date(this.attr[m.END_DATE]);(0,M.isFiniteNumber)(h.getTime())&&(this._endDate=h)}}return F(u,[{key:"id",get:function(){return this.attr.ID}},{key:"class",get:function(){return this.attr.CLASS}},{key:"startDate",get:function(){return this._startDate}},{key:"endDate",get:function(){if(this._endDate)return this._endDate;var A=this.duration;return A!==null?new Date(this._startDate.getTime()+A*1e3):null}},{key:"duration",get:function(){if(m.DURATION in this.attr){var A=this.attr.decimalFloatingPoint(m.DURATION);if((0,M.isFiniteNumber)(A))return A}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}},{key:"plannedDuration",get:function(){return m.PLANNED_DURATION in this.attr?this.attr.decimalFloatingPoint(m.PLANNED_DURATION):null}},{key:"endOnNext",get:function(){return this.attr.bool(m.END_ON_NEXT)}},{key:"isValid",get:function(){return!!this.id&&!this._badValueForSameId&&(0,M.isFiniteNumber)(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)}}]),u}()},"./src/loader/fragment-loader.ts":(C,D,o)=>{o.r(D),o.d(D,{LoadError:()=>A,default:()=>u});var M=o("./src/polyfills/number.ts"),I=o("./src/errors.ts");function K(d,v){d.prototype=Object.create(v.prototype),d.prototype.constructor=d,N(d,v)}function b(d){var v=typeof Map=="function"?new Map:void 0;return b=function(g){if(g===null||!k(g))return g;if(typeof g!="function")throw new TypeError("Super expression must either be null or a function");if(typeof v<"u"){if(v.has(g))return v.get(g);v.set(g,P)}function P(){return W(g,arguments,m(this).constructor)}return P.prototype=Object.create(g.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),N(P,g)},b(d)}function W(d,v,h){return F()?W=Reflect.construct.bind():W=function(P,R,y){var L=[null];L.push.apply(L,R);var U=Function.bind.apply(P,L),_=new U;return y&&N(_,y.prototype),_},W.apply(null,arguments)}function F(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function k(d){return Function.toString.call(d).indexOf("[native code]")!==-1}function N(d,v){return N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,P){return g.__proto__=P,g},N(d,v)}function m(d){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(h){return h.__proto__||Object.getPrototypeOf(h)},m(d)}var p=Math.pow(2,17),u=function(){function d(h){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=h}var v=d.prototype;return v.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},v.abort=function(){this.loader&&this.loader.abort()},v.load=function(g,P){var R=this,y=g.url;if(!y)return Promise.reject(new A({type:I.ErrorTypes.NETWORK_ERROR,details:I.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:g,networkDetails:null},"Fragment does not have a "+(y?"part list":"url")));this.abort();var L=this.config,U=L.fLoader,_=L.loader;return new Promise(function(S,c){R.loader&&R.loader.destroy();var E=R.loader=g.loader=U?new U(L):new _(L),l=w(g),x={timeout:L.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:L.fragLoadingMaxRetryTimeout,highWaterMark:g.sn==="initSegment"?1/0:p};g.stats=E.stats,E.load(l,x,{onSuccess:function(O,$,H,j){R.resetLoader(g,E);var V=O.data;H.resetIV&&g.decryptdata&&(g.decryptdata.iv=new Uint8Array(V.slice(0,16)),V=V.slice(16)),S({frag:g,part:null,payload:V,networkDetails:j})},onError:function(O,$,H){R.resetLoader(g,E),c(new A({type:I.ErrorTypes.NETWORK_ERROR,details:I.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:g,response:O,networkDetails:H}))},onAbort:function(O,$,H){R.resetLoader(g,E),c(new A({type:I.ErrorTypes.NETWORK_ERROR,details:I.ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:g,networkDetails:H}))},onTimeout:function(O,$,H){R.resetLoader(g,E),c(new A({type:I.ErrorTypes.NETWORK_ERROR,details:I.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:g,networkDetails:H}))},onProgress:function(O,$,H,j){P&&P({frag:g,part:null,payload:H,networkDetails:j})}})})},v.loadPart=function(g,P,R){var y=this;this.abort();var L=this.config,U=L.fLoader,_=L.loader;return new Promise(function(S,c){y.loader&&y.loader.destroy();var E=y.loader=g.loader=U?new U(L):new _(L),l=w(g,P),x={timeout:L.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:L.fragLoadingMaxRetryTimeout,highWaterMark:p};P.stats=E.stats,E.load(l,x,{onSuccess:function(O,$,H,j){y.resetLoader(g,E),y.updateStatsFromPart(g,P);var V={frag:g,part:P,payload:O.data,networkDetails:j};R(V),S(V)},onError:function(O,$,H){y.resetLoader(g,E),c(new A({type:I.ErrorTypes.NETWORK_ERROR,details:I.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:g,part:P,response:O,networkDetails:H}))},onAbort:function(O,$,H){g.stats.aborted=P.stats.aborted,y.resetLoader(g,E),c(new A({type:I.ErrorTypes.NETWORK_ERROR,details:I.ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:g,part:P,networkDetails:H}))},onTimeout:function(O,$,H){y.resetLoader(g,E),c(new A({type:I.ErrorTypes.NETWORK_ERROR,details:I.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:g,part:P,networkDetails:H}))}})})},v.updateStatsFromPart=function(g,P){var R=g.stats,y=P.stats,L=y.total;if(R.loaded+=y.loaded,L){var U=Math.round(g.duration/P.duration),_=Math.min(Math.round(R.loaded/L),U),S=U-_,c=S*Math.round(R.loaded/_);R.total=R.loaded+c}else R.total=Math.max(R.loaded,R.total);var E=R.loading,l=y.loading;E.start?E.first+=l.first-l.start:(E.start=l.start,E.first=l.first),E.end=l.end},v.resetLoader=function(g,P){g.loader=null,this.loader===P&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),P.destroy()},d}();function w(d,v){v===void 0&&(v=null);var h=v||d,g={frag:d,part:v,responseType:"arraybuffer",url:h.url,headers:{},rangeStart:0,rangeEnd:0},P=h.byteRangeStartOffset,R=h.byteRangeEndOffset;if((0,M.isFiniteNumber)(P)&&(0,M.isFiniteNumber)(R)){var y,L=P,U=R;if(d.sn==="initSegment"&&((y=d.decryptdata)===null||y===void 0?void 0:y.method)==="AES-128"){var _=R-P;_%16&&(U=R+(16-_%16)),P!==0&&(g.resetIV=!0,L=P-16)}g.rangeStart=L,g.rangeEnd=U}return g}var A=function(d){K(v,d);function v(h){for(var g,P=arguments.length,R=new Array(P>1?P-1:0),y=1;y<P;y++)R[y-1]=arguments[y];return g=d.call.apply(d,[this].concat(R))||this,g.data=void 0,g.data=h,g}return v}(b(Error))},"./src/loader/fragment.ts":(C,D,o)=>{o.r(D),o.d(D,{BaseSegment:()=>u,ElementaryStreamTypes:()=>p,Fragment:()=>w,Part:()=>A});var M=o("./src/polyfills/number.ts"),I=o("./node_modules/url-toolkit/src/url-toolkit.js"),K=o("./src/loader/load-stats.ts");function b(d,v){d.prototype=Object.create(v.prototype),d.prototype.constructor=d,W(d,v)}function W(d,v){return W=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(g,P){return g.__proto__=P,g},W(d,v)}function F(d,v){for(var h=0;h<v.length;h++){var g=v[h];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(d,N(g.key),g)}}function k(d,v,h){return v&&F(d.prototype,v),h&&F(d,h),Object.defineProperty(d,"prototype",{writable:!1}),d}function N(d){var v=m(d,"string");return typeof v=="symbol"?v:String(v)}function m(d,v){if(typeof d!="object"||d===null)return d;var h=d[Symbol.toPrimitive];if(h!==void 0){var g=h.call(d,v||"default");if(typeof g!="object")return g;throw new TypeError("@@toPrimitive must return a primitive value.")}return(v==="string"?String:Number)(d)}var p;(function(d){d.AUDIO="audio",d.VIDEO="video",d.AUDIOVIDEO="audiovideo"})(p||(p={}));var u=function(){function d(h){var g;this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams=(g={},g[p.AUDIO]=null,g[p.VIDEO]=null,g[p.AUDIOVIDEO]=null,g),this.baseurl=h}var v=d.prototype;return v.setByteRange=function(g,P){var R=g.split("@",2),y=[];R.length===1?y[0]=P?P.byteRangeEndOffset:0:y[0]=parseInt(R[1]),y[1]=parseInt(R[0])+y[0],this._byteRange=y},k(d,[{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"url",get:function(){return!this._url&&this.baseurl&&this.relurl&&(this._url=(0,I.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""},set:function(g){this._url=g}}]),d}(),w=function(d){b(v,d);function v(g,P){var R;return R=d.call(this,P)||this,R._decryptdata=null,R.rawProgramDateTime=null,R.programDateTime=null,R.tagList=[],R.duration=0,R.sn=0,R.levelkeys=void 0,R.type=void 0,R.loader=null,R.keyLoader=null,R.level=-1,R.cc=0,R.startPTS=void 0,R.endPTS=void 0,R.appendedPTS=void 0,R.startDTS=void 0,R.endDTS=void 0,R.start=0,R.deltaPTS=void 0,R.maxStartPTS=void 0,R.minEndPTS=void 0,R.stats=new K.LoadStats,R.urlId=0,R.data=void 0,R.bitrateTest=!1,R.title=null,R.initSegment=null,R.endList=void 0,R.type=g,R}var h=v.prototype;return h.setKeyFormat=function(P){if(this.levelkeys){var R=this.levelkeys[P];R&&!this._decryptdata&&(this._decryptdata=R.getDecryptData(this.sn))}},h.abortRequests=function(){var P,R;(P=this.loader)===null||P===void 0||P.abort(),(R=this.keyLoader)===null||R===void 0||R.abort()},h.setElementaryStreamInfo=function(P,R,y,L,U,_){_===void 0&&(_=!1);var S=this.elementaryStreams,c=S[P];if(!c){S[P]={startPTS:R,endPTS:y,startDTS:L,endDTS:U,partial:_};return}c.startPTS=Math.min(c.startPTS,R),c.endPTS=Math.max(c.endPTS,y),c.startDTS=Math.min(c.startDTS,L),c.endDTS=Math.max(c.endDTS,U)},h.clearElementaryStreamInfo=function(){var P=this.elementaryStreams;P[p.AUDIO]=null,P[p.VIDEO]=null,P[p.AUDIOVIDEO]=null},k(v,[{key:"decryptdata",get:function(){var P=this.levelkeys;if(!P&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){var R=this.levelkeys.identity;if(R)this._decryptdata=R.getDecryptData(this.sn);else{var y=Object.keys(this.levelkeys);if(y.length===1)return this._decryptdata=this.levelkeys[y[0]].getDecryptData(this.sn)}}return this._decryptdata}},{key:"end",get:function(){return this.start+this.duration}},{key:"endProgramDateTime",get:function(){if(this.programDateTime===null||!(0,M.isFiniteNumber)(this.programDateTime))return null;var P=(0,M.isFiniteNumber)(this.duration)?this.duration:0;return this.programDateTime+P*1e3}},{key:"encrypted",get:function(){var P;if((P=this._decryptdata)!==null&&P!==void 0&&P.encrypted)return!0;if(this.levelkeys){var R=Object.keys(this.levelkeys),y=R.length;if(y>1||y===1&&this.levelkeys[R[0]].encrypted)return!0}return!1}}]),v}(u),A=function(d){b(v,d);function v(h,g,P,R,y){var L;L=d.call(this,P)||this,L.fragOffset=0,L.duration=0,L.gap=!1,L.independent=!1,L.relurl=void 0,L.fragment=void 0,L.index=void 0,L.stats=new K.LoadStats,L.duration=h.decimalFloatingPoint("DURATION"),L.gap=h.bool("GAP"),L.independent=h.bool("INDEPENDENT"),L.relurl=h.enumeratedString("URI"),L.fragment=g,L.index=R;var U=h.enumeratedString("BYTERANGE");return U&&L.setByteRange(U,y),y&&(L.fragOffset=y.fragOffset+y.duration),L}return k(v,[{key:"start",get:function(){return this.fragment.start+this.fragOffset}},{key:"end",get:function(){return this.start+this.duration}},{key:"loaded",get:function(){var g=this.elementaryStreams;return!!(g.audio||g.video||g.audiovideo)}}]),v}(u)},"./src/loader/key-loader.ts":(C,D,o)=>{o.r(D),o.d(D,{default:()=>K});var M=o("./src/errors.ts"),I=o("./src/loader/fragment-loader.ts"),K=function(){function b(F){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=F}var W=b.prototype;return W.abort=function(){for(var k in this.keyUriToKeyInfo){var N=this.keyUriToKeyInfo[k].loader;N&&N.abort()}},W.detach=function(){for(var k in this.keyUriToKeyInfo){var N=this.keyUriToKeyInfo[k];(N.mediaKeySessionContext||N.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[k]}},W.destroy=function(){this.detach();for(var k in this.keyUriToKeyInfo){var N=this.keyUriToKeyInfo[k].loader;N&&N.destroy()}this.keyUriToKeyInfo={}},W.createKeyLoadError=function(k,N,m,p){return N===void 0&&(N=M.ErrorDetails.KEY_LOAD_ERROR),new I.LoadError({type:M.ErrorTypes.NETWORK_ERROR,details:N,fatal:!1,frag:k,networkDetails:m})},W.loadClear=function(k,N){var m=this;if(this.emeController&&this.config.emeEnabled)for(var p=k.sn,u=k.cc,w=function(h){var g=N[h];if(u<=g.cc&&(p==="initSegment"||p<g.sn))return m.emeController.selectKeySystemFormat(g).then(function(P){g.setKeyFormat(P)}),"break"},A=0;A<N.length;A++){var d=w(A);if(d==="break")break}},W.load=function(k){var N=this;return!k.decryptdata&&k.encrypted&&this.emeController?this.emeController.selectKeySystemFormat(k).then(function(m){return N.loadInternal(k,m)}):this.loadInternal(k)},W.loadInternal=function(k,N){var m,p;N&&k.setKeyFormat(N);var u=k.decryptdata;if(!u){var w=N?"Expected frag.decryptdata to be defined after setting format "+N:"Missing decryption data on fragment in onKeyLoading";return Promise.reject(this.createKeyLoadError(k,M.ErrorDetails.KEY_LOAD_ERROR,null,w))}var A=u.uri;if(!A)return Promise.reject(this.createKeyLoadError(k,M.ErrorDetails.KEY_LOAD_ERROR,null,'Invalid key URI: "'+A+'"'));var d=this.keyUriToKeyInfo[A];if((m=d)!==null&&m!==void 0&&m.decryptdata.key)return u.key=d.decryptdata.key,Promise.resolve({frag:k,keyInfo:d});if((p=d)!==null&&p!==void 0&&p.keyLoadPromise){var v;switch((v=d.mediaKeySessionContext)===null||v===void 0?void 0:v.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return d.keyLoadPromise.then(function(h){return u.key=h.keyInfo.decryptdata.key,{frag:k,keyInfo:d}})}}switch(d=this.keyUriToKeyInfo[A]={decryptdata:u,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},u.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return u.keyFormat==="identity"?this.loadKeyHTTP(d,k):this.loadKeyEME(d,k);case"AES-128":return this.loadKeyHTTP(d,k);default:return Promise.reject(this.createKeyLoadError(k,M.ErrorDetails.KEY_LOAD_ERROR,null,'Key supplied with unsupported METHOD: "'+u.method+'"'))}},W.loadKeyEME=function(k,N){var m={frag:N,keyInfo:k};if(this.emeController&&this.config.emeEnabled){var p=this.emeController.loadKey(m);if(p)return(k.keyLoadPromise=p.then(function(u){return k.mediaKeySessionContext=u,m})).catch(function(u){throw k.keyLoadPromise=null,u})}return Promise.resolve(m)},W.loadKeyHTTP=function(k,N){var m=this,p=this.config,u=p.loader,w=new u(p);return N.keyLoader=k.loader=w,k.keyLoadPromise=new Promise(function(A,d){var v={keyInfo:k,frag:N,responseType:"arraybuffer",url:k.decryptdata.uri},h={timeout:p.fragLoadingTimeOut,maxRetry:0,retryDelay:p.fragLoadingRetryDelay,maxRetryDelay:p.fragLoadingMaxRetryTimeout,highWaterMark:0},g={onSuccess:function(R,y,L,U){var _=L.frag,S=L.keyInfo,c=L.url;if(!_.decryptdata||S!==m.keyUriToKeyInfo[c])return d(m.createKeyLoadError(_,M.ErrorDetails.KEY_LOAD_ERROR,U,"after key load, decryptdata unset or changed"));S.decryptdata.key=_.decryptdata.key=new Uint8Array(R.data),_.keyLoader=null,S.loader=null,A({frag:_,keyInfo:S})},onError:function(R,y,L){m.resetLoader(y),d(m.createKeyLoadError(N,M.ErrorDetails.KEY_LOAD_ERROR,L))},onTimeout:function(R,y,L){m.resetLoader(y),d(m.createKeyLoadError(N,M.ErrorDetails.KEY_LOAD_TIMEOUT,L))},onAbort:function(R,y,L){m.resetLoader(y),d(m.createKeyLoadError(N,M.ErrorDetails.INTERNAL_ABORTED,L))}};w.load(v,h,g)})},W.resetLoader=function(k){var N=k.frag,m=k.keyInfo,p=k.url,u=m.loader;N.keyLoader===u&&(N.keyLoader=null,m.loader=null),delete this.keyUriToKeyInfo[p],u&&u.destroy()},b}()},"./src/loader/level-details.ts":(C,D,o)=>{o.r(D),o.d(D,{LevelDetails:()=>k});var M=o("./src/polyfills/number.ts");function I(N,m){for(var p=0;p<m.length;p++){var u=m[p];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(N,b(u.key),u)}}function K(N,m,p){return m&&I(N.prototype,m),p&&I(N,p),Object.defineProperty(N,"prototype",{writable:!1}),N}function b(N){var m=W(N,"string");return typeof m=="symbol"?m:String(m)}function W(N,m){if(typeof N!="object"||N===null)return N;var p=N[Symbol.toPrimitive];if(p!==void 0){var u=p.call(N,m||"default");if(typeof u!="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(m==="string"?String:Number)(N)}var F=10,k=function(){function N(p){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=p}var m=N.prototype;return m.reloaded=function(u){if(!u){this.advanced=!0,this.updated=!0;return}var w=this.lastPartSn-u.lastPartSn,A=this.lastPartIndex-u.lastPartIndex;this.updated=this.endSN!==u.endSN||!!A||!!w,this.advanced=this.endSN>u.endSN||w>0||w===0&&A>0,this.updated||this.advanced?this.misses=Math.floor(u.misses*.6):this.misses=u.misses+1,this.availabilityDelay=u.availabilityDelay},K(N,[{key:"hasProgramDateTime",get:function(){return this.fragments.length?(0,M.isFiniteNumber)(this.fragments[this.fragments.length-1].programDateTime):!1}},{key:"levelTargetDuration",get:function(){return this.averagetargetduration||this.targetduration||F}},{key:"drift",get:function(){var u=this.driftEndTime-this.driftStartTime;if(u>0){var w=this.driftEnd-this.driftStart;return w*1e3/u}return 1}},{key:"edge",get:function(){return this.partEnd||this.fragmentEnd}},{key:"partEnd",get:function(){var u;return(u=this.partList)!==null&&u!==void 0&&u.length?this.partList[this.partList.length-1].end:this.fragmentEnd}},{key:"fragmentEnd",get:function(){var u;return(u=this.fragments)!==null&&u!==void 0&&u.length?this.fragments[this.fragments.length-1].end:0}},{key:"age",get:function(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}},{key:"lastPartIndex",get:function(){var u;return(u=this.partList)!==null&&u!==void 0&&u.length?this.partList[this.partList.length-1].index:-1}},{key:"lastPartSn",get:function(){var u;return(u=this.partList)!==null&&u!==void 0&&u.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}]),N}()},"./src/loader/level-key.ts":(C,D,o)=>{o.r(D),o.d(D,{LevelKey:()=>k});var M=o("./src/utils/keysystem-util.ts"),I=o("./src/utils/mediakeys-helper.ts"),K=o("./src/utils/mp4-tools.ts"),b=o("./src/utils/logger.ts"),W=o("./src/utils/numeric-encoding-utils.ts"),F={},k=function(){m.clearKeyUriToKeyIdMap=function(){F={}};function m(u,w,A,d,v){d===void 0&&(d=[1]),v===void 0&&(v=null),this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=u,this.uri=w,this.keyFormat=A,this.keyFormatVersions=d,this.iv=v,this.encrypted=u?u!=="NONE":!1,this.isCommonEncryption=this.encrypted&&u!=="AES-128"}var p=m.prototype;return p.isSupported=function(){if(this.method){if(this.method==="AES-128"||this.method==="NONE")return!0;switch(this.keyFormat){case"identity":return this.method==="SAMPLE-AES";case I.KeySystemFormats.FAIRPLAY:case I.KeySystemFormats.WIDEVINE:case I.KeySystemFormats.PLAYREADY:case I.KeySystemFormats.CLEARKEY:return["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1},p.getDecryptData=function(w){if(!this.encrypted||!this.uri)return null;if(this.method==="AES-128"&&this.uri&&!this.iv){typeof w!="number"&&(this.method==="AES-128"&&!this.iv&&b.logger.warn('missing IV for initialization segment with method="'+this.method+'" - compliance issue'),w=0);var A=N(w),d=new m(this.method,this.uri,"identity",this.keyFormatVersions,A);return d}var v=(0,M.convertDataUriToArrayBytes)(this.uri);if(v)switch(this.keyFormat){case I.KeySystemFormats.WIDEVINE:this.pssh=v,v.length>=22&&(this.keyId=v.subarray(v.length-22,v.length-6));break;case I.KeySystemFormats.PLAYREADY:{var h=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=(0,K.mp4pssh)(h,null,v);var g=new Uint16Array(v.buffer,v.byteOffset,v.byteLength/2),P=String.fromCharCode.apply(null,Array.from(g)),R=P.substring(P.indexOf("<"),P.length),y=new DOMParser,L=y.parseFromString(R,"text/xml"),U=L.getElementsByTagName("KID")[0];if(U){var _=U.childNodes[0]?U.childNodes[0].nodeValue:U.getAttribute("VALUE");if(_){var S=(0,W.base64Decode)(_).subarray(0,16);(0,M.changeEndianness)(S),this.keyId=S}}break}default:{var c=v.subarray(0,16);if(c.length!==16){var E=new Uint8Array(16);E.set(c,16-c.length),c=E}this.keyId=c;break}}if(!this.keyId||this.keyId.byteLength!==16){var l=F[this.uri];if(!l){var x=Object.keys(F).length%Number.MAX_SAFE_INTEGER;l=new Uint8Array(16);var B=new DataView(l.buffer,12,4);B.setUint32(0,x),F[this.uri]=l}this.keyId=l}return this},m}();function N(m){for(var p=new Uint8Array(16),u=12;u<16;u++)p[u]=m>>8*(15-u)&255;return p}},"./src/loader/load-stats.ts":(C,D,o)=>{o.r(D),o.d(D,{LoadStats:()=>M});var M=function(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}},"./src/loader/m3u8-parser.ts":(C,D,o)=>{o.r(D),o.d(D,{default:()=>v});var M=o("./src/polyfills/number.ts"),I=o("./node_modules/url-toolkit/src/url-toolkit.js"),K=o("./src/loader/date-range.ts"),b=o("./src/loader/fragment.ts"),W=o("./src/loader/level-details.ts"),F=o("./src/loader/level-key.ts"),k=o("./src/utils/attr-list.ts"),N=o("./src/utils/logger.ts"),m=o("./src/utils/codecs.ts");function p(){return p=Object.assign?Object.assign.bind():function(_){for(var S=1;S<arguments.length;S++){var c=arguments[S];for(var E in c)Object.prototype.hasOwnProperty.call(c,E)&&(_[E]=c[E])}return _},p.apply(this,arguments)}var u=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-SESSION-DATA:([^\r\n]*)[\r\n]+|#EXT-X-SESSION-KEY:([^\n\r]*)[\r\n]+/g,w=/#EXT-X-MEDIA:(.*)/g,A=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),d=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|")),v=function(){function _(){}return _.findGroup=function(c,E){for(var l=0;l<c.length;l++){var x=c[l];if(x.id===E)return x}},_.convertAVC1ToAVCOTI=function(c){var E=c.split(".");if(E.length>2){var l=E.shift()+".";return l+=parseInt(E.shift()).toString(16),l+=("000"+parseInt(E.shift()).toString(16)).slice(-4),l}return c},_.resolve=function(c,E){return(0,I.buildAbsoluteURL)(E,c,{alwaysNormalize:!0})},_.parseMasterPlaylist=function(c,E){var l=[],x=[],B={},O=[],$=!1;u.lastIndex=0;for(var H;(H=u.exec(c))!=null;)if(H[1]){var j,V=new k.AttrList(H[1]),z={attrs:V,bitrate:V.decimalInteger("AVERAGE-BANDWIDTH")||V.decimalInteger("BANDWIDTH"),name:V.NAME,url:_.resolve(H[2],E)},X=V.decimalResolution("RESOLUTION");X&&(z.width=X.width,z.height=X.height),g((V.CODECS||"").split(/[ ,]+/).filter(function(ae){return ae}),z),z.videoCodec&&z.videoCodec.indexOf("avc1")!==-1&&(z.videoCodec=_.convertAVC1ToAVCOTI(z.videoCodec)),(j=z.unknownCodecs)!==null&&j!==void 0&&j.length||x.push(z),l.push(z)}else if(H[3]){var J=new k.AttrList(H[3]);J["DATA-ID"]&&($=!0,B[J["DATA-ID"]]=J)}else if(H[4]){var q=H[4],ee=h(q,E);ee.encrypted&&ee.isSupported()?O.push(ee):N.logger.warn('[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "'+q+'"')}var ne=x.length>0&&x.length<l.length;return{levels:ne?x:l,sessionData:$?B:null,sessionKeys:O.length?O:null}},_.parseMasterPlaylistMedia=function(c,E,l,x){x===void 0&&(x=[]);var B,O=[],$=0;for(w.lastIndex=0;(B=w.exec(c))!==null;){var H=new k.AttrList(B[1]);if(H.TYPE===l){var j={attrs:H,bitrate:0,id:$++,groupId:H["GROUP-ID"],instreamId:H["INSTREAM-ID"],name:H.NAME||H.LANGUAGE||"",type:l,default:H.bool("DEFAULT"),autoselect:H.bool("AUTOSELECT"),forced:H.bool("FORCED"),lang:H.LANGUAGE,url:H.URI?_.resolve(H.URI,E):""};if(x.length){var V=_.findGroup(x,j.groupId)||x[0];P(j,V,"audioCodec"),P(j,V,"textCodec")}O.push(j)}}return O},_.parseLevelPlaylist=function(c,E,l,x,B){var O=new W.LevelDetails(E),$=O.fragments,H=null,j=0,V=0,z=0,X=0,J=null,q=new b.Fragment(x,E),ee,ne,ae,fe=-1,ue=!1;for(A.lastIndex=0,O.m3u8=c;(ee=A.exec(c))!==null;){ue&&(ue=!1,q=new b.Fragment(x,E),q.start=z,q.sn=j,q.cc=X,q.level=l,H&&(q.initSegment=H,q.rawProgramDateTime=H.rawProgramDateTime,H.rawProgramDateTime=null));var ce=ee[1];if(ce){q.duration=parseFloat(ce);var ye=(" "+ee[2]).slice(1);q.title=ye||null,q.tagList.push(ye?["INF",ce,ye]:["INF",ce])}else if(ee[3])(0,M.isFiniteNumber)(q.duration)&&(q.start=z,ae&&U(q,ae,O),q.sn=j,q.level=l,q.cc=X,q.urlId=B,$.push(q),q.relurl=(" "+ee[3]).slice(1),y(q,J),J=q,z+=q.duration,j++,V=0,ue=!0);else if(ee[4]){var Pe=(" "+ee[4]).slice(1);J?q.setByteRange(Pe,J):q.setByteRange(Pe)}else if(ee[5])q.rawProgramDateTime=(" "+ee[5]).slice(1),q.tagList.push(["PROGRAM-DATE-TIME",q.rawProgramDateTime]),fe===-1&&(fe=$.length);else{if(ee=ee[0].match(d),!ee){N.logger.warn("No matches on slow regex match for level playlist!");continue}for(ne=1;ne<ee.length&&!(typeof ee[ne]<"u");ne++);var Te=(" "+ee[ne]).slice(1),ge=(" "+ee[ne+1]).slice(1),De=ee[ne+2]?(" "+ee[ne+2]).slice(1):"";switch(Te){case"PLAYLIST-TYPE":O.type=ge.toUpperCase();break;case"MEDIA-SEQUENCE":j=O.startSN=parseInt(ge);break;case"SKIP":{var be=new k.AttrList(ge),Ue=be.decimalInteger("SKIPPED-SEGMENTS");if((0,M.isFiniteNumber)(Ue)){O.skippedSegments=Ue;for(var gt=Ue;gt--;)$.unshift(null);j+=Ue}var Ve=be.enumeratedString("RECENTLY-REMOVED-DATERANGES");Ve&&(O.recentlyRemovedDateranges=Ve.split("	"));break}case"TARGETDURATION":O.targetduration=parseFloat(ge);break;case"VERSION":O.version=parseInt(ge);break;case"EXTM3U":break;case"ENDLIST":O.live=!1;break;case"#":(ge||De)&&q.tagList.push(De?[ge,De]:[ge]);break;case"DISCONTINUITY":X++,q.tagList.push(["DIS"]);break;case"GAP":q.tagList.push([Te]);break;case"BITRATE":q.tagList.push([Te,ge]);break;case"DATERANGE":{var nt=new k.AttrList(ge),$e=new K.DateRange(nt,O.dateRanges[nt.ID]);$e.isValid||O.skippedSegments?O.dateRanges[$e.id]=$e:N.logger.warn('Ignoring invalid DATERANGE tag: "'+ge+'"'),q.tagList.push(["EXT-X-DATERANGE",ge]);break}case"DISCONTINUITY-SEQUENCE":X=parseInt(ge);break;case"KEY":{var ze=h(ge,E);if(ze.isSupported()){if(ze.method==="NONE"){ae=void 0;break}ae||(ae={}),ae[ze.keyFormat]&&(ae=p({},ae)),ae[ze.keyFormat]=ze}else N.logger.warn('[Keys] Ignoring invalid EXT-X-KEY tag: "'+ge+'"');break}case"START":{var Qe=new k.AttrList(ge),st=Qe.decimalFloatingPoint("TIME-OFFSET");(0,M.isFiniteNumber)(st)&&(O.startTimeOffset=st);break}case"MAP":{var xt=new k.AttrList(ge);if(q.duration){var ct=new b.Fragment(x,E);L(ct,xt,l,ae),H=ct,q.initSegment=H,H.rawProgramDateTime&&!q.rawProgramDateTime&&(q.rawProgramDateTime=H.rawProgramDateTime)}else L(q,xt,l,ae),H=q,ue=!0;break}case"SERVER-CONTROL":{var Lt=new k.AttrList(ge);O.canBlockReload=Lt.bool("CAN-BLOCK-RELOAD"),O.canSkipUntil=Lt.optionalFloat("CAN-SKIP-UNTIL",0),O.canSkipDateRanges=O.canSkipUntil>0&&Lt.bool("CAN-SKIP-DATERANGES"),O.partHoldBack=Lt.optionalFloat("PART-HOLD-BACK",0),O.holdBack=Lt.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{var cr=new k.AttrList(ge);O.partTarget=cr.decimalFloatingPoint("PART-TARGET");break}case"PART":{var wt=O.partList;wt||(wt=O.partList=[]);var Lr=V>0?wt[wt.length-1]:void 0,rr=V++,dr=new b.Part(new k.AttrList(ge),q,E,rr,Lr);wt.push(dr),q.duration+=dr.duration;break}case"PRELOAD-HINT":{var hr=new k.AttrList(ge);O.preloadHint=hr;break}case"RENDITION-REPORT":{var Nt=new k.AttrList(ge);O.renditionReports=O.renditionReports||[],O.renditionReports.push(Nt);break}default:N.logger.warn("line parsed but not handled: "+ee);break}}}J&&!J.relurl?($.pop(),z-=J.duration,O.partList&&(O.fragmentHint=J)):O.partList&&(y(q,J),q.cc=X,O.fragmentHint=q,ae&&U(q,ae,O));var Rt=$.length,nr=$[0],Ar=$[Rt-1];if(z+=O.skippedSegments*O.targetduration,z>0&&Rt&&Ar){O.averagetargetduration=z/Rt;var _t=Ar.sn;O.endSN=_t!=="initSegment"?_t:0,O.live||(Ar.endList=!0),nr&&(O.startCC=nr.cc)}else O.endSN=0,O.startCC=0;return O.fragmentHint&&(z+=O.fragmentHint.duration),O.totalduration=z,O.endCC=X,fe>0&&R($,fe),O},_}();function h(_,S){var c,E,l=new k.AttrList(_),x=(c=l.enumeratedString("METHOD"))!=null?c:"",B=l.URI,O=l.hexadecimalInteger("IV"),$=l.enumeratedString("KEYFORMATVERSIONS"),H=(E=l.enumeratedString("KEYFORMAT"))!=null?E:"identity";B&&l.IV&&!O&&N.logger.error("Invalid IV: "+l.IV);var j=B?v.resolve(B,S):"",V=($||"1").split("/").map(Number).filter(Number.isFinite);return new F.LevelKey(x,j,H,V,O)}function g(_,S){["video","audio","text"].forEach(function(c){var E=_.filter(function(x){return(0,m.isCodecType)(x,c)});if(E.length){var l=E.filter(function(x){return x.lastIndexOf("avc1",0)===0||x.lastIndexOf("mp4a",0)===0});S[c+"Codec"]=l.length>0?l[0]:E[0],_=_.filter(function(x){return E.indexOf(x)===-1})}}),S.unknownCodecs=_}function P(_,S,c){var E=S[c];E&&(_[c]=E)}function R(_,S){for(var c=_[S],E=S;E--;){var l=_[E];if(!l)return;l.programDateTime=c.programDateTime-l.duration*1e3,c=l}}function y(_,S){_.rawProgramDateTime?_.programDateTime=Date.parse(_.rawProgramDateTime):S!=null&&S.programDateTime&&(_.programDateTime=S.endProgramDateTime),(0,M.isFiniteNumber)(_.programDateTime)||(_.programDateTime=null,_.rawProgramDateTime=null)}function L(_,S,c,E){_.relurl=S.URI,S.BYTERANGE&&_.setByteRange(S.BYTERANGE),_.level=c,_.sn="initSegment",E&&(_.levelkeys=E),_.initSegment=null}function U(_,S,c){_.levelkeys=S;var E=c.encryptedFragments;(!E.length||E[E.length-1].levelkeys!==S)&&Object.keys(S).some(function(l){return S[l].isCommonEncryption})&&E.push(_)}},"./src/loader/playlist-loader.ts":(C,D,o)=>{o.r(D),o.d(D,{default:()=>u});var M=o("./src/polyfills/number.ts"),I=o("./src/events.ts"),K=o("./src/errors.ts"),b=o("./src/utils/logger.ts"),W=o("./src/loader/m3u8-parser.ts"),F=o("./src/types/loader.ts"),k=o("./src/utils/attr-list.ts");function N(w){var A=w.type;switch(A){case F.PlaylistContextType.AUDIO_TRACK:return F.PlaylistLevelType.AUDIO;case F.PlaylistContextType.SUBTITLE_TRACK:return F.PlaylistLevelType.SUBTITLE;default:return F.PlaylistLevelType.MAIN}}function m(w,A){var d=w.url;return(d===void 0||d.indexOf("data:")===0)&&(d=A.url),d}var p=function(){function w(d){this.hls=void 0,this.loaders=Object.create(null),this.hls=d,this.registerListeners()}var A=w.prototype;return A.startLoad=function(v){},A.stopLoad=function(){this.destroyInternalLoaders()},A.registerListeners=function(){var v=this.hls;v.on(I.Events.MANIFEST_LOADING,this.onManifestLoading,this),v.on(I.Events.LEVEL_LOADING,this.onLevelLoading,this),v.on(I.Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),v.on(I.Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},A.unregisterListeners=function(){var v=this.hls;v.off(I.Events.MANIFEST_LOADING,this.onManifestLoading,this),v.off(I.Events.LEVEL_LOADING,this.onLevelLoading,this),v.off(I.Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),v.off(I.Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},A.createInternalLoader=function(v){var h=this.hls.config,g=h.pLoader,P=h.loader,R=g||P,y=new R(h);return v.loader=y,this.loaders[v.type]=y,y},A.getInternalLoader=function(v){return this.loaders[v.type]},A.resetInternalLoader=function(v){this.loaders[v]&&delete this.loaders[v]},A.destroyInternalLoaders=function(){for(var v in this.loaders){var h=this.loaders[v];h&&h.destroy(),this.resetInternalLoader(v)}},A.destroy=function(){this.unregisterListeners(),this.destroyInternalLoaders()},A.onManifestLoading=function(v,h){var g=h.url;this.load({id:null,groupId:null,level:0,responseType:"text",type:F.PlaylistContextType.MANIFEST,url:g,deliveryDirectives:null})},A.onLevelLoading=function(v,h){var g=h.id,P=h.level,R=h.url,y=h.deliveryDirectives;this.load({id:g,groupId:null,level:P,responseType:"text",type:F.PlaylistContextType.LEVEL,url:R,deliveryDirectives:y})},A.onAudioTrackLoading=function(v,h){var g=h.id,P=h.groupId,R=h.url,y=h.deliveryDirectives;this.load({id:g,groupId:P,level:null,responseType:"text",type:F.PlaylistContextType.AUDIO_TRACK,url:R,deliveryDirectives:y})},A.onSubtitleTrackLoading=function(v,h){var g=h.id,P=h.groupId,R=h.url,y=h.deliveryDirectives;this.load({id:g,groupId:P,level:null,responseType:"text",type:F.PlaylistContextType.SUBTITLE_TRACK,url:R,deliveryDirectives:y})},A.load=function(v){var h,g=this.hls.config,P=this.getInternalLoader(v);if(P){var R=P.context;if(R&&R.url===v.url){b.logger.trace("[playlist-loader]: playlist request ongoing");return}b.logger.log("[playlist-loader]: aborting previous loader for type: "+v.type),P.abort()}var y,L,U,_;switch(v.type){case F.PlaylistContextType.MANIFEST:y=g.manifestLoadingMaxRetry,L=g.manifestLoadingTimeOut,U=g.manifestLoadingRetryDelay,_=g.manifestLoadingMaxRetryTimeout;break;case F.PlaylistContextType.LEVEL:case F.PlaylistContextType.AUDIO_TRACK:case F.PlaylistContextType.SUBTITLE_TRACK:y=0,L=g.levelLoadingTimeOut;break;default:y=g.levelLoadingMaxRetry,L=g.levelLoadingTimeOut,U=g.levelLoadingRetryDelay,_=g.levelLoadingMaxRetryTimeout;break}if(P=this.createInternalLoader(v),(h=v.deliveryDirectives)!==null&&h!==void 0&&h.part){var S;if(v.type===F.PlaylistContextType.LEVEL&&v.level!==null?S=this.hls.levels[v.level].details:v.type===F.PlaylistContextType.AUDIO_TRACK&&v.id!==null?S=this.hls.audioTracks[v.id].details:v.type===F.PlaylistContextType.SUBTITLE_TRACK&&v.id!==null&&(S=this.hls.subtitleTracks[v.id].details),S){var c=S.partTarget,E=S.targetduration;c&&E&&(L=Math.min(Math.max(c*3,E*.8)*1e3,L))}}var l={timeout:L,maxRetry:y,retryDelay:U,maxRetryDelay:_,highWaterMark:0},x={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};P.load(v,l,x)},A.loadsuccess=function(v,h,g,P){P===void 0&&(P=null),this.resetInternalLoader(g.type);var R=v.data;if(R.indexOf("#EXTM3U")!==0){this.handleManifestParsingError(v,g,"no EXTM3U delimiter",P);return}h.parsing.start=performance.now(),R.indexOf("#EXTINF:")>0||R.indexOf("#EXT-X-TARGETDURATION:")>0?this.handleTrackOrLevelPlaylist(v,h,g,P):this.handleMasterPlaylist(v,h,g,P)},A.loaderror=function(v,h,g){g===void 0&&(g=null),this.handleNetworkError(h,g,!1,v)},A.loadtimeout=function(v,h,g){g===void 0&&(g=null),this.handleNetworkError(h,g,!0)},A.handleMasterPlaylist=function(v,h,g,P){var R=this.hls,y=v.data,L=m(v,g),U=W.default.parseMasterPlaylist(y,L),_=U.levels,S=U.sessionData,c=U.sessionKeys;if(!_.length){this.handleManifestParsingError(v,g,"no level found in manifest",P);return}var E=_.map(function(H){return{id:H.attrs.AUDIO,audioCodec:H.audioCodec}}),l=_.map(function(H){return{id:H.attrs.SUBTITLES,textCodec:H.textCodec}}),x=W.default.parseMasterPlaylistMedia(y,L,"AUDIO",E),B=W.default.parseMasterPlaylistMedia(y,L,"SUBTITLES",l),O=W.default.parseMasterPlaylistMedia(y,L,"CLOSED-CAPTIONS");if(x.length){var $=x.some(function(H){return!H.url});!$&&_[0].audioCodec&&!_[0].attrs.AUDIO&&(b.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),x.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new k.AttrList({}),bitrate:0,url:""}))}R.trigger(I.Events.MANIFEST_LOADED,{levels:_,audioTracks:x,subtitles:B,captions:O,url:L,stats:h,networkDetails:P,sessionData:S,sessionKeys:c})},A.handleTrackOrLevelPlaylist=function(v,h,g,P){var R=this.hls,y=g.id,L=g.level,U=g.type,_=m(v,g),S=(0,M.isFiniteNumber)(y)?y:0,c=(0,M.isFiniteNumber)(L)?L:S,E=N(g),l=W.default.parseLevelPlaylist(v.data,_,c,E,S);if(!l.fragments.length){R.trigger(I.Events.ERROR,{type:K.ErrorTypes.NETWORK_ERROR,details:K.ErrorDetails.LEVEL_EMPTY_ERROR,fatal:!1,url:_,reason:"no fragments found in level",level:typeof g.level=="number"?g.level:void 0});return}if(U===F.PlaylistContextType.MANIFEST){var x={attrs:new k.AttrList({}),bitrate:0,details:l,name:"",url:_};R.trigger(I.Events.MANIFEST_LOADED,{levels:[x],audioTracks:[],url:_,stats:h,networkDetails:P,sessionData:null,sessionKeys:null})}h.parsing.end=performance.now(),g.levelDetails=l,this.handlePlaylistLoaded(v,h,g,P)},A.handleManifestParsingError=function(v,h,g,P){this.hls.trigger(I.Events.ERROR,{type:K.ErrorTypes.NETWORK_ERROR,details:K.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:h.type===F.PlaylistContextType.MANIFEST,url:v.url,reason:g,response:v,context:h,networkDetails:P})},A.handleNetworkError=function(v,h,g,P){g===void 0&&(g=!1),b.logger.warn("[playlist-loader]: A network "+(g?"timeout":"error")+" occurred while loading "+v.type+" level: "+v.level+" id: "+v.id+' group-id: "'+v.groupId+'"');var R=K.ErrorDetails.UNKNOWN,y=!1,L=this.getInternalLoader(v);switch(v.type){case F.PlaylistContextType.MANIFEST:R=g?K.ErrorDetails.MANIFEST_LOAD_TIMEOUT:K.ErrorDetails.MANIFEST_LOAD_ERROR,y=!0;break;case F.PlaylistContextType.LEVEL:R=g?K.ErrorDetails.LEVEL_LOAD_TIMEOUT:K.ErrorDetails.LEVEL_LOAD_ERROR,y=!1;break;case F.PlaylistContextType.AUDIO_TRACK:R=g?K.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:K.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,y=!1;break;case F.PlaylistContextType.SUBTITLE_TRACK:R=g?K.ErrorDetails.SUBTITLE_TRACK_LOAD_TIMEOUT:K.ErrorDetails.SUBTITLE_LOAD_ERROR,y=!1;break}L&&this.resetInternalLoader(v.type);var U={type:K.ErrorTypes.NETWORK_ERROR,details:R,fatal:y,url:v.url,loader:L,context:v,networkDetails:h};P&&(U.response=P),this.hls.trigger(I.Events.ERROR,U)},A.handlePlaylistLoaded=function(v,h,g,P){var R=g.type,y=g.level,L=g.id,U=g.groupId,_=g.loader,S=g.levelDetails,c=g.deliveryDirectives;if(!(S!=null&&S.targetduration)){this.handleManifestParsingError(v,g,"invalid target duration",P);return}if(_)switch(S.live&&(_.getCacheAge&&(S.ageHeader=_.getCacheAge()||0),(!_.getCacheAge||isNaN(S.ageHeader))&&(S.ageHeader=0)),R){case F.PlaylistContextType.MANIFEST:case F.PlaylistContextType.LEVEL:this.hls.trigger(I.Events.LEVEL_LOADED,{details:S,level:y||0,id:L||0,stats:h,networkDetails:P,deliveryDirectives:c});break;case F.PlaylistContextType.AUDIO_TRACK:this.hls.trigger(I.Events.AUDIO_TRACK_LOADED,{details:S,id:L||0,groupId:U||"",stats:h,networkDetails:P,deliveryDirectives:c});break;case F.PlaylistContextType.SUBTITLE_TRACK:this.hls.trigger(I.Events.SUBTITLE_TRACK_LOADED,{details:S,id:L||0,groupId:U||"",stats:h,networkDetails:P,deliveryDirectives:c});break}},w}();const u=p},"./src/polyfills/number.ts":(C,D,o)=>{o.r(D),o.d(D,{MAX_SAFE_INTEGER:()=>I,isFiniteNumber:()=>M});var M=Number.isFinite||function(K){return typeof K=="number"&&isFinite(K)},I=Number.MAX_SAFE_INTEGER||9007199254740991},"./src/remux/aac-helper.ts":(C,D,o)=>{o.r(D),o.d(D,{default:()=>I});var M=function(){function K(){}return K.getSilentFrame=function(W,F){switch(W){case"mp4a.40.2":if(F===1)return new Uint8Array([0,200,0,128,35,128]);if(F===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(F===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(F===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(F===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(F===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(F===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(F===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(F===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}},K}();const I=M},"./src/remux/mp4-generator.ts":(C,D,o)=>{o.r(D),o.d(D,{default:()=>K});var M=Math.pow(2,32)-1,I=function(){function b(){}return b.init=function(){b.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var F;for(F in b.types)b.types.hasOwnProperty(F)&&(b.types[F]=[F.charCodeAt(0),F.charCodeAt(1),F.charCodeAt(2),F.charCodeAt(3)]);var k=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),N=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);b.HDLR_TYPES={video:k,audio:N};var m=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),p=new Uint8Array([0,0,0,0,0,0,0,0]);b.STTS=b.STSC=b.STCO=p,b.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),b.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),b.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),b.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var u=new Uint8Array([105,115,111,109]),w=new Uint8Array([97,118,99,49]),A=new Uint8Array([0,0,0,1]);b.FTYP=b.box(b.types.ftyp,u,A,u,w),b.DINF=b.box(b.types.dinf,b.box(b.types.dref,m))},b.box=function(F){for(var k=8,N=arguments.length,m=new Array(N>1?N-1:0),p=1;p<N;p++)m[p-1]=arguments[p];for(var u=m.length,w=u;u--;)k+=m[u].byteLength;var A=new Uint8Array(k);for(A[0]=k>>24&255,A[1]=k>>16&255,A[2]=k>>8&255,A[3]=k&255,A.set(F,4),u=0,k=8;u<w;u++)A.set(m[u],k),k+=m[u].byteLength;return A},b.hdlr=function(F){return b.box(b.types.hdlr,b.HDLR_TYPES[F])},b.mdat=function(F){return b.box(b.types.mdat,F)},b.mdhd=function(F,k){k*=F;var N=Math.floor(k/(M+1)),m=Math.floor(k%(M+1));return b.box(b.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,F>>24&255,F>>16&255,F>>8&255,F&255,N>>24,N>>16&255,N>>8&255,N&255,m>>24,m>>16&255,m>>8&255,m&255,85,196,0,0]))},b.mdia=function(F){return b.box(b.types.mdia,b.mdhd(F.timescale,F.duration),b.hdlr(F.type),b.minf(F))},b.mfhd=function(F){return b.box(b.types.mfhd,new Uint8Array([0,0,0,0,F>>24,F>>16&255,F>>8&255,F&255]))},b.minf=function(F){return F.type==="audio"?b.box(b.types.minf,b.box(b.types.smhd,b.SMHD),b.DINF,b.stbl(F)):b.box(b.types.minf,b.box(b.types.vmhd,b.VMHD),b.DINF,b.stbl(F))},b.moof=function(F,k,N){return b.box(b.types.moof,b.mfhd(F),b.traf(N,k))},b.moov=function(F){for(var k=F.length,N=[];k--;)N[k]=b.trak(F[k]);return b.box.apply(null,[b.types.moov,b.mvhd(F[0].timescale,F[0].duration)].concat(N).concat(b.mvex(F)))},b.mvex=function(F){for(var k=F.length,N=[];k--;)N[k]=b.trex(F[k]);return b.box.apply(null,[b.types.mvex].concat(N))},b.mvhd=function(F,k){k*=F;var N=Math.floor(k/(M+1)),m=Math.floor(k%(M+1)),p=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,F>>24&255,F>>16&255,F>>8&255,F&255,N>>24,N>>16&255,N>>8&255,N&255,m>>24,m>>16&255,m>>8&255,m&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return b.box(b.types.mvhd,p)},b.sdtp=function(F){var k=F.samples||[],N=new Uint8Array(4+k.length),m,p;for(m=0;m<k.length;m++)p=k[m].flags,N[m+4]=p.dependsOn<<4|p.isDependedOn<<2|p.hasRedundancy;return b.box(b.types.sdtp,N)},b.stbl=function(F){return b.box(b.types.stbl,b.stsd(F),b.box(b.types.stts,b.STTS),b.box(b.types.stsc,b.STSC),b.box(b.types.stsz,b.STSZ),b.box(b.types.stco,b.STCO))},b.avc1=function(F){var k=[],N=[],m,p,u;for(m=0;m<F.sps.length;m++)p=F.sps[m],u=p.byteLength,k.push(u>>>8&255),k.push(u&255),k=k.concat(Array.prototype.slice.call(p));for(m=0;m<F.pps.length;m++)p=F.pps[m],u=p.byteLength,N.push(u>>>8&255),N.push(u&255),N=N.concat(Array.prototype.slice.call(p));var w=b.box(b.types.avcC,new Uint8Array([1,k[3],k[4],k[5],255,224|F.sps.length].concat(k).concat([F.pps.length]).concat(N))),A=F.width,d=F.height,v=F.pixelRatio[0],h=F.pixelRatio[1];return b.box(b.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,A>>8&255,A&255,d>>8&255,d&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),w,b.box(b.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),b.box(b.types.pasp,new Uint8Array([v>>24,v>>16&255,v>>8&255,v&255,h>>24,h>>16&255,h>>8&255,h&255])))},b.esds=function(F){var k=F.config.length;return new Uint8Array([0,0,0,0,3,23+k,0,1,0,4,15+k,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([k]).concat(F.config).concat([6,1,2]))},b.mp4a=function(F){var k=F.samplerate;return b.box(b.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,F.channelCount,0,16,0,0,0,0,k>>8&255,k&255,0,0]),b.box(b.types.esds,b.esds(F)))},b.mp3=function(F){var k=F.samplerate;return b.box(b.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,F.channelCount,0,16,0,0,0,0,k>>8&255,k&255,0,0]))},b.stsd=function(F){return F.type==="audio"?F.segmentCodec==="mp3"&&F.codec==="mp3"?b.box(b.types.stsd,b.STSD,b.mp3(F)):b.box(b.types.stsd,b.STSD,b.mp4a(F)):b.box(b.types.stsd,b.STSD,b.avc1(F))},b.tkhd=function(F){var k=F.id,N=F.duration*F.timescale,m=F.width,p=F.height,u=Math.floor(N/(M+1)),w=Math.floor(N%(M+1));return b.box(b.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,k>>24&255,k>>16&255,k>>8&255,k&255,0,0,0,0,u>>24,u>>16&255,u>>8&255,u&255,w>>24,w>>16&255,w>>8&255,w&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,m>>8&255,m&255,0,0,p>>8&255,p&255,0,0]))},b.traf=function(F,k){var N=b.sdtp(F),m=F.id,p=Math.floor(k/(M+1)),u=Math.floor(k%(M+1));return b.box(b.types.traf,b.box(b.types.tfhd,new Uint8Array([0,0,0,0,m>>24,m>>16&255,m>>8&255,m&255])),b.box(b.types.tfdt,new Uint8Array([1,0,0,0,p>>24,p>>16&255,p>>8&255,p&255,u>>24,u>>16&255,u>>8&255,u&255])),b.trun(F,N.length+16+20+8+16+8+8),N)},b.trak=function(F){return F.duration=F.duration||4294967295,b.box(b.types.trak,b.tkhd(F),b.mdia(F))},b.trex=function(F){var k=F.id;return b.box(b.types.trex,new Uint8Array([0,0,0,0,k>>24,k>>16&255,k>>8&255,k&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},b.trun=function(F,k){var N=F.samples||[],m=N.length,p=12+16*m,u=new Uint8Array(p),w,A,d,v,h,g;for(k+=8+p,u.set([F.type==="video"?1:0,0,15,1,m>>>24&255,m>>>16&255,m>>>8&255,m&255,k>>>24&255,k>>>16&255,k>>>8&255,k&255],0),w=0;w<m;w++)A=N[w],d=A.duration,v=A.size,h=A.flags,g=A.cts,u.set([d>>>24&255,d>>>16&255,d>>>8&255,d&255,v>>>24&255,v>>>16&255,v>>>8&255,v&255,h.isLeading<<2|h.dependsOn,h.isDependedOn<<6|h.hasRedundancy<<4|h.paddingValue<<1|h.isNonSync,h.degradPrio&240<<8,h.degradPrio&15,g>>>24&255,g>>>16&255,g>>>8&255,g&255],12+16*w);return b.box(b.types.trun,u)},b.initSegment=function(F){b.types||b.init();var k=b.moov(F),N=new Uint8Array(b.FTYP.byteLength+k.byteLength);return N.set(b.FTYP),N.set(k,b.FTYP.byteLength),N},b}();I.types=void 0,I.HDLR_TYPES=void 0,I.STTS=void 0,I.STSC=void 0,I.STCO=void 0,I.STSZ=void 0,I.VMHD=void 0,I.SMHD=void 0,I.STSD=void 0,I.FTYP=void 0,I.DINF=void 0;const K=I},"./src/remux/mp4-remuxer.ts":(C,D,o)=>{o.r(D),o.d(D,{default:()=>v,flushTextTrackMetadataCueSamples:()=>P,flushTextTrackUserdataCueSamples:()=>R,normalizePts:()=>h});var M=o("./src/polyfills/number.ts"),I=o("./src/remux/aac-helper.ts"),K=o("./src/remux/mp4-generator.ts"),b=o("./src/events.ts"),W=o("./src/errors.ts"),F=o("./src/utils/logger.ts"),k=o("./src/types/loader.ts"),N=o("./src/utils/timescale-conversion.ts");function m(){return m=Object.assign?Object.assign.bind():function(U){for(var _=1;_<arguments.length;_++){var S=arguments[_];for(var c in S)Object.prototype.hasOwnProperty.call(S,c)&&(U[c]=S[c])}return U},m.apply(this,arguments)}var p=10*1e3,u=1024,w=1152,A=null,d=null,v=function(){function U(S,c,E,l){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=void 0,this._initDTS=void 0,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.observer=S,this.config=c,this.typeSupported=E,this.ISGenerated=!1,A===null){var x=navigator.userAgent||"",B=x.match(/Chrome\/(\d+)/i);A=B?parseInt(B[1]):0}if(d===null){var O=navigator.userAgent.match(/Safari\/(\d+)/i);d=O?parseInt(O[1]):0}}var _=U.prototype;return _.destroy=function(){},_.resetTimeStamp=function(c){F.logger.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=c},_.resetNextTimestamp=function(){F.logger.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1},_.resetInitSegment=function(){F.logger.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1},_.getVideoStartPts=function(c){var E=!1,l=c.reduce(function(x,B){var O=B.pts-x;return O<-4294967296?(E=!0,h(x,B.pts)):O>0?x:B.pts},c[0].pts);return E&&F.logger.debug("PTS rollover detected"),l},_.remux=function(c,E,l,x,B,O,$,H){var j,V,z,X,J,q,ee=B,ne=B,ae=c.pid>-1,fe=E.pid>-1,ue=E.samples.length,ce=c.samples.length>0,ye=$&&ue>0||ue>1,Pe=(!ae||ce)&&(!fe||ye)||this.ISGenerated||$;if(Pe){this.ISGenerated||(z=this.generateIS(c,E,B));var Te=this.isVideoContiguous,ge=-1,De;if(ye&&(ge=g(E.samples),!Te&&this.config.forceKeyFrameOnDiscontinuity))if(q=!0,ge>0){F.logger.warn("[mp4-remuxer]: Dropped "+ge+" out of "+ue+" video samples due to a missing keyframe");var be=this.getVideoStartPts(E.samples);E.samples=E.samples.slice(ge),E.dropped+=ge,ne+=(E.samples[0].pts-be)/E.inputTimeScale,De=ne}else ge===-1&&(F.logger.warn("[mp4-remuxer]: No keyframe found out of "+ue+" video samples"),q=!1);if(this.ISGenerated){if(ce&&ye){var Ue=this.getVideoStartPts(E.samples),gt=h(c.samples[0].pts,Ue)-Ue,Ve=gt/E.inputTimeScale;ee+=Math.max(0,Ve),ne+=Math.max(0,-Ve)}if(ce){if(c.samplerate||(F.logger.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),z=this.generateIS(c,E,B)),V=this.remuxAudio(c,ee,this.isAudioContiguous,O,fe||ye||H===k.PlaylistLevelType.AUDIO?ne:void 0),ye){var nt=V?V.endPTS-V.startPTS:0;E.inputTimeScale||(F.logger.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),z=this.generateIS(c,E,B)),j=this.remuxVideo(E,ne,Te,nt)}}else ye&&(j=this.remuxVideo(E,ne,Te,0));j&&(j.firstKeyFrame=ge,j.independent=ge!==-1,j.firstKeyFramePTS=De)}}return this.ISGenerated&&(l.samples.length&&(J=P(l,B,this._initPTS,this._initDTS)),x.samples.length&&(X=R(x,B,this._initPTS))),{audio:V,video:j,initSegment:z,independent:q,text:X,id3:J}},_.generateIS=function(c,E,l){var x=c.samples,B=E.samples,O=this.typeSupported,$={},H=!(0,M.isFiniteNumber)(this._initPTS),j="audio/mp4",V,z,X;if(H&&(V=z=1/0),c.config&&x.length){switch(c.timescale=c.samplerate,c.segmentCodec){case"mp3":O.mpeg?(j="audio/mpeg",c.codec=""):O.mp3&&(c.codec="mp3");break}$.audio={id:"audio",container:j,codec:c.codec,initSegment:c.segmentCodec==="mp3"&&O.mpeg?new Uint8Array(0):K.default.initSegment([c]),metadata:{channelCount:c.channelCount}},H&&(X=c.inputTimeScale,V=z=x[0].pts-Math.round(X*l))}if(E.sps&&E.pps&&B.length&&(E.timescale=E.inputTimeScale,$.video={id:"main",container:"video/mp4",codec:E.codec,initSegment:K.default.initSegment([E]),metadata:{width:E.width,height:E.height}},H)){X=E.inputTimeScale;var J=this.getVideoStartPts(B),q=Math.round(X*l);z=Math.min(z,h(B[0].dts,J)-q),V=Math.min(V,J-q)}if(Object.keys($).length)return this.ISGenerated=!0,H&&(this._initPTS=V,this._initDTS=z),{tracks:$,initPTS:V,timescale:X}},_.remuxVideo=function(c,E,l,x){var B=c.inputTimeScale,O=c.samples,$=[],H=O.length,j=this._initPTS,V=this.nextAvcDts,z=8,X=this.videoSampleDuration,J,q,ee=Number.POSITIVE_INFINITY,ne=Number.NEGATIVE_INFINITY,ae=!1;if(!l||V===null){var fe=E*B,ue=O[0].pts-h(O[0].dts,O[0].pts);V=fe-ue}for(var ce=0;ce<H;ce++){var ye=O[ce];ye.pts=h(ye.pts-j,V),ye.dts=h(ye.dts-j,V),ye.dts<O[ce>0?ce-1:ce].dts&&(ae=!0)}ae&&O.sort(function(Rs,gl){var Rc=Rs.dts-gl.dts,Cc=Rs.pts-gl.pts;return Rc||Cc}),J=O[0].dts,q=O[O.length-1].dts;var Pe=q-J,Te=Pe?Math.round(Pe/(H-1)):X||c.inputTimeScale/30;if(l){var ge=J-V,De=ge>Te,be=ge<-1;if((De||be)&&(De?F.logger.warn("AVC: "+(0,N.toMsFromMpegTsClock)(ge,!0)+" ms ("+ge+"dts) hole between fragments detected, filling it"):F.logger.warn("AVC: "+(0,N.toMsFromMpegTsClock)(-ge,!0)+" ms ("+ge+"dts) overlapping between fragments detected"),!be||V>O[0].pts)){J=V;var Ue=O[0].pts-ge;O[0].dts=J,O[0].pts=Ue,F.logger.log("Video: First PTS/DTS adjusted: "+(0,N.toMsFromMpegTsClock)(Ue,!0)+"/"+(0,N.toMsFromMpegTsClock)(J,!0)+", delta: "+(0,N.toMsFromMpegTsClock)(ge,!0)+" ms")}}J=Math.max(0,J);for(var gt=0,Ve=0,nt=0;nt<H;nt++){for(var $e=O[nt],ze=$e.units,Qe=ze.length,st=0,xt=0;xt<Qe;xt++)st+=ze[xt].data.length;Ve+=st,gt+=Qe,$e.length=st,$e.dts=Math.max($e.dts,J),ee=Math.min($e.pts,ee),ne=Math.max($e.pts,ne)}q=O[H-1].dts;var ct=Ve+4*gt+8,Lt;try{Lt=new Uint8Array(ct)}catch{this.observer.emit(b.Events.ERROR,b.Events.ERROR,{type:W.ErrorTypes.MUX_ERROR,details:W.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:ct,reason:"fail allocating video mdat "+ct});return}var cr=new DataView(Lt.buffer);cr.setUint32(0,ct),Lt.set(K.default.types.mdat,4);for(var wt=!1,Lr=Number.POSITIVE_INFINITY,rr=Number.POSITIVE_INFINITY,dr=Number.NEGATIVE_INFINITY,hr=Number.NEGATIVE_INFINITY,Nt=0;Nt<H;Nt++){for(var Rt=O[Nt],nr=Rt.units,Ar=0,_t=0,$r=nr.length;_t<$r;_t++){var Pr=nr[_t],Vi=Pr.data,kn=Pr.data.byteLength;cr.setUint32(z,kn),z+=4,Lt.set(Vi,z),z+=kn,Ar+=4+kn}var ni=void 0;if(Nt<H-1)X=O[Nt+1].dts-Rt.dts,ni=O[Nt+1].pts-Rt.pts;else{var fl=this.config,ii=Nt>0?Rt.dts-O[Nt-1].dts:Te;if(ni=Nt>0?Rt.pts-O[Nt-1].pts:Te,fl.stretchShortVideoTrack&&this.nextAudioPts!==null){var Sc=Math.floor(fl.maxBufferHole*B),zi=(x?ee+x*B:this.nextAudioPts)-Rt.pts;zi>Sc?(X=zi-ii,X<0?X=ii:wt=!0,F.logger.log("[mp4-remuxer]: It is approximately "+zi/90+" ms to the next segment; using duration "+X/90+" ms for the last video frame.")):X=ii}else X=ii}var xc=Math.round(Rt.pts-Rt.dts);Lr=Math.min(Lr,X),dr=Math.max(dr,X),rr=Math.min(rr,ni),hr=Math.max(hr,ni),$.push(new y(Rt.key,X,Ar,xc))}if($.length){if(A){if(A<70){var cl=$[0].flags;cl.dependsOn=2,cl.isNonSync=0}}else if(d&&hr-rr<dr-Lr&&Te/dr<.025&&$[0].cts===0){F.logger.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");for(var Ds=J,Dr=0,dl=$.length;Dr<dl;Dr++){var hl=Ds+$[Dr].duration,Lc=Ds+$[Dr].cts;if(Dr<dl-1){var Ac=hl+$[Dr+1].cts;$[Dr].duration=Ac-Lc}else $[Dr].duration=Dr?$[Dr-1].duration:Te;$[Dr].cts=0,Ds=hl}}}console.assert(X!==null,"mp4SampleDuration must be computed"),X=wt||!X?Te:X,this.nextAvcDts=V=q+X,this.videoSampleDuration=X,this.isVideoContiguous=!0;var vl=K.default.moof(c.sequenceNumber++,J,m({},c,{samples:$})),Pc="video",Dc={data1:vl,data2:Lt,startPTS:ee/B,endPTS:(ne+X)/B,startDTS:J/B,endDTS:V/B,type:Pc,hasAudio:!1,hasVideo:!0,nb:$.length,dropped:c.dropped};return c.samples=[],c.dropped=0,console.assert(Lt.length,"MDAT length must not be zero"),Dc},_.remuxAudio=function(c,E,l,x,B){var O=c.inputTimeScale,$=c.samplerate?c.samplerate:O,H=O/$,j=c.segmentCodec==="aac"?u:w,V=j*H,z=this._initPTS,X=c.segmentCodec==="mp3"&&this.typeSupported.mpeg,J=[],q=B!==void 0,ee=c.samples,ne=X?0:8,ae=this.nextAudioPts||-1,fe=E*O;if(this.isAudioContiguous=l=l||ee.length&&ae>0&&(x&&Math.abs(fe-ae)<9e3||Math.abs(h(ee[0].pts-z,fe)-ae)<20*V),ee.forEach(function(Pr){Pr.pts=h(Pr.pts-z,fe)}),!l||ae<0){if(ee=ee.filter(function(Pr){return Pr.pts>=0}),!ee.length)return;B===0?ae=0:x&&!q?ae=Math.max(0,fe):ae=ee[0].pts}if(c.segmentCodec==="aac")for(var ue=this.config.maxAudioFramesDrift,ce=0,ye=ae;ce<ee.length;ce++){var Pe=ee[ce],Te=Pe.pts,ge=Te-ye,De=Math.abs(1e3*ge/O);if(ge<=-ue*V&&q)ce===0&&(F.logger.warn("Audio frame @ "+(Te/O).toFixed(3)+"s overlaps nextAudioPts by "+Math.round(1e3*ge/O)+" ms."),this.nextAudioPts=ae=ye=Te);else if(ge>=ue*V&&De<p&&q){var be=Math.round(ge/V);ye=Te-be*V,ye<0&&(be--,ye+=V),ce===0&&(this.nextAudioPts=ae=ye),F.logger.warn("[mp4-remuxer]: Injecting "+be+" audio frame @ "+(ye/O).toFixed(3)+"s due to "+Math.round(1e3*ge/O)+" ms gap.");for(var Ue=0;Ue<be;Ue++){var gt=Math.max(ye,0),Ve=I.default.getSilentFrame(c.manifestCodec||c.codec,c.channelCount);Ve||(F.logger.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),Ve=Pe.unit.subarray()),ee.splice(ce,0,{unit:Ve,pts:gt}),ye+=V,ce++}}Pe.pts=ye,ye+=V}for(var nt=null,$e=null,ze,Qe=0,st=ee.length;st--;)Qe+=ee[st].unit.byteLength;for(var xt=0,ct=ee.length;xt<ct;xt++){var Lt=ee[xt],cr=Lt.unit,wt=Lt.pts;if($e!==null){var Lr=J[xt-1];Lr.duration=Math.round((wt-$e)/H)}else if(l&&c.segmentCodec==="aac"&&(wt=ae),nt=wt,Qe>0){Qe+=ne;try{ze=new Uint8Array(Qe)}catch{this.observer.emit(b.Events.ERROR,b.Events.ERROR,{type:W.ErrorTypes.MUX_ERROR,details:W.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:Qe,reason:"fail allocating audio mdat "+Qe});return}if(!X){var rr=new DataView(ze.buffer);rr.setUint32(0,Qe),ze.set(K.default.types.mdat,4)}}else return;ze.set(cr,ne);var dr=cr.byteLength;ne+=dr,J.push(new y(!0,j,dr,0)),$e=wt}var hr=J.length;if(hr){var Nt=J[J.length-1];this.nextAudioPts=ae=$e+H*Nt.duration;var Rt=X?new Uint8Array(0):K.default.moof(c.sequenceNumber++,nt/H,m({},c,{samples:J}));c.samples=[];var nr=nt/O,Ar=ae/O,_t="audio",$r={data1:Rt,data2:ze,startPTS:nr,endPTS:Ar,startDTS:nr,endDTS:Ar,type:_t,hasAudio:!0,hasVideo:!1,nb:hr};return this.isAudioContiguous=!0,console.assert(ze.length,"MDAT length must not be zero"),$r}},_.remuxEmptyAudio=function(c,E,l,x){var B=c.inputTimeScale,O=c.samplerate?c.samplerate:B,$=B/O,H=this.nextAudioPts,j=(H!==null?H:x.startDTS*B)+this._initDTS,V=x.endDTS*B+this._initDTS,z=$*u,X=Math.ceil((V-j)/z),J=I.default.getSilentFrame(c.manifestCodec||c.codec,c.channelCount);if(F.logger.warn("[mp4-remuxer]: remux empty Audio"),!J){F.logger.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec");return}for(var q=[],ee=0;ee<X;ee++){var ne=j+ee*z;q.push({unit:J,pts:ne,dts:ne})}return c.samples=q,this.remuxAudio(c,E,l,!1)},U}();function h(U,_){var S;if(_===null)return U;for(_<U?S=-8589934592:S=8589934592;Math.abs(U-_)>4294967296;)U+=S;return U}function g(U){for(var _=0;_<U.length;_++)if(U[_].key)return _;return-1}function P(U,_,S,c){var E=U.samples.length;if(E){for(var l=U.inputTimeScale,x=0;x<E;x++){var B=U.samples[x];B.pts=h(B.pts-S,_*l)/l,B.dts=h(B.dts-c,_*l)/l}var O=U.samples;return U.samples=[],{samples:O}}}function R(U,_,S){var c=U.samples.length;if(c){for(var E=U.inputTimeScale,l=0;l<c;l++){var x=U.samples[l];x.pts=h(x.pts-S,_*E)/E}U.samples.sort(function(O,$){return O.pts-$.pts});var B=U.samples;return U.samples=[],{samples:B}}}var y=function(_,S,c,E){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=S,this.size=c,this.cts=E,this.flags=new L(_)},L=function(_){this.isLeading=0,this.isDependedOn=0,this.hasRedundancy=0,this.degradPrio=0,this.dependsOn=1,this.isNonSync=1,this.dependsOn=_?2:1,this.isNonSync=_?0:1}},"./src/remux/passthrough-remuxer.ts":(C,D,o)=>{o.r(D),o.d(D,{default:()=>N});var M=o("./src/polyfills/number.ts"),I=o("./src/remux/mp4-remuxer.ts"),K=o("./src/utils/mp4-tools.ts"),b=o("./src/loader/fragment.ts"),W=o("./src/utils/logger.ts"),F=function(){function m(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=void 0,this.initTracks=void 0,this.lastEndTime=null}var p=m.prototype;return p.destroy=function(){},p.resetTimeStamp=function(w){this.initPTS=w,this.lastEndTime=null},p.resetNextTimestamp=function(){this.lastEndTime=null},p.resetInitSegment=function(w,A,d,v){this.audioCodec=A,this.videoCodec=d,this.generateInitSegment((0,K.patchEncyptionData)(w,v)),this.emitInitSegment=!0},p.generateInitSegment=function(w){var A=this.audioCodec,d=this.videoCodec;if(!w||!w.byteLength){this.initTracks=void 0,this.initData=void 0;return}var v=this.initData=(0,K.parseInitSegment)(w);A||(A=k(v.audio,b.ElementaryStreamTypes.AUDIO)),d||(d=k(v.video,b.ElementaryStreamTypes.VIDEO));var h={};v.audio&&v.video?h.audiovideo={container:"video/mp4",codec:A+","+d,initSegment:w,id:"main"}:v.audio?h.audio={container:"audio/mp4",codec:A,initSegment:w,id:"audio"}:v.video?h.video={container:"video/mp4",codec:d,initSegment:w,id:"main"}:W.logger.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=h},p.remux=function(w,A,d,v,h){var g,P=this.initPTS,R=this.lastEndTime,y={audio:void 0,video:void 0,text:v,id3:d,initSegment:void 0};(0,M.isFiniteNumber)(R)||(R=this.lastEndTime=h||0);var L=A.samples;if(!L||!L.length)return y;var U={initPTS:void 0,timescale:1},_=this.initData;if((!_||!_.length)&&(this.generateInitSegment(L),_=this.initData),!_||!_.length)return W.logger.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),y;this.emitInitSegment&&(U.tracks=this.initTracks,this.emitInitSegment=!1);var S=(0,K.getStartDTS)(_,L);(0,M.isFiniteNumber)(P)||(this.initPTS=U.initPTS=P=S-h);var c=(0,K.getDuration)(L,_),E=w?S-P:R,l=E+c;(0,K.offsetStartDTS)(_,L,P),c>0?this.lastEndTime=l:(W.logger.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());var x=!!_.audio,B=!!_.video,O="";x&&(O+="audio"),B&&(O+="video");var $={data1:L,startPTS:E,startDTS:E,endPTS:l,endDTS:l,type:O,hasAudio:x,hasVideo:B,nb:1,dropped:0};y.audio=$.type==="audio"?$:void 0,y.video=$.type!=="audio"?$:void 0,y.initSegment=U;var H=(g=this.initPTS)!=null?g:0;return y.id3=(0,I.flushTextTrackMetadataCueSamples)(d,h,H,H),v.samples.length&&(y.text=(0,I.flushTextTrackUserdataCueSamples)(v,h,H)),y},m}();function k(m,p){var u=m==null?void 0:m.codec;return u&&u.length>4?u:u==="hvc1"||u==="hev1"?"hvc1.1.c.L120.90":u==="av01"?"av01.0.04M.08":u==="avc1"||p===b.ElementaryStreamTypes.VIDEO?"avc1.42e01e":"mp4a.40.5"}const N=F},"./src/task-loop.ts":(C,D,o)=>{o.r(D),o.d(D,{default:()=>M});var M=function(){function I(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}var K=I.prototype;return K.destroy=function(){this.onHandlerDestroying(),this.onHandlerDestroyed()},K.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},K.onHandlerDestroyed=function(){},K.hasInterval=function(){return!!this._tickInterval},K.hasNextTick=function(){return!!this._tickTimer},K.setInterval=function(W){return this._tickInterval?!1:(this._tickInterval=self.setInterval(this._boundTick,W),!0)},K.clearInterval=function(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1},K.clearNextTick=function(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1},K.tick=function(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)},K.tickImmediate=function(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)},K.doTick=function(){},I}()},"./src/types/cmcd.ts":(C,D,o)=>{o.r(D),o.d(D,{CMCDObjectType:()=>I,CMCDStreamType:()=>b,CMCDStreamingFormat:()=>K,CMCDVersion:()=>M});var M=1,I;(function(W){W.MANIFEST="m",W.AUDIO="a",W.VIDEO="v",W.MUXED="av",W.INIT="i",W.CAPTION="c",W.TIMED_TEXT="tt",W.KEY="k",W.OTHER="o"})(I||(I={}));var K;(function(W){W.DASH="d",W.HLS="h",W.SMOOTH="s",W.OTHER="o"})(K||(K={}));var b;(function(W){W.VOD="v",W.LIVE="l"})(b||(b={}))},"./src/types/demuxer.ts":(C,D,o)=>{o.r(D),o.d(D,{MetadataSchema:()=>M});var M;(function(I){I.audioId3="org.id3",I.dateRange="com.apple.quicktime.HLS",I.emsg="https://aomedia.org/emsg/ID3"})(M||(M={}))},"./src/types/level.ts":(C,D,o)=>{o.r(D),o.d(D,{HdcpLevels:()=>W,HlsSkip:()=>F,HlsUrlParameters:()=>N,Level:()=>m,getSkipValue:()=>k});function M(p,u){for(var w=0;w<u.length;w++){var A=u[w];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(p,K(A.key),A)}}function I(p,u,w){return u&&M(p.prototype,u),w&&M(p,w),Object.defineProperty(p,"prototype",{writable:!1}),p}function K(p){var u=b(p,"string");return typeof u=="symbol"?u:String(u)}function b(p,u){if(typeof p!="object"||p===null)return p;var w=p[Symbol.toPrimitive];if(w!==void 0){var A=w.call(p,u||"default");if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return(u==="string"?String:Number)(p)}var W=["NONE","TYPE-0","TYPE-1","TYPE-2",null],F;(function(p){p.No="",p.Yes="YES",p.v2="v2"})(F||(F={}));function k(p,u){var w=p.canSkipUntil,A=p.canSkipDateRanges,d=p.endSN,v=u!==void 0?u-d:0;return w&&v<w?A?F.v2:F.Yes:F.No}var N=function(){function p(w,A,d){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=w,this.part=A,this.skip=d}var u=p.prototype;return u.addDirectives=function(A){var d=new self.URL(A);return this.msn!==void 0&&d.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&d.searchParams.set("_HLS_part",this.part.toString()),this.skip&&d.searchParams.set("_HLS_skip",this.skip),d.href},p}(),m=function(){function p(u){this.attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.unknownCodecs=void 0,this.audioGroupIds=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.textGroupIds=void 0,this.url=void 0,this._urlId=0,this.url=[u.url],this.attrs=u.attrs,this.bitrate=u.bitrate,u.details&&(this.details=u.details),this.id=u.id||0,this.name=u.name,this.width=u.width||0,this.height=u.height||0,this.audioCodec=u.audioCodec,this.videoCodec=u.videoCodec,this.unknownCodecs=u.unknownCodecs,this.codecSet=[u.videoCodec,u.audioCodec].filter(function(w){return w}).join(",").replace(/\.[^.,]+/g,"")}return I(p,[{key:"maxBitrate",get:function(){return Math.max(this.realBitrate,this.bitrate)}},{key:"uri",get:function(){return this.url[this._urlId]||""}},{key:"urlId",get:function(){return this._urlId},set:function(w){var A=w%this.url.length;this._urlId!==A&&(this.details=void 0,this._urlId=A)}}]),p}()},"./src/types/loader.ts":(C,D,o)=>{o.r(D),o.d(D,{PlaylistContextType:()=>M,PlaylistLevelType:()=>I});var M;(function(K){K.MANIFEST="manifest",K.LEVEL="level",K.AUDIO_TRACK="audioTrack",K.SUBTITLE_TRACK="subtitleTrack"})(M||(M={}));var I;(function(K){K.MAIN="main",K.AUDIO="audio",K.SUBTITLE="subtitle"})(I||(I={}))},"./src/types/transmuxer.ts":(C,D,o)=>{o.r(D),o.d(D,{ChunkMetadata:()=>M});var M=function(b,W,F,k,N,m){k===void 0&&(k=0),N===void 0&&(N=-1),m===void 0&&(m=!1),this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=I(),this.buffering={audio:I(),video:I(),audiovideo:I()},this.level=b,this.sn=W,this.id=F,this.size=k,this.part=N,this.partial=m};function I(){return{start:0,executeStart:0,executeEnd:0,end:0}}},"./src/utils/attr-list.ts":(C,D,o)=>{o.r(D),o.d(D,{AttrList:()=>K});var M=/^(\d+)x(\d+)$/,I=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,K=function(){function b(F){typeof F=="string"&&(F=b.parseAttrList(F));for(var k in F)F.hasOwnProperty(k)&&(this[k]=F[k])}var W=b.prototype;return W.decimalInteger=function(k){var N=parseInt(this[k],10);return N>Number.MAX_SAFE_INTEGER?1/0:N},W.hexadecimalInteger=function(k){if(this[k]){var N=(this[k]||"0x").slice(2);N=(N.length&1?"0":"")+N;for(var m=new Uint8Array(N.length/2),p=0;p<N.length/2;p++)m[p]=parseInt(N.slice(p*2,p*2+2),16);return m}else return null},W.hexadecimalIntegerAsNumber=function(k){var N=parseInt(this[k],16);return N>Number.MAX_SAFE_INTEGER?1/0:N},W.decimalFloatingPoint=function(k){return parseFloat(this[k])},W.optionalFloat=function(k,N){var m=this[k];return m?parseFloat(m):N},W.enumeratedString=function(k){return this[k]},W.bool=function(k){return this[k]==="YES"},W.decimalResolution=function(k){var N=M.exec(this[k]);if(N!==null)return{width:parseInt(N[1],10),height:parseInt(N[2],10)}},b.parseAttrList=function(k){var N,m={},p='"';for(I.lastIndex=0;(N=I.exec(k))!==null;){var u=N[2];u.indexOf(p)===0&&u.lastIndexOf(p)===u.length-1&&(u=u.slice(1,-1)),m[N[1]]=u}return m},b}()},"./src/utils/binary-search.ts":(C,D,o)=>{o.r(D),o.d(D,{default:()=>I});var M={search:function(b,W){for(var F=0,k=b.length-1,N=null,m=null;F<=k;){N=(F+k)/2|0,m=b[N];var p=W(m);if(p>0)F=N+1;else if(p<0)k=N-1;else return m}return null}};const I=M},"./src/utils/buffer-helper.ts":(C,D,o)=>{o.r(D),o.d(D,{BufferHelper:()=>K});var M=o("./src/utils/logger.ts"),I={length:0,start:function(){return 0},end:function(){return 0}},K=function(){function b(){}return b.isBuffered=function(F,k){try{if(F){for(var N=b.getBuffered(F),m=0;m<N.length;m++)if(k>=N.start(m)&&k<=N.end(m))return!0}}catch{}return!1},b.bufferInfo=function(F,k,N){try{if(F){var m=b.getBuffered(F),p=[],u;for(u=0;u<m.length;u++)p.push({start:m.start(u),end:m.end(u)});return this.bufferedInfo(p,k,N)}}catch{}return{len:0,start:k,end:k,nextStart:void 0}},b.bufferedInfo=function(F,k,N){k=Math.max(0,k),F.sort(function(y,L){var U=y.start-L.start;return U||L.end-y.end});var m=[];if(N)for(var p=0;p<F.length;p++){var u=m.length;if(u){var w=m[u-1].end;F[p].start-w<N?F[p].end>w&&(m[u-1].end=F[p].end):m.push(F[p])}else m.push(F[p])}else m=F;for(var A=0,d,v=k,h=k,g=0;g<m.length;g++){var P=m[g].start,R=m[g].end;if(k+N>=P&&k<R)v=P,h=R,A=h-k;else if(k+N<P){d=P;break}}return{len:A,start:v||0,end:h||0,nextStart:d}},b.getBuffered=function(F){try{return F.buffered}catch(k){return M.logger.log("failed to get media.buffered",k),I}},b}()},"./src/utils/cea-608-parser.ts":(C,D,o)=>{o.r(D),o.d(D,{CaptionScreen:()=>g,Row:()=>h,default:()=>_});var M=o("./src/utils/logger.ts"),I={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},K=function(c){var E=c;return I.hasOwnProperty(c)&&(E=I[c]),String.fromCharCode(E)},b=15,W=100,F={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},k={17:2,18:4,21:6,22:8,23:10,19:13,20:15},N={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},m={25:2,26:4,29:6,30:8,31:10,27:13,28:15},p=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],u;(function(S){S[S.ERROR=0]="ERROR",S[S.TEXT=1]="TEXT",S[S.WARNING=2]="WARNING",S[S.INFO=2]="INFO",S[S.DEBUG=3]="DEBUG",S[S.DATA=3]="DATA"})(u||(u={}));var w=function(){function S(){this.time=null,this.verboseLevel=u.ERROR}var c=S.prototype;return c.log=function(l,x){if(this.verboseLevel>=l){var B=typeof x=="function"?x():x;M.logger.log(this.time+" ["+l+"] "+B)}},S}(),A=function(c){for(var E=[],l=0;l<c.length;l++)E.push(c[l].toString(16));return E},d=function(){function S(E,l,x,B,O){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=E||"white",this.underline=l||!1,this.italics=x||!1,this.background=B||"black",this.flash=O||!1}var c=S.prototype;return c.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},c.setStyles=function(l){for(var x=["foreground","underline","italics","background","flash"],B=0;B<x.length;B++){var O=x[B];l.hasOwnProperty(O)&&(this[O]=l[O])}},c.isDefault=function(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash},c.equals=function(l){return this.foreground===l.foreground&&this.underline===l.underline&&this.italics===l.italics&&this.background===l.background&&this.flash===l.flash},c.copy=function(l){this.foreground=l.foreground,this.underline=l.underline,this.italics=l.italics,this.background=l.background,this.flash=l.flash},c.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},S}(),v=function(){function S(E,l,x,B,O,$){this.uchar=void 0,this.penState=void 0,this.uchar=E||" ",this.penState=new d(l,x,B,O,$)}var c=S.prototype;return c.reset=function(){this.uchar=" ",this.penState.reset()},c.setChar=function(l,x){this.uchar=l,this.penState.copy(x)},c.setPenState=function(l){this.penState.copy(l)},c.equals=function(l){return this.uchar===l.uchar&&this.penState.equals(l.penState)},c.copy=function(l){this.uchar=l.uchar,this.penState.copy(l.penState)},c.isEmpty=function(){return this.uchar===" "&&this.penState.isDefault()},S}(),h=function(){function S(E){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var l=0;l<W;l++)this.chars.push(new v);this.logger=E,this.pos=0,this.currPenState=new d}var c=S.prototype;return c.equals=function(l){for(var x=!0,B=0;B<W;B++)if(!this.chars[B].equals(l.chars[B])){x=!1;break}return x},c.copy=function(l){for(var x=0;x<W;x++)this.chars[x].copy(l.chars[x])},c.isEmpty=function(){for(var l=!0,x=0;x<W;x++)if(!this.chars[x].isEmpty()){l=!1;break}return l},c.setCursor=function(l){this.pos!==l&&(this.pos=l),this.pos<0?(this.logger.log(u.DEBUG,"Negative cursor position "+this.pos),this.pos=0):this.pos>W&&(this.logger.log(u.DEBUG,"Too large cursor position "+this.pos),this.pos=W)},c.moveCursor=function(l){var x=this.pos+l;if(l>1)for(var B=this.pos+1;B<x+1;B++)this.chars[B].setPenState(this.currPenState);this.setCursor(x)},c.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},c.insertChar=function(l){var x=this;l>=144&&this.backSpace();var B=K(l);if(this.pos>=W){this.logger.log(u.ERROR,function(){return"Cannot insert "+l.toString(16)+" ("+B+") at position "+x.pos+". Skipping it!"});return}this.chars[this.pos].setChar(B,this.currPenState),this.moveCursor(1)},c.clearFromPos=function(l){var x;for(x=l;x<W;x++)this.chars[x].reset()},c.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},c.clearToEndOfRow=function(){this.clearFromPos(this.pos)},c.getTextString=function(){for(var l=[],x=!0,B=0;B<W;B++){var O=this.chars[B].uchar;O!==" "&&(x=!1),l.push(O)}return x?"":l.join("")},c.setPenStyles=function(l){this.currPenState.setStyles(l);var x=this.chars[this.pos];x.setPenState(this.currPenState)},S}(),g=function(){function S(E){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var l=0;l<b;l++)this.rows.push(new h(E));this.logger=E,this.currRow=b-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}var c=S.prototype;return c.reset=function(){for(var l=0;l<b;l++)this.rows[l].clear();this.currRow=b-1},c.equals=function(l){for(var x=!0,B=0;B<b;B++)if(!this.rows[B].equals(l.rows[B])){x=!1;break}return x},c.copy=function(l){for(var x=0;x<b;x++)this.rows[x].copy(l.rows[x])},c.isEmpty=function(){for(var l=!0,x=0;x<b;x++)if(!this.rows[x].isEmpty()){l=!1;break}return l},c.backSpace=function(){var l=this.rows[this.currRow];l.backSpace()},c.clearToEndOfRow=function(){var l=this.rows[this.currRow];l.clearToEndOfRow()},c.insertChar=function(l){var x=this.rows[this.currRow];x.insertChar(l)},c.setPen=function(l){var x=this.rows[this.currRow];x.setPenStyles(l)},c.moveCursor=function(l){var x=this.rows[this.currRow];x.moveCursor(l)},c.setCursor=function(l){this.logger.log(u.INFO,"setCursor: "+l);var x=this.rows[this.currRow];x.setCursor(l)},c.setPAC=function(l){this.logger.log(u.INFO,function(){return"pacData = "+JSON.stringify(l)});var x=l.row-1;if(this.nrRollUpRows&&x<this.nrRollUpRows-1&&(x=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==x){for(var B=0;B<b;B++)this.rows[B].clear();var O=this.currRow+1-this.nrRollUpRows,$=this.lastOutputScreen;if($){var H=$.rows[O].cueStartTime,j=this.logger.time;if(H&&j!==null&&H<j)for(var V=0;V<this.nrRollUpRows;V++)this.rows[x-this.nrRollUpRows+V+1].copy($.rows[O+V])}}this.currRow=x;var z=this.rows[this.currRow];if(l.indent!==null){var X=l.indent,J=Math.max(X-1,0);z.setCursor(l.indent),l.color=z.chars[J].penState.foreground}var q={foreground:l.color,underline:l.underline,italics:l.italics,background:"black",flash:!1};this.setPen(q)},c.setBkgData=function(l){this.logger.log(u.INFO,function(){return"bkgData = "+JSON.stringify(l)}),this.backSpace(),this.setPen(l),this.insertChar(32)},c.setRollUpRows=function(l){this.nrRollUpRows=l},c.rollUp=function(){var l=this;if(this.nrRollUpRows===null){this.logger.log(u.DEBUG,"roll_up but nrRollUpRows not set yet");return}this.logger.log(u.TEXT,function(){return l.getDisplayText()});var x=this.currRow+1-this.nrRollUpRows,B=this.rows.splice(x,1)[0];B.clear(),this.rows.splice(this.currRow,0,B),this.logger.log(u.INFO,"Rolling up")},c.getDisplayText=function(l){l=l||!1;for(var x=[],B="",O=-1,$=0;$<b;$++){var H=this.rows[$].getTextString();H&&(O=$+1,l?x.push("Row "+O+": '"+H+"'"):x.push(H.trim()))}return x.length>0&&(l?B="["+x.join(" | ")+"]":B=x.join(`
`)),B},c.getTextAndFormat=function(){return this.rows},S}(),P=function(){function S(E,l,x){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=E,this.outputFilter=l,this.mode=null,this.verbose=0,this.displayedMemory=new g(x),this.nonDisplayedMemory=new g(x),this.lastOutputScreen=new g(x),this.currRollUpRow=this.displayedMemory.rows[b-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=x}var c=S.prototype;return c.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[b-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},c.getHandler=function(){return this.outputFilter},c.setHandler=function(l){this.outputFilter=l},c.setPAC=function(l){this.writeScreen.setPAC(l)},c.setBkgData=function(l){this.writeScreen.setBkgData(l)},c.setMode=function(l){l!==this.mode&&(this.mode=l,this.logger.log(u.INFO,function(){return"MODE="+l}),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=l)},c.insertChars=function(l){for(var x=this,B=0;B<l.length;B++)this.writeScreen.insertChar(l[B]);var O=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(u.INFO,function(){return O+": "+x.writeScreen.getDisplayText(!0)}),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(u.TEXT,function(){return"DISPLAYED: "+x.displayedMemory.getDisplayText(!0)}),this.outputDataUpdate())},c.ccRCL=function(){this.logger.log(u.INFO,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},c.ccBS=function(){this.logger.log(u.INFO,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},c.ccAOF=function(){},c.ccAON=function(){},c.ccDER=function(){this.logger.log(u.INFO,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},c.ccRU=function(l){this.logger.log(u.INFO,"RU("+l+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(l)},c.ccFON=function(){this.logger.log(u.INFO,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},c.ccRDC=function(){this.logger.log(u.INFO,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},c.ccTR=function(){this.logger.log(u.INFO,"TR"),this.setMode("MODE_TEXT")},c.ccRTD=function(){this.logger.log(u.INFO,"RTD"),this.setMode("MODE_TEXT")},c.ccEDM=function(){this.logger.log(u.INFO,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},c.ccCR=function(){this.logger.log(u.INFO,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},c.ccENM=function(){this.logger.log(u.INFO,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},c.ccEOC=function(){var l=this;if(this.logger.log(u.INFO,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){var x=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=x,this.writeScreen=this.nonDisplayedMemory,this.logger.log(u.TEXT,function(){return"DISP: "+l.displayedMemory.getDisplayText()})}this.outputDataUpdate(!0)},c.ccTO=function(l){this.logger.log(u.INFO,"TO("+l+") - Tab Offset"),this.writeScreen.moveCursor(l)},c.ccMIDROW=function(l){var x={flash:!1};if(x.underline=l%2===1,x.italics=l>=46,x.italics)x.foreground="white";else{var B=Math.floor(l/2)-16,O=["white","green","blue","cyan","red","yellow","magenta"];x.foreground=O[B]}this.logger.log(u.INFO,"MIDROW: "+JSON.stringify(x)),this.writeScreen.setPen(x)},c.outputDataUpdate=function(l){l===void 0&&(l=!1);var x=this.logger.time;x!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=x:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,x,this.lastOutputScreen),l&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:x),this.lastOutputScreen.copy(this.displayedMemory))},c.cueSplitAtTime=function(l){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,l,this.displayedMemory),this.cueStartTime=l))},S}(),R=function(){function S(E,l,x){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var B=new w;this.channels=[null,new P(E,l,B),new P(E+1,x,B)],this.cmdHistory=U(),this.logger=B}var c=S.prototype;return c.getHandler=function(l){return this.channels[l].getHandler()},c.setHandler=function(l,x){this.channels[l].setHandler(x)},c.addData=function(l,x){var B,O,$,H=!1;this.logger.time=l;for(var j=0;j<x.length;j+=2)if(O=x[j]&127,$=x[j+1]&127,!(O===0&&$===0)){if(this.logger.log(u.DATA,"["+A([x[j],x[j+1]])+"] -> ("+A([O,$])+")"),B=this.parseCmd(O,$),B||(B=this.parseMidrow(O,$)),B||(B=this.parsePAC(O,$)),B||(B=this.parseBackgroundAttributes(O,$)),!B&&(H=this.parseChars(O,$),H)){var V=this.currentChannel;if(V&&V>0){var z=this.channels[V];z.insertChars(H)}else this.logger.log(u.WARNING,"No channel found yet. TEXT-MODE?")}!B&&!H&&this.logger.log(u.WARNING,"Couldn't parse cleaned data "+A([O,$])+" orig: "+A([x[j],x[j+1]]))}},c.parseCmd=function(l,x){var B=this.cmdHistory,O=(l===20||l===28||l===21||l===29)&&x>=32&&x<=47,$=(l===23||l===31)&&x>=33&&x<=35;if(!(O||$))return!1;if(L(l,x,B))return y(null,null,B),this.logger.log(u.DEBUG,"Repeated command ("+A([l,x])+") is dropped"),!0;var H=l===20||l===21||l===23?1:2,j=this.channels[H];return l===20||l===21||l===28||l===29?x===32?j.ccRCL():x===33?j.ccBS():x===34?j.ccAOF():x===35?j.ccAON():x===36?j.ccDER():x===37?j.ccRU(2):x===38?j.ccRU(3):x===39?j.ccRU(4):x===40?j.ccFON():x===41?j.ccRDC():x===42?j.ccTR():x===43?j.ccRTD():x===44?j.ccEDM():x===45?j.ccCR():x===46?j.ccENM():x===47&&j.ccEOC():j.ccTO(x-32),y(l,x,B),this.currentChannel=H,!0},c.parseMidrow=function(l,x){var B=0;if((l===17||l===25)&&x>=32&&x<=47){if(l===17?B=1:B=2,B!==this.currentChannel)return this.logger.log(u.ERROR,"Mismatch channel in midrow parsing"),!1;var O=this.channels[B];return O?(O.ccMIDROW(x),this.logger.log(u.DEBUG,"MIDROW ("+A([l,x])+")"),!0):!1}return!1},c.parsePAC=function(l,x){var B,O=this.cmdHistory,$=(l>=17&&l<=23||l>=25&&l<=31)&&x>=64&&x<=127,H=(l===16||l===24)&&x>=64&&x<=95;if(!($||H))return!1;if(L(l,x,O))return y(null,null,O),!0;var j=l<=23?1:2;x>=64&&x<=95?B=j===1?F[l]:N[l]:B=j===1?k[l]:m[l];var V=this.channels[j];return V?(V.setPAC(this.interpretPAC(B,x)),y(l,x,O),this.currentChannel=j,!0):!1},c.interpretPAC=function(l,x){var B,O={color:null,italics:!1,indent:null,underline:!1,row:l};return x>95?B=x-96:B=x-64,O.underline=(B&1)===1,B<=13?O.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(B/2)]:B<=15?(O.italics=!0,O.color="white"):O.indent=Math.floor((B-16)/2)*4,O},c.parseChars=function(l,x){var B,O=null,$=null;if(l>=25?(B=2,$=l-8):(B=1,$=l),$>=17&&$<=19){var H;$===17?H=x+80:$===18?H=x+112:H=x+144,this.logger.log(u.INFO,"Special char '"+K(H)+"' in channel "+B),O=[H]}else l>=32&&l<=127&&(O=x===0?[l]:[l,x]);if(O){var j=A(O);this.logger.log(u.DEBUG,"Char codes =  "+j.join(",")),y(l,x,this.cmdHistory)}return O},c.parseBackgroundAttributes=function(l,x){var B=(l===16||l===24)&&x>=32&&x<=47,O=(l===23||l===31)&&x>=45&&x<=47;if(!(B||O))return!1;var $,H={};l===16||l===24?($=Math.floor((x-32)/2),H.background=p[$],x%2===1&&(H.background=H.background+"_semi")):x===45?H.background="transparent":(H.foreground="black",x===47&&(H.underline=!0));var j=l<=23?1:2,V=this.channels[j];return V.setBkgData(H),y(l,x,this.cmdHistory),!0},c.reset=function(){for(var l=0;l<Object.keys(this.channels).length;l++){var x=this.channels[l];x&&x.reset()}this.cmdHistory=U()},c.cueSplitAtTime=function(l){for(var x=0;x<this.channels.length;x++){var B=this.channels[x];B&&B.cueSplitAtTime(l)}},S}();function y(S,c,E){E.a=S,E.b=c}function L(S,c,E){return E.a===S&&E.b===c}function U(){return{a:null,b:null}}const _=R},"./src/utils/codecs.ts":(C,D,o)=>{o.r(D),o.d(D,{isCodecSupportedInMp4:()=>K,isCodecType:()=>I});var M={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dva1:!0,dvav:!0,dvh1:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}};function I(b,W){var F=M[W];return!!F&&F[b.slice(0,4)]===!0}function K(b,W){return MediaSource.isTypeSupported((W||"video")+'/mp4;codecs="'+b+'"')}},"./src/utils/cues.ts":(C,D,o)=>{o.r(D),o.d(D,{default:()=>F});var M=o("./src/utils/vttparser.ts"),I=o("./src/utils/webvtt-parser.ts"),K=o("./src/utils/texttrack-utils.ts"),b=/\s/,W={newCue:function(N,m,p,u){for(var w=[],A,d,v,h,g,P=self.VTTCue||self.TextTrackCue,R=0;R<u.rows.length;R++)if(A=u.rows[R],v=!0,h=0,g="",!A.isEmpty()){for(var y=0;y<A.chars.length;y++)b.test(A.chars[y].uchar)&&v?h++:(g+=A.chars[y].uchar,v=!1);A.cueStartTime=m,m===p&&(p+=1e-4),h>=16?h--:h++;var L=(0,M.fixLineBreaks)(g.trim()),U=(0,I.generateCueId)(m,p,L);(!N||!N.cues||!N.cues.getCueById(U))&&(d=new P(m,p,L),d.id=U,d.line=R+1,d.align="left",d.position=10+Math.min(80,Math.floor(h*8/32)*10),w.push(d))}return N&&w.length&&(w.sort(function(_,S){return _.line==="auto"||S.line==="auto"?0:_.line>8&&S.line>8?S.line-_.line:_.line-S.line}),w.forEach(function(_){return(0,K.addCueToTrack)(N,_)})),w}};const F=W},"./src/utils/discontinuities.ts":(C,D,o)=>{o.r(D),o.d(D,{adjustSlidingStart:()=>N,alignMediaPlaylistByPDT:()=>w,alignPDT:()=>u,alignStream:()=>m,findDiscontinuousReferenceFrag:()=>F,findFirstFragWithCC:()=>b,shouldAlignOnDiscontinuities:()=>W});var M=o("./src/polyfills/number.ts"),I=o("./src/utils/logger.ts"),K=o("./src/controller/level-helper.ts");function b(A,d){for(var v=null,h=0,g=A.length;h<g;h++){var P=A[h];if(P&&P.cc===d){v=P;break}}return v}function W(A,d,v){return!!(d.details&&(v.endCC>v.startCC||A&&A.cc<v.startCC))}function F(A,d,v){var h=A.fragments,g=d.fragments;if(!g.length||!h.length){I.logger.log("No fragments to align");return}var P=b(h,g[0].cc);if(!P||P&&!P.startPTS){I.logger.log("No frag in previous level to align on");return}return P}function k(A,d){if(A){var v=A.start+d;A.start=A.startPTS=v,A.endPTS=v+A.duration}}function N(A,d){for(var v=d.fragments,h=0,g=v.length;h<g;h++)k(v[h],A);d.fragmentHint&&k(d.fragmentHint,A),d.alignedSliding=!0}function m(A,d,v){d&&(p(A,v,d),!v.alignedSliding&&d.details&&u(v,d.details),!v.alignedSliding&&d.details&&!v.skippedSegments&&(0,K.adjustSliding)(d.details,v))}function p(A,d,v){if(W(A,v,d)){var h=F(v.details,d);h&&(0,M.isFiniteNumber)(h.start)&&(I.logger.log("Adjusting PTS using last level due to CC increase within current level "+d.url),N(h.start,d))}}function u(A,d){if(!(!d.fragments.length||!A.hasProgramDateTime||!d.hasProgramDateTime)){var v=d.fragments[0].programDateTime,h=A.fragments[0].programDateTime,g=(h-v)/1e3+d.fragments[0].start;g&&(0,M.isFiniteNumber)(g)&&(I.logger.log("Adjusting PTS using programDateTime delta "+(h-v)+"ms, sliding:"+g.toFixed(3)+" "+A.url+" "),N(g,A))}}function w(A,d){if(!(!A.hasProgramDateTime||!d.hasProgramDateTime)){var v=A.fragments,h=d.fragments;if(!(!v.length||!h.length)){var g=Math.round(h.length/2)-1,P=h[g],R=b(v,P.cc)||v[Math.round(v.length/2)-1],y=P.programDateTime,L=R.programDateTime;if(!(y===null||L===null)){var U=(L-y)/1e3-(R.start-P.start);N(U,A)}}}}},"./src/utils/ewma-bandwidth-estimator.ts":(C,D,o)=>{o.r(D),o.d(D,{default:()=>K});var M=o("./src/utils/ewma.ts"),I=function(){function b(F,k,N){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultEstimate_=N,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new M.default(F),this.fast_=new M.default(k)}var W=b.prototype;return W.update=function(k,N){var m=this.slow_,p=this.fast_;this.slow_.halfLife!==k&&(this.slow_=new M.default(k,m.getEstimate(),m.getTotalWeight())),this.fast_.halfLife!==N&&(this.fast_=new M.default(N,p.getEstimate(),p.getTotalWeight()))},W.sample=function(k,N){k=Math.max(k,this.minDelayMs_);var m=8*N,p=k/1e3,u=m/p;this.fast_.sample(p,u),this.slow_.sample(p,u)},W.canEstimate=function(){var k=this.fast_;return k&&k.getTotalWeight()>=this.minWeight_},W.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},W.destroy=function(){},b}();const K=I},"./src/utils/ewma.ts":(C,D,o)=>{o.r(D),o.d(D,{default:()=>I});var M=function(){function K(W,F,k){F===void 0&&(F=0),k===void 0&&(k=0),this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=W,this.alpha_=W?Math.exp(Math.log(.5)/W):0,this.estimate_=F,this.totalWeight_=k}var b=K.prototype;return b.sample=function(F,k){var N=Math.pow(this.alpha_,F);this.estimate_=k*(1-N)+N*this.estimate_,this.totalWeight_+=F},b.getTotalWeight=function(){return this.totalWeight_},b.getEstimate=function(){if(this.alpha_){var F=1-Math.pow(this.alpha_,this.totalWeight_);if(F)return this.estimate_/F}return this.estimate_},K}();const I=M},"./src/utils/fetch-loader.ts":(C,D,o)=>{o.r(D),o.d(D,{default:()=>g,fetchSupported:()=>w});var M=o("./src/polyfills/number.ts"),I=o("./src/loader/load-stats.ts"),K=o("./src/demux/chunk-cache.ts");function b(P,R){P.prototype=Object.create(R.prototype),P.prototype.constructor=P,m(P,R)}function W(P){var R=typeof Map=="function"?new Map:void 0;return W=function(L){if(L===null||!N(L))return L;if(typeof L!="function")throw new TypeError("Super expression must either be null or a function");if(typeof R<"u"){if(R.has(L))return R.get(L);R.set(L,U)}function U(){return F(L,arguments,p(this).constructor)}return U.prototype=Object.create(L.prototype,{constructor:{value:U,enumerable:!1,writable:!0,configurable:!0}}),m(U,L)},W(P)}function F(P,R,y){return k()?F=Reflect.construct.bind():F=function(U,_,S){var c=[null];c.push.apply(c,_);var E=Function.bind.apply(U,c),l=new E;return S&&m(l,S.prototype),l},F.apply(null,arguments)}function k(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function N(P){return Function.toString.call(P).indexOf("[native code]")!==-1}function m(P,R){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(L,U){return L.__proto__=U,L},m(P,R)}function p(P){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(y){return y.__proto__||Object.getPrototypeOf(y)},p(P)}function u(){return u=Object.assign?Object.assign.bind():function(P){for(var R=1;R<arguments.length;R++){var y=arguments[R];for(var L in y)Object.prototype.hasOwnProperty.call(y,L)&&(P[L]=y[L])}return P},u.apply(this,arguments)}function w(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}var A=function(){function P(y){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=void 0,this.response=void 0,this.controller=void 0,this.context=void 0,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=y.fetchSetup||v,this.controller=new self.AbortController,this.stats=new I.LoadStats}var R=P.prototype;return R.destroy=function(){this.loader=this.callbacks=null,this.abortInternal()},R.abortInternal=function(){var L=this.response;(!L||!L.ok)&&(this.stats.aborted=!0,this.controller.abort())},R.abort=function(){var L;this.abortInternal(),(L=this.callbacks)!==null&&L!==void 0&&L.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)},R.load=function(L,U,_){var S=this,c=this.stats;if(c.loading.start)throw new Error("Loader can only be used once.");c.loading.start=self.performance.now();var E=d(L,this.controller.signal),l=_.onProgress,x=L.responseType==="arraybuffer",B=x?"byteLength":"length";this.context=L,this.config=U,this.callbacks=_,this.request=this.fetchSetup(L,E),self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(function(){S.abortInternal(),_.onTimeout(c,L,S.response)},U.timeout),self.fetch(this.request).then(function(O){if(S.response=S.loader=O,!O.ok){var $=O.status,H=O.statusText;throw new h(H||"fetch, bad network response",$,O)}return c.loading.first=Math.max(self.performance.now(),c.loading.start),c.total=parseInt(O.headers.get("Content-Length")||"0"),l&&(0,M.isFiniteNumber)(U.highWaterMark)?S.loadProgressively(O,c,L,U.highWaterMark,l):x?O.arrayBuffer():O.text()}).then(function(O){var $=S.response;self.clearTimeout(S.requestTimeout),c.loading.end=Math.max(self.performance.now(),c.loading.first);var H=O[B];H&&(c.loaded=c.total=H);var j={url:$.url,data:O};l&&!(0,M.isFiniteNumber)(U.highWaterMark)&&l(c,L,O,$),_.onSuccess(j,c,L,$)}).catch(function(O){if(self.clearTimeout(S.requestTimeout),!c.aborted){var $=O&&O.code||0,H=O?O.message:null;_.onError({code:$,text:H},L,O?O.details:null)}})},R.getCacheAge=function(){var L=null;if(this.response){var U=this.response.headers.get("age");L=U?parseFloat(U):null}return L},R.loadProgressively=function(L,U,_,S,c){S===void 0&&(S=0);var E=new K.default,l=L.body.getReader(),x=function B(){return l.read().then(function(O){if(O.done)return E.dataLength&&c(U,_,E.flush(),L),Promise.resolve(new ArrayBuffer(0));var $=O.value,H=$.length;return U.loaded+=H,H<S||E.dataLength?(E.push($),E.dataLength>=S&&c(U,_,E.flush(),L)):c(U,_,$,L),B()}).catch(function(){return Promise.reject()})};return x()},P}();function d(P,R){var y={method:"GET",mode:"cors",credentials:"same-origin",signal:R,headers:new self.Headers(u({},P.headers))};return P.rangeEnd&&y.headers.set("Range","bytes="+P.rangeStart+"-"+String(P.rangeEnd-1)),y}function v(P,R){return new self.Request(P.url,R)}var h=function(P){b(R,P);function R(y,L,U){var _;return _=P.call(this,y)||this,_.code=void 0,_.details=void 0,_.code=L,_.details=U,_}return R}(W(Error));const g=A},"./src/utils/hex.ts":(C,D,o)=>{o.r(D),o.d(D,{default:()=>I});var M={hexDump:function(b){for(var W="",F=0;F<b.length;F++){var k=b[F].toString(16);k.length<2&&(k="0"+k),W+=k}return W}};const I=M},"./src/utils/imsc1-ttml-parser.ts":(C,D,o)=>{o.r(D),o.d(D,{IMSC1_CODEC:()=>N,parseIMSC1:()=>w});var M=o("./src/utils/mp4-tools.ts"),I=o("./src/utils/vttparser.ts"),K=o("./src/utils/vttcue.ts"),b=o("./src/demux/id3.ts"),W=o("./src/utils/timescale-conversion.ts"),F=o("./src/utils/webvtt-parser.ts");function k(){return k=Object.assign?Object.assign.bind():function(_){for(var S=1;S<arguments.length;S++){var c=arguments[S];for(var E in c)Object.prototype.hasOwnProperty.call(c,E)&&(_[E]=c[E])}return _},k.apply(this,arguments)}var N="stpp.ttml.im1t",m=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,p=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,u={left:"start",center:"center",right:"end",start:"start",end:"end"};function w(_,S,c,E,l){var x=(0,M.findBox)(new Uint8Array(_),["mdat"]);if(x.length===0){l(new Error("Could not parse IMSC1 mdat"));return}var B=x.map(function($){return(0,b.utf8ArrayToStr)($)}),O=(0,W.toTimescaleFromScale)(S,1,c);try{B.forEach(function($){return E(A($,O))})}catch($){l($)}}function A(_,S){var c=new DOMParser,E=c.parseFromString(_,"text/xml"),l=E.getElementsByTagName("tt")[0];if(!l)throw new Error("Invalid ttml");var x={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},B=Object.keys(x).reduce(function(V,z){return V[z]=l.getAttribute("ttp:"+z)||x[z],V},{}),O=l.getAttribute("xml:space")!=="preserve",$=v(d(l,"styling","style")),H=v(d(l,"layout","region")),j=d(l,"body","[begin]");return[].map.call(j,function(V){var z=h(V,O);if(!z||!V.hasAttribute("begin"))return null;var X=y(V.getAttribute("begin"),B),J=y(V.getAttribute("dur"),B),q=y(V.getAttribute("end"),B);if(X===null)throw R(V);if(q===null){if(J===null)throw R(V);q=X+J}var ee=new K.default(X-S,q-S,z);ee.id=(0,F.generateCueId)(ee.startTime,ee.endTime,ee.text);var ne=H[V.getAttribute("region")],ae=$[V.getAttribute("style")],fe=g(ne,ae,$),ue=fe.textAlign;if(ue){var ce=u[ue];ce&&(ee.lineAlign=ce),ee.align=ue}return k(ee,fe),ee}).filter(function(V){return V!==null})}function d(_,S,c){var E=_.getElementsByTagName(S)[0];return E?[].slice.call(E.querySelectorAll(c)):[]}function v(_){return _.reduce(function(S,c){var E=c.getAttribute("xml:id");return E&&(S[E]=c),S},{})}function h(_,S){return[].slice.call(_.childNodes).reduce(function(c,E,l){var x;return E.nodeName==="br"&&l?c+`
`:(x=E.childNodes)!==null&&x!==void 0&&x.length?h(E,S):S?c+E.textContent.trim().replace(/\s+/g," "):c+E.textContent},"")}function g(_,S,c){var E="http://www.w3.org/ns/ttml#styling",l=null,x=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],B=_!=null&&_.hasAttribute("style")?_.getAttribute("style"):null;return B&&c.hasOwnProperty(B)&&(l=c[B]),x.reduce(function(O,$){var H=P(S,E,$)||P(_,E,$)||P(l,E,$);return H&&(O[$]=H),O},{})}function P(_,S,c){return _&&_.hasAttributeNS(S,c)?_.getAttributeNS(S,c):null}function R(_){return new Error("Could not parse ttml timestamp "+_)}function y(_,S){if(!_)return null;var c=(0,I.parseTimeStamp)(_);return c===null&&(m.test(_)?c=L(_,S):p.test(_)&&(c=U(_,S))),c}function L(_,S){var c=m.exec(_),E=(c[4]|0)+(c[5]|0)/S.subFrameRate;return(c[1]|0)*3600+(c[2]|0)*60+(c[3]|0)+E/S.frameRate}function U(_,S){var c=p.exec(_),E=Number(c[1]),l=c[2];switch(l){case"h":return E*3600;case"m":return E*60;case"ms":return E*1e3;case"f":return E/S.frameRate;case"t":return E/S.tickRate}return E}},"./src/utils/keysystem-util.ts":(C,D,o)=>{o.r(D),o.d(D,{changeEndianness:()=>K,convertDataUriToArrayBytes:()=>b,strToUtf8array:()=>W});var M=o("./src/utils/numeric-encoding-utils.ts");function I(F){var k=W(F).subarray(0,16),N=new Uint8Array(16);return N.set(k,16-k.length),N}function K(F){var k=function(m,p,u){var w=m[p];m[p]=m[u],m[u]=w};k(F,0,3),k(F,1,2),k(F,4,5),k(F,6,7)}function b(F){var k=F.split(":"),N=null;if(k[0]==="data"&&k.length===2){var m=k[1].split(";"),p=m[m.length-1].split(",");if(p.length===2){var u=p[0]==="base64",w=p[1];u?(m.splice(-1,1),N=(0,M.base64Decode)(w)):N=I(w)}}return N}function W(F){return Uint8Array.from(unescape(encodeURIComponent(F)),function(k){return k.charCodeAt(0)})}},"./src/utils/logger.ts":(C,D,o)=>{o.r(D),o.d(D,{enableLogs:()=>F,logger:()=>k});var M=function(){},I={trace:M,debug:M,log:M,warn:M,info:M,error:M},K=I;function b(N){var m=self.console[N];return m?m.bind(self.console,"["+N+"] >"):M}function W(N){for(var m=arguments.length,p=new Array(m>1?m-1:0),u=1;u<m;u++)p[u-1]=arguments[u];p.forEach(function(w){K[w]=N[w]?N[w].bind(N):b(w)})}function F(N,m){if(self.console&&N===!0||typeof N=="object"){W(N,"debug","log","info","warn","error");try{K.log('Debug logs enabled for "'+m+'"')}catch{K=I}}else K=I}var k=K},"./src/utils/mediakeys-helper.ts":(C,D,o)=>{o.r(D),o.d(D,{KeySystemFormats:()=>I,KeySystemIds:()=>b,KeySystems:()=>M,getKeySystemsForConfig:()=>k,getSupportedMediaKeySystemConfigurations:()=>m,keySystemDomainToKeySystemFormat:()=>F,keySystemFormatToKeySystemDomain:()=>K,keySystemIdToKeySystemDomain:()=>W,requestMediaKeySystemAccess:()=>N});var M;(function(u){u.CLEARKEY="org.w3.clearkey",u.FAIRPLAY="com.apple.fps",u.PLAYREADY="com.microsoft.playready",u.WIDEVINE="com.widevine.alpha"})(M||(M={}));var I;(function(u){u.CLEARKEY="org.w3.clearkey",u.FAIRPLAY="com.apple.streamingkeydelivery",u.PLAYREADY="com.microsoft.playready",u.WIDEVINE="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"})(I||(I={}));function K(u){switch(u){case I.FAIRPLAY:return M.FAIRPLAY;case I.PLAYREADY:return M.PLAYREADY;case I.WIDEVINE:return M.WIDEVINE;case I.CLEARKEY:return M.CLEARKEY}}var b;(function(u){u.WIDEVINE="edef8ba979d64acea3c827dcd51d21ed"})(b||(b={}));function W(u){if(u===b.WIDEVINE)return M.WIDEVINE}function F(u){switch(u){case M.FAIRPLAY:return I.FAIRPLAY;case M.PLAYREADY:return I.PLAYREADY;case M.WIDEVINE:return I.WIDEVINE;case M.CLEARKEY:return I.CLEARKEY}}function k(u){var w=u.drmSystems,A=u.widevineLicenseUrl,d=w?[M.FAIRPLAY,M.WIDEVINE,M.PLAYREADY,M.CLEARKEY].filter(function(v){return!!w[v]}):[];return!d[M.WIDEVINE]&&A&&d.push(M.WIDEVINE),d}var N=function(){return typeof self<"u"&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null}();function m(u,w,A,d){var v;switch(u){case M.FAIRPLAY:v=["cenc","sinf"];break;case M.WIDEVINE:case M.PLAYREADY:v=["cenc"];break;case M.CLEARKEY:v=["cenc","keyids"];break;default:throw new Error("Unknown key-system: "+u)}return p(v,w,A,d)}function p(u,w,A,d){var v={initDataTypes:u,persistentState:d.persistentState||"not-allowed",distinctiveIdentifier:d.distinctiveIdentifier||"not-allowed",sessionTypes:d.sessionTypes||[d.sessionType||"temporary"],audioCapabilities:w.map(function(h){return{contentType:'audio/mp4; codecs="'+h+'"',robustness:d.audioRobustness||"",encryptionScheme:d.audioEncryptionScheme||null}}),videoCapabilities:A.map(function(h){return{contentType:'video/mp4; codecs="'+h+'"',robustness:d.videoRobustness||"",encryptionScheme:d.videoEncryptionScheme||null}})};return[v]}},"./src/utils/mediasource-helper.ts":(C,D,o)=>{o.r(D),o.d(D,{getMediaSource:()=>M});function M(){return self.MediaSource||self.WebKitMediaSource}},"./src/utils/mp4-tools.ts":(C,D,o)=>{o.r(D),o.d(D,{RemuxerTrackIdConfig:()=>N,appendUint8Array:()=>S,bin2str:()=>m,computeRawDurationFromSamples:()=>L,discardEPB:()=>B,findBox:()=>d,getDuration:()=>y,getStartDTS:()=>R,mp4Box:()=>$,mp4pssh:()=>H,offsetStartDTS:()=>U,parseEmsg:()=>O,parseInitSegment:()=>h,parsePssh:()=>j,parseSEIMessageFromNALu:()=>x,parseSamples:()=>c,parseSegmentIndex:()=>v,parseSinf:()=>P,patchEncyptionData:()=>g,readSint32:()=>w,readUint16:()=>p,readUint32:()=>u,segmentValidRange:()=>_,writeUint32:()=>A});var M=o("./src/loader/fragment.ts"),I=o("./src/utils/typed-array.ts"),K=o("./src/demux/id3.ts"),b=o("./src/utils/logger.ts"),W=o("./src/utils/hex.ts"),F=Math.pow(2,32)-1,k=[].push,N={video:1,audio:2,id3:3,text:4};function m(V){return String.fromCharCode.apply(null,V)}function p(V,z){var X=V[z]<<8|V[z+1];return X<0?65536+X:X}function u(V,z){var X=w(V,z);return X<0?4294967296+X:X}function w(V,z){return V[z]<<24|V[z+1]<<16|V[z+2]<<8|V[z+3]}function A(V,z,X){V[z]=X>>24,V[z+1]=X>>16&255,V[z+2]=X>>8&255,V[z+3]=X&255}function d(V,z){var X=[];if(!z.length)return X;for(var J=V.byteLength,q=0;q<J;){var ee=u(V,q),ne=m(V.subarray(q+4,q+8)),ae=ee>1?q+ee:J;if(ne===z[0])if(z.length===1)X.push(V.subarray(q+8,ae));else{var fe=d(V.subarray(q+8,ae),z.slice(1));fe.length&&k.apply(X,fe)}q=ae}return X}function v(V){var z=[],X=V[0],J=8,q=u(V,J);J+=4;var ee=0,ne=0;X===0?J+=8:J+=16,J+=2;var ae=V.length+ne,fe=p(V,J);J+=2;for(var ue=0;ue<fe;ue++){var ce=J,ye=u(V,ce);ce+=4;var Pe=ye&2147483647,Te=(ye&2147483648)>>>31;if(Te===1)return console.warn("SIDX has hierarchical references (not supported)"),null;var ge=u(V,ce);ce+=4,z.push({referenceSize:Pe,subsegmentDuration:ge,info:{duration:ge/q,start:ae,end:ae+Pe-1}}),ae+=Pe,ce+=4,J=ce}return{earliestPresentationTime:ee,timescale:q,version:X,referencesCount:fe,references:z}}function h(V){for(var z=[],X=d(V,["moov","trak"]),J=0;J<X.length;J++){var q=X[J],ee=d(q,["tkhd"])[0];if(ee){var ne=ee[0],ae=ne===0?12:20,fe=u(ee,ae),ue=d(q,["mdia","mdhd"])[0];if(ue){ne=ue[0],ae=ne===0?12:20;var ce=u(ue,ae),ye=d(q,["mdia","hdlr"])[0];if(ye){var Pe=m(ye.subarray(8,12)),Te={soun:M.ElementaryStreamTypes.AUDIO,vide:M.ElementaryStreamTypes.VIDEO}[Pe];if(Te){var ge=d(q,["mdia","minf","stbl","stsd"])[0],De=void 0;ge&&(De=m(ge.subarray(12,16))),z[fe]={timescale:ce,type:Te},z[Te]={timescale:ce,id:fe,codec:De}}}}}}var be=d(V,["moov","mvex","trex"]);return be.forEach(function(Ue){var gt=u(Ue,4),Ve=z[gt];Ve&&(Ve.default={duration:u(Ue,12),flags:u(Ue,20)})}),z}function g(V,z){if(!V||!z)return V;var X=z.keyId;if(X&&z.isCommonEncryption){var J=d(V,["moov","trak"]);J.forEach(function(q){var ee=d(q,["mdia","minf","stbl","stsd"])[0],ne=ee.subarray(8),ae=d(ne,["enca"]),fe=ae.length>0;fe||(ae=d(ne,["encv"])),ae.forEach(function(ue){var ce=fe?ue.subarray(28):ue.subarray(78),ye=d(ce,["sinf"]);ye.forEach(function(Pe){var Te=P(Pe);if(Te){var ge=Te.subarray(8,24);ge.some(function(De){return De!==0})||(b.logger.log("[eme] Patching keyId in 'enc"+(fe?"a":"v")+">sinf>>tenc' box: "+W.default.hexDump(ge)+" -> "+W.default.hexDump(X)),Te.set(X,8))}})})})}return V}function P(V){var z=d(V,["schm"])[0];if(z){var X=m(z.subarray(4,8));if(X==="cbcs"||X==="cenc")return d(V,["schi","tenc"])[0]}return b.logger.error("[eme] missing 'schm' box"),null}function R(V,z){return d(z,["moof","traf"]).reduce(function(X,J){var q=d(J,["tfdt"])[0],ee=q[0],ne=d(J,["tfhd"]).reduce(function(ae,fe){var ue=u(fe,4),ce=V[ue];if(ce){var ye=u(q,4);ee===1&&(ye*=Math.pow(2,32),ye+=u(q,8));var Pe=ce.timescale||9e4,Te=ye/Pe;if(isFinite(Te)&&(ae===null||Te<ae))return Te}return ae},null);return ne!==null&&isFinite(ne)&&(X===null||ne<X)?ne:X},null)||0}function y(V,z){for(var X=0,J=0,q=0,ee=d(V,["moof","traf"]),ne=0;ne<ee.length;ne++){var ae=ee[ne],fe=d(ae,["tfhd"])[0],ue=u(fe,4),ce=z[ue];if(ce){var ye=ce.default,Pe=u(fe,0)|(ye==null?void 0:ye.flags),Te=ye==null?void 0:ye.duration;Pe&8&&(Pe&2?Te=u(fe,12):Te=u(fe,8));for(var ge=ce.timescale||9e4,De=d(ae,["trun"]),be=0;be<De.length;be++){if(X=L(De[be]),!X&&Te){var Ue=u(De[be],4);X=Te*Ue}ce.type===M.ElementaryStreamTypes.VIDEO?J+=X/ge:ce.type===M.ElementaryStreamTypes.AUDIO&&(q+=X/ge)}}}if(J===0&&q===0){for(var gt=0,Ve=d(V,["sidx"]),nt=0;nt<Ve.length;nt++){var $e=v(Ve[nt]);$e!=null&&$e.references&&(gt+=$e.references.reduce(function(ze,Qe){return ze+Qe.info.duration||0},0))}return gt}return J||q}function L(V){var z=u(V,0),X=8;z&1&&(X+=4),z&4&&(X+=4);for(var J=0,q=u(V,4),ee=0;ee<q;ee++){if(z&256){var ne=u(V,X);J+=ne,X+=4}z&512&&(X+=4),z&1024&&(X+=4),z&2048&&(X+=4)}return J}function U(V,z,X){d(z,["moof","traf"]).forEach(function(J){d(J,["tfhd"]).forEach(function(q){var ee=u(q,4),ne=V[ee];if(ne){var ae=ne.timescale||9e4;d(J,["tfdt"]).forEach(function(fe){var ue=fe[0],ce=u(fe,4);if(ue===0)ce-=X*ae,ce=Math.max(ce,0),A(fe,4,ce);else{ce*=Math.pow(2,32),ce+=u(fe,8),ce-=X*ae,ce=Math.max(ce,0);var ye=Math.floor(ce/(F+1)),Pe=Math.floor(ce%(F+1));A(fe,4,ye),A(fe,8,Pe)}})}})})}function _(V){var z={valid:null,remainder:null},X=d(V,["moof"]);if(X){if(X.length<2)return z.remainder=V,z}else return z;var J=X[X.length-1];return z.valid=(0,I.sliceUint8)(V,0,J.byteOffset-8),z.remainder=(0,I.sliceUint8)(V,J.byteOffset-8),z}function S(V,z){var X=new Uint8Array(V.length+z.length);return X.set(V),X.set(z,V.length),X}function c(V,z){var X=[],J=z.samples,q=z.timescale,ee=z.id,ne=!1,ae=d(J,["moof"]);return ae.map(function(fe){var ue=fe.byteOffset-8,ce=d(fe,["traf"]);ce.map(function(ye){var Pe=d(ye,["tfdt"]).map(function(Te){var ge=Te[0],De=u(Te,4);return ge===1&&(De*=Math.pow(2,32),De+=u(Te,8)),De/q})[0];return Pe!==void 0&&(V=Pe),d(ye,["tfhd"]).map(function(Te){var ge=u(Te,4),De=u(Te,0)&16777215,be=(De&1)!==0,Ue=(De&2)!==0,gt=(De&8)!==0,Ve=0,nt=(De&16)!==0,$e=0,ze=(De&32)!==0,Qe=8;ge===ee&&(be&&(Qe+=8),Ue&&(Qe+=4),gt&&(Ve=u(Te,Qe),Qe+=4),nt&&($e=u(Te,Qe),Qe+=4),ze&&(Qe+=4),z.type==="video"&&(ne=E(z.codec)),d(ye,["trun"]).map(function(st){var xt=st[0],ct=u(st,0)&16777215,Lt=(ct&1)!==0,cr=0,wt=(ct&4)!==0,Lr=(ct&256)!==0,rr=0,dr=(ct&512)!==0,hr=0,Nt=(ct&1024)!==0,Rt=(ct&2048)!==0,nr=0,Ar=u(st,4),_t=8;Lt&&(cr=u(st,_t),_t+=4),wt&&(_t+=4);for(var $r=cr+ue,Pr=0;Pr<Ar;Pr++){if(Lr?(rr=u(st,_t),_t+=4):rr=Ve,dr?(hr=u(st,_t),_t+=4):hr=$e,Nt&&(_t+=4),Rt&&(xt===0?nr=u(st,_t):nr=w(st,_t),_t+=4),z.type===M.ElementaryStreamTypes.VIDEO)for(var Vi=0;Vi<hr;){var kn=u(J,$r);if($r+=4,l(ne,J[$r])){var ni=J.subarray($r,$r+kn);x(ni,ne?2:1,V+nr/q,X)}$r+=kn,Vi+=kn+4}V+=rr/q}}))})})}),X}function E(V){if(!V)return!1;var z=V.indexOf("."),X=z<0?V:V.substring(0,z);return X==="hvc1"||X==="hev1"||X==="dvh1"||X==="dvhe"}function l(V,z){if(V){var X=z>>1&63;return X===39||X===40}else{var J=z&31;return J===6}}function x(V,z,X,J){var q=B(V),ee=0;ee+=z;for(var ne=0,ae=0,fe=!1,ue=0;ee<q.length;){ne=0;do{if(ee>=q.length)break;ue=q[ee++],ne+=ue}while(ue===255);ae=0;do{if(ee>=q.length)break;ue=q[ee++],ae+=ue}while(ue===255);var ce=q.length-ee;if(!fe&&ne===4&&ee<q.length){fe=!0;var ye=q[ee++];if(ye===181){var Pe=p(q,ee);if(ee+=2,Pe===49){var Te=u(q,ee);if(ee+=4,Te===1195456820){var ge=q[ee++];if(ge===3){var De=q[ee++],be=31&De,Ue=64&De,gt=Ue?2+be*3:0,Ve=new Uint8Array(gt);if(Ue){Ve[0]=De;for(var nt=1;nt<gt;nt++)Ve[nt]=q[ee++]}J.push({type:ge,payloadType:ne,pts:X,bytes:Ve})}}}}}else if(ne===5&&ae<ce){if(fe=!0,ae>16){for(var $e=[],ze=0;ze<16;ze++){var Qe=q[ee++].toString(16);$e.push(Qe.length==1?"0"+Qe:Qe),(ze===3||ze===5||ze===7||ze===9)&&$e.push("-")}for(var st=ae-16,xt=new Uint8Array(st),ct=0;ct<st;ct++)xt[ct]=q[ee++];J.push({payloadType:ne,pts:X,uuid:$e.join(""),userData:(0,K.utf8ArrayToStr)(xt),userDataBytes:xt})}}else if(ae<ce)ee+=ae;else if(ae>ce)break}}function B(V){for(var z=V.byteLength,X=[],J=1;J<z-2;)V[J]===0&&V[J+1]===0&&V[J+2]===3?(X.push(J+2),J+=2):J++;if(X.length===0)return V;var q=z-X.length,ee=new Uint8Array(q),ne=0;for(J=0;J<q;ne++,J++)ne===X[0]&&(ne++,X.shift()),ee[J]=V[ne];return ee}function O(V){var z=V[0],X="",J="",q=0,ee=0,ne=0,ae=0,fe=0,ue=0;if(z===0){for(;m(V.subarray(ue,ue+1))!=="\0";)X+=m(V.subarray(ue,ue+1)),ue+=1;for(X+=m(V.subarray(ue,ue+1)),ue+=1;m(V.subarray(ue,ue+1))!=="\0";)J+=m(V.subarray(ue,ue+1)),ue+=1;J+=m(V.subarray(ue,ue+1)),ue+=1,q=u(V,12),ee=u(V,16),ae=u(V,20),fe=u(V,24),ue=28}else if(z===1){ue+=4,q=u(V,ue),ue+=4;var ce=u(V,ue);ue+=4;var ye=u(V,ue);for(ue+=4,ne=Math.pow(2,32)*ce+ye,Number.isSafeInteger(ne)||(ne=Number.MAX_SAFE_INTEGER,console.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),ae=u(V,ue),ue+=4,fe=u(V,ue),ue+=4;m(V.subarray(ue,ue+1))!=="\0";)X+=m(V.subarray(ue,ue+1)),ue+=1;for(X+=m(V.subarray(ue,ue+1)),ue+=1;m(V.subarray(ue,ue+1))!=="\0";)J+=m(V.subarray(ue,ue+1)),ue+=1;J+=m(V.subarray(ue,ue+1)),ue+=1}var Pe=V.subarray(ue,V.byteLength);return{schemeIdUri:X,value:J,timeScale:q,presentationTime:ne,presentationTimeDelta:ee,eventDuration:ae,id:fe,payload:Pe}}function $(V){for(var z=arguments.length,X=new Array(z>1?z-1:0),J=1;J<z;J++)X[J-1]=arguments[J];for(var q=X.length,ee=8,ne=q;ne--;)ee+=X[ne].byteLength;var ae=new Uint8Array(ee);for(ae[0]=ee>>24&255,ae[1]=ee>>16&255,ae[2]=ee>>8&255,ae[3]=ee&255,ae.set(V,4),ne=0,ee=8;ne<q;ne++)ae.set(X[ne],ee),ee+=X[ne].byteLength;return ae}function H(V,z,X){if(V.byteLength!==16)throw new RangeError("Invalid system id");var J,q;if(z){J=1,q=new Uint8Array(z.length*16);for(var ee=0;ee<z.length;ee++){var ne=z[ee];if(ne.byteLength!==16)throw new RangeError("Invalid key");q.set(ne,ee*16)}}else J=0,q=new Uint8Array;var ae;J>0?(ae=new Uint8Array(4),z.length>0&&new DataView(ae.buffer).setUint32(0,z.length,!1)):ae=new Uint8Array;var fe=new Uint8Array(4);return X&&X.byteLength>0&&new DataView(fe.buffer).setUint32(0,X.byteLength,!1),$([112,115,115,104],new Uint8Array([J,0,0,0]),V,ae,q,fe,X||new Uint8Array)}function j(V){if(!(V instanceof ArrayBuffer)||V.byteLength<32)return null;var z={version:0,systemId:"",kids:null,data:null},X=new DataView(V),J=X.getUint32(0);if(V.byteLength!==J&&J>44)return null;var q=X.getUint32(4);if(q!==1886614376||(z.version=X.getUint32(8)>>>24,z.version>1))return null;z.systemId=W.default.hexDump(new Uint8Array(V,12,16));var ee=X.getUint32(28);if(z.version===0){if(J-32<ee)return null;z.data=new Uint8Array(V,32,ee)}else if(z.version===1){z.kids=[];for(var ne=0;ne<ee;ne++)z.kids.push(new Uint8Array(V,32+ne*16,16))}return z}},"./src/utils/numeric-encoding-utils.ts":(C,D,o)=>{o.r(D),o.d(D,{base64Decode:()=>F,base64DecodeToStr:()=>K,base64Encode:()=>b,base64ToBase64Url:()=>M,base64UrlEncode:()=>W,strToBase64Encode:()=>I});function M(k){return k.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function I(k){return btoa(k)}function K(k){return atob(k)}function b(k){return btoa(String.fromCharCode.apply(String,k))}function W(k){return M(b(k))}function F(k){return Uint8Array.from(atob(k),function(N){return N.charCodeAt(0)})}},"./src/utils/output-filter.ts":(C,D,o)=>{o.r(D),o.d(D,{default:()=>M});var M=function(){function I(b,W){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=b,this.trackName=W}var K=I.prototype;return K.dispatchCue=function(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},K.newCue=function(W,F,k){(this.startTime===null||this.startTime>W)&&(this.startTime=W),this.endTime=F,this.screen=k,this.timelineController.createCaptionsTrack(this.trackName)},K.reset=function(){this.cueRanges=[],this.startTime=null},I}()},"./src/utils/texttrack-utils.ts":(C,D,o)=>{o.r(D),o.d(D,{addCueToTrack:()=>K,clearCurrentCues:()=>b,getCuesInRange:()=>k,removeCuesInRange:()=>W,sendAddTrackEvent:()=>I});var M=o("./src/utils/logger.ts");function I(N,m){var p;try{p=new Event("addtrack")}catch{p=document.createEvent("Event"),p.initEvent("addtrack",!1,!1)}p.track=N,m.dispatchEvent(p)}function K(N,m){var p=N.mode;if(p==="disabled"&&(N.mode="hidden"),N.cues&&!N.cues.getCueById(m.id))try{if(N.addCue(m),!N.cues.getCueById(m.id))throw new Error("addCue is failed for: "+m)}catch(w){M.logger.debug("[texttrack-utils]: "+w);var u=new self.TextTrackCue(m.startTime,m.endTime,m.text);u.id=m.id,N.addCue(u)}p==="disabled"&&(N.mode=p)}function b(N){var m=N.mode;if(m==="disabled"&&(N.mode="hidden"),N.cues)for(var p=N.cues.length;p--;)N.removeCue(N.cues[p]);m==="disabled"&&(N.mode=m)}function W(N,m,p,u){var w=N.mode;if(w==="disabled"&&(N.mode="hidden"),N.cues&&N.cues.length>0)for(var A=k(N.cues,m,p),d=0;d<A.length;d++)(!u||u(A[d]))&&N.removeCue(A[d]);w==="disabled"&&(N.mode=w)}function F(N,m){if(m<N[0].startTime)return 0;var p=N.length-1;if(m>N[p].endTime)return-1;for(var u=0,w=p;u<=w;){var A=Math.floor((w+u)/2);if(m<N[A].startTime)w=A-1;else if(m>N[A].startTime&&u<p)u=A+1;else return A}return N[u].startTime-m<m-N[w].startTime?u:w}function k(N,m,p){var u=[],w=F(N,m);if(w>-1)for(var A=w,d=N.length;A<d;A++){var v=N[A];if(v.startTime>=m&&v.endTime<=p)u.push(v);else if(v.startTime>p)return u}return u}},"./src/utils/time-ranges.ts":(C,D,o)=>{o.r(D),o.d(D,{default:()=>I});var M={toString:function(b){for(var W="",F=b.length,k=0;k<F;k++)W+="["+b.start(k).toFixed(3)+"-"+b.end(k).toFixed(3)+"]";return W}};const I=M},"./src/utils/timescale-conversion.ts":(C,D,o)=>{o.r(D),o.d(D,{toMpegTsClockFromTimescale:()=>W,toMsFromMpegTsClock:()=>b,toTimescaleFromBase:()=>I,toTimescaleFromScale:()=>K});var M=9e4;function I(F,k,N,m){N===void 0&&(N=1),m===void 0&&(m=!1);var p=F*k*N;return m?Math.round(p):p}function K(F,k,N,m){return N===void 0&&(N=1),m===void 0&&(m=!1),I(F,k,1/N,m)}function b(F,k){return k===void 0&&(k=!1),I(F,1e3,1/M,k)}function W(F,k){return k===void 0&&(k=1),I(F,M,1/k)}},"./src/utils/typed-array.ts":(C,D,o)=>{o.r(D),o.d(D,{sliceUint8:()=>M});function M(I,K,b){return Uint8Array.prototype.slice?I.slice(K,b):new Uint8Array(Array.prototype.slice.call(I,K,b))}},"./src/utils/vttcue.ts":(C,D,o)=>{o.r(D),o.d(D,{default:()=>M});const M=function(){if(typeof self<"u"&&self.VTTCue)return self.VTTCue;var I=["","lr","rl"],K=["start","middle","end","left","right"];function b(m,p){if(typeof p!="string"||!Array.isArray(m))return!1;var u=p.toLowerCase();return~m.indexOf(u)?u:!1}function W(m){return b(I,m)}function F(m){return b(K,m)}function k(m){for(var p=arguments.length,u=new Array(p>1?p-1:0),w=1;w<p;w++)u[w-1]=arguments[w];for(var A=1;A<arguments.length;A++){var d=arguments[A];for(var v in d)m[v]=d[v]}return m}function N(m,p,u){var w=this,A={enumerable:!0};w.hasBeenReset=!1;var d="",v=!1,h=m,g=p,P=u,R=null,y="",L=!0,U="auto",_="start",S=50,c="middle",E=50,l="middle";Object.defineProperty(w,"id",k({},A,{get:function(){return d},set:function(B){d=""+B}})),Object.defineProperty(w,"pauseOnExit",k({},A,{get:function(){return v},set:function(B){v=!!B}})),Object.defineProperty(w,"startTime",k({},A,{get:function(){return h},set:function(B){if(typeof B!="number")throw new TypeError("Start time must be set to a number.");h=B,this.hasBeenReset=!0}})),Object.defineProperty(w,"endTime",k({},A,{get:function(){return g},set:function(B){if(typeof B!="number")throw new TypeError("End time must be set to a number.");g=B,this.hasBeenReset=!0}})),Object.defineProperty(w,"text",k({},A,{get:function(){return P},set:function(B){P=""+B,this.hasBeenReset=!0}})),Object.defineProperty(w,"region",k({},A,{get:function(){return R},set:function(B){R=B,this.hasBeenReset=!0}})),Object.defineProperty(w,"vertical",k({},A,{get:function(){return y},set:function(B){var O=W(B);if(O===!1)throw new SyntaxError("An invalid or illegal string was specified.");y=O,this.hasBeenReset=!0}})),Object.defineProperty(w,"snapToLines",k({},A,{get:function(){return L},set:function(B){L=!!B,this.hasBeenReset=!0}})),Object.defineProperty(w,"line",k({},A,{get:function(){return U},set:function(B){if(typeof B!="number"&&B!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");U=B,this.hasBeenReset=!0}})),Object.defineProperty(w,"lineAlign",k({},A,{get:function(){return _},set:function(B){var O=F(B);if(!O)throw new SyntaxError("An invalid or illegal string was specified.");_=O,this.hasBeenReset=!0}})),Object.defineProperty(w,"position",k({},A,{get:function(){return S},set:function(B){if(B<0||B>100)throw new Error("Position must be between 0 and 100.");S=B,this.hasBeenReset=!0}})),Object.defineProperty(w,"positionAlign",k({},A,{get:function(){return c},set:function(B){var O=F(B);if(!O)throw new SyntaxError("An invalid or illegal string was specified.");c=O,this.hasBeenReset=!0}})),Object.defineProperty(w,"size",k({},A,{get:function(){return E},set:function(B){if(B<0||B>100)throw new Error("Size must be between 0 and 100.");E=B,this.hasBeenReset=!0}})),Object.defineProperty(w,"align",k({},A,{get:function(){return l},set:function(B){var O=F(B);if(!O)throw new SyntaxError("An invalid or illegal string was specified.");l=O,this.hasBeenReset=!0}})),w.displayState=void 0}return N.prototype.getCueAsHTML=function(){var m=self.WebVTT;return m.convertCueToDOMTree(self,this.text)},N}()},"./src/utils/vttparser.ts":(C,D,o)=>{o.r(D),o.d(D,{VTTParser:()=>p,fixLineBreaks:()=>m,parseTimeStamp:()=>K});var M=o("./src/utils/vttcue.ts"),I=function(){function u(){}var w=u.prototype;return w.decode=function(d,v){if(!d)return"";if(typeof d!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(d))},u}();function K(u){function w(d,v,h,g){return(d|0)*3600+(v|0)*60+(h|0)+parseFloat(g||0)}var A=u.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return A?parseFloat(A[2])>59?w(A[2],A[3],0,A[4]):w(A[1],A[2],A[3],A[4]):null}var b=function(){function u(){this.values=Object.create(null)}var w=u.prototype;return w.set=function(d,v){!this.get(d)&&v!==""&&(this.values[d]=v)},w.get=function(d,v,h){return h?this.has(d)?this.values[d]:v[h]:this.has(d)?this.values[d]:v},w.has=function(d){return d in this.values},w.alt=function(d,v,h){for(var g=0;g<h.length;++g)if(v===h[g]){this.set(d,v);break}},w.integer=function(d,v){/^-?\d+$/.test(v)&&this.set(d,parseInt(v,10))},w.percent=function(d,v){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(v)){var h=parseFloat(v);if(h>=0&&h<=100)return this.set(d,h),!0}return!1},u}();function W(u,w,A,d){var v=d?u.split(d):[u];for(var h in v)if(typeof v[h]=="string"){var g=v[h].split(A);if(g.length===2){var P=g[0],R=g[1];w(P,R)}}}var F=new M.default(0,0,""),k=F.align==="middle"?"middle":"center";function N(u,w,A){var d=u;function v(){var P=K(u);if(P===null)throw new Error("Malformed timestamp: "+d);return u=u.replace(/^[^\sa-zA-Z-]+/,""),P}function h(P,R){var y=new b;W(P,function(_,S){var c;switch(_){case"region":for(var E=A.length-1;E>=0;E--)if(A[E].id===S){y.set(_,A[E].region);break}break;case"vertical":y.alt(_,S,["rl","lr"]);break;case"line":c=S.split(","),y.integer(_,c[0]),y.percent(_,c[0])&&y.set("snapToLines",!1),y.alt(_,c[0],["auto"]),c.length===2&&y.alt("lineAlign",c[1],["start",k,"end"]);break;case"position":c=S.split(","),y.percent(_,c[0]),c.length===2&&y.alt("positionAlign",c[1],["start",k,"end","line-left","line-right","auto"]);break;case"size":y.percent(_,S);break;case"align":y.alt(_,S,["start",k,"end","left","right"]);break}},/:/,/\s/),R.region=y.get("region",null),R.vertical=y.get("vertical","");var L=y.get("line","auto");L==="auto"&&F.line===-1&&(L=-1),R.line=L,R.lineAlign=y.get("lineAlign","start"),R.snapToLines=y.get("snapToLines",!0),R.size=y.get("size",100),R.align=y.get("align",k);var U=y.get("position","auto");U==="auto"&&F.position===50&&(U=R.align==="start"||R.align==="left"?0:R.align==="end"||R.align==="right"?100:50),R.position=U}function g(){u=u.replace(/^\s+/,"")}if(g(),w.startTime=v(),g(),u.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+d);u=u.slice(3),g(),w.endTime=v(),g(),h(u,w)}function m(u){return u.replace(/<br(?: \/)?>/gi,`
`)}var p=function(){function u(){this.state="INITIAL",this.buffer="",this.decoder=new I,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}var w=u.prototype;return w.parse=function(d){var v=this;d&&(v.buffer+=v.decoder.decode(d,{stream:!0}));function h(){var U=v.buffer,_=0;for(U=m(U);_<U.length&&U[_]!=="\r"&&U[_]!==`
`;)++_;var S=U.slice(0,_);return U[_]==="\r"&&++_,U[_]===`
`&&++_,v.buffer=U.slice(_),S}function g(U){W(U,function(_,S){},/:/)}try{var P="";if(v.state==="INITIAL"){if(!/\r\n|\n/.test(v.buffer))return this;P=h();var R=P.match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!R||!R[0])throw new Error("Malformed WebVTT signature.");v.state="HEADER"}for(var y=!1;v.buffer;){if(!/\r\n|\n/.test(v.buffer))return this;switch(y?y=!1:P=h(),v.state){case"HEADER":/:/.test(P)?g(P):P||(v.state="ID");continue;case"NOTE":P||(v.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(P)){v.state="NOTE";break}if(!P)continue;if(v.cue=new M.default(0,0,""),v.state="CUE",P.indexOf("-->")===-1){v.cue.id=P;continue}case"CUE":if(!v.cue){v.state="BADCUE";continue}try{N(P,v.cue,v.regionList)}catch{v.cue=null,v.state="BADCUE";continue}v.state="CUETEXT";continue;case"CUETEXT":{var L=P.indexOf("-->")!==-1;if(!P||L&&(y=!0)){v.oncue&&v.cue&&v.oncue(v.cue),v.cue=null,v.state="ID";continue}if(v.cue===null)continue;v.cue.text&&(v.cue.text+=`
`),v.cue.text+=P}continue;case"BADCUE":P||(v.state="ID")}}}catch{v.state==="CUETEXT"&&v.cue&&v.oncue&&v.oncue(v.cue),v.cue=null,v.state=v.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},w.flush=function(){var d=this;try{if((d.cue||d.state==="HEADER")&&(d.buffer+=`

`,d.parse()),d.state==="INITIAL"||d.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(v){d.onparsingerror&&d.onparsingerror(v)}return d.onflush&&d.onflush(),this},u}()},"./src/utils/webvtt-parser.ts":(C,D,o)=>{o.r(D),o.d(D,{generateCueId:()=>p,parseWebVTT:()=>w});var M=o("./src/polyfills/number.ts"),I=o("./src/utils/vttparser.ts"),K=o("./src/demux/id3.ts"),b=o("./src/utils/timescale-conversion.ts"),W=o("./src/remux/mp4-remuxer.ts"),F=/\r\n|\n\r|\n|\r/g,k=function(d,v,h){return h===void 0&&(h=0),d.slice(h,h+v.length)===v},N=function(d){var v=parseInt(d.slice(-3)),h=parseInt(d.slice(-6,-4)),g=parseInt(d.slice(-9,-7)),P=d.length>9?parseInt(d.substring(0,d.indexOf(":"))):0;if(!(0,M.isFiniteNumber)(v)||!(0,M.isFiniteNumber)(h)||!(0,M.isFiniteNumber)(g)||!(0,M.isFiniteNumber)(P))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+d);return v+=1e3*h,v+=60*1e3*g,v+=60*60*1e3*P,v},m=function(d){for(var v=5381,h=d.length;h;)v=v*33^d.charCodeAt(--h);return(v>>>0).toString()};function p(A,d,v){return m(A.toString())+m(d.toString())+m(v)}var u=function(d,v,h){var g=d[v],P=d[g.prevCC];if(!P||!P.new&&g.new){d.ccOffset=d.presentationOffset=g.start,g.new=!1;return}for(;(R=P)!==null&&R!==void 0&&R.new;){var R;d.ccOffset+=g.start-P.start,g.new=!1,g=P,P=d[g.prevCC]}d.presentationOffset=h};function w(A,d,v,h,g,P,R,y){var L=new I.VTTParser,U=(0,K.utf8ArrayToStr)(new Uint8Array(A)).trim().replace(F,`
`).split(`
`),_=[],S=(0,b.toMpegTsClockFromTimescale)(d,v),c="00:00.000",E=0,l=0,x,B=!0;L.oncue=function(O){var $=h[g],H=h.ccOffset,j=(E-S)/9e4;$!=null&&$.new&&(l!==void 0?H=h.ccOffset=$.start:u(h,g,j)),j&&(H=j-h.presentationOffset);var V=O.endTime-O.startTime,z=(0,W.normalizePts)((O.startTime+H-l)*9e4,P*9e4)/9e4;O.startTime=Math.max(z,0),O.endTime=Math.max(z+V,0);var X=O.text.trim();O.text=decodeURIComponent(encodeURIComponent(X)),O.id||(O.id=p(O.startTime,O.endTime,X)),O.endTime>0&&_.push(O)},L.onparsingerror=function(O){x=O},L.onflush=function(){if(x){y(x);return}R(_)},U.forEach(function(O){if(B)if(k(O,"X-TIMESTAMP-MAP=")){B=!1,O.slice(16).split(",").forEach(function($){k($,"LOCAL:")?c=$.slice(6):k($,"MPEGTS:")&&(E=parseInt($.slice(7)))});try{l=N(c)/1e3}catch($){x=$}return}else O===""&&(B=!1);L.parse(O+`
`)}),L.flush()}},"./src/utils/xhr-loader.ts":(C,D,o)=>{o.r(D),o.d(D,{default:()=>W});var M=o("./src/utils/logger.ts"),I=o("./src/loader/load-stats.ts"),K=/^age:\s*[\d.]+\s*$/m,b=function(){function F(N){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=void 0,this.loader=null,this.stats=void 0,this.xhrSetup=N?N.xhrSetup:null,this.stats=new I.LoadStats,this.retryDelay=0}var k=F.prototype;return k.destroy=function(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null},k.abortInternal=function(){var m=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),m&&(m.onreadystatechange=null,m.onprogress=null,m.readyState!==4&&(this.stats.aborted=!0,m.abort()))},k.abort=function(){var m;this.abortInternal(),(m=this.callbacks)!==null&&m!==void 0&&m.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)},k.load=function(m,p,u){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=m,this.config=p,this.callbacks=u,this.retryDelay=p.retryDelay,this.loadInternal()},k.loadInternal=function(){var m=this.config,p=this.context;if(m){var u=this.loader=new self.XMLHttpRequest,w=this.stats;w.loading.first=0,w.loaded=0;var A=this.xhrSetup;try{if(A)try{A(u,p.url)}catch{u.open("GET",p.url,!0),A(u,p.url)}u.readyState||u.open("GET",p.url,!0);var d=this.context.headers;if(d)for(var v in d)u.setRequestHeader(v,d[v])}catch(h){this.callbacks.onError({code:u.status,text:h.message},p,u);return}p.rangeEnd&&u.setRequestHeader("Range","bytes="+p.rangeStart+"-"+(p.rangeEnd-1)),u.onreadystatechange=this.readystatechange.bind(this),u.onprogress=this.loadprogress.bind(this),u.responseType=p.responseType,self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),m.timeout),u.send()}},k.readystatechange=function(){var m=this.context,p=this.loader,u=this.stats;if(!(!m||!p)){var w=p.readyState,A=this.config;if(!u.aborted&&w>=2)if(self.clearTimeout(this.requestTimeout),u.loading.first===0&&(u.loading.first=Math.max(self.performance.now(),u.loading.start)),w===4){p.onreadystatechange=null,p.onprogress=null;var d=p.status,v=p.responseType==="arraybuffer";if(d>=200&&d<300&&(v&&p.response||p.responseText!==null)){u.loading.end=Math.max(self.performance.now(),u.loading.first);var h,g;if(v?(h=p.response,g=h.byteLength):(h=p.responseText,g=h.length),u.loaded=u.total=g,!this.callbacks)return;var P=this.callbacks.onProgress;if(P&&P(u,m,h,p),!this.callbacks)return;var R={url:p.responseURL,data:h};this.callbacks.onSuccess(R,u,m,p)}else u.retry>=A.maxRetry||d>=400&&d<499?(M.logger.error(d+" while loading "+m.url),this.callbacks.onError({code:d,text:p.statusText},m,p)):(M.logger.warn(d+" while loading "+m.url+", retrying in "+this.retryDelay+"..."),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,A.maxRetryDelay),u.retry++)}else self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),A.timeout)}},k.loadtimeout=function(){M.logger.warn("timeout while loading "+this.context.url);var m=this.callbacks;m&&(this.abortInternal(),m.onTimeout(this.stats,this.context,this.loader))},k.loadprogress=function(m){var p=this.stats;p.loaded=m.loaded,m.lengthComputable&&(p.total=m.total)},k.getCacheAge=function(){var m=null;if(this.loader&&K.test(this.loader.getAllResponseHeaders())){var p=this.loader.getResponseHeader("age");m=p?parseFloat(p):null}return m},F}();const W=b},"./node_modules/eventemitter3/index.js":C=>{var D=Object.prototype.hasOwnProperty,o="~";function M(){}Object.create&&(M.prototype=Object.create(null),new M().__proto__||(o=!1));function I(F,k,N){this.fn=F,this.context=k,this.once=N||!1}function K(F,k,N,m,p){if(typeof N!="function")throw new TypeError("The listener must be a function");var u=new I(N,m||F,p),w=o?o+k:k;return F._events[w]?F._events[w].fn?F._events[w]=[F._events[w],u]:F._events[w].push(u):(F._events[w]=u,F._eventsCount++),F}function b(F,k){--F._eventsCount===0?F._events=new M:delete F._events[k]}function W(){this._events=new M,this._eventsCount=0}W.prototype.eventNames=function(){var k=[],N,m;if(this._eventsCount===0)return k;for(m in N=this._events)D.call(N,m)&&k.push(o?m.slice(1):m);return Object.getOwnPropertySymbols?k.concat(Object.getOwnPropertySymbols(N)):k},W.prototype.listeners=function(k){var N=o?o+k:k,m=this._events[N];if(!m)return[];if(m.fn)return[m.fn];for(var p=0,u=m.length,w=new Array(u);p<u;p++)w[p]=m[p].fn;return w},W.prototype.listenerCount=function(k){var N=o?o+k:k,m=this._events[N];return m?m.fn?1:m.length:0},W.prototype.emit=function(k,N,m,p,u,w){var A=o?o+k:k;if(!this._events[A])return!1;var d=this._events[A],v=arguments.length,h,g;if(d.fn){switch(d.once&&this.removeListener(k,d.fn,void 0,!0),v){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,N),!0;case 3:return d.fn.call(d.context,N,m),!0;case 4:return d.fn.call(d.context,N,m,p),!0;case 5:return d.fn.call(d.context,N,m,p,u),!0;case 6:return d.fn.call(d.context,N,m,p,u,w),!0}for(g=1,h=new Array(v-1);g<v;g++)h[g-1]=arguments[g];d.fn.apply(d.context,h)}else{var P=d.length,R;for(g=0;g<P;g++)switch(d[g].once&&this.removeListener(k,d[g].fn,void 0,!0),v){case 1:d[g].fn.call(d[g].context);break;case 2:d[g].fn.call(d[g].context,N);break;case 3:d[g].fn.call(d[g].context,N,m);break;case 4:d[g].fn.call(d[g].context,N,m,p);break;default:if(!h)for(R=1,h=new Array(v-1);R<v;R++)h[R-1]=arguments[R];d[g].fn.apply(d[g].context,h)}}return!0},W.prototype.on=function(k,N,m){return K(this,k,N,m,!1)},W.prototype.once=function(k,N,m){return K(this,k,N,m,!0)},W.prototype.removeListener=function(k,N,m,p){var u=o?o+k:k;if(!this._events[u])return this;if(!N)return b(this,u),this;var w=this._events[u];if(w.fn)w.fn===N&&(!p||w.once)&&(!m||w.context===m)&&b(this,u);else{for(var A=0,d=[],v=w.length;A<v;A++)(w[A].fn!==N||p&&!w[A].once||m&&w[A].context!==m)&&d.push(w[A]);d.length?this._events[u]=d.length===1?d[0]:d:b(this,u)}return this},W.prototype.removeAllListeners=function(k){var N;return k?(N=o?o+k:k,this._events[N]&&b(this,N)):(this._events=new M,this._eventsCount=0),this},W.prototype.off=W.prototype.removeListener,W.prototype.addListener=W.prototype.on,W.prefixed=o,W.EventEmitter=W,C.exports=W},"./node_modules/url-toolkit/src/url-toolkit.js":function(C){(function(D){var o=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,M=/^(?=([^\/?#]*))\1([^]*)$/,I=/(?:\/|^)\.(?=\/)/g,K=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,b={buildAbsoluteURL:function(W,F,k){if(k=k||{},W=W.trim(),F=F.trim(),!F){if(!k.alwaysNormalize)return W;var N=b.parseURL(W);if(!N)throw new Error("Error trying to parse base URL.");return N.path=b.normalizePath(N.path),b.buildURLFromParts(N)}var m=b.parseURL(F);if(!m)throw new Error("Error trying to parse relative URL.");if(m.scheme)return k.alwaysNormalize?(m.path=b.normalizePath(m.path),b.buildURLFromParts(m)):F;var p=b.parseURL(W);if(!p)throw new Error("Error trying to parse base URL.");if(!p.netLoc&&p.path&&p.path[0]!=="/"){var u=M.exec(p.path);p.netLoc=u[1],p.path=u[2]}p.netLoc&&!p.path&&(p.path="/");var w={scheme:p.scheme,netLoc:m.netLoc,path:null,params:m.params,query:m.query,fragment:m.fragment};if(!m.netLoc&&(w.netLoc=p.netLoc,m.path[0]!=="/"))if(!m.path)w.path=p.path,m.params||(w.params=p.params,m.query||(w.query=p.query));else{var A=p.path,d=A.substring(0,A.lastIndexOf("/")+1)+m.path;w.path=b.normalizePath(d)}return w.path===null&&(w.path=k.alwaysNormalize?b.normalizePath(m.path):m.path),b.buildURLFromParts(w)},parseURL:function(W){var F=o.exec(W);return F?{scheme:F[1]||"",netLoc:F[2]||"",path:F[3]||"",params:F[4]||"",query:F[5]||"",fragment:F[6]||""}:null},normalizePath:function(W){for(W=W.split("").reverse().join("").replace(I,"");W.length!==(W=W.replace(K,"")).length;);return W.split("").reverse().join("")},buildURLFromParts:function(W){return W.scheme+W.netLoc+W.path+W.params+W.query+W.fragment}};C.exports=b})()}},i={};function s(C){var D=i[C];if(D!==void 0)return D.exports;var o=i[C]={exports:{}};return r[C].call(o.exports,o,o.exports,s),o.exports}s.m=r,s.n=C=>{var D=C&&C.__esModule?()=>C.default:()=>C;return s.d(D,{a:D}),D},s.d=(C,D)=>{for(var o in D)s.o(D,o)&&!s.o(C,o)&&Object.defineProperty(C,o,{enumerable:!0,get:D[o]})},s.o=(C,D)=>Object.prototype.hasOwnProperty.call(C,D),s.r=C=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(C,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(C,"__esModule",{value:!0})};var f=s("./src/hls.ts");return f=f.default,f})())})(KF);const es=qE(Yv);const WF=({rating:e})=>{const{isDarkMode:t}=tr(o=>o.theme),r=Math.floor(e),i=e%1!==0,s=i?4-r:5-r,f=o=>Array.from({length:o},(M,I)=>I),C=f(r),D=f(s);return ut("div",{className:"rating__stars stars","data-testid":"rating-stars",children:[C.map(o=>_e(Qn,{type:t?Ct.STAR_FILLED_DARK:Ct.STAR_FILLED,addClassName:"stars__star"},o)),i&&_e(Qn,{type:t?Ct.STAR_HALF_FILLED_DARK:Ct.STAR_HALF_FILLED,addClassName:"stars__star"}),D.map(o=>_e(Qn,{type:t?Ct.STAR_EMPTY_DARK:Ct.STAR_EMPTY,addClassName:"stars__star"},o))]})};const GF=({course:e})=>{var p,u,w,A;const{id:t,tags:r,title:i,previewImageLink:s,lessonsCount:f,meta:C,rating:D}=e,{isDarkMode:o}=tr(d=>d.theme),[M,I]=oe.useState(!1),K=oe.useRef(null),b=()=>{I(!0)},W=()=>{I(!1),K.current&&!K.current.paused&&K.current.pause()},F=hc(),k=()=>{F(To(t))},N=d=>{d.key==="Escape"&&I(!1),d.key==="Enter"&&k()},m=Kt("course-card__category",{"course-card__category--dark":o,"course-card__category--yellow":r[0]==="productivity","course-card__category--purple":r[0]==="learning ability","course-card__category--red":r[0]==="communication","course-card__category--green":r[0]==="psychology"});return oe.useEffect(()=>{var v;let d;return M&&K.current&&(K.current.paused||K.current.pause(),d=new es({enableWorker:!1}),(v=C.courseVideoPreview)!=null&&v.link?(d.loadSource(C.courseVideoPreview.link),d.attachMedia(K.current),d.on(es.Events.MANIFEST_PARSED,()=>{var h;(h=K.current)==null||h.play()})):I(!1)),()=>{d&&d.destroy()}},[M,(p=C.courseVideoPreview)==null?void 0:p.link]),ut(sl,{to:`../course/${t}`,className:Kt("course-card",{"course-card--dark":o}),onMouseEnter:b,onMouseLeave:W,onKeyDown:N,onClick:k,children:[_e("h5",{className:m,children:r[0]}),_e("div",{className:"course-card__image",children:M&&((u=C.courseVideoPreview)!=null&&u.link)?_e("video",{className:"course-card__video",src:C.courseVideoPreview.link,ref:K,muted:!0,loop:!0,poster:`${s}/cover.webp`}):_e("img",{className:"course-card__pic",src:`${s}/cover.webp`,alt:i})}),_e("h3",{className:Kt("course-card__title",{"course-card__title--dark":o}),children:i}),ut("div",{className:"course-card__features",children:[ut("span",{className:"course-card__feature-item",children:["Lessons count",_e("span",{className:Kt("course-card__feature-info",{"course-card__feature-info--dark":o}),children:f})]}),ut("span",{className:"course-card__feature-item",children:["Rating",ut("span",{className:`
              course-card__feature-info--rating
              rating`,children:[_e(WF,{rating:D}),D]})]}),ut("span",{className:"course-card__feature-item",children:["Skills",ut("ul",{className:"course-card__feature-info",children:[!((w=C.skills)!=null&&w.length)&&_e("span",{className:"course-card__feature-info",children:"N/A"}),(A=C.skills)==null?void 0:A.map(d=>_e("li",{className:Kt("course-card__feature-info",{"course-card__feature-info--dark":o}),children:d},d))]})]})]})]})};function Gu(e,t){const r=new URLSearchParams(e.toString());return Object.entries(t).forEach(([i,s])=>{s===null?r.delete(i):Array.isArray(s)?(r.delete(i),s.forEach(f=>{r.append(i,f)})):r.set(i,s)}),r.toString()}const $F=({length:e})=>{const t=al(),[r]=Zg(),{isDarkMode:i}=tr(F=>F.theme),[s,f]=oe.useState(0),C=r.get("page")||"1",D=s>1?Array.from({length:s},(F,k)=>k+1):[1],o=C==="1",M=C==="1"?C===`${s+1}`:C===`${s}`,I=()=>{switch(!0){case o:return Ct.ARROW_LEFT_DISABLED;case(!o&&i):return Ct.ARROW_LEFT_DARK;default:case(!o&&!i):return Ct.ARROW_LEFT}},K=()=>{switch(!0){case M:return Ct.ARROW_RIGHT_DISABLED;case(!M&&i):return Ct.ARROW_RIGHT_DARK;default:case(!M&&!i):return Ct.ARROW_RIGHT}},b=F=>{if(C===`${F}`)return;const k=Gu(r,{page:`${F}`});t({search:k})},W=F=>{const k=C?+C:null;if(F==="prev"&&k){if(k===1)return;const N=Gu(r,{page:`${k-1}`});t({search:N})}if(F==="next"&&k){if(k===s)return;const N=Gu(r,{page:`${k+1}`});t({search:N})}};return oe.useEffect(()=>{const k=(()=>Math.ceil(e/Nv))();f(k)},[e]),_e("div",{className:"category-page__pagination",children:ut("ul",{className:"pagination",children:[_e("button",{type:"button",className:Kt("pagination__button",{"pagination__button--dark":i}),"data-testid":"pagination-left",disabled:o,onClick:()=>W("prev"),children:_e(Qn,{type:I()})}),_e("div",{className:"pagination__list",children:D.map(F=>_e("button",{type:"button",className:Kt("pagination__item",{"pagination__item--dark":i,"pagination__item--is-active":!i&&+C===F,"pagination__item--dark-is-active":i&&+C===F}),onClick:()=>b(F),children:F},F))}),_e("button",{type:"button",className:Kt("pagination__button",{"pagination__button--dark":i}),"data-testid":"pagination-right",disabled:M,onClick:()=>W("next"),children:_e(Qn,{type:K()})})]})})};const HF=()=>{const{courses:e}=tr(o=>o.courses),[t]=Zg(),r=t.get("page")||"1",[i,s]=oe.useState(0),[f,C]=oe.useState(e.length),D=oe.useMemo(()=>e.slice(i,f),[e,i,f]);return oe.useEffect(()=>{const o=Nv*+r;o>e.length?C(e.length):C(o),s(Nv*(+r-1))},[r,e]),ut(qv,{children:[_e("div",{className:"course-list","data-testid":"course-list",children:D.map(o=>_e(GF,{course:o},o.id))}),_e($F,{length:e.length})]})};const _1=()=>_e("div",{className:"Loader","data-testid":"loader",children:_e("div",{className:"Loader__content"})}),jF=()=>{const{courses:e,hasError:t,loaded:r}=tr(i=>i.courses);return ut(qv,{children:[t&&_e(E1,{error:_p.GET_COURSES}),!r&&_e(_1,{}),e.length>0&&!t&&r&&_e(HF,{})]})};const VF=()=>{const{isDarkMode:e}=tr(t=>t.theme);return ut(sl,{to:"/",className:Kt("back-button",{"back-button--dark":e}),type:"button","data-testid":"back-button",children:[_e(Qn,{type:e?Ct.ARROW_LEFT_DARK:Ct.ARROW_LEFT,addClassName:"back-button__arrow"}),"Back"]})};var Df={},zF={get exports(){return Df},set exports(e){Df=e}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(e,t){(function(){var r,i="4.17.21",s=200,f="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",C="Expected a function",D="Invalid `variable` option passed into `_.template`",o="__lodash_hash_undefined__",M=500,I="__lodash_placeholder__",K=1,b=2,W=4,F=1,k=2,N=1,m=2,p=4,u=8,w=16,A=32,d=64,v=128,h=256,g=512,P=30,R="...",y=800,L=16,U=1,_=2,S=3,c=1/0,E=9007199254740991,l=17976931348623157e292,x=0/0,B=4294967295,O=B-1,$=B>>>1,H=[["ary",v],["bind",N],["bindKey",m],["curry",u],["curryRight",w],["flip",g],["partial",A],["partialRight",d],["rearg",h]],j="[object Arguments]",V="[object Array]",z="[object AsyncFunction]",X="[object Boolean]",J="[object Date]",q="[object DOMException]",ee="[object Error]",ne="[object Function]",ae="[object GeneratorFunction]",fe="[object Map]",ue="[object Number]",ce="[object Null]",ye="[object Object]",Pe="[object Promise]",Te="[object Proxy]",ge="[object RegExp]",De="[object Set]",be="[object String]",Ue="[object Symbol]",gt="[object Undefined]",Ve="[object WeakMap]",nt="[object WeakSet]",$e="[object ArrayBuffer]",ze="[object DataView]",Qe="[object Float32Array]",st="[object Float64Array]",xt="[object Int8Array]",ct="[object Int16Array]",Lt="[object Int32Array]",cr="[object Uint8Array]",wt="[object Uint8ClampedArray]",Lr="[object Uint16Array]",rr="[object Uint32Array]",dr=/\b__p \+= '';/g,hr=/\b(__p \+=) '' \+/g,Nt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Rt=/&(?:amp|lt|gt|quot|#39);/g,nr=/[&<>"']/g,Ar=RegExp(Rt.source),_t=RegExp(nr.source),$r=/<%-([\s\S]+?)%>/g,Pr=/<%([\s\S]+?)%>/g,Vi=/<%=([\s\S]+?)%>/g,kn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ni=/^\w*$/,fl=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ii=/[\\^$.*+?()[\]{}|]/g,Sc=RegExp(ii.source),zi=/^\s+/,xc=/\s/,cl=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ds=/\{\n\/\* \[wrapped with (.+)\] \*/,Dr=/,? & /,dl=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,hl=/[()=,{}\[\]\/\s]/,Lc=/\\(\\)?/g,Ac=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,vl=/\w*$/,Pc=/^[-+]0x[0-9a-f]+$/i,Dc=/^0b[01]+$/i,Rs=/^\[object .+?Constructor\]$/,gl=/^0o[0-7]+$/i,Rc=/^(?:0|[1-9]\d*)$/,Cc=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,pl=/($^)/,T1=/['\n\r\u2028\u2029\\]/g,ml="\\ud800-\\udfff",S1="\\u0300-\\u036f",x1="\\ufe20-\\ufe2f",L1="\\u20d0-\\u20ff",Tp=S1+x1+L1,Sp="\\u2700-\\u27bf",xp="a-z\\xdf-\\xf6\\xf8-\\xff",A1="\\xac\\xb1\\xd7\\xf7",P1="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",D1="\\u2000-\\u206f",R1=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Lp="A-Z\\xc0-\\xd6\\xd8-\\xde",Ap="\\ufe0e\\ufe0f",Pp=A1+P1+D1+R1,Ic="['’]",C1="["+ml+"]",Dp="["+Pp+"]",yl="["+Tp+"]",Rp="\\d+",I1="["+Sp+"]",Cp="["+xp+"]",Ip="[^"+ml+Pp+Rp+Sp+xp+Lp+"]",Oc="\\ud83c[\\udffb-\\udfff]",O1="(?:"+yl+"|"+Oc+")",Op="[^"+ml+"]",wc="(?:\\ud83c[\\udde6-\\uddff]){2}",Mc="[\\ud800-\\udbff][\\udc00-\\udfff]",La="["+Lp+"]",wp="\\u200d",Mp="(?:"+Cp+"|"+Ip+")",w1="(?:"+La+"|"+Ip+")",kp="(?:"+Ic+"(?:d|ll|m|re|s|t|ve))?",bp="(?:"+Ic+"(?:D|LL|M|RE|S|T|VE))?",Fp=O1+"?",Np="["+Ap+"]?",M1="(?:"+wp+"(?:"+[Op,wc,Mc].join("|")+")"+Np+Fp+")*",k1="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",b1="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Up=Np+Fp+M1,F1="(?:"+[I1,wc,Mc].join("|")+")"+Up,N1="(?:"+[Op+yl+"?",yl,wc,Mc,C1].join("|")+")",U1=RegExp(Ic,"g"),B1=RegExp(yl,"g"),kc=RegExp(Oc+"(?="+Oc+")|"+N1+Up,"g"),K1=RegExp([La+"?"+Cp+"+"+kp+"(?="+[Dp,La,"$"].join("|")+")",w1+"+"+bp+"(?="+[Dp,La+Mp,"$"].join("|")+")",La+"?"+Mp+"+"+kp,La+"+"+bp,b1,k1,Rp,F1].join("|"),"g"),W1=RegExp("["+wp+ml+Tp+Ap+"]"),G1=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,$1=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],H1=-1,ot={};ot[Qe]=ot[st]=ot[xt]=ot[ct]=ot[Lt]=ot[cr]=ot[wt]=ot[Lr]=ot[rr]=!0,ot[j]=ot[V]=ot[$e]=ot[X]=ot[ze]=ot[J]=ot[ee]=ot[ne]=ot[fe]=ot[ue]=ot[ye]=ot[ge]=ot[De]=ot[be]=ot[Ve]=!1;var it={};it[j]=it[V]=it[$e]=it[ze]=it[X]=it[J]=it[Qe]=it[st]=it[xt]=it[ct]=it[Lt]=it[fe]=it[ue]=it[ye]=it[ge]=it[De]=it[be]=it[Ue]=it[cr]=it[wt]=it[Lr]=it[rr]=!0,it[ee]=it[ne]=it[Ve]=!1;var j1={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},V1={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},z1={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Y1={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},X1=parseFloat,Q1=parseInt,Bp=typeof Ka=="object"&&Ka&&Ka.Object===Object&&Ka,Z1=typeof self=="object"&&self&&self.Object===Object&&self,$t=Bp||Z1||Function("return this")(),bc=t&&!t.nodeType&&t,Yi=bc&&!0&&e&&!e.nodeType&&e,Kp=Yi&&Yi.exports===bc,Fc=Kp&&Bp.process,Hr=function(){try{var ie=Yi&&Yi.require&&Yi.require("util").types;return ie||Fc&&Fc.binding&&Fc.binding("util")}catch{}}(),Wp=Hr&&Hr.isArrayBuffer,Gp=Hr&&Hr.isDate,$p=Hr&&Hr.isMap,Hp=Hr&&Hr.isRegExp,jp=Hr&&Hr.isSet,Vp=Hr&&Hr.isTypedArray;function Rr(ie,de,le){switch(le.length){case 0:return ie.call(de);case 1:return ie.call(de,le[0]);case 2:return ie.call(de,le[0],le[1]);case 3:return ie.call(de,le[0],le[1],le[2])}return ie.apply(de,le)}function J1(ie,de,le,xe){for(var we=-1,Xe=ie==null?0:ie.length;++we<Xe;){var Mt=ie[we];de(xe,Mt,le(Mt),ie)}return xe}function jr(ie,de){for(var le=-1,xe=ie==null?0:ie.length;++le<xe&&de(ie[le],le,ie)!==!1;);return ie}function q1(ie,de){for(var le=ie==null?0:ie.length;le--&&de(ie[le],le,ie)!==!1;);return ie}function zp(ie,de){for(var le=-1,xe=ie==null?0:ie.length;++le<xe;)if(!de(ie[le],le,ie))return!1;return!0}function ai(ie,de){for(var le=-1,xe=ie==null?0:ie.length,we=0,Xe=[];++le<xe;){var Mt=ie[le];de(Mt,le,ie)&&(Xe[we++]=Mt)}return Xe}function El(ie,de){var le=ie==null?0:ie.length;return!!le&&Aa(ie,de,0)>-1}function Nc(ie,de,le){for(var xe=-1,we=ie==null?0:ie.length;++xe<we;)if(le(de,ie[xe]))return!0;return!1}function dt(ie,de){for(var le=-1,xe=ie==null?0:ie.length,we=Array(xe);++le<xe;)we[le]=de(ie[le],le,ie);return we}function si(ie,de){for(var le=-1,xe=de.length,we=ie.length;++le<xe;)ie[we+le]=de[le];return ie}function Uc(ie,de,le,xe){var we=-1,Xe=ie==null?0:ie.length;for(xe&&Xe&&(le=ie[++we]);++we<Xe;)le=de(le,ie[we],we,ie);return le}function ex(ie,de,le,xe){var we=ie==null?0:ie.length;for(xe&&we&&(le=ie[--we]);we--;)le=de(le,ie[we],we,ie);return le}function Bc(ie,de){for(var le=-1,xe=ie==null?0:ie.length;++le<xe;)if(de(ie[le],le,ie))return!0;return!1}var tx=Kc("length");function rx(ie){return ie.split("")}function nx(ie){return ie.match(dl)||[]}function Yp(ie,de,le){var xe;return le(ie,function(we,Xe,Mt){if(de(we,Xe,Mt))return xe=Xe,!1}),xe}function _l(ie,de,le,xe){for(var we=ie.length,Xe=le+(xe?1:-1);xe?Xe--:++Xe<we;)if(de(ie[Xe],Xe,ie))return Xe;return-1}function Aa(ie,de,le){return de===de?gx(ie,de,le):_l(ie,Xp,le)}function ix(ie,de,le,xe){for(var we=le-1,Xe=ie.length;++we<Xe;)if(xe(ie[we],de))return we;return-1}function Xp(ie){return ie!==ie}function Qp(ie,de){var le=ie==null?0:ie.length;return le?Gc(ie,de)/le:x}function Kc(ie){return function(de){return de==null?r:de[ie]}}function Wc(ie){return function(de){return ie==null?r:ie[de]}}function Zp(ie,de,le,xe,we){return we(ie,function(Xe,Mt,rt){le=xe?(xe=!1,Xe):de(le,Xe,Mt,rt)}),le}function ax(ie,de){var le=ie.length;for(ie.sort(de);le--;)ie[le]=ie[le].value;return ie}function Gc(ie,de){for(var le,xe=-1,we=ie.length;++xe<we;){var Xe=de(ie[xe]);Xe!==r&&(le=le===r?Xe:le+Xe)}return le}function $c(ie,de){for(var le=-1,xe=Array(ie);++le<ie;)xe[le]=de(le);return xe}function sx(ie,de){return dt(de,function(le){return[le,ie[le]]})}function Jp(ie){return ie&&ie.slice(0,r0(ie)+1).replace(zi,"")}function Cr(ie){return function(de){return ie(de)}}function Hc(ie,de){return dt(de,function(le){return ie[le]})}function Cs(ie,de){return ie.has(de)}function qp(ie,de){for(var le=-1,xe=ie.length;++le<xe&&Aa(de,ie[le],0)>-1;);return le}function e0(ie,de){for(var le=ie.length;le--&&Aa(de,ie[le],0)>-1;);return le}function ox(ie,de){for(var le=ie.length,xe=0;le--;)ie[le]===de&&++xe;return xe}var lx=Wc(j1),ux=Wc(V1);function fx(ie){return"\\"+Y1[ie]}function cx(ie,de){return ie==null?r:ie[de]}function Pa(ie){return W1.test(ie)}function dx(ie){return G1.test(ie)}function hx(ie){for(var de,le=[];!(de=ie.next()).done;)le.push(de.value);return le}function jc(ie){var de=-1,le=Array(ie.size);return ie.forEach(function(xe,we){le[++de]=[we,xe]}),le}function t0(ie,de){return function(le){return ie(de(le))}}function oi(ie,de){for(var le=-1,xe=ie.length,we=0,Xe=[];++le<xe;){var Mt=ie[le];(Mt===de||Mt===I)&&(ie[le]=I,Xe[we++]=le)}return Xe}function Tl(ie){var de=-1,le=Array(ie.size);return ie.forEach(function(xe){le[++de]=xe}),le}function vx(ie){var de=-1,le=Array(ie.size);return ie.forEach(function(xe){le[++de]=[xe,xe]}),le}function gx(ie,de,le){for(var xe=le-1,we=ie.length;++xe<we;)if(ie[xe]===de)return xe;return-1}function px(ie,de,le){for(var xe=le+1;xe--;)if(ie[xe]===de)return xe;return xe}function Da(ie){return Pa(ie)?yx(ie):tx(ie)}function ln(ie){return Pa(ie)?Ex(ie):rx(ie)}function r0(ie){for(var de=ie.length;de--&&xc.test(ie.charAt(de)););return de}var mx=Wc(z1);function yx(ie){for(var de=kc.lastIndex=0;kc.test(ie);)++de;return de}function Ex(ie){return ie.match(kc)||[]}function _x(ie){return ie.match(K1)||[]}var Tx=function ie(de){de=de==null?$t:Ra.defaults($t.Object(),de,Ra.pick($t,$1));var le=de.Array,xe=de.Date,we=de.Error,Xe=de.Function,Mt=de.Math,rt=de.Object,Vc=de.RegExp,Sx=de.String,Vr=de.TypeError,Sl=le.prototype,xx=Xe.prototype,Ca=rt.prototype,xl=de["__core-js_shared__"],Ll=xx.toString,Je=Ca.hasOwnProperty,Lx=0,n0=function(){var n=/[^.]+$/.exec(xl&&xl.keys&&xl.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),Al=Ca.toString,Ax=Ll.call(rt),Px=$t._,Dx=Vc("^"+Ll.call(Je).replace(ii,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Pl=Kp?de.Buffer:r,li=de.Symbol,Dl=de.Uint8Array,i0=Pl?Pl.allocUnsafe:r,Rl=t0(rt.getPrototypeOf,rt),a0=rt.create,s0=Ca.propertyIsEnumerable,Cl=Sl.splice,o0=li?li.isConcatSpreadable:r,Is=li?li.iterator:r,Xi=li?li.toStringTag:r,Il=function(){try{var n=ea(rt,"defineProperty");return n({},"",{}),n}catch{}}(),Rx=de.clearTimeout!==$t.clearTimeout&&de.clearTimeout,Cx=xe&&xe.now!==$t.Date.now&&xe.now,Ix=de.setTimeout!==$t.setTimeout&&de.setTimeout,Ol=Mt.ceil,wl=Mt.floor,zc=rt.getOwnPropertySymbols,Ox=Pl?Pl.isBuffer:r,l0=de.isFinite,wx=Sl.join,Mx=t0(rt.keys,rt),kt=Mt.max,Yt=Mt.min,kx=xe.now,bx=de.parseInt,u0=Mt.random,Fx=Sl.reverse,Yc=ea(de,"DataView"),Os=ea(de,"Map"),Xc=ea(de,"Promise"),Ia=ea(de,"Set"),ws=ea(de,"WeakMap"),Ms=ea(rt,"create"),Ml=ws&&new ws,Oa={},Nx=ta(Yc),Ux=ta(Os),Bx=ta(Xc),Kx=ta(Ia),Wx=ta(ws),kl=li?li.prototype:r,ks=kl?kl.valueOf:r,f0=kl?kl.toString:r;function Q(n){if(Tt(n)&&!Me(n)&&!(n instanceof We)){if(n instanceof zr)return n;if(Je.call(n,"__wrapped__"))return cm(n)}return new zr(n)}var wa=function(){function n(){}return function(a){if(!pt(a))return{};if(a0)return a0(a);n.prototype=a;var T=new n;return n.prototype=r,T}}();function bl(){}function zr(n,a){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!a,this.__index__=0,this.__values__=r}Q.templateSettings={escape:$r,evaluate:Pr,interpolate:Vi,variable:"",imports:{_:Q}},Q.prototype=bl.prototype,Q.prototype.constructor=Q,zr.prototype=wa(bl.prototype),zr.prototype.constructor=zr;function We(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=B,this.__views__=[]}function Gx(){var n=new We(this.__wrapped__);return n.__actions__=vr(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=vr(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=vr(this.__views__),n}function $x(){if(this.__filtered__){var n=new We(this);n.__dir__=-1,n.__filtered__=!0}else n=this.clone(),n.__dir__*=-1;return n}function Hx(){var n=this.__wrapped__.value(),a=this.__dir__,T=Me(n),G=a<0,Y=T?n.length:0,Z=rA(0,Y,this.__views__),te=Z.start,re=Z.end,se=re-te,he=G?re:te-1,ve=this.__iteratees__,pe=ve.length,Se=0,Re=Yt(se,this.__takeCount__);if(!T||!G&&Y==se&&Re==se)return k0(n,this.__actions__);var Ie=[];e:for(;se--&&Se<Re;){he+=a;for(var Ne=-1,Oe=n[he];++Ne<pe;){var Ke=ve[Ne],He=Ke.iteratee,wr=Ke.type,sr=He(Oe);if(wr==_)Oe=sr;else if(!sr){if(wr==U)continue e;break e}}Ie[Se++]=Oe}return Ie}We.prototype=wa(bl.prototype),We.prototype.constructor=We;function Qi(n){var a=-1,T=n==null?0:n.length;for(this.clear();++a<T;){var G=n[a];this.set(G[0],G[1])}}function jx(){this.__data__=Ms?Ms(null):{},this.size=0}function Vx(n){var a=this.has(n)&&delete this.__data__[n];return this.size-=a?1:0,a}function zx(n){var a=this.__data__;if(Ms){var T=a[n];return T===o?r:T}return Je.call(a,n)?a[n]:r}function Yx(n){var a=this.__data__;return Ms?a[n]!==r:Je.call(a,n)}function Xx(n,a){var T=this.__data__;return this.size+=this.has(n)?0:1,T[n]=Ms&&a===r?o:a,this}Qi.prototype.clear=jx,Qi.prototype.delete=Vx,Qi.prototype.get=zx,Qi.prototype.has=Yx,Qi.prototype.set=Xx;function bn(n){var a=-1,T=n==null?0:n.length;for(this.clear();++a<T;){var G=n[a];this.set(G[0],G[1])}}function Qx(){this.__data__=[],this.size=0}function Zx(n){var a=this.__data__,T=Fl(a,n);if(T<0)return!1;var G=a.length-1;return T==G?a.pop():Cl.call(a,T,1),--this.size,!0}function Jx(n){var a=this.__data__,T=Fl(a,n);return T<0?r:a[T][1]}function qx(n){return Fl(this.__data__,n)>-1}function eL(n,a){var T=this.__data__,G=Fl(T,n);return G<0?(++this.size,T.push([n,a])):T[G][1]=a,this}bn.prototype.clear=Qx,bn.prototype.delete=Zx,bn.prototype.get=Jx,bn.prototype.has=qx,bn.prototype.set=eL;function Fn(n){var a=-1,T=n==null?0:n.length;for(this.clear();++a<T;){var G=n[a];this.set(G[0],G[1])}}function tL(){this.size=0,this.__data__={hash:new Qi,map:new(Os||bn),string:new Qi}}function rL(n){var a=Yl(this,n).delete(n);return this.size-=a?1:0,a}function nL(n){return Yl(this,n).get(n)}function iL(n){return Yl(this,n).has(n)}function aL(n,a){var T=Yl(this,n),G=T.size;return T.set(n,a),this.size+=T.size==G?0:1,this}Fn.prototype.clear=tL,Fn.prototype.delete=rL,Fn.prototype.get=nL,Fn.prototype.has=iL,Fn.prototype.set=aL;function Zi(n){var a=-1,T=n==null?0:n.length;for(this.__data__=new Fn;++a<T;)this.add(n[a])}function sL(n){return this.__data__.set(n,o),this}function oL(n){return this.__data__.has(n)}Zi.prototype.add=Zi.prototype.push=sL,Zi.prototype.has=oL;function un(n){var a=this.__data__=new bn(n);this.size=a.size}function lL(){this.__data__=new bn,this.size=0}function uL(n){var a=this.__data__,T=a.delete(n);return this.size=a.size,T}function fL(n){return this.__data__.get(n)}function cL(n){return this.__data__.has(n)}function dL(n,a){var T=this.__data__;if(T instanceof bn){var G=T.__data__;if(!Os||G.length<s-1)return G.push([n,a]),this.size=++T.size,this;T=this.__data__=new Fn(G)}return T.set(n,a),this.size=T.size,this}un.prototype.clear=lL,un.prototype.delete=uL,un.prototype.get=fL,un.prototype.has=cL,un.prototype.set=dL;function c0(n,a){var T=Me(n),G=!T&&ra(n),Y=!T&&!G&&hi(n),Z=!T&&!G&&!Y&&Fa(n),te=T||G||Y||Z,re=te?$c(n.length,Sx):[],se=re.length;for(var he in n)(a||Je.call(n,he))&&!(te&&(he=="length"||Y&&(he=="offset"||he=="parent")||Z&&(he=="buffer"||he=="byteLength"||he=="byteOffset")||Kn(he,se)))&&re.push(he);return re}function d0(n){var a=n.length;return a?n[sd(0,a-1)]:r}function hL(n,a){return Xl(vr(n),Ji(a,0,n.length))}function vL(n){return Xl(vr(n))}function Qc(n,a,T){(T!==r&&!fn(n[a],T)||T===r&&!(a in n))&&Nn(n,a,T)}function bs(n,a,T){var G=n[a];(!(Je.call(n,a)&&fn(G,T))||T===r&&!(a in n))&&Nn(n,a,T)}function Fl(n,a){for(var T=n.length;T--;)if(fn(n[T][0],a))return T;return-1}function gL(n,a,T,G){return ui(n,function(Y,Z,te){a(G,Y,T(Y),te)}),G}function h0(n,a){return n&&Ln(a,Ut(a),n)}function pL(n,a){return n&&Ln(a,pr(a),n)}function Nn(n,a,T){a=="__proto__"&&Il?Il(n,a,{configurable:!0,enumerable:!0,value:T,writable:!0}):n[a]=T}function Zc(n,a){for(var T=-1,G=a.length,Y=le(G),Z=n==null;++T<G;)Y[T]=Z?r:Od(n,a[T]);return Y}function Ji(n,a,T){return n===n&&(T!==r&&(n=n<=T?n:T),a!==r&&(n=n>=a?n:a)),n}function Yr(n,a,T,G,Y,Z){var te,re=a&K,se=a&b,he=a&W;if(T&&(te=Y?T(n,G,Y,Z):T(n)),te!==r)return te;if(!pt(n))return n;var ve=Me(n);if(ve){if(te=iA(n),!re)return vr(n,te)}else{var pe=Xt(n),Se=pe==ne||pe==ae;if(hi(n))return N0(n,re);if(pe==ye||pe==j||Se&&!Y){if(te=se||Se?{}:rm(n),!re)return se?zL(n,pL(te,n)):VL(n,h0(te,n))}else{if(!it[pe])return Y?n:{};te=aA(n,pe,re)}}Z||(Z=new un);var Re=Z.get(n);if(Re)return Re;Z.set(n,te),Om(n)?n.forEach(function(Oe){te.add(Yr(Oe,a,T,Oe,n,Z))}):Cm(n)&&n.forEach(function(Oe,Ke){te.set(Ke,Yr(Oe,a,T,Ke,n,Z))});var Ie=he?se?md:pd:se?pr:Ut,Ne=ve?r:Ie(n);return jr(Ne||n,function(Oe,Ke){Ne&&(Ke=Oe,Oe=n[Ke]),bs(te,Ke,Yr(Oe,a,T,Ke,n,Z))}),te}function mL(n){var a=Ut(n);return function(T){return v0(T,n,a)}}function v0(n,a,T){var G=T.length;if(n==null)return!G;for(n=rt(n);G--;){var Y=T[G],Z=a[Y],te=n[Y];if(te===r&&!(Y in n)||!Z(te))return!1}return!0}function g0(n,a,T){if(typeof n!="function")throw new Vr(C);return Gs(function(){n.apply(r,T)},a)}function Fs(n,a,T,G){var Y=-1,Z=El,te=!0,re=n.length,se=[],he=a.length;if(!re)return se;T&&(a=dt(a,Cr(T))),G?(Z=Nc,te=!1):a.length>=s&&(Z=Cs,te=!1,a=new Zi(a));e:for(;++Y<re;){var ve=n[Y],pe=T==null?ve:T(ve);if(ve=G||ve!==0?ve:0,te&&pe===pe){for(var Se=he;Se--;)if(a[Se]===pe)continue e;se.push(ve)}else Z(a,pe,G)||se.push(ve)}return se}var ui=G0(xn),p0=G0(qc,!0);function yL(n,a){var T=!0;return ui(n,function(G,Y,Z){return T=!!a(G,Y,Z),T}),T}function Nl(n,a,T){for(var G=-1,Y=n.length;++G<Y;){var Z=n[G],te=a(Z);if(te!=null&&(re===r?te===te&&!Or(te):T(te,re)))var re=te,se=Z}return se}function EL(n,a,T,G){var Y=n.length;for(T=Fe(T),T<0&&(T=-T>Y?0:Y+T),G=G===r||G>Y?Y:Fe(G),G<0&&(G+=Y),G=T>G?0:Mm(G);T<G;)n[T++]=a;return n}function m0(n,a){var T=[];return ui(n,function(G,Y,Z){a(G,Y,Z)&&T.push(G)}),T}function Ht(n,a,T,G,Y){var Z=-1,te=n.length;for(T||(T=oA),Y||(Y=[]);++Z<te;){var re=n[Z];a>0&&T(re)?a>1?Ht(re,a-1,T,G,Y):si(Y,re):G||(Y[Y.length]=re)}return Y}var Jc=$0(),y0=$0(!0);function xn(n,a){return n&&Jc(n,a,Ut)}function qc(n,a){return n&&y0(n,a,Ut)}function Ul(n,a){return ai(a,function(T){return Wn(n[T])})}function qi(n,a){a=ci(a,n);for(var T=0,G=a.length;n!=null&&T<G;)n=n[An(a[T++])];return T&&T==G?n:r}function E0(n,a,T){var G=a(n);return Me(n)?G:si(G,T(n))}function ir(n){return n==null?n===r?gt:ce:Xi&&Xi in rt(n)?tA(n):vA(n)}function ed(n,a){return n>a}function _L(n,a){return n!=null&&Je.call(n,a)}function TL(n,a){return n!=null&&a in rt(n)}function SL(n,a,T){return n>=Yt(a,T)&&n<kt(a,T)}function td(n,a,T){for(var G=T?Nc:El,Y=n[0].length,Z=n.length,te=Z,re=le(Z),se=1/0,he=[];te--;){var ve=n[te];te&&a&&(ve=dt(ve,Cr(a))),se=Yt(ve.length,se),re[te]=!T&&(a||Y>=120&&ve.length>=120)?new Zi(te&&ve):r}ve=n[0];var pe=-1,Se=re[0];e:for(;++pe<Y&&he.length<se;){var Re=ve[pe],Ie=a?a(Re):Re;if(Re=T||Re!==0?Re:0,!(Se?Cs(Se,Ie):G(he,Ie,T))){for(te=Z;--te;){var Ne=re[te];if(!(Ne?Cs(Ne,Ie):G(n[te],Ie,T)))continue e}Se&&Se.push(Ie),he.push(Re)}}return he}function xL(n,a,T,G){return xn(n,function(Y,Z,te){a(G,T(Y),Z,te)}),G}function Ns(n,a,T){a=ci(a,n),n=sm(n,a);var G=n==null?n:n[An(Qr(a))];return G==null?r:Rr(G,n,T)}function _0(n){return Tt(n)&&ir(n)==j}function LL(n){return Tt(n)&&ir(n)==$e}function AL(n){return Tt(n)&&ir(n)==J}function Us(n,a,T,G,Y){return n===a?!0:n==null||a==null||!Tt(n)&&!Tt(a)?n!==n&&a!==a:PL(n,a,T,G,Us,Y)}function PL(n,a,T,G,Y,Z){var te=Me(n),re=Me(a),se=te?V:Xt(n),he=re?V:Xt(a);se=se==j?ye:se,he=he==j?ye:he;var ve=se==ye,pe=he==ye,Se=se==he;if(Se&&hi(n)){if(!hi(a))return!1;te=!0,ve=!1}if(Se&&!ve)return Z||(Z=new un),te||Fa(n)?q0(n,a,T,G,Y,Z):qL(n,a,se,T,G,Y,Z);if(!(T&F)){var Re=ve&&Je.call(n,"__wrapped__"),Ie=pe&&Je.call(a,"__wrapped__");if(Re||Ie){var Ne=Re?n.value():n,Oe=Ie?a.value():a;return Z||(Z=new un),Y(Ne,Oe,T,G,Z)}}return Se?(Z||(Z=new un),eA(n,a,T,G,Y,Z)):!1}function DL(n){return Tt(n)&&Xt(n)==fe}function rd(n,a,T,G){var Y=T.length,Z=Y,te=!G;if(n==null)return!Z;for(n=rt(n);Y--;){var re=T[Y];if(te&&re[2]?re[1]!==n[re[0]]:!(re[0]in n))return!1}for(;++Y<Z;){re=T[Y];var se=re[0],he=n[se],ve=re[1];if(te&&re[2]){if(he===r&&!(se in n))return!1}else{var pe=new un;if(G)var Se=G(he,ve,se,n,a,pe);if(!(Se===r?Us(ve,he,F|k,G,pe):Se))return!1}}return!0}function T0(n){if(!pt(n)||uA(n))return!1;var a=Wn(n)?Dx:Rs;return a.test(ta(n))}function RL(n){return Tt(n)&&ir(n)==ge}function CL(n){return Tt(n)&&Xt(n)==De}function IL(n){return Tt(n)&&tu(n.length)&&!!ot[ir(n)]}function S0(n){return typeof n=="function"?n:n==null?mr:typeof n=="object"?Me(n)?A0(n[0],n[1]):L0(n):Hm(n)}function nd(n){if(!Ws(n))return Mx(n);var a=[];for(var T in rt(n))Je.call(n,T)&&T!="constructor"&&a.push(T);return a}function OL(n){if(!pt(n))return hA(n);var a=Ws(n),T=[];for(var G in n)G=="constructor"&&(a||!Je.call(n,G))||T.push(G);return T}function id(n,a){return n<a}function x0(n,a){var T=-1,G=gr(n)?le(n.length):[];return ui(n,function(Y,Z,te){G[++T]=a(Y,Z,te)}),G}function L0(n){var a=Ed(n);return a.length==1&&a[0][2]?im(a[0][0],a[0][1]):function(T){return T===n||rd(T,n,a)}}function A0(n,a){return Td(n)&&nm(a)?im(An(n),a):function(T){var G=Od(T,n);return G===r&&G===a?wd(T,n):Us(a,G,F|k)}}function Bl(n,a,T,G,Y){n!==a&&Jc(a,function(Z,te){if(Y||(Y=new un),pt(Z))wL(n,a,te,T,Bl,G,Y);else{var re=G?G(xd(n,te),Z,te+"",n,a,Y):r;re===r&&(re=Z),Qc(n,te,re)}},pr)}function wL(n,a,T,G,Y,Z,te){var re=xd(n,T),se=xd(a,T),he=te.get(se);if(he){Qc(n,T,he);return}var ve=Z?Z(re,se,T+"",n,a,te):r,pe=ve===r;if(pe){var Se=Me(se),Re=!Se&&hi(se),Ie=!Se&&!Re&&Fa(se);ve=se,Se||Re||Ie?Me(re)?ve=re:At(re)?ve=vr(re):Re?(pe=!1,ve=N0(se,!0)):Ie?(pe=!1,ve=U0(se,!0)):ve=[]:$s(se)||ra(se)?(ve=re,ra(re)?ve=km(re):(!pt(re)||Wn(re))&&(ve=rm(se))):pe=!1}pe&&(te.set(se,ve),Y(ve,se,G,Z,te),te.delete(se)),Qc(n,T,ve)}function P0(n,a){var T=n.length;if(T)return a+=a<0?T:0,Kn(a,T)?n[a]:r}function D0(n,a,T){a.length?a=dt(a,function(Z){return Me(Z)?function(te){return qi(te,Z.length===1?Z[0]:Z)}:Z}):a=[mr];var G=-1;a=dt(a,Cr(Ce()));var Y=x0(n,function(Z,te,re){var se=dt(a,function(he){return he(Z)});return{criteria:se,index:++G,value:Z}});return ax(Y,function(Z,te){return jL(Z,te,T)})}function ML(n,a){return R0(n,a,function(T,G){return wd(n,G)})}function R0(n,a,T){for(var G=-1,Y=a.length,Z={};++G<Y;){var te=a[G],re=qi(n,te);T(re,te)&&Bs(Z,ci(te,n),re)}return Z}function kL(n){return function(a){return qi(a,n)}}function ad(n,a,T,G){var Y=G?ix:Aa,Z=-1,te=a.length,re=n;for(n===a&&(a=vr(a)),T&&(re=dt(n,Cr(T)));++Z<te;)for(var se=0,he=a[Z],ve=T?T(he):he;(se=Y(re,ve,se,G))>-1;)re!==n&&Cl.call(re,se,1),Cl.call(n,se,1);return n}function C0(n,a){for(var T=n?a.length:0,G=T-1;T--;){var Y=a[T];if(T==G||Y!==Z){var Z=Y;Kn(Y)?Cl.call(n,Y,1):ud(n,Y)}}return n}function sd(n,a){return n+wl(u0()*(a-n+1))}function bL(n,a,T,G){for(var Y=-1,Z=kt(Ol((a-n)/(T||1)),0),te=le(Z);Z--;)te[G?Z:++Y]=n,n+=T;return te}function od(n,a){var T="";if(!n||a<1||a>E)return T;do a%2&&(T+=n),a=wl(a/2),a&&(n+=n);while(a);return T}function Be(n,a){return Ld(am(n,a,mr),n+"")}function FL(n){return d0(Na(n))}function NL(n,a){var T=Na(n);return Xl(T,Ji(a,0,T.length))}function Bs(n,a,T,G){if(!pt(n))return n;a=ci(a,n);for(var Y=-1,Z=a.length,te=Z-1,re=n;re!=null&&++Y<Z;){var se=An(a[Y]),he=T;if(se==="__proto__"||se==="constructor"||se==="prototype")return n;if(Y!=te){var ve=re[se];he=G?G(ve,se,re):r,he===r&&(he=pt(ve)?ve:Kn(a[Y+1])?[]:{})}bs(re,se,he),re=re[se]}return n}var I0=Ml?function(n,a){return Ml.set(n,a),n}:mr,UL=Il?function(n,a){return Il(n,"toString",{configurable:!0,enumerable:!1,value:kd(a),writable:!0})}:mr;function BL(n){return Xl(Na(n))}function Xr(n,a,T){var G=-1,Y=n.length;a<0&&(a=-a>Y?0:Y+a),T=T>Y?Y:T,T<0&&(T+=Y),Y=a>T?0:T-a>>>0,a>>>=0;for(var Z=le(Y);++G<Y;)Z[G]=n[G+a];return Z}function KL(n,a){var T;return ui(n,function(G,Y,Z){return T=a(G,Y,Z),!T}),!!T}function Kl(n,a,T){var G=0,Y=n==null?G:n.length;if(typeof a=="number"&&a===a&&Y<=$){for(;G<Y;){var Z=G+Y>>>1,te=n[Z];te!==null&&!Or(te)&&(T?te<=a:te<a)?G=Z+1:Y=Z}return Y}return ld(n,a,mr,T)}function ld(n,a,T,G){var Y=0,Z=n==null?0:n.length;if(Z===0)return 0;a=T(a);for(var te=a!==a,re=a===null,se=Or(a),he=a===r;Y<Z;){var ve=wl((Y+Z)/2),pe=T(n[ve]),Se=pe!==r,Re=pe===null,Ie=pe===pe,Ne=Or(pe);if(te)var Oe=G||Ie;else he?Oe=Ie&&(G||Se):re?Oe=Ie&&Se&&(G||!Re):se?Oe=Ie&&Se&&!Re&&(G||!Ne):Re||Ne?Oe=!1:Oe=G?pe<=a:pe<a;Oe?Y=ve+1:Z=ve}return Yt(Z,O)}function O0(n,a){for(var T=-1,G=n.length,Y=0,Z=[];++T<G;){var te=n[T],re=a?a(te):te;if(!T||!fn(re,se)){var se=re;Z[Y++]=te===0?0:te}}return Z}function w0(n){return typeof n=="number"?n:Or(n)?x:+n}function Ir(n){if(typeof n=="string")return n;if(Me(n))return dt(n,Ir)+"";if(Or(n))return f0?f0.call(n):"";var a=n+"";return a=="0"&&1/n==-c?"-0":a}function fi(n,a,T){var G=-1,Y=El,Z=n.length,te=!0,re=[],se=re;if(T)te=!1,Y=Nc;else if(Z>=s){var he=a?null:ZL(n);if(he)return Tl(he);te=!1,Y=Cs,se=new Zi}else se=a?[]:re;e:for(;++G<Z;){var ve=n[G],pe=a?a(ve):ve;if(ve=T||ve!==0?ve:0,te&&pe===pe){for(var Se=se.length;Se--;)if(se[Se]===pe)continue e;a&&se.push(pe),re.push(ve)}else Y(se,pe,T)||(se!==re&&se.push(pe),re.push(ve))}return re}function ud(n,a){return a=ci(a,n),n=sm(n,a),n==null||delete n[An(Qr(a))]}function M0(n,a,T,G){return Bs(n,a,T(qi(n,a)),G)}function Wl(n,a,T,G){for(var Y=n.length,Z=G?Y:-1;(G?Z--:++Z<Y)&&a(n[Z],Z,n););return T?Xr(n,G?0:Z,G?Z+1:Y):Xr(n,G?Z+1:0,G?Y:Z)}function k0(n,a){var T=n;return T instanceof We&&(T=T.value()),Uc(a,function(G,Y){return Y.func.apply(Y.thisArg,si([G],Y.args))},T)}function fd(n,a,T){var G=n.length;if(G<2)return G?fi(n[0]):[];for(var Y=-1,Z=le(G);++Y<G;)for(var te=n[Y],re=-1;++re<G;)re!=Y&&(Z[Y]=Fs(Z[Y]||te,n[re],a,T));return fi(Ht(Z,1),a,T)}function b0(n,a,T){for(var G=-1,Y=n.length,Z=a.length,te={};++G<Y;){var re=G<Z?a[G]:r;T(te,n[G],re)}return te}function cd(n){return At(n)?n:[]}function dd(n){return typeof n=="function"?n:mr}function ci(n,a){return Me(n)?n:Td(n,a)?[n]:fm(Ze(n))}var WL=Be;function di(n,a,T){var G=n.length;return T=T===r?G:T,!a&&T>=G?n:Xr(n,a,T)}var F0=Rx||function(n){return $t.clearTimeout(n)};function N0(n,a){if(a)return n.slice();var T=n.length,G=i0?i0(T):new n.constructor(T);return n.copy(G),G}function hd(n){var a=new n.constructor(n.byteLength);return new Dl(a).set(new Dl(n)),a}function GL(n,a){var T=a?hd(n.buffer):n.buffer;return new n.constructor(T,n.byteOffset,n.byteLength)}function $L(n){var a=new n.constructor(n.source,vl.exec(n));return a.lastIndex=n.lastIndex,a}function HL(n){return ks?rt(ks.call(n)):{}}function U0(n,a){var T=a?hd(n.buffer):n.buffer;return new n.constructor(T,n.byteOffset,n.length)}function B0(n,a){if(n!==a){var T=n!==r,G=n===null,Y=n===n,Z=Or(n),te=a!==r,re=a===null,se=a===a,he=Or(a);if(!re&&!he&&!Z&&n>a||Z&&te&&se&&!re&&!he||G&&te&&se||!T&&se||!Y)return 1;if(!G&&!Z&&!he&&n<a||he&&T&&Y&&!G&&!Z||re&&T&&Y||!te&&Y||!se)return-1}return 0}function jL(n,a,T){for(var G=-1,Y=n.criteria,Z=a.criteria,te=Y.length,re=T.length;++G<te;){var se=B0(Y[G],Z[G]);if(se){if(G>=re)return se;var he=T[G];return se*(he=="desc"?-1:1)}}return n.index-a.index}function K0(n,a,T,G){for(var Y=-1,Z=n.length,te=T.length,re=-1,se=a.length,he=kt(Z-te,0),ve=le(se+he),pe=!G;++re<se;)ve[re]=a[re];for(;++Y<te;)(pe||Y<Z)&&(ve[T[Y]]=n[Y]);for(;he--;)ve[re++]=n[Y++];return ve}function W0(n,a,T,G){for(var Y=-1,Z=n.length,te=-1,re=T.length,se=-1,he=a.length,ve=kt(Z-re,0),pe=le(ve+he),Se=!G;++Y<ve;)pe[Y]=n[Y];for(var Re=Y;++se<he;)pe[Re+se]=a[se];for(;++te<re;)(Se||Y<Z)&&(pe[Re+T[te]]=n[Y++]);return pe}function vr(n,a){var T=-1,G=n.length;for(a||(a=le(G));++T<G;)a[T]=n[T];return a}function Ln(n,a,T,G){var Y=!T;T||(T={});for(var Z=-1,te=a.length;++Z<te;){var re=a[Z],se=G?G(T[re],n[re],re,T,n):r;se===r&&(se=n[re]),Y?Nn(T,re,se):bs(T,re,se)}return T}function VL(n,a){return Ln(n,_d(n),a)}function zL(n,a){return Ln(n,em(n),a)}function Gl(n,a){return function(T,G){var Y=Me(T)?J1:gL,Z=a?a():{};return Y(T,n,Ce(G,2),Z)}}function Ma(n){return Be(function(a,T){var G=-1,Y=T.length,Z=Y>1?T[Y-1]:r,te=Y>2?T[2]:r;for(Z=n.length>3&&typeof Z=="function"?(Y--,Z):r,te&&ar(T[0],T[1],te)&&(Z=Y<3?r:Z,Y=1),a=rt(a);++G<Y;){var re=T[G];re&&n(a,re,G,Z)}return a})}function G0(n,a){return function(T,G){if(T==null)return T;if(!gr(T))return n(T,G);for(var Y=T.length,Z=a?Y:-1,te=rt(T);(a?Z--:++Z<Y)&&G(te[Z],Z,te)!==!1;);return T}}function $0(n){return function(a,T,G){for(var Y=-1,Z=rt(a),te=G(a),re=te.length;re--;){var se=te[n?re:++Y];if(T(Z[se],se,Z)===!1)break}return a}}function YL(n,a,T){var G=a&N,Y=Ks(n);function Z(){var te=this&&this!==$t&&this instanceof Z?Y:n;return te.apply(G?T:this,arguments)}return Z}function H0(n){return function(a){a=Ze(a);var T=Pa(a)?ln(a):r,G=T?T[0]:a.charAt(0),Y=T?di(T,1).join(""):a.slice(1);return G[n]()+Y}}function ka(n){return function(a){return Uc(Gm(Wm(a).replace(U1,"")),n,"")}}function Ks(n){return function(){var a=arguments;switch(a.length){case 0:return new n;case 1:return new n(a[0]);case 2:return new n(a[0],a[1]);case 3:return new n(a[0],a[1],a[2]);case 4:return new n(a[0],a[1],a[2],a[3]);case 5:return new n(a[0],a[1],a[2],a[3],a[4]);case 6:return new n(a[0],a[1],a[2],a[3],a[4],a[5]);case 7:return new n(a[0],a[1],a[2],a[3],a[4],a[5],a[6])}var T=wa(n.prototype),G=n.apply(T,a);return pt(G)?G:T}}function XL(n,a,T){var G=Ks(n);function Y(){for(var Z=arguments.length,te=le(Z),re=Z,se=ba(Y);re--;)te[re]=arguments[re];var he=Z<3&&te[0]!==se&&te[Z-1]!==se?[]:oi(te,se);if(Z-=he.length,Z<T)return X0(n,a,$l,Y.placeholder,r,te,he,r,r,T-Z);var ve=this&&this!==$t&&this instanceof Y?G:n;return Rr(ve,this,te)}return Y}function j0(n){return function(a,T,G){var Y=rt(a);if(!gr(a)){var Z=Ce(T,3);a=Ut(a),T=function(re){return Z(Y[re],re,Y)}}var te=n(a,T,G);return te>-1?Y[Z?a[te]:te]:r}}function V0(n){return Bn(function(a){var T=a.length,G=T,Y=zr.prototype.thru;for(n&&a.reverse();G--;){var Z=a[G];if(typeof Z!="function")throw new Vr(C);if(Y&&!te&&zl(Z)=="wrapper")var te=new zr([],!0)}for(G=te?G:T;++G<T;){Z=a[G];var re=zl(Z),se=re=="wrapper"?yd(Z):r;se&&Sd(se[0])&&se[1]==(v|u|A|h)&&!se[4].length&&se[9]==1?te=te[zl(se[0])].apply(te,se[3]):te=Z.length==1&&Sd(Z)?te[re]():te.thru(Z)}return function(){var he=arguments,ve=he[0];if(te&&he.length==1&&Me(ve))return te.plant(ve).value();for(var pe=0,Se=T?a[pe].apply(this,he):ve;++pe<T;)Se=a[pe].call(this,Se);return Se}})}function $l(n,a,T,G,Y,Z,te,re,se,he){var ve=a&v,pe=a&N,Se=a&m,Re=a&(u|w),Ie=a&g,Ne=Se?r:Ks(n);function Oe(){for(var Ke=arguments.length,He=le(Ke),wr=Ke;wr--;)He[wr]=arguments[wr];if(Re)var sr=ba(Oe),Mr=ox(He,sr);if(G&&(He=K0(He,G,Y,Re)),Z&&(He=W0(He,Z,te,Re)),Ke-=Mr,Re&&Ke<he){var Pt=oi(He,sr);return X0(n,a,$l,Oe.placeholder,T,He,Pt,re,se,he-Ke)}var cn=pe?T:this,$n=Se?cn[n]:n;return Ke=He.length,re?He=gA(He,re):Ie&&Ke>1&&He.reverse(),ve&&se<Ke&&(He.length=se),this&&this!==$t&&this instanceof Oe&&($n=Ne||Ks($n)),$n.apply(cn,He)}return Oe}function z0(n,a){return function(T,G){return xL(T,n,a(G),{})}}function Hl(n,a){return function(T,G){var Y;if(T===r&&G===r)return a;if(T!==r&&(Y=T),G!==r){if(Y===r)return G;typeof T=="string"||typeof G=="string"?(T=Ir(T),G=Ir(G)):(T=w0(T),G=w0(G)),Y=n(T,G)}return Y}}function vd(n){return Bn(function(a){return a=dt(a,Cr(Ce())),Be(function(T){var G=this;return n(a,function(Y){return Rr(Y,G,T)})})})}function jl(n,a){a=a===r?" ":Ir(a);var T=a.length;if(T<2)return T?od(a,n):a;var G=od(a,Ol(n/Da(a)));return Pa(a)?di(ln(G),0,n).join(""):G.slice(0,n)}function QL(n,a,T,G){var Y=a&N,Z=Ks(n);function te(){for(var re=-1,se=arguments.length,he=-1,ve=G.length,pe=le(ve+se),Se=this&&this!==$t&&this instanceof te?Z:n;++he<ve;)pe[he]=G[he];for(;se--;)pe[he++]=arguments[++re];return Rr(Se,Y?T:this,pe)}return te}function Y0(n){return function(a,T,G){return G&&typeof G!="number"&&ar(a,T,G)&&(T=G=r),a=Gn(a),T===r?(T=a,a=0):T=Gn(T),G=G===r?a<T?1:-1:Gn(G),bL(a,T,G,n)}}function Vl(n){return function(a,T){return typeof a=="string"&&typeof T=="string"||(a=Zr(a),T=Zr(T)),n(a,T)}}function X0(n,a,T,G,Y,Z,te,re,se,he){var ve=a&u,pe=ve?te:r,Se=ve?r:te,Re=ve?Z:r,Ie=ve?r:Z;a|=ve?A:d,a&=~(ve?d:A),a&p||(a&=~(N|m));var Ne=[n,a,Y,Re,pe,Ie,Se,re,se,he],Oe=T.apply(r,Ne);return Sd(n)&&om(Oe,Ne),Oe.placeholder=G,lm(Oe,n,a)}function gd(n){var a=Mt[n];return function(T,G){if(T=Zr(T),G=G==null?0:Yt(Fe(G),292),G&&l0(T)){var Y=(Ze(T)+"e").split("e"),Z=a(Y[0]+"e"+(+Y[1]+G));return Y=(Ze(Z)+"e").split("e"),+(Y[0]+"e"+(+Y[1]-G))}return a(T)}}var ZL=Ia&&1/Tl(new Ia([,-0]))[1]==c?function(n){return new Ia(n)}:Nd;function Q0(n){return function(a){var T=Xt(a);return T==fe?jc(a):T==De?vx(a):sx(a,n(a))}}function Un(n,a,T,G,Y,Z,te,re){var se=a&m;if(!se&&typeof n!="function")throw new Vr(C);var he=G?G.length:0;if(he||(a&=~(A|d),G=Y=r),te=te===r?te:kt(Fe(te),0),re=re===r?re:Fe(re),he-=Y?Y.length:0,a&d){var ve=G,pe=Y;G=Y=r}var Se=se?r:yd(n),Re=[n,a,T,G,Y,ve,pe,Z,te,re];if(Se&&dA(Re,Se),n=Re[0],a=Re[1],T=Re[2],G=Re[3],Y=Re[4],re=Re[9]=Re[9]===r?se?0:n.length:kt(Re[9]-he,0),!re&&a&(u|w)&&(a&=~(u|w)),!a||a==N)var Ie=YL(n,a,T);else a==u||a==w?Ie=XL(n,a,re):(a==A||a==(N|A))&&!Y.length?Ie=QL(n,a,T,G):Ie=$l.apply(r,Re);var Ne=Se?I0:om;return lm(Ne(Ie,Re),n,a)}function Z0(n,a,T,G){return n===r||fn(n,Ca[T])&&!Je.call(G,T)?a:n}function J0(n,a,T,G,Y,Z){return pt(n)&&pt(a)&&(Z.set(a,n),Bl(n,a,r,J0,Z),Z.delete(a)),n}function JL(n){return $s(n)?r:n}function q0(n,a,T,G,Y,Z){var te=T&F,re=n.length,se=a.length;if(re!=se&&!(te&&se>re))return!1;var he=Z.get(n),ve=Z.get(a);if(he&&ve)return he==a&&ve==n;var pe=-1,Se=!0,Re=T&k?new Zi:r;for(Z.set(n,a),Z.set(a,n);++pe<re;){var Ie=n[pe],Ne=a[pe];if(G)var Oe=te?G(Ne,Ie,pe,a,n,Z):G(Ie,Ne,pe,n,a,Z);if(Oe!==r){if(Oe)continue;Se=!1;break}if(Re){if(!Bc(a,function(Ke,He){if(!Cs(Re,He)&&(Ie===Ke||Y(Ie,Ke,T,G,Z)))return Re.push(He)})){Se=!1;break}}else if(!(Ie===Ne||Y(Ie,Ne,T,G,Z))){Se=!1;break}}return Z.delete(n),Z.delete(a),Se}function qL(n,a,T,G,Y,Z,te){switch(T){case ze:if(n.byteLength!=a.byteLength||n.byteOffset!=a.byteOffset)return!1;n=n.buffer,a=a.buffer;case $e:return!(n.byteLength!=a.byteLength||!Z(new Dl(n),new Dl(a)));case X:case J:case ue:return fn(+n,+a);case ee:return n.name==a.name&&n.message==a.message;case ge:case be:return n==a+"";case fe:var re=jc;case De:var se=G&F;if(re||(re=Tl),n.size!=a.size&&!se)return!1;var he=te.get(n);if(he)return he==a;G|=k,te.set(n,a);var ve=q0(re(n),re(a),G,Y,Z,te);return te.delete(n),ve;case Ue:if(ks)return ks.call(n)==ks.call(a)}return!1}function eA(n,a,T,G,Y,Z){var te=T&F,re=pd(n),se=re.length,he=pd(a),ve=he.length;if(se!=ve&&!te)return!1;for(var pe=se;pe--;){var Se=re[pe];if(!(te?Se in a:Je.call(a,Se)))return!1}var Re=Z.get(n),Ie=Z.get(a);if(Re&&Ie)return Re==a&&Ie==n;var Ne=!0;Z.set(n,a),Z.set(a,n);for(var Oe=te;++pe<se;){Se=re[pe];var Ke=n[Se],He=a[Se];if(G)var wr=te?G(He,Ke,Se,a,n,Z):G(Ke,He,Se,n,a,Z);if(!(wr===r?Ke===He||Y(Ke,He,T,G,Z):wr)){Ne=!1;break}Oe||(Oe=Se=="constructor")}if(Ne&&!Oe){var sr=n.constructor,Mr=a.constructor;sr!=Mr&&"constructor"in n&&"constructor"in a&&!(typeof sr=="function"&&sr instanceof sr&&typeof Mr=="function"&&Mr instanceof Mr)&&(Ne=!1)}return Z.delete(n),Z.delete(a),Ne}function Bn(n){return Ld(am(n,r,vm),n+"")}function pd(n){return E0(n,Ut,_d)}function md(n){return E0(n,pr,em)}var yd=Ml?function(n){return Ml.get(n)}:Nd;function zl(n){for(var a=n.name+"",T=Oa[a],G=Je.call(Oa,a)?T.length:0;G--;){var Y=T[G],Z=Y.func;if(Z==null||Z==n)return Y.name}return a}function ba(n){var a=Je.call(Q,"placeholder")?Q:n;return a.placeholder}function Ce(){var n=Q.iteratee||bd;return n=n===bd?S0:n,arguments.length?n(arguments[0],arguments[1]):n}function Yl(n,a){var T=n.__data__;return lA(a)?T[typeof a=="string"?"string":"hash"]:T.map}function Ed(n){for(var a=Ut(n),T=a.length;T--;){var G=a[T],Y=n[G];a[T]=[G,Y,nm(Y)]}return a}function ea(n,a){var T=cx(n,a);return T0(T)?T:r}function tA(n){var a=Je.call(n,Xi),T=n[Xi];try{n[Xi]=r;var G=!0}catch{}var Y=Al.call(n);return G&&(a?n[Xi]=T:delete n[Xi]),Y}var _d=zc?function(n){return n==null?[]:(n=rt(n),ai(zc(n),function(a){return s0.call(n,a)}))}:Ud,em=zc?function(n){for(var a=[];n;)si(a,_d(n)),n=Rl(n);return a}:Ud,Xt=ir;(Yc&&Xt(new Yc(new ArrayBuffer(1)))!=ze||Os&&Xt(new Os)!=fe||Xc&&Xt(Xc.resolve())!=Pe||Ia&&Xt(new Ia)!=De||ws&&Xt(new ws)!=Ve)&&(Xt=function(n){var a=ir(n),T=a==ye?n.constructor:r,G=T?ta(T):"";if(G)switch(G){case Nx:return ze;case Ux:return fe;case Bx:return Pe;case Kx:return De;case Wx:return Ve}return a});function rA(n,a,T){for(var G=-1,Y=T.length;++G<Y;){var Z=T[G],te=Z.size;switch(Z.type){case"drop":n+=te;break;case"dropRight":a-=te;break;case"take":a=Yt(a,n+te);break;case"takeRight":n=kt(n,a-te);break}}return{start:n,end:a}}function nA(n){var a=n.match(Ds);return a?a[1].split(Dr):[]}function tm(n,a,T){a=ci(a,n);for(var G=-1,Y=a.length,Z=!1;++G<Y;){var te=An(a[G]);if(!(Z=n!=null&&T(n,te)))break;n=n[te]}return Z||++G!=Y?Z:(Y=n==null?0:n.length,!!Y&&tu(Y)&&Kn(te,Y)&&(Me(n)||ra(n)))}function iA(n){var a=n.length,T=new n.constructor(a);return a&&typeof n[0]=="string"&&Je.call(n,"index")&&(T.index=n.index,T.input=n.input),T}function rm(n){return typeof n.constructor=="function"&&!Ws(n)?wa(Rl(n)):{}}function aA(n,a,T){var G=n.constructor;switch(a){case $e:return hd(n);case X:case J:return new G(+n);case ze:return GL(n,T);case Qe:case st:case xt:case ct:case Lt:case cr:case wt:case Lr:case rr:return U0(n,T);case fe:return new G;case ue:case be:return new G(n);case ge:return $L(n);case De:return new G;case Ue:return HL(n)}}function sA(n,a){var T=a.length;if(!T)return n;var G=T-1;return a[G]=(T>1?"& ":"")+a[G],a=a.join(T>2?", ":" "),n.replace(cl,`{
/* [wrapped with `+a+`] */
`)}function oA(n){return Me(n)||ra(n)||!!(o0&&n&&n[o0])}function Kn(n,a){var T=typeof n;return a=a??E,!!a&&(T=="number"||T!="symbol"&&Rc.test(n))&&n>-1&&n%1==0&&n<a}function ar(n,a,T){if(!pt(T))return!1;var G=typeof a;return(G=="number"?gr(T)&&Kn(a,T.length):G=="string"&&a in T)?fn(T[a],n):!1}function Td(n,a){if(Me(n))return!1;var T=typeof n;return T=="number"||T=="symbol"||T=="boolean"||n==null||Or(n)?!0:ni.test(n)||!kn.test(n)||a!=null&&n in rt(a)}function lA(n){var a=typeof n;return a=="string"||a=="number"||a=="symbol"||a=="boolean"?n!=="__proto__":n===null}function Sd(n){var a=zl(n),T=Q[a];if(typeof T!="function"||!(a in We.prototype))return!1;if(n===T)return!0;var G=yd(T);return!!G&&n===G[0]}function uA(n){return!!n0&&n0 in n}var fA=xl?Wn:Bd;function Ws(n){var a=n&&n.constructor,T=typeof a=="function"&&a.prototype||Ca;return n===T}function nm(n){return n===n&&!pt(n)}function im(n,a){return function(T){return T==null?!1:T[n]===a&&(a!==r||n in rt(T))}}function cA(n){var a=ql(n,function(G){return T.size===M&&T.clear(),G}),T=a.cache;return a}function dA(n,a){var T=n[1],G=a[1],Y=T|G,Z=Y<(N|m|v),te=G==v&&T==u||G==v&&T==h&&n[7].length<=a[8]||G==(v|h)&&a[7].length<=a[8]&&T==u;if(!(Z||te))return n;G&N&&(n[2]=a[2],Y|=T&N?0:p);var re=a[3];if(re){var se=n[3];n[3]=se?K0(se,re,a[4]):re,n[4]=se?oi(n[3],I):a[4]}return re=a[5],re&&(se=n[5],n[5]=se?W0(se,re,a[6]):re,n[6]=se?oi(n[5],I):a[6]),re=a[7],re&&(n[7]=re),G&v&&(n[8]=n[8]==null?a[8]:Yt(n[8],a[8])),n[9]==null&&(n[9]=a[9]),n[0]=a[0],n[1]=Y,n}function hA(n){var a=[];if(n!=null)for(var T in rt(n))a.push(T);return a}function vA(n){return Al.call(n)}function am(n,a,T){return a=kt(a===r?n.length-1:a,0),function(){for(var G=arguments,Y=-1,Z=kt(G.length-a,0),te=le(Z);++Y<Z;)te[Y]=G[a+Y];Y=-1;for(var re=le(a+1);++Y<a;)re[Y]=G[Y];return re[a]=T(te),Rr(n,this,re)}}function sm(n,a){return a.length<2?n:qi(n,Xr(a,0,-1))}function gA(n,a){for(var T=n.length,G=Yt(a.length,T),Y=vr(n);G--;){var Z=a[G];n[G]=Kn(Z,T)?Y[Z]:r}return n}function xd(n,a){if(!(a==="constructor"&&typeof n[a]=="function")&&a!="__proto__")return n[a]}var om=um(I0),Gs=Ix||function(n,a){return $t.setTimeout(n,a)},Ld=um(UL);function lm(n,a,T){var G=a+"";return Ld(n,sA(G,pA(nA(G),T)))}function um(n){var a=0,T=0;return function(){var G=kx(),Y=L-(G-T);if(T=G,Y>0){if(++a>=y)return arguments[0]}else a=0;return n.apply(r,arguments)}}function Xl(n,a){var T=-1,G=n.length,Y=G-1;for(a=a===r?G:a;++T<a;){var Z=sd(T,Y),te=n[Z];n[Z]=n[T],n[T]=te}return n.length=a,n}var fm=cA(function(n){var a=[];return n.charCodeAt(0)===46&&a.push(""),n.replace(fl,function(T,G,Y,Z){a.push(Y?Z.replace(Lc,"$1"):G||T)}),a});function An(n){if(typeof n=="string"||Or(n))return n;var a=n+"";return a=="0"&&1/n==-c?"-0":a}function ta(n){if(n!=null){try{return Ll.call(n)}catch{}try{return n+""}catch{}}return""}function pA(n,a){return jr(H,function(T){var G="_."+T[0];a&T[1]&&!El(n,G)&&n.push(G)}),n.sort()}function cm(n){if(n instanceof We)return n.clone();var a=new zr(n.__wrapped__,n.__chain__);return a.__actions__=vr(n.__actions__),a.__index__=n.__index__,a.__values__=n.__values__,a}function mA(n,a,T){(T?ar(n,a,T):a===r)?a=1:a=kt(Fe(a),0);var G=n==null?0:n.length;if(!G||a<1)return[];for(var Y=0,Z=0,te=le(Ol(G/a));Y<G;)te[Z++]=Xr(n,Y,Y+=a);return te}function yA(n){for(var a=-1,T=n==null?0:n.length,G=0,Y=[];++a<T;){var Z=n[a];Z&&(Y[G++]=Z)}return Y}function EA(){var n=arguments.length;if(!n)return[];for(var a=le(n-1),T=arguments[0],G=n;G--;)a[G-1]=arguments[G];return si(Me(T)?vr(T):[T],Ht(a,1))}var _A=Be(function(n,a){return At(n)?Fs(n,Ht(a,1,At,!0)):[]}),TA=Be(function(n,a){var T=Qr(a);return At(T)&&(T=r),At(n)?Fs(n,Ht(a,1,At,!0),Ce(T,2)):[]}),SA=Be(function(n,a){var T=Qr(a);return At(T)&&(T=r),At(n)?Fs(n,Ht(a,1,At,!0),r,T):[]});function xA(n,a,T){var G=n==null?0:n.length;return G?(a=T||a===r?1:Fe(a),Xr(n,a<0?0:a,G)):[]}function LA(n,a,T){var G=n==null?0:n.length;return G?(a=T||a===r?1:Fe(a),a=G-a,Xr(n,0,a<0?0:a)):[]}function AA(n,a){return n&&n.length?Wl(n,Ce(a,3),!0,!0):[]}function PA(n,a){return n&&n.length?Wl(n,Ce(a,3),!0):[]}function DA(n,a,T,G){var Y=n==null?0:n.length;return Y?(T&&typeof T!="number"&&ar(n,a,T)&&(T=0,G=Y),EL(n,a,T,G)):[]}function dm(n,a,T){var G=n==null?0:n.length;if(!G)return-1;var Y=T==null?0:Fe(T);return Y<0&&(Y=kt(G+Y,0)),_l(n,Ce(a,3),Y)}function hm(n,a,T){var G=n==null?0:n.length;if(!G)return-1;var Y=G-1;return T!==r&&(Y=Fe(T),Y=T<0?kt(G+Y,0):Yt(Y,G-1)),_l(n,Ce(a,3),Y,!0)}function vm(n){var a=n==null?0:n.length;return a?Ht(n,1):[]}function RA(n){var a=n==null?0:n.length;return a?Ht(n,c):[]}function CA(n,a){var T=n==null?0:n.length;return T?(a=a===r?1:Fe(a),Ht(n,a)):[]}function IA(n){for(var a=-1,T=n==null?0:n.length,G={};++a<T;){var Y=n[a];G[Y[0]]=Y[1]}return G}function gm(n){return n&&n.length?n[0]:r}function OA(n,a,T){var G=n==null?0:n.length;if(!G)return-1;var Y=T==null?0:Fe(T);return Y<0&&(Y=kt(G+Y,0)),Aa(n,a,Y)}function wA(n){var a=n==null?0:n.length;return a?Xr(n,0,-1):[]}var MA=Be(function(n){var a=dt(n,cd);return a.length&&a[0]===n[0]?td(a):[]}),kA=Be(function(n){var a=Qr(n),T=dt(n,cd);return a===Qr(T)?a=r:T.pop(),T.length&&T[0]===n[0]?td(T,Ce(a,2)):[]}),bA=Be(function(n){var a=Qr(n),T=dt(n,cd);return a=typeof a=="function"?a:r,a&&T.pop(),T.length&&T[0]===n[0]?td(T,r,a):[]});function FA(n,a){return n==null?"":wx.call(n,a)}function Qr(n){var a=n==null?0:n.length;return a?n[a-1]:r}function NA(n,a,T){var G=n==null?0:n.length;if(!G)return-1;var Y=G;return T!==r&&(Y=Fe(T),Y=Y<0?kt(G+Y,0):Yt(Y,G-1)),a===a?px(n,a,Y):_l(n,Xp,Y,!0)}function UA(n,a){return n&&n.length?P0(n,Fe(a)):r}var BA=Be(pm);function pm(n,a){return n&&n.length&&a&&a.length?ad(n,a):n}function KA(n,a,T){return n&&n.length&&a&&a.length?ad(n,a,Ce(T,2)):n}function WA(n,a,T){return n&&n.length&&a&&a.length?ad(n,a,r,T):n}var GA=Bn(function(n,a){var T=n==null?0:n.length,G=Zc(n,a);return C0(n,dt(a,function(Y){return Kn(Y,T)?+Y:Y}).sort(B0)),G});function $A(n,a){var T=[];if(!(n&&n.length))return T;var G=-1,Y=[],Z=n.length;for(a=Ce(a,3);++G<Z;){var te=n[G];a(te,G,n)&&(T.push(te),Y.push(G))}return C0(n,Y),T}function Ad(n){return n==null?n:Fx.call(n)}function HA(n,a,T){var G=n==null?0:n.length;return G?(T&&typeof T!="number"&&ar(n,a,T)?(a=0,T=G):(a=a==null?0:Fe(a),T=T===r?G:Fe(T)),Xr(n,a,T)):[]}function jA(n,a){return Kl(n,a)}function VA(n,a,T){return ld(n,a,Ce(T,2))}function zA(n,a){var T=n==null?0:n.length;if(T){var G=Kl(n,a);if(G<T&&fn(n[G],a))return G}return-1}function YA(n,a){return Kl(n,a,!0)}function XA(n,a,T){return ld(n,a,Ce(T,2),!0)}function QA(n,a){var T=n==null?0:n.length;if(T){var G=Kl(n,a,!0)-1;if(fn(n[G],a))return G}return-1}function ZA(n){return n&&n.length?O0(n):[]}function JA(n,a){return n&&n.length?O0(n,Ce(a,2)):[]}function qA(n){var a=n==null?0:n.length;return a?Xr(n,1,a):[]}function eP(n,a,T){return n&&n.length?(a=T||a===r?1:Fe(a),Xr(n,0,a<0?0:a)):[]}function tP(n,a,T){var G=n==null?0:n.length;return G?(a=T||a===r?1:Fe(a),a=G-a,Xr(n,a<0?0:a,G)):[]}function rP(n,a){return n&&n.length?Wl(n,Ce(a,3),!1,!0):[]}function nP(n,a){return n&&n.length?Wl(n,Ce(a,3)):[]}var iP=Be(function(n){return fi(Ht(n,1,At,!0))}),aP=Be(function(n){var a=Qr(n);return At(a)&&(a=r),fi(Ht(n,1,At,!0),Ce(a,2))}),sP=Be(function(n){var a=Qr(n);return a=typeof a=="function"?a:r,fi(Ht(n,1,At,!0),r,a)});function oP(n){return n&&n.length?fi(n):[]}function lP(n,a){return n&&n.length?fi(n,Ce(a,2)):[]}function uP(n,a){return a=typeof a=="function"?a:r,n&&n.length?fi(n,r,a):[]}function Pd(n){if(!(n&&n.length))return[];var a=0;return n=ai(n,function(T){if(At(T))return a=kt(T.length,a),!0}),$c(a,function(T){return dt(n,Kc(T))})}function mm(n,a){if(!(n&&n.length))return[];var T=Pd(n);return a==null?T:dt(T,function(G){return Rr(a,r,G)})}var fP=Be(function(n,a){return At(n)?Fs(n,a):[]}),cP=Be(function(n){return fd(ai(n,At))}),dP=Be(function(n){var a=Qr(n);return At(a)&&(a=r),fd(ai(n,At),Ce(a,2))}),hP=Be(function(n){var a=Qr(n);return a=typeof a=="function"?a:r,fd(ai(n,At),r,a)}),vP=Be(Pd);function gP(n,a){return b0(n||[],a||[],bs)}function pP(n,a){return b0(n||[],a||[],Bs)}var mP=Be(function(n){var a=n.length,T=a>1?n[a-1]:r;return T=typeof T=="function"?(n.pop(),T):r,mm(n,T)});function ym(n){var a=Q(n);return a.__chain__=!0,a}function yP(n,a){return a(n),n}function Ql(n,a){return a(n)}var EP=Bn(function(n){var a=n.length,T=a?n[0]:0,G=this.__wrapped__,Y=function(Z){return Zc(Z,n)};return a>1||this.__actions__.length||!(G instanceof We)||!Kn(T)?this.thru(Y):(G=G.slice(T,+T+(a?1:0)),G.__actions__.push({func:Ql,args:[Y],thisArg:r}),new zr(G,this.__chain__).thru(function(Z){return a&&!Z.length&&Z.push(r),Z}))});function _P(){return ym(this)}function TP(){return new zr(this.value(),this.__chain__)}function SP(){this.__values__===r&&(this.__values__=wm(this.value()));var n=this.__index__>=this.__values__.length,a=n?r:this.__values__[this.__index__++];return{done:n,value:a}}function xP(){return this}function LP(n){for(var a,T=this;T instanceof bl;){var G=cm(T);G.__index__=0,G.__values__=r,a?Y.__wrapped__=G:a=G;var Y=G;T=T.__wrapped__}return Y.__wrapped__=n,a}function AP(){var n=this.__wrapped__;if(n instanceof We){var a=n;return this.__actions__.length&&(a=new We(this)),a=a.reverse(),a.__actions__.push({func:Ql,args:[Ad],thisArg:r}),new zr(a,this.__chain__)}return this.thru(Ad)}function PP(){return k0(this.__wrapped__,this.__actions__)}var DP=Gl(function(n,a,T){Je.call(n,T)?++n[T]:Nn(n,T,1)});function RP(n,a,T){var G=Me(n)?zp:yL;return T&&ar(n,a,T)&&(a=r),G(n,Ce(a,3))}function CP(n,a){var T=Me(n)?ai:m0;return T(n,Ce(a,3))}var IP=j0(dm),OP=j0(hm);function wP(n,a){return Ht(Zl(n,a),1)}function MP(n,a){return Ht(Zl(n,a),c)}function kP(n,a,T){return T=T===r?1:Fe(T),Ht(Zl(n,a),T)}function Em(n,a){var T=Me(n)?jr:ui;return T(n,Ce(a,3))}function _m(n,a){var T=Me(n)?q1:p0;return T(n,Ce(a,3))}var bP=Gl(function(n,a,T){Je.call(n,T)?n[T].push(a):Nn(n,T,[a])});function FP(n,a,T,G){n=gr(n)?n:Na(n),T=T&&!G?Fe(T):0;var Y=n.length;return T<0&&(T=kt(Y+T,0)),ru(n)?T<=Y&&n.indexOf(a,T)>-1:!!Y&&Aa(n,a,T)>-1}var NP=Be(function(n,a,T){var G=-1,Y=typeof a=="function",Z=gr(n)?le(n.length):[];return ui(n,function(te){Z[++G]=Y?Rr(a,te,T):Ns(te,a,T)}),Z}),UP=Gl(function(n,a,T){Nn(n,T,a)});function Zl(n,a){var T=Me(n)?dt:x0;return T(n,Ce(a,3))}function BP(n,a,T,G){return n==null?[]:(Me(a)||(a=a==null?[]:[a]),T=G?r:T,Me(T)||(T=T==null?[]:[T]),D0(n,a,T))}var KP=Gl(function(n,a,T){n[T?0:1].push(a)},function(){return[[],[]]});function WP(n,a,T){var G=Me(n)?Uc:Zp,Y=arguments.length<3;return G(n,Ce(a,4),T,Y,ui)}function GP(n,a,T){var G=Me(n)?ex:Zp,Y=arguments.length<3;return G(n,Ce(a,4),T,Y,p0)}function $P(n,a){var T=Me(n)?ai:m0;return T(n,eu(Ce(a,3)))}function HP(n){var a=Me(n)?d0:FL;return a(n)}function jP(n,a,T){(T?ar(n,a,T):a===r)?a=1:a=Fe(a);var G=Me(n)?hL:NL;return G(n,a)}function VP(n){var a=Me(n)?vL:BL;return a(n)}function zP(n){if(n==null)return 0;if(gr(n))return ru(n)?Da(n):n.length;var a=Xt(n);return a==fe||a==De?n.size:nd(n).length}function YP(n,a,T){var G=Me(n)?Bc:KL;return T&&ar(n,a,T)&&(a=r),G(n,Ce(a,3))}var XP=Be(function(n,a){if(n==null)return[];var T=a.length;return T>1&&ar(n,a[0],a[1])?a=[]:T>2&&ar(a[0],a[1],a[2])&&(a=[a[0]]),D0(n,Ht(a,1),[])}),Jl=Cx||function(){return $t.Date.now()};function QP(n,a){if(typeof a!="function")throw new Vr(C);return n=Fe(n),function(){if(--n<1)return a.apply(this,arguments)}}function Tm(n,a,T){return a=T?r:a,a=n&&a==null?n.length:a,Un(n,v,r,r,r,r,a)}function Sm(n,a){var T;if(typeof a!="function")throw new Vr(C);return n=Fe(n),function(){return--n>0&&(T=a.apply(this,arguments)),n<=1&&(a=r),T}}var Dd=Be(function(n,a,T){var G=N;if(T.length){var Y=oi(T,ba(Dd));G|=A}return Un(n,G,a,T,Y)}),xm=Be(function(n,a,T){var G=N|m;if(T.length){var Y=oi(T,ba(xm));G|=A}return Un(a,G,n,T,Y)});function Lm(n,a,T){a=T?r:a;var G=Un(n,u,r,r,r,r,r,a);return G.placeholder=Lm.placeholder,G}function Am(n,a,T){a=T?r:a;var G=Un(n,w,r,r,r,r,r,a);return G.placeholder=Am.placeholder,G}function Pm(n,a,T){var G,Y,Z,te,re,se,he=0,ve=!1,pe=!1,Se=!0;if(typeof n!="function")throw new Vr(C);a=Zr(a)||0,pt(T)&&(ve=!!T.leading,pe="maxWait"in T,Z=pe?kt(Zr(T.maxWait)||0,a):Z,Se="trailing"in T?!!T.trailing:Se);function Re(Pt){var cn=G,$n=Y;return G=Y=r,he=Pt,te=n.apply($n,cn),te}function Ie(Pt){return he=Pt,re=Gs(Ke,a),ve?Re(Pt):te}function Ne(Pt){var cn=Pt-se,$n=Pt-he,jm=a-cn;return pe?Yt(jm,Z-$n):jm}function Oe(Pt){var cn=Pt-se,$n=Pt-he;return se===r||cn>=a||cn<0||pe&&$n>=Z}function Ke(){var Pt=Jl();if(Oe(Pt))return He(Pt);re=Gs(Ke,Ne(Pt))}function He(Pt){return re=r,Se&&G?Re(Pt):(G=Y=r,te)}function wr(){re!==r&&F0(re),he=0,G=se=Y=re=r}function sr(){return re===r?te:He(Jl())}function Mr(){var Pt=Jl(),cn=Oe(Pt);if(G=arguments,Y=this,se=Pt,cn){if(re===r)return Ie(se);if(pe)return F0(re),re=Gs(Ke,a),Re(se)}return re===r&&(re=Gs(Ke,a)),te}return Mr.cancel=wr,Mr.flush=sr,Mr}var ZP=Be(function(n,a){return g0(n,1,a)}),JP=Be(function(n,a,T){return g0(n,Zr(a)||0,T)});function qP(n){return Un(n,g)}function ql(n,a){if(typeof n!="function"||a!=null&&typeof a!="function")throw new Vr(C);var T=function(){var G=arguments,Y=a?a.apply(this,G):G[0],Z=T.cache;if(Z.has(Y))return Z.get(Y);var te=n.apply(this,G);return T.cache=Z.set(Y,te)||Z,te};return T.cache=new(ql.Cache||Fn),T}ql.Cache=Fn;function eu(n){if(typeof n!="function")throw new Vr(C);return function(){var a=arguments;switch(a.length){case 0:return!n.call(this);case 1:return!n.call(this,a[0]);case 2:return!n.call(this,a[0],a[1]);case 3:return!n.call(this,a[0],a[1],a[2])}return!n.apply(this,a)}}function eD(n){return Sm(2,n)}var tD=WL(function(n,a){a=a.length==1&&Me(a[0])?dt(a[0],Cr(Ce())):dt(Ht(a,1),Cr(Ce()));var T=a.length;return Be(function(G){for(var Y=-1,Z=Yt(G.length,T);++Y<Z;)G[Y]=a[Y].call(this,G[Y]);return Rr(n,this,G)})}),Rd=Be(function(n,a){var T=oi(a,ba(Rd));return Un(n,A,r,a,T)}),Dm=Be(function(n,a){var T=oi(a,ba(Dm));return Un(n,d,r,a,T)}),rD=Bn(function(n,a){return Un(n,h,r,r,r,a)});function nD(n,a){if(typeof n!="function")throw new Vr(C);return a=a===r?a:Fe(a),Be(n,a)}function iD(n,a){if(typeof n!="function")throw new Vr(C);return a=a==null?0:kt(Fe(a),0),Be(function(T){var G=T[a],Y=di(T,0,a);return G&&si(Y,G),Rr(n,this,Y)})}function aD(n,a,T){var G=!0,Y=!0;if(typeof n!="function")throw new Vr(C);return pt(T)&&(G="leading"in T?!!T.leading:G,Y="trailing"in T?!!T.trailing:Y),Pm(n,a,{leading:G,maxWait:a,trailing:Y})}function sD(n){return Tm(n,1)}function oD(n,a){return Rd(dd(a),n)}function lD(){if(!arguments.length)return[];var n=arguments[0];return Me(n)?n:[n]}function uD(n){return Yr(n,W)}function fD(n,a){return a=typeof a=="function"?a:r,Yr(n,W,a)}function cD(n){return Yr(n,K|W)}function dD(n,a){return a=typeof a=="function"?a:r,Yr(n,K|W,a)}function hD(n,a){return a==null||v0(n,a,Ut(a))}function fn(n,a){return n===a||n!==n&&a!==a}var vD=Vl(ed),gD=Vl(function(n,a){return n>=a}),ra=_0(function(){return arguments}())?_0:function(n){return Tt(n)&&Je.call(n,"callee")&&!s0.call(n,"callee")},Me=le.isArray,pD=Wp?Cr(Wp):LL;function gr(n){return n!=null&&tu(n.length)&&!Wn(n)}function At(n){return Tt(n)&&gr(n)}function mD(n){return n===!0||n===!1||Tt(n)&&ir(n)==X}var hi=Ox||Bd,yD=Gp?Cr(Gp):AL;function ED(n){return Tt(n)&&n.nodeType===1&&!$s(n)}function _D(n){if(n==null)return!0;if(gr(n)&&(Me(n)||typeof n=="string"||typeof n.splice=="function"||hi(n)||Fa(n)||ra(n)))return!n.length;var a=Xt(n);if(a==fe||a==De)return!n.size;if(Ws(n))return!nd(n).length;for(var T in n)if(Je.call(n,T))return!1;return!0}function TD(n,a){return Us(n,a)}function SD(n,a,T){T=typeof T=="function"?T:r;var G=T?T(n,a):r;return G===r?Us(n,a,r,T):!!G}function Cd(n){if(!Tt(n))return!1;var a=ir(n);return a==ee||a==q||typeof n.message=="string"&&typeof n.name=="string"&&!$s(n)}function xD(n){return typeof n=="number"&&l0(n)}function Wn(n){if(!pt(n))return!1;var a=ir(n);return a==ne||a==ae||a==z||a==Te}function Rm(n){return typeof n=="number"&&n==Fe(n)}function tu(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=E}function pt(n){var a=typeof n;return n!=null&&(a=="object"||a=="function")}function Tt(n){return n!=null&&typeof n=="object"}var Cm=$p?Cr($p):DL;function LD(n,a){return n===a||rd(n,a,Ed(a))}function AD(n,a,T){return T=typeof T=="function"?T:r,rd(n,a,Ed(a),T)}function PD(n){return Im(n)&&n!=+n}function DD(n){if(fA(n))throw new we(f);return T0(n)}function RD(n){return n===null}function CD(n){return n==null}function Im(n){return typeof n=="number"||Tt(n)&&ir(n)==ue}function $s(n){if(!Tt(n)||ir(n)!=ye)return!1;var a=Rl(n);if(a===null)return!0;var T=Je.call(a,"constructor")&&a.constructor;return typeof T=="function"&&T instanceof T&&Ll.call(T)==Ax}var Id=Hp?Cr(Hp):RL;function ID(n){return Rm(n)&&n>=-E&&n<=E}var Om=jp?Cr(jp):CL;function ru(n){return typeof n=="string"||!Me(n)&&Tt(n)&&ir(n)==be}function Or(n){return typeof n=="symbol"||Tt(n)&&ir(n)==Ue}var Fa=Vp?Cr(Vp):IL;function OD(n){return n===r}function wD(n){return Tt(n)&&Xt(n)==Ve}function MD(n){return Tt(n)&&ir(n)==nt}var kD=Vl(id),bD=Vl(function(n,a){return n<=a});function wm(n){if(!n)return[];if(gr(n))return ru(n)?ln(n):vr(n);if(Is&&n[Is])return hx(n[Is]());var a=Xt(n),T=a==fe?jc:a==De?Tl:Na;return T(n)}function Gn(n){if(!n)return n===0?n:0;if(n=Zr(n),n===c||n===-c){var a=n<0?-1:1;return a*l}return n===n?n:0}function Fe(n){var a=Gn(n),T=a%1;return a===a?T?a-T:a:0}function Mm(n){return n?Ji(Fe(n),0,B):0}function Zr(n){if(typeof n=="number")return n;if(Or(n))return x;if(pt(n)){var a=typeof n.valueOf=="function"?n.valueOf():n;n=pt(a)?a+"":a}if(typeof n!="string")return n===0?n:+n;n=Jp(n);var T=Dc.test(n);return T||gl.test(n)?Q1(n.slice(2),T?2:8):Pc.test(n)?x:+n}function km(n){return Ln(n,pr(n))}function FD(n){return n?Ji(Fe(n),-E,E):n===0?n:0}function Ze(n){return n==null?"":Ir(n)}var ND=Ma(function(n,a){if(Ws(a)||gr(a)){Ln(a,Ut(a),n);return}for(var T in a)Je.call(a,T)&&bs(n,T,a[T])}),bm=Ma(function(n,a){Ln(a,pr(a),n)}),nu=Ma(function(n,a,T,G){Ln(a,pr(a),n,G)}),UD=Ma(function(n,a,T,G){Ln(a,Ut(a),n,G)}),BD=Bn(Zc);function KD(n,a){var T=wa(n);return a==null?T:h0(T,a)}var WD=Be(function(n,a){n=rt(n);var T=-1,G=a.length,Y=G>2?a[2]:r;for(Y&&ar(a[0],a[1],Y)&&(G=1);++T<G;)for(var Z=a[T],te=pr(Z),re=-1,se=te.length;++re<se;){var he=te[re],ve=n[he];(ve===r||fn(ve,Ca[he])&&!Je.call(n,he))&&(n[he]=Z[he])}return n}),GD=Be(function(n){return n.push(r,J0),Rr(Fm,r,n)});function $D(n,a){return Yp(n,Ce(a,3),xn)}function HD(n,a){return Yp(n,Ce(a,3),qc)}function jD(n,a){return n==null?n:Jc(n,Ce(a,3),pr)}function VD(n,a){return n==null?n:y0(n,Ce(a,3),pr)}function zD(n,a){return n&&xn(n,Ce(a,3))}function YD(n,a){return n&&qc(n,Ce(a,3))}function XD(n){return n==null?[]:Ul(n,Ut(n))}function QD(n){return n==null?[]:Ul(n,pr(n))}function Od(n,a,T){var G=n==null?r:qi(n,a);return G===r?T:G}function ZD(n,a){return n!=null&&tm(n,a,_L)}function wd(n,a){return n!=null&&tm(n,a,TL)}var JD=z0(function(n,a,T){a!=null&&typeof a.toString!="function"&&(a=Al.call(a)),n[a]=T},kd(mr)),qD=z0(function(n,a,T){a!=null&&typeof a.toString!="function"&&(a=Al.call(a)),Je.call(n,a)?n[a].push(T):n[a]=[T]},Ce),eR=Be(Ns);function Ut(n){return gr(n)?c0(n):nd(n)}function pr(n){return gr(n)?c0(n,!0):OL(n)}function tR(n,a){var T={};return a=Ce(a,3),xn(n,function(G,Y,Z){Nn(T,a(G,Y,Z),G)}),T}function rR(n,a){var T={};return a=Ce(a,3),xn(n,function(G,Y,Z){Nn(T,Y,a(G,Y,Z))}),T}var nR=Ma(function(n,a,T){Bl(n,a,T)}),Fm=Ma(function(n,a,T,G){Bl(n,a,T,G)}),iR=Bn(function(n,a){var T={};if(n==null)return T;var G=!1;a=dt(a,function(Z){return Z=ci(Z,n),G||(G=Z.length>1),Z}),Ln(n,md(n),T),G&&(T=Yr(T,K|b|W,JL));for(var Y=a.length;Y--;)ud(T,a[Y]);return T});function aR(n,a){return Nm(n,eu(Ce(a)))}var sR=Bn(function(n,a){return n==null?{}:ML(n,a)});function Nm(n,a){if(n==null)return{};var T=dt(md(n),function(G){return[G]});return a=Ce(a),R0(n,T,function(G,Y){return a(G,Y[0])})}function oR(n,a,T){a=ci(a,n);var G=-1,Y=a.length;for(Y||(Y=1,n=r);++G<Y;){var Z=n==null?r:n[An(a[G])];Z===r&&(G=Y,Z=T),n=Wn(Z)?Z.call(n):Z}return n}function lR(n,a,T){return n==null?n:Bs(n,a,T)}function uR(n,a,T,G){return G=typeof G=="function"?G:r,n==null?n:Bs(n,a,T,G)}var Um=Q0(Ut),Bm=Q0(pr);function fR(n,a,T){var G=Me(n),Y=G||hi(n)||Fa(n);if(a=Ce(a,4),T==null){var Z=n&&n.constructor;Y?T=G?new Z:[]:pt(n)?T=Wn(Z)?wa(Rl(n)):{}:T={}}return(Y?jr:xn)(n,function(te,re,se){return a(T,te,re,se)}),T}function cR(n,a){return n==null?!0:ud(n,a)}function dR(n,a,T){return n==null?n:M0(n,a,dd(T))}function hR(n,a,T,G){return G=typeof G=="function"?G:r,n==null?n:M0(n,a,dd(T),G)}function Na(n){return n==null?[]:Hc(n,Ut(n))}function vR(n){return n==null?[]:Hc(n,pr(n))}function gR(n,a,T){return T===r&&(T=a,a=r),T!==r&&(T=Zr(T),T=T===T?T:0),a!==r&&(a=Zr(a),a=a===a?a:0),Ji(Zr(n),a,T)}function pR(n,a,T){return a=Gn(a),T===r?(T=a,a=0):T=Gn(T),n=Zr(n),SL(n,a,T)}function mR(n,a,T){if(T&&typeof T!="boolean"&&ar(n,a,T)&&(a=T=r),T===r&&(typeof a=="boolean"?(T=a,a=r):typeof n=="boolean"&&(T=n,n=r)),n===r&&a===r?(n=0,a=1):(n=Gn(n),a===r?(a=n,n=0):a=Gn(a)),n>a){var G=n;n=a,a=G}if(T||n%1||a%1){var Y=u0();return Yt(n+Y*(a-n+X1("1e-"+((Y+"").length-1))),a)}return sd(n,a)}var yR=ka(function(n,a,T){return a=a.toLowerCase(),n+(T?Km(a):a)});function Km(n){return Md(Ze(n).toLowerCase())}function Wm(n){return n=Ze(n),n&&n.replace(Cc,lx).replace(B1,"")}function ER(n,a,T){n=Ze(n),a=Ir(a);var G=n.length;T=T===r?G:Ji(Fe(T),0,G);var Y=T;return T-=a.length,T>=0&&n.slice(T,Y)==a}function _R(n){return n=Ze(n),n&&_t.test(n)?n.replace(nr,ux):n}function TR(n){return n=Ze(n),n&&Sc.test(n)?n.replace(ii,"\\$&"):n}var SR=ka(function(n,a,T){return n+(T?"-":"")+a.toLowerCase()}),xR=ka(function(n,a,T){return n+(T?" ":"")+a.toLowerCase()}),LR=H0("toLowerCase");function AR(n,a,T){n=Ze(n),a=Fe(a);var G=a?Da(n):0;if(!a||G>=a)return n;var Y=(a-G)/2;return jl(wl(Y),T)+n+jl(Ol(Y),T)}function PR(n,a,T){n=Ze(n),a=Fe(a);var G=a?Da(n):0;return a&&G<a?n+jl(a-G,T):n}function DR(n,a,T){n=Ze(n),a=Fe(a);var G=a?Da(n):0;return a&&G<a?jl(a-G,T)+n:n}function RR(n,a,T){return T||a==null?a=0:a&&(a=+a),bx(Ze(n).replace(zi,""),a||0)}function CR(n,a,T){return(T?ar(n,a,T):a===r)?a=1:a=Fe(a),od(Ze(n),a)}function IR(){var n=arguments,a=Ze(n[0]);return n.length<3?a:a.replace(n[1],n[2])}var OR=ka(function(n,a,T){return n+(T?"_":"")+a.toLowerCase()});function wR(n,a,T){return T&&typeof T!="number"&&ar(n,a,T)&&(a=T=r),T=T===r?B:T>>>0,T?(n=Ze(n),n&&(typeof a=="string"||a!=null&&!Id(a))&&(a=Ir(a),!a&&Pa(n))?di(ln(n),0,T):n.split(a,T)):[]}var MR=ka(function(n,a,T){return n+(T?" ":"")+Md(a)});function kR(n,a,T){return n=Ze(n),T=T==null?0:Ji(Fe(T),0,n.length),a=Ir(a),n.slice(T,T+a.length)==a}function bR(n,a,T){var G=Q.templateSettings;T&&ar(n,a,T)&&(a=r),n=Ze(n),a=nu({},a,G,Z0);var Y=nu({},a.imports,G.imports,Z0),Z=Ut(Y),te=Hc(Y,Z),re,se,he=0,ve=a.interpolate||pl,pe="__p += '",Se=Vc((a.escape||pl).source+"|"+ve.source+"|"+(ve===Vi?Ac:pl).source+"|"+(a.evaluate||pl).source+"|$","g"),Re="//# sourceURL="+(Je.call(a,"sourceURL")?(a.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++H1+"]")+`
`;n.replace(Se,function(Oe,Ke,He,wr,sr,Mr){return He||(He=wr),pe+=n.slice(he,Mr).replace(T1,fx),Ke&&(re=!0,pe+=`' +
__e(`+Ke+`) +
'`),sr&&(se=!0,pe+=`';
`+sr+`;
__p += '`),He&&(pe+=`' +
((__t = (`+He+`)) == null ? '' : __t) +
'`),he=Mr+Oe.length,Oe}),pe+=`';
`;var Ie=Je.call(a,"variable")&&a.variable;if(!Ie)pe=`with (obj) {
`+pe+`
}
`;else if(hl.test(Ie))throw new we(D);pe=(se?pe.replace(dr,""):pe).replace(hr,"$1").replace(Nt,"$1;"),pe="function("+(Ie||"obj")+`) {
`+(Ie?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(re?", __e = _.escape":"")+(se?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+pe+`return __p
}`;var Ne=$m(function(){return Xe(Z,Re+"return "+pe).apply(r,te)});if(Ne.source=pe,Cd(Ne))throw Ne;return Ne}function FR(n){return Ze(n).toLowerCase()}function NR(n){return Ze(n).toUpperCase()}function UR(n,a,T){if(n=Ze(n),n&&(T||a===r))return Jp(n);if(!n||!(a=Ir(a)))return n;var G=ln(n),Y=ln(a),Z=qp(G,Y),te=e0(G,Y)+1;return di(G,Z,te).join("")}function BR(n,a,T){if(n=Ze(n),n&&(T||a===r))return n.slice(0,r0(n)+1);if(!n||!(a=Ir(a)))return n;var G=ln(n),Y=e0(G,ln(a))+1;return di(G,0,Y).join("")}function KR(n,a,T){if(n=Ze(n),n&&(T||a===r))return n.replace(zi,"");if(!n||!(a=Ir(a)))return n;var G=ln(n),Y=qp(G,ln(a));return di(G,Y).join("")}function WR(n,a){var T=P,G=R;if(pt(a)){var Y="separator"in a?a.separator:Y;T="length"in a?Fe(a.length):T,G="omission"in a?Ir(a.omission):G}n=Ze(n);var Z=n.length;if(Pa(n)){var te=ln(n);Z=te.length}if(T>=Z)return n;var re=T-Da(G);if(re<1)return G;var se=te?di(te,0,re).join(""):n.slice(0,re);if(Y===r)return se+G;if(te&&(re+=se.length-re),Id(Y)){if(n.slice(re).search(Y)){var he,ve=se;for(Y.global||(Y=Vc(Y.source,Ze(vl.exec(Y))+"g")),Y.lastIndex=0;he=Y.exec(ve);)var pe=he.index;se=se.slice(0,pe===r?re:pe)}}else if(n.indexOf(Ir(Y),re)!=re){var Se=se.lastIndexOf(Y);Se>-1&&(se=se.slice(0,Se))}return se+G}function GR(n){return n=Ze(n),n&&Ar.test(n)?n.replace(Rt,mx):n}var $R=ka(function(n,a,T){return n+(T?" ":"")+a.toUpperCase()}),Md=H0("toUpperCase");function Gm(n,a,T){return n=Ze(n),a=T?r:a,a===r?dx(n)?_x(n):nx(n):n.match(a)||[]}var $m=Be(function(n,a){try{return Rr(n,r,a)}catch(T){return Cd(T)?T:new we(T)}}),HR=Bn(function(n,a){return jr(a,function(T){T=An(T),Nn(n,T,Dd(n[T],n))}),n});function jR(n){var a=n==null?0:n.length,T=Ce();return n=a?dt(n,function(G){if(typeof G[1]!="function")throw new Vr(C);return[T(G[0]),G[1]]}):[],Be(function(G){for(var Y=-1;++Y<a;){var Z=n[Y];if(Rr(Z[0],this,G))return Rr(Z[1],this,G)}})}function VR(n){return mL(Yr(n,K))}function kd(n){return function(){return n}}function zR(n,a){return n==null||n!==n?a:n}var YR=V0(),XR=V0(!0);function mr(n){return n}function bd(n){return S0(typeof n=="function"?n:Yr(n,K))}function QR(n){return L0(Yr(n,K))}function ZR(n,a){return A0(n,Yr(a,K))}var JR=Be(function(n,a){return function(T){return Ns(T,n,a)}}),qR=Be(function(n,a){return function(T){return Ns(n,T,a)}});function Fd(n,a,T){var G=Ut(a),Y=Ul(a,G);T==null&&!(pt(a)&&(Y.length||!G.length))&&(T=a,a=n,n=this,Y=Ul(a,Ut(a)));var Z=!(pt(T)&&"chain"in T)||!!T.chain,te=Wn(n);return jr(Y,function(re){var se=a[re];n[re]=se,te&&(n.prototype[re]=function(){var he=this.__chain__;if(Z||he){var ve=n(this.__wrapped__),pe=ve.__actions__=vr(this.__actions__);return pe.push({func:se,args:arguments,thisArg:n}),ve.__chain__=he,ve}return se.apply(n,si([this.value()],arguments))})}),n}function eC(){return $t._===this&&($t._=Px),this}function Nd(){}function tC(n){return n=Fe(n),Be(function(a){return P0(a,n)})}var rC=vd(dt),nC=vd(zp),iC=vd(Bc);function Hm(n){return Td(n)?Kc(An(n)):kL(n)}function aC(n){return function(a){return n==null?r:qi(n,a)}}var sC=Y0(),oC=Y0(!0);function Ud(){return[]}function Bd(){return!1}function lC(){return{}}function uC(){return""}function fC(){return!0}function cC(n,a){if(n=Fe(n),n<1||n>E)return[];var T=B,G=Yt(n,B);a=Ce(a),n-=B;for(var Y=$c(G,a);++T<n;)a(T);return Y}function dC(n){return Me(n)?dt(n,An):Or(n)?[n]:vr(fm(Ze(n)))}function hC(n){var a=++Lx;return Ze(n)+a}var vC=Hl(function(n,a){return n+a},0),gC=gd("ceil"),pC=Hl(function(n,a){return n/a},1),mC=gd("floor");function yC(n){return n&&n.length?Nl(n,mr,ed):r}function EC(n,a){return n&&n.length?Nl(n,Ce(a,2),ed):r}function _C(n){return Qp(n,mr)}function TC(n,a){return Qp(n,Ce(a,2))}function SC(n){return n&&n.length?Nl(n,mr,id):r}function xC(n,a){return n&&n.length?Nl(n,Ce(a,2),id):r}var LC=Hl(function(n,a){return n*a},1),AC=gd("round"),PC=Hl(function(n,a){return n-a},0);function DC(n){return n&&n.length?Gc(n,mr):0}function RC(n,a){return n&&n.length?Gc(n,Ce(a,2)):0}return Q.after=QP,Q.ary=Tm,Q.assign=ND,Q.assignIn=bm,Q.assignInWith=nu,Q.assignWith=UD,Q.at=BD,Q.before=Sm,Q.bind=Dd,Q.bindAll=HR,Q.bindKey=xm,Q.castArray=lD,Q.chain=ym,Q.chunk=mA,Q.compact=yA,Q.concat=EA,Q.cond=jR,Q.conforms=VR,Q.constant=kd,Q.countBy=DP,Q.create=KD,Q.curry=Lm,Q.curryRight=Am,Q.debounce=Pm,Q.defaults=WD,Q.defaultsDeep=GD,Q.defer=ZP,Q.delay=JP,Q.difference=_A,Q.differenceBy=TA,Q.differenceWith=SA,Q.drop=xA,Q.dropRight=LA,Q.dropRightWhile=AA,Q.dropWhile=PA,Q.fill=DA,Q.filter=CP,Q.flatMap=wP,Q.flatMapDeep=MP,Q.flatMapDepth=kP,Q.flatten=vm,Q.flattenDeep=RA,Q.flattenDepth=CA,Q.flip=qP,Q.flow=YR,Q.flowRight=XR,Q.fromPairs=IA,Q.functions=XD,Q.functionsIn=QD,Q.groupBy=bP,Q.initial=wA,Q.intersection=MA,Q.intersectionBy=kA,Q.intersectionWith=bA,Q.invert=JD,Q.invertBy=qD,Q.invokeMap=NP,Q.iteratee=bd,Q.keyBy=UP,Q.keys=Ut,Q.keysIn=pr,Q.map=Zl,Q.mapKeys=tR,Q.mapValues=rR,Q.matches=QR,Q.matchesProperty=ZR,Q.memoize=ql,Q.merge=nR,Q.mergeWith=Fm,Q.method=JR,Q.methodOf=qR,Q.mixin=Fd,Q.negate=eu,Q.nthArg=tC,Q.omit=iR,Q.omitBy=aR,Q.once=eD,Q.orderBy=BP,Q.over=rC,Q.overArgs=tD,Q.overEvery=nC,Q.overSome=iC,Q.partial=Rd,Q.partialRight=Dm,Q.partition=KP,Q.pick=sR,Q.pickBy=Nm,Q.property=Hm,Q.propertyOf=aC,Q.pull=BA,Q.pullAll=pm,Q.pullAllBy=KA,Q.pullAllWith=WA,Q.pullAt=GA,Q.range=sC,Q.rangeRight=oC,Q.rearg=rD,Q.reject=$P,Q.remove=$A,Q.rest=nD,Q.reverse=Ad,Q.sampleSize=jP,Q.set=lR,Q.setWith=uR,Q.shuffle=VP,Q.slice=HA,Q.sortBy=XP,Q.sortedUniq=ZA,Q.sortedUniqBy=JA,Q.split=wR,Q.spread=iD,Q.tail=qA,Q.take=eP,Q.takeRight=tP,Q.takeRightWhile=rP,Q.takeWhile=nP,Q.tap=yP,Q.throttle=aD,Q.thru=Ql,Q.toArray=wm,Q.toPairs=Um,Q.toPairsIn=Bm,Q.toPath=dC,Q.toPlainObject=km,Q.transform=fR,Q.unary=sD,Q.union=iP,Q.unionBy=aP,Q.unionWith=sP,Q.uniq=oP,Q.uniqBy=lP,Q.uniqWith=uP,Q.unset=cR,Q.unzip=Pd,Q.unzipWith=mm,Q.update=dR,Q.updateWith=hR,Q.values=Na,Q.valuesIn=vR,Q.without=fP,Q.words=Gm,Q.wrap=oD,Q.xor=cP,Q.xorBy=dP,Q.xorWith=hP,Q.zip=vP,Q.zipObject=gP,Q.zipObjectDeep=pP,Q.zipWith=mP,Q.entries=Um,Q.entriesIn=Bm,Q.extend=bm,Q.extendWith=nu,Fd(Q,Q),Q.add=vC,Q.attempt=$m,Q.camelCase=yR,Q.capitalize=Km,Q.ceil=gC,Q.clamp=gR,Q.clone=uD,Q.cloneDeep=cD,Q.cloneDeepWith=dD,Q.cloneWith=fD,Q.conformsTo=hD,Q.deburr=Wm,Q.defaultTo=zR,Q.divide=pC,Q.endsWith=ER,Q.eq=fn,Q.escape=_R,Q.escapeRegExp=TR,Q.every=RP,Q.find=IP,Q.findIndex=dm,Q.findKey=$D,Q.findLast=OP,Q.findLastIndex=hm,Q.findLastKey=HD,Q.floor=mC,Q.forEach=Em,Q.forEachRight=_m,Q.forIn=jD,Q.forInRight=VD,Q.forOwn=zD,Q.forOwnRight=YD,Q.get=Od,Q.gt=vD,Q.gte=gD,Q.has=ZD,Q.hasIn=wd,Q.head=gm,Q.identity=mr,Q.includes=FP,Q.indexOf=OA,Q.inRange=pR,Q.invoke=eR,Q.isArguments=ra,Q.isArray=Me,Q.isArrayBuffer=pD,Q.isArrayLike=gr,Q.isArrayLikeObject=At,Q.isBoolean=mD,Q.isBuffer=hi,Q.isDate=yD,Q.isElement=ED,Q.isEmpty=_D,Q.isEqual=TD,Q.isEqualWith=SD,Q.isError=Cd,Q.isFinite=xD,Q.isFunction=Wn,Q.isInteger=Rm,Q.isLength=tu,Q.isMap=Cm,Q.isMatch=LD,Q.isMatchWith=AD,Q.isNaN=PD,Q.isNative=DD,Q.isNil=CD,Q.isNull=RD,Q.isNumber=Im,Q.isObject=pt,Q.isObjectLike=Tt,Q.isPlainObject=$s,Q.isRegExp=Id,Q.isSafeInteger=ID,Q.isSet=Om,Q.isString=ru,Q.isSymbol=Or,Q.isTypedArray=Fa,Q.isUndefined=OD,Q.isWeakMap=wD,Q.isWeakSet=MD,Q.join=FA,Q.kebabCase=SR,Q.last=Qr,Q.lastIndexOf=NA,Q.lowerCase=xR,Q.lowerFirst=LR,Q.lt=kD,Q.lte=bD,Q.max=yC,Q.maxBy=EC,Q.mean=_C,Q.meanBy=TC,Q.min=SC,Q.minBy=xC,Q.stubArray=Ud,Q.stubFalse=Bd,Q.stubObject=lC,Q.stubString=uC,Q.stubTrue=fC,Q.multiply=LC,Q.nth=UA,Q.noConflict=eC,Q.noop=Nd,Q.now=Jl,Q.pad=AR,Q.padEnd=PR,Q.padStart=DR,Q.parseInt=RR,Q.random=mR,Q.reduce=WP,Q.reduceRight=GP,Q.repeat=CR,Q.replace=IR,Q.result=oR,Q.round=AC,Q.runInContext=ie,Q.sample=HP,Q.size=zP,Q.snakeCase=OR,Q.some=YP,Q.sortedIndex=jA,Q.sortedIndexBy=VA,Q.sortedIndexOf=zA,Q.sortedLastIndex=YA,Q.sortedLastIndexBy=XA,Q.sortedLastIndexOf=QA,Q.startCase=MR,Q.startsWith=kR,Q.subtract=PC,Q.sum=DC,Q.sumBy=RC,Q.template=bR,Q.times=cC,Q.toFinite=Gn,Q.toInteger=Fe,Q.toLength=Mm,Q.toLower=FR,Q.toNumber=Zr,Q.toSafeInteger=FD,Q.toString=Ze,Q.toUpper=NR,Q.trim=UR,Q.trimEnd=BR,Q.trimStart=KR,Q.truncate=WR,Q.unescape=GR,Q.uniqueId=hC,Q.upperCase=$R,Q.upperFirst=Md,Q.each=Em,Q.eachRight=_m,Q.first=gm,Fd(Q,function(){var n={};return xn(Q,function(a,T){Je.call(Q.prototype,T)||(n[T]=a)}),n}(),{chain:!1}),Q.VERSION=i,jr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){Q[n].placeholder=Q}),jr(["drop","take"],function(n,a){We.prototype[n]=function(T){T=T===r?1:kt(Fe(T),0);var G=this.__filtered__&&!a?new We(this):this.clone();return G.__filtered__?G.__takeCount__=Yt(T,G.__takeCount__):G.__views__.push({size:Yt(T,B),type:n+(G.__dir__<0?"Right":"")}),G},We.prototype[n+"Right"]=function(T){return this.reverse()[n](T).reverse()}}),jr(["filter","map","takeWhile"],function(n,a){var T=a+1,G=T==U||T==S;We.prototype[n]=function(Y){var Z=this.clone();return Z.__iteratees__.push({iteratee:Ce(Y,3),type:T}),Z.__filtered__=Z.__filtered__||G,Z}}),jr(["head","last"],function(n,a){var T="take"+(a?"Right":"");We.prototype[n]=function(){return this[T](1).value()[0]}}),jr(["initial","tail"],function(n,a){var T="drop"+(a?"":"Right");We.prototype[n]=function(){return this.__filtered__?new We(this):this[T](1)}}),We.prototype.compact=function(){return this.filter(mr)},We.prototype.find=function(n){return this.filter(n).head()},We.prototype.findLast=function(n){return this.reverse().find(n)},We.prototype.invokeMap=Be(function(n,a){return typeof n=="function"?new We(this):this.map(function(T){return Ns(T,n,a)})}),We.prototype.reject=function(n){return this.filter(eu(Ce(n)))},We.prototype.slice=function(n,a){n=Fe(n);var T=this;return T.__filtered__&&(n>0||a<0)?new We(T):(n<0?T=T.takeRight(-n):n&&(T=T.drop(n)),a!==r&&(a=Fe(a),T=a<0?T.dropRight(-a):T.take(a-n)),T)},We.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()},We.prototype.toArray=function(){return this.take(B)},xn(We.prototype,function(n,a){var T=/^(?:filter|find|map|reject)|While$/.test(a),G=/^(?:head|last)$/.test(a),Y=Q[G?"take"+(a=="last"?"Right":""):a],Z=G||/^find/.test(a);Y&&(Q.prototype[a]=function(){var te=this.__wrapped__,re=G?[1]:arguments,se=te instanceof We,he=re[0],ve=se||Me(te),pe=function(Ke){var He=Y.apply(Q,si([Ke],re));return G&&Se?He[0]:He};ve&&T&&typeof he=="function"&&he.length!=1&&(se=ve=!1);var Se=this.__chain__,Re=!!this.__actions__.length,Ie=Z&&!Se,Ne=se&&!Re;if(!Z&&ve){te=Ne?te:new We(this);var Oe=n.apply(te,re);return Oe.__actions__.push({func:Ql,args:[pe],thisArg:r}),new zr(Oe,Se)}return Ie&&Ne?n.apply(this,re):(Oe=this.thru(pe),Ie?G?Oe.value()[0]:Oe.value():Oe)})}),jr(["pop","push","shift","sort","splice","unshift"],function(n){var a=Sl[n],T=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",G=/^(?:pop|shift)$/.test(n);Q.prototype[n]=function(){var Y=arguments;if(G&&!this.__chain__){var Z=this.value();return a.apply(Me(Z)?Z:[],Y)}return this[T](function(te){return a.apply(Me(te)?te:[],Y)})}}),xn(We.prototype,function(n,a){var T=Q[a];if(T){var G=T.name+"";Je.call(Oa,G)||(Oa[G]=[]),Oa[G].push({name:a,func:T})}}),Oa[$l(r,m).name]=[{name:"wrapper",func:r}],We.prototype.clone=Gx,We.prototype.reverse=$x,We.prototype.value=Hx,Q.prototype.at=EP,Q.prototype.chain=_P,Q.prototype.commit=TP,Q.prototype.next=SP,Q.prototype.plant=LP,Q.prototype.reverse=AP,Q.prototype.toJSON=Q.prototype.valueOf=Q.prototype.value=PP,Q.prototype.first=Q.prototype.head,Is&&(Q.prototype[Is]=xP),Q},Ra=Tx();Yi?((Yi.exports=Ra)._=Ra,bc._=Ra):$t._=Ra}).call(Ka)})(zF,Df);const YF=()=>{const{selectedCourse:e}=tr(m=>m.selectedCourse),{isDarkMode:t}=tr(m=>m.theme),r=oe.useRef(null),i=al(),[s]=Zg(),f=s.get("lesson")||"",C=oe.useMemo(()=>f?(e==null?void 0:e.lessons.find(m=>m.id===f))||null:(e==null?void 0:e.lessons.find(m=>m.status!=="locked"))||null,[f,e==null?void 0:e.lessons]),[D,o]=oe.useState(C),[M,I]=oe.useState(!1),K=+JSON.parse(localStorage.getItem(`video-progress-${D==null?void 0:D.id}`)||"0"),[b]=DS(`video-progress-${D==null?void 0:D.id}`,K),W=m=>{const p=Gu(s,{lesson:`${m}`});i({search:p})},F=Df.debounce(m=>{b(m)},1e3),k=m=>{const p=r.current;o(m),W(m.id),m.id===(D==null?void 0:D.id)&&p&&(M?(p.pause(),I(!1)):(p.play(),I(!0)))},N=(m,p)=>{const u=r.current;u&&(m.key==="ArrowUp"&&m.shiftKey&&(u.playbackRate+=PE.speedUpRate),m.key==="ArrowDown"&&m.shiftKey&&(u.playbackRate-=PE.slowDownRate)),p&&m.key==="Enter"&&k(p)};return oe.useEffect(()=>{let m,p,u;(async()=>{if(!r.current)return;const d=r.current,v=`${D==null?void 0:D.link}`,h=`${D==null?void 0:D.id}`,g=new es({enableWorker:!1});g.on(es.Events.MEDIA_ATTACHED,()=>{g.loadSource(v),g.on(es.Events.MANIFEST_PARSED,()=>{d.currentTime=K,W(h),d.play(),I(!0)})}),m=()=>{I(!0)},p=()=>{I(!1),F(d.currentTime)},u=()=>{F(d.currentTime)},d.addEventListener("play",m),d.addEventListener("pause",p),d.addEventListener("timeupdate",u),es.isSupported()?g.attachMedia(d):d.canPlayType("application/vnd.apple.mpegurl")&&(d.src=v)})();const A=r.current;return()=>{A&&(A.removeEventListener("play",m),A.removeEventListener("pause",p),A.removeEventListener("timeupdate",u))}},[D]),ut("div",{className:"course__lesson lesson","data-testid":"lesson",children:[ut("div",{className:"lesson__player player",children:[_e("h2",{className:"player__title",children:D==null?void 0:D.title}),_e("video",{className:"player__video","data-testid":"lesson-video",poster:`${D==null?void 0:D.previewImageLink}/lesson-${D==null?void 0:D.order}.webp`,ref:r,controls:!0,onKeyDown:N,children:_e("track",{kind:"captions"})}),ut("div",{className:"player__description",children:[_e("b",{children:"Shift + ↑ "}),": speed up the video;",_e("br",{}),_e("b",{children:"Shift + ↓ "}),": slow down the video;"]})]}),_e("div",{className:"lesson__playlist playlist",children:_e("div",{className:"playlist__list",children:e==null?void 0:e.lessons.map(m=>ut("button",{type:"button",className:Kt("playlist__item",{"playlist__item--dark":t,"playlist__item--active":(D==null?void 0:D.id)===m.id&&m.status!=="locked","playlist__item--active-dark":t&&(D==null?void 0:D.id)===m.id&&m.status!=="locked","playlist__item--disabled":m.status==="locked"}),onKeyDown:p=>N(p,m),onClick:()=>k(m),disabled:m.status==="locked",children:[m.status==="unlocked"&&_e(Qn,{type:M&&(D==null?void 0:D.id)===m.id?Ct.PAUSE:Ct.PLAY,addClassName:"playlist__item-icon"}),D!==m&&m.status==="locked"&&_e(Qn,{type:Ct.BLOCKED,addClassName:"playlist__item-icon"}),_e("p",{className:Kt("playlist__item-title",{"playlist__item-title--dark":t}),children:m.title})]},m.id))})})]})};const XF=()=>{const{selectedCourse:e}=tr(t=>t.selectedCourse);return ut("div",{className:"course","data-testid":"course",children:[_e(VF,{}),ut("div",{className:"course__title title",children:[_e("h1",{className:"title__main",children:e==null?void 0:e.title}),_e("p",{className:"title__description",children:e==null?void 0:e.description})]}),_e(YF,{})]})},QF=()=>{const e=hc(),{selectedCourse:t,hasError:r,loaded:i}=tr(f=>f.selectedCourse),{courseId:s=""}=FM();return oe.useEffect(()=>{t||e(To(s))},[s,t,e]),ut(qv,{children:[r&&_e(E1,{error:_p.GET_COURSE_DETAILS}),!i&&_e(_1,{}),t&&!r&&i&&_e(XF,{})]})},ZF=document.getElementById("root"),JF=uS(ZF);JF.render(_e(zw,{store:UF,children:_e(tk,{children:_e(XM,{children:ut(Wa,{path:"/",element:_e(kF,{}),children:[_e(Wa,{path:"*",element:_e(BF,{})}),_e(Wa,{index:!0,element:_e(jF,{})}),_e(Wa,{path:"home",element:_e(VM,{to:"/",replace:!0})}),_e(Wa,{path:"course/:courseId",element:_e(QF,{})})]})})})}));
